if (function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.Ogma = t()
} (this,
function() {
    "use strict";
    function e(e) {
        for (var t = this.length,
        n = 0; n < t; ++n) this[n] = e;
        return this
    }
    function t(e, t) {
        if (null === this) throw new TypeError("this is null or not defined");
        var n = Object(this),
        r = n.length >>> 0,
        i = e >> 0,
        o = i < 0 ? Math.max(r + i, 0) : Math.min(i, r),
        s = t >> 0,
        a = s < 0 ? Math.max(r + s, 0) : Math.min(s, r),
        u = arguments[2],
        l = void 0 === u ? r: u >> 0,
        d = l < 0 ? Math.max(r + l, 0) : Math.min(l, r),
        c = Math.min(d - a, r - o),
        h = 1;
        for (a < o && o < a + c && (h = -1, a += c - 1, o += c - 1); 0 < c;) a in n ? n[o] = n[a] : delete n[o],
        a += h,
        o += h,
        c--;
        return n
    }
    function n(e) {
        var t, n, r = Object(this),
        i = r.length >>> 0;
        if (0 === i) return - 1;
        for (t = i - 1, 1 < arguments.length && ((t = Number(arguments[1])) != t ? t = 0 : 0 !== t && t !== 1 / 0 && t !== -1 / 0 && (t = (0 < t || -1) * Math.floor(Math.abs(t)))), n = 0 <= t ? Math.min(t, i - 1) : i - Math.abs(t); 0 <= n; n--) if (n in r && r[n] === e) return n;
        return - 1
    }
    for (var r = [Uint32Array, Uint16Array, Uint8Array, Int32Array, Int16Array, Int8Array, Float32Array, Float64Array, Array], i = ["join", "slice", "reverse", "forEach", "map", "reduce", "indexOf", "sort", "filter", "every"], o = 0, s = r.length; o < s; ++o) {
        var a = r[o].prototype;
        if (a.fill || (a.fill = e), a.copyWithin || (a.copyWithin = t), a.lastIndexOf || (a.lastIndexOf = n), o < s - 1) for (var u = 0,
        l = i.length; u < l; u++) {
            var d = i[u];
            a[d] || (a[d] = Array.prototype[d])
        }
    }
    ArrayBuffer.isView || (ArrayBuffer.isView = function(e) {
        for (var t = 0; t < r.length; ++t) if (e instanceof r[t]) return ! 0;
        return ! 1
    }),
    Float32Array.__proto__.from || (Float32Array.__proto__.from = function(e, t, n) {
        var r, i, o = Int8Array.__proto__;
        if ("function" != typeof this) throw new TypeError("# is not a constructor");
        if (this.__proto__ !== o) throw new TypeError("this is not a typed array.");
        if ("function" != typeof(t = t ||
        function(e) {
            return e
        })) throw new TypeError("specified argument is not a function");
        if (! (e = Object(e)).length) return new this(0);
        var s = [];
        for (r = 0, i = e.length; r < i; r++) s.push(e[r]);
        var a = new this((s = s.map(t, n)).length);
        for (r = 0, i = a.length; r < i; r++) a[r] = s[r];
        return a
    });
    var c = function(e, t) {
        for (t = this.length;~--t && (!(t in this) || this[t] !== e););
        return t
    };
    Int8Array.prototype.lastIndexOf = Int8Array.prototype.lastIndexOf || c,
    Int16Array.prototype.lastIndexOf = Int16Array.prototype.lastIndexOf || c,
    Int32Array.prototype.lastIndexOf = Int32Array.prototype.lastIndexOf || c,
    Float32Array.prototype.lastIndexOf = Float32Array.prototype.lastIndexOf || c,
    Float64Array.prototype.lastIndexOf = Float64Array.prototype.lastIndexOf || c,
    Math.log2 || (Math.log2 = function(e) {
        return Math.log(e) / Math.log(2)
    }),
    Number.isNaN || (Number.isNaN = function(e) {
        return "number" == typeof e && isNaN(e)
    });
    var h = "undefined" != typeof window ? window: "undefined" != typeof global ? global: "undefined" != typeof self ? self: {}; !
    function(e) {
        var t = setTimeout;
        function r() {}
        function o(e) {
            if ("object" != typeof this) throw new TypeError("Promises must be constructed via new");
            if ("function" != typeof e) throw new TypeError("not a function");
            this._state = 0,
            this._handled = !1,
            this._value = void 0,
            this._deferreds = [],
            d(e, this)
        }
        function i(n, r) {
            for (; 3 === n._state;) n = n._value;
            0 !== n._state ? (n._handled = !0, o._immediateFn(function() {
                var e = 1 === n._state ? r.onFulfilled: r.onRejected;
                if (null !== e) {
                    var t;
                    try {
                        t = e(n._value)
                    } catch(e) {
                        return void a(r.promise, e)
                    }
                    s(r.promise, t)
                } else(1 === n._state ? s: a)(r.promise, n._value)
            })) : n._deferreds.push(r)
        }
        function s(e, t) {
            try {
                if (t === e) throw new TypeError("A promise cannot be resolved with itself.");
                if (t && ("object" == typeof t || "function" == typeof t)) {
                    var n = t.then;
                    if (t instanceof o) return e._state = 3,
                    e._value = t,
                    void u(e);
                    if ("function" == typeof n) return void d((r = n, i = t,
                    function() {
                        r.apply(i, arguments)
                    }), e)
                }
                e._state = 1,
                e._value = t,
                u(e)
            } catch(t) {
                a(e, t)
            }
            var r, i
        }
        function a(e, t) {
            e._state = 2,
            e._value = t,
            u(e)
        }
        function u(e) {
            2 === e._state && 0 === e._deferreds.length && o._immediateFn(function() {
                e._handled || o._unhandledRejectionFn(e._value)
            });
            for (var t = 0,
            n = e._deferreds.length; t < n; t++) i(e, e._deferreds[t]);
            e._deferreds = null
        }
        function l(e, t, n) {
            this.onFulfilled = "function" == typeof e ? e: null,
            this.onRejected = "function" == typeof t ? t: null,
            this.promise = n
        }
        function d(e, t) {
            var n = !1;
            try {
                e(function(e) {
                    n || (n = !0, s(t, e))
                },
                function(e) {
                    n || (n = !0, a(t, e))
                })
            } catch(e) {
                if (n) return;
                n = !0,
                a(t, e)
            }
        }
        o.prototype.
        catch = function(e) {
            return this.then(null, e)
        },
        o.prototype.then = function(e, t) {
            var n = new this.constructor(r);
            return i(this, new l(e, t, n)),
            n
        },
        o.all = function(e) {
            var a = Array.prototype.slice.call(e);
            return new o(function(r, i) {
                if (0 === a.length) return r([]);
                var o = a.length;
                function s(t, e) {
                    try {
                        if (e && ("object" == typeof e || "function" == typeof e)) {
                            var n = e.then;
                            if ("function" == typeof n) return void n.call(e,
                            function(e) {
                                s(t, e)
                            },
                            i)
                        }
                        a[t] = e,
                        0 == --o && r(a)
                    } catch(e) {
                        i(e)
                    }
                }
                for (var e = 0; e < a.length; e++) s(e, a[e])
            })
        },
        o.resolve = function(t) {
            return t && "object" == typeof t && t.constructor === o ? t: new o(function(e) {
                e(t)
            })
        },
        o.reject = function(n) {
            return new o(function(e, t) {
                t(n)
            })
        },
        o.race = function(i) {
            return new o(function(e, t) {
                for (var n = 0,
                r = i.length; n < r; n++) i[n].then(e, t)
            })
        },
        o._immediateFn = "function" == typeof h.setImmediate &&
        function(e) {
            h.setImmediate(e)
        } ||
        function(e) {
            t(e, 0)
        },
        o._unhandledRejectionFn = function(e) {
            "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", e)
        },
        o._setImmediateFn = function(e) {
            o._immediateFn = e
        },
        o._setUnhandledRejectionFn = function(e) {
            o._unhandledRejectionFn = e
        },
        "object" != typeof h || h.Promise || (h.exports = o),
        "object" != typeof window || window.Promise || (window.Promise = o)
    } (),
    String.prototype.endsWith || (String.prototype.endsWith = function(e, t) {
        var n = this.toString(); ("number" != typeof t || !isFinite(t) || Math.floor(t) !== t || t > n.length) && (t = n.length),
        t -= e.length;
        var r = n.lastIndexOf(e, t);
        return - 1 !== r && r === t
    }),
    String.prototype.startsWith || (String.prototype.startsWith = function(e, t) {
        return this.substr(t || 0, e.length) === e
    });
    var f = 1,
    p = function(e) {
        if (void 0 === e && (e = {}), null == this || this.constructor !== p) return new p(e);
        this._token = f++,
        this.modules = {},
        this.events = {},
        this.view = {},
        this.styles = {},
        this.parse = {},
        this.export = {},
        this.tools = {};
        for (var t = 0; t < g.length; ++t) g[t](this, e);
        for (var n = 0; n < v.length; ++n) v[n](this, e)
    },
    g = [],
    v = [];
    p.extend = function(e) {
        if ("function" != typeof e) throw new TypeError("expected function");
        g.push(e)
    },
    p.atInit = function(e) {
        if ("function" != typeof e) throw new TypeError("expected function");
        v.push(e)
    };
    var y = function(e, t) {
        return e[t]
    },
    m = function(e, t, n) {
        return e[t] = n
    },
    _ = {
        1 : x(1),
        2 : x(2),
        4 : x(4),
        8 : y,
        16 : y,
        32 : y,
        int8: y,
        float: y,
        any: y
    },
    b = {
        1 : w(1),
        2 : w(2),
        4 : w(4),
        8 : m,
        16 : m,
        32 : m,
        int8: m,
        float: m,
        any: m
    };
    function x(e) {
        return new Function("array", "index", "return (array[index / " + 8 / e + " | 0] >> ((index % " + 8 / e + ") * " + e + ")) & " + ((1 << e) - 1) + ";")
    }
    function w(e) {
        return new Function("array", "index", "value", "\n    var offset = (index % " + 8 / e + ") * " + e + ",\n        finalIndex = index / " + 8 / e + " | 0,\n        orMask = value << offset,\n        andMask = 255 - ((" + (Math.pow(2, e) - 1) + " - value) << offset);\n\n    array[finalIndex] = (array[finalIndex] & andMask) | orMask;")
    }
    var A = function(e) {
        var t = e.storage,
        n = e.size || 0,
        r = e.
    default,
        i = Math.max(8, I(n + 1)),
        o = "resource" === t ? 1 : t;
        void 0 === r && "any" !== t && "resource" !== t && (r = 0),
        this._storage = t,
        this._get = _[o],
        this._set = b[o],
        this._elementSize = o,
        this._nbElements = i,
        this._byName = void 0,
        this._byIndex = void 0,
        this._nextIndex = void 0,
        this._defaultValue = r,
        this._BASE_VALUE = "any" === t ? void 0 : 0,
        this._methods = C,
        this._initialized = !1,
        "resource" === t && (this._methods = S, this._byName = {},
        this._byIndex = [], this._nextIndex = 1, this._byName[r] = 0, this._byIndex.push(r))
    };
    function E(e, t) {
        var n = "resource" === e._storage ? 0 : e._defaultValue;
        if ("number" != typeof e._elementSize || 8 <= e._elementSize) e._buffer.fill(n, t);
        else {
            for (var r = 8 / e._elementSize,
            i = 0,
            o = 0; o < r; ++o) i <<= e._elementSize,
            i += n;
            if (void 0 === t) e._buffer.fill(i);
            else {
                for (var s = t + (8 - t % 8), a = t; a < s; ++a) e._set(e._buffer, a, n);
                e._buffer.fill(i, s / 8)
            }
        }
    }
    A.prototype.get = function() {
        return this._defaultValue
    },
    A.prototype.set = function(e, t) {
        return this._initialized = !0,
        this._buffer = T(this._nbElements, this._elementSize),
        this.get = this._methods.get,
        this.set = this._methods.set,
        "resource" !== this._storage && this._defaultValue !== this._BASE_VALUE && E(this, 0),
        this._methods.set.call(this, e, t)
    },
    A.prototype.increaseNbElements = function(e) {
        var t = I(e + 1);
        if (! (t <= this._nbElements)) {
            if (this._initialized) if ("any" === this._elementSize) for (var n = this._nbElements; n < t; ++n) this._buffer.push(this._defaultValue);
            else {
                var r = T(t, this._elementSize);
                r.set(this._buffer),
                this._buffer = r,
                "resource" !== this._storage && this._defaultValue !== this._BASE_VALUE && E(this, this._nbElements)
            }
            this._nbElements = t
        }
    },
    A.prototype.increaseElementSize = function() {
        var e = this._elementSize;
        if ("number" != typeof e || 32 === e) throw new Error("Cannot increase size of elements");
        var t = 2 * e,
        n = _[t],
        r = b[t];
        if (this._initialized) {
            var i = this._nbElements,
            o = this._get,
            s = this._buffer,
            a = T(i, t);
            if (8 <= e) a.set(s);
            else for (var u = 0; u < i; ++u) r(a, u, o(s, u));
            this._buffer = a
        }
        this._elementSize = t,
        this._get = n,
        this._set = r
    },
    A.prototype.buffer = function() {
        if (!this._buffer) throw new Error("flexArray: buffer not instanciated");
        return this._buffer
    },
    A.prototype.elementBitSize = function() {
        return this._elementSize
    },
    A.prototype.capacity = function() {
        return this._nbElements
    },
    A.prototype.byteSize = function() {
        return this._nbElements * this._elementSize / 8
    },
    A.prototype.storage = function() {
        return this._storage
    },
    A.prototype.getMultiple = function(e, t) {
        var n = e.length;
        void 0 === t && (t = new Array(n));
        for (var r = 0,
        i = n; r < i; ++r) t[r] = this.get(e[r]);
        return t
    },
    A.prototype.setMultiple = function(e, t) {
        if (Array.isArray(t) || ArrayBuffer.isView(t)) for (var n = 0,
        r = e.length; n < r; ++n) this.set(e[n], t[n]);
        else for (var i = 0,
        o = e.length; i < o; ++i) this.set(e[i], t)
    },
    A.prototype.reset = function() {
        this._initialized && E(this, 0)
    };
    var C = {
        get: function(e) {
            return this._get(this._buffer, e)
        },
        set: function(e, t) {
            this._set(this._buffer, e, t)
        }
    },
    S = {
        get: function(e) {
            return this._byIndex[this._get(this._buffer, e)]
        },
        set: function(e, t) {
            var n, r = this._byName[t];
            void 0 === r && (r = this._nextIndex++, this._byIndex.push(t), (n = this, Math.pow(2, Math.ceil(Math.log2(Math.log2(n._nextIndex))))) > this._elementSize && this.increaseElementSize(), this._byName[t] = r);
            this._set(this._buffer, e, r)
        }
    };
    function I(e) {
        for (var t = 2; t < e;) t *= 2;
        return t
    }
    function T(e, t) {
        return "any" === t ? new Array(e) : "float" === t ? new Float32Array(e) : "int8" === t ? new Int8Array(e) : 32 === t ? new Uint32Array(e) : 16 === t ? new Uint16Array(e) : new Uint8Array(Math.ceil(e / 8 * t))
    }
    var N = Array.isArray,
    k = function() {};
    k.prototype.on = function(e, t) {
        if ("string" != typeof e) throw new TypeError("Event name must be string");
        if ("function" != typeof t) throw new TypeError("Event handler must be function");
        var n = this._events = this._events || {};
        return (n[e] = n[e] || []).push(t),
        this
    },
    k.prototype.off = function(e, t) {
        if ("string" != typeof e) throw new TypeError("Event name must be string");
        var n = this._event = this._events || {},
        r = n[e];
        if (N(r)) if ("function" != typeof t) n[e] = null;
        else {
            var i = r.indexOf(t); - 1 !== i && r.splice(i, 1),
            0 === r.length && (n[e] = null)
        }
        return this
    },
    k.prototype.fire = function(e) {
        if ("string" != typeof e) throw new TypeError("Event name must be string");
        var t, n = (this._event = this._events || {})[e];
        if (N(n)) for (var r = Array.prototype.slice.call(arguments, 1), i = 0; i < n.length; i++)(t = n[i]) && t.apply(this, r);
        return this
    },
    k.prototype.once = function(e, t) {
        var n = this,
        r = function() {
            t.apply(n, Array.prototype.slice.call(arguments, 0)),
            n.off(e, r)
        };
        return r.handler = t,
        this.on(e, r)
    },
    k.prototype.hasListener = function(e, t) {
        if (!e || !t) return ! 1;
        var n = (this._events = this._events || {})[e];
        if (N(n)) for (var r, i = 0,
        o = n.length; i < o; i++) if ((r = n[i]) === t || r.handler === t) return ! 0;
        return ! 1
    },
    k.prototype.getListeners = function(e) {
        return (this._events = this._events || {})[e]
    },
    k.mixin = function(e) {
        for (var t = "function" == typeof e ? e.prototype: e, n = ["addEventListener", "removeEventListener", "addOneTimeEventListener", "dispatch", "on", "off", "once", "fire", "trigger"], r = 0, i = n.length; r < i; r++) {
            var o = n[r];
            t[o] = k.prototype[o]
        }
        return e
    },
    k.prototype.addEventListener = k.prototype.on,
    k.prototype.removeEventListener = k.prototype.off,
    k.prototype.addOneTimeEventListener = k.prototype.once,
    k.prototype.trigger = k.prototype.dispatch = k.prototype.fire;
    var L, R = (L = 0, "undefined" != typeof requestAnimationFrame ? requestAnimationFrame: function(e) {
        var t = Date.now(),
        n = Math.max(1, 16 - (t - L)),
        r = t + n;
        return L = r,
        setTimeout(function() {
            e(r)
        },
        n)
    }),
    z = "undefined" != typeof cancelAnimationFrame ? cancelAnimationFrame: function(e) {
        return clearTimeout(e)
    };
    function M(t, n) {
        return R(function(e) {
            t.call(n, e)
        })
    }
    var P = null;
    if ("undefined" != typeof window && "undefined" != typeof document) {
        var F = {
            opera: !!window.opr && !!window.opr.addons || !!window.opera || "undefined" != typeof navigator && 0 <= navigator.userAgent.indexOf(" OPR/"),
            firefox: "undefined" != typeof InstallTrigger,
            safari: 0 < Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),
            ie: !!document.documentMode,
            edge: !document.documentMode && !!window.StyleMedia,
            chrome: !!window.chrome && !!window.chrome.webstore
        };
        for (var D in F) if (F.hasOwnProperty(D) && F[D]) {
            P = D;
            break
        }
    }
    function O() {
        return P
    }
    function B(e) {
        e = e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,
        function(e, t, n, r) {
            return t + t + n + n + r + r
        });
        var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
        return t ? [parseInt(t[1], 16) / 255, parseInt(t[2], 16) / 255, parseInt(t[3], 16) / 255, 1] : null
    }
    function j(e) {
        return e < 16 ? "0" + e.toString(16) : e.toString(16)
    }
    P || "undefined" == typeof global || (P = "node");
    var U = [[0, 0, 0, 0]],
    H = {},
    X = 1;
    function W(e, t) {
        return t ? (H[e] = X++, U.push(t), X - 1) : 0
    }
    function G(e) {
        var t, n = 0;
        return "string" == typeof e && void 0 === (n = H[e]) && (n = "#" === e.charAt(0) ? W(e, B(e)) : W(e, (t = /^rgba?\(((?:\d*\.\d+)|(?:\d+))\s*,\s*((?:\d*\.\d+)|(?:\d+))\s*,\s*((?:\d*\.\d+)|(?:\d+))\s*(?:,\s*((?:\d*\.\d+)|(?:\d+)))?\)$/g.exec(e)) ? [parseInt(t[1]) / 255, parseInt(t[2]) / 255, parseInt(t[3]) / 255, void 0 === t[4] ? 1 : parseFloat(t[4])] : null)),
        n ? U[n] : null
    }
    for (var q = ["AliceBlue", "#F0F8FF", "AntiqueWhite", "#FAEBD7", "Aqua", "#00FFFF", "Aquamarine", "#7FFFD4", "Azure", "#F0FFFF", "Beige", "#F5F5DC", "Bisque", "#FFE4C4", "Black", "#000000", "BlanchedAlmond", "#FFEBCD", "Blue", "#0000FF", "BlueViolet", "#8A2BE2", "Brown", "#A52A2A", "BurlyWood", "#DEB887", "CadetBlue", "#5F9EA0", "Chartreuse", "#7FFF00", "Chocolate", "#D2691E", "Coral", "#FF7F50", "CornflowerBlue", "#6495ED", "Cornsilk", "#FFF8DC", "Crimson", "#DC143C", "Cyan", "#00FFFF", "DarkBlue", "#00008B", "DarkCyan", "#008B8B", "DarkGoldenRod", "#B8860B", "DarkGray", "#A9A9A9", "DarkGrey", "#A9A9A9", "DarkGreen", "#006400", "DarkKhaki", "#BDB76B", "DarkMagenta", "#8B008B", "DarkOliveGreen", "#556B2F", "DarkOrange", "#FF8C00", "DarkOrchid", "#9932CC", "DarkRed", "#8B0000", "DarkSalmon", "#E9967A", "DarkSeaGreen", "#8FBC8F", "DarkSlateBlue", "#483D8B", "DarkSlateGray", "#2F4F4F", "DarkSlateGrey", "#2F4F4F", "DarkTurquoise", "#00CED1", "DarkViolet", "#9400D3", "DeepPink", "#FF1493", "DeepSkyBlue", "#00BFFF", "DimGray", "#696969", "DimGrey", "#696969", "DodgerBlue", "#1E90FF", "FireBrick", "#B22222", "FloralWhite", "#FFFAF0", "ForestGreen", "#228B22", "Fuchsia", "#FF00FF", "Gainsboro", "#DCDCDC", "GhostWhite", "#F8F8FF", "Gold", "#FFD700", "GoldenRod", "#DAA520", "Gray", "#808080", "Grey", "#808080", "Green", "#008000", "GreenYellow", "#ADFF2F", "HoneyDew", "#F0FFF0", "HotPink", "#FF69B4", "IndianRed", "#CD5C5C", "Indigo", "#4B0082", "Ivory", "#FFFFF0", "Khaki", "#F0E68C", "Lavender", "#E6E6FA", "LavenderBlush", "#FFF0F5", "LawnGreen", "#7CFC00", "LemonChiffon", "#FFFACD", "LightBlue", "#ADD8E6", "LightCoral", "#F08080", "LightCyan", "#E0FFFF", "LightGoldenRodYellow", "#FAFAD2", "LightGray", "#D3D3D3", "LightGrey", "#D3D3D3", "LightGreen", "#90EE90", "LightPink", "#FFB6C1", "LightSalmon", "#FFA07A", "LightSeaGreen", "#20B2AA", "LightSkyBlue", "#87CEFA", "LightSlateGray", "#778899", "LightSlateGrey", "#778899", "LightSteelBlue", "#B0C4DE", "LightYellow", "#FFFFE0", "Lime", "#00FF00", "LimeGreen", "#32CD32", "Linen", "#FAF0E6", "Magenta", "#FF00FF", "Maroon", "#800000", "MediumAquaMarine", "#66CDAA", "MediumBlue", "#0000CD", "MediumOrchid", "#BA55D3", "MediumPurple", "#9370DB", "MediumSeaGreen", "#3CB371", "MediumSlateBlue", "#7B68EE", "MediumSpringGreen", "#00FA9A", "MediumTurquoise", "#48D1CC", "MediumVioletRed", "#C71585", "MidnightBlue", "#191970", "MintCream", "#F5FFFA", "MistyRose", "#FFE4E1", "Moccasin", "#FFE4B5", "NavajoWhite", "#FFDEAD", "Navy", "#000080", "OldLace", "#FDF5E6", "Olive", "#808000", "OliveDrab", "#6B8E23", "Orange", "#FFA500", "OrangeRed", "#FF4500", "Orchid", "#DA70D6", "PaleGoldenRod", "#EEE8AA", "PaleGreen", "#98FB98", "PaleTurquoise", "#AFEEEE", "PaleVioletRed", "#DB7093", "PapayaWhip", "#FFEFD5", "PeachPuff", "#FFDAB9", "Peru", "#CD853F", "Pink", "#FFC0CB", "Plum", "#DDA0DD", "PowderBlue", "#B0E0E6", "Purple", "#800080", "RebeccaPurple", "#663399", "Red", "#FF0000", "RosyBrown", "#BC8F8F", "RoyalBlue", "#4169E1", "SaddleBrown", "#8B4513", "Salmon", "#FA8072", "SandyBrown", "#F4A460", "SeaGreen", "#2E8B57", "SeaShell", "#FFF5EE", "Sienna", "#A0522D", "Silver", "#C0C0C0", "SkyBlue", "#87CEEB", "SlateBlue", "#6A5ACD", "SlateGray", "#708090", "SlateGrey", "#708090", "Snow", "#FFFAFA", "SpringGreen", "#00FF7F", "SteelBlue", "#4682B4", "Tan", "#D2B48C", "Teal", "#008080", "Thistle", "#D8BFD8", "Tomato", "#FF6347", "Turquoise", "#40E0D0", "Violet", "#EE82EE", "Wheat", "#F5DEB3", "White", "#FFFFFF", "WhiteSmoke", "#F5F5F5", "Yellow", "#FFFF00", "YellowGreen", "#9ACD32"], Y = 0; Y < q.length; Y += 2) {
        W(q[Y].toLowerCase(), B(q[Y + 1]))
    }
    function V(e) {
        var t = G(e);
        return "#" + j(t[0]) + j(t[1]) + j(t[2])
    }
    p.libraries = Object.create(null);
    var $ = {},
    Z = {},
    Q = function() {
        return null
    };
    function J(e, t) {
        var n = t.globalVarName,
        r = t.fallback,
        i = t.throwOnError;
        void 0 === i && (i = !0);
        var o = null;
        if (!o && e && (o = p.libraries[e]), !o && n && (o = p.libraries[n]), !o && e && (o = Q(e)), !o && n && (o = Z[n]), !o && n && (o = $[n]), o || "function" != typeof r || (o = r()), !o && r && (o = r), !o && i) {
            var s = 'unable to find module "' + e + '"' + (n ? " or global variable " + n: "") + "; make sure one of these statements is true:\n";
            throw s += "- require('" + e + "') returns the right library\n",
            s += "- Ogma.libraries['" + e + "'] is set to the right library\n",
            n && (s += "- window['" + n + "'] is set to the right library"),
            new Error(s)
        }
        return o
    }
    "object" == typeof global && ($ = global),
    "object" == typeof window && (Z = window),
    "object" == typeof module && "function" == typeof module.require ? Q = function(e) {
        try {
            return module.require(e)
        } catch(e) {
            return null
        }
    }: "function" == typeof $.require && (Q = function(e) {
        try {
            return $.require(e)
        } catch(e) {
            return null
        }
    });
    var K = "undefined" != typeof performance && performance.now ?
    function() {
        return 0 | performance.now()
    }: function() {
        return Date.now()
    };
    function ee() {
        return K()
    }
    function te() {
        var e = new Date,
        t = e.getDate(),
        n = e.getMonth() + 1;
        return t < 10 && (t = "0" + t),
        n < 10 && (n = "0" + n),
        e.getFullYear() + "-" + n + "-" + t
    }
    function ne() {
        var e = new Date;
        return "[" + re((e.getUTCHours() - (e.getTimezoneOffset() / 60 | 0)) % 24) + ":" + re(e.getUTCMinutes()) + ":" + re(e.getUTCSeconds()) + ":" + re(e.getUTCMilliseconds(), 3) + "]"
    }
    function re(e, t) {
        t = t || 2;
        for (var n = Math.pow(10, t - 1), r = e; 1 < n;) e < n && (r = "0" + r),
        n /= 10;
        return r
    }
    function ie(e) {
        return "number" == typeof e && e % 1 == 0
    }
    var oe = 100;
    function se(e, t, n) {
        for (var r = t; r < e || r < n;) r *= t;
        return r
    }
    function ae(e) {
        if ("string" == typeof e) return e.split(".");
        if (Array.isArray(e)) {
            for (var t = 0; t < e.length; ++t) if ("string" != typeof e[t]) throw new TypeError(e[t] + " is not a string");
            return e.slice()
        }
        throw new TypeError('invalid property path "' + e + '": expected string or array of strings')
    }
    function ue(t, n, r) {
        var i, o, e, s;
        return 0 === n ?
        function() {
            t.apply(r, arguments)
        }: (s = function() {
            i = !1,
            o && (e.apply(r, o), o = !1)
        },
        e = function() {
            var e;
            return i ? o = arguments: (e = t.apply(r, arguments), setTimeout(s, n), i = !0),
            e
        })
    }
    var le = /^[+-]?(?:\d+|\d*[.,]\d+)(e\d+)?$/;
    function de(e) {
        return "number" == typeof e ? isFinite(e) ? e: NaN: "string" == typeof e && le.test(e) ? parseFloat(e) : NaN
    }
    var ce = function(e) {
        return "boolean" == typeof e || 0 === e || 1 === e
    },
    he = function(e) {
        return "number" == typeof e && isFinite(e)
    },
    fe = function(e) {
        return "number" == typeof e && isFinite(e) && 0 <= e
    },
    pe = function(e) {
        return "number" == typeof e && isFinite(e) && 0 < e
    },
    ge = function(e) {
        return "string" == typeof e
    },
    ve = function(e) {
        return null === e || "string" == typeof e || "number" == typeof e
    },
    ye = function(e) {
        return null !== G(e)
    },
    me = function(e) {
        return null === e || null !== G(e)
    };
    function _e(e) {
        return ! (null === e || "object" != typeof e || Re(e) || e instanceof RegExp || "undefined" != typeof HTMLElement && e instanceof HTMLElement)
    }
    function be() {
        return ne()
    }
    function xe(e) {
        console.info(be() + " " + e)
    }
    function we(e) {
        console.warn(be() + " " + e)
    }
    function Ae(e, t) {
        return void 0 === e ? t: e
    }
    function Ee(e, t) {
        return Fe(e, t)
    }
    function Ce(e, t, n) {
        return De(e, t, n)
    }
    function Se(e, t) {
        return t ? {
            nodes: e,
            edges: t,
            fetch: function(e) {
                return e ? this.nodes: this.edges
            }
        }: {
            nodes: e ? new e: Object.create(null),
            edges: e ? new e: Object.create(null),
            fetch: function(e) {
                return e ? this.nodes: this.edges
            }
        }
    }
    function Ie(e) {
        return Oe(e)
    }
    function Te(e, t, n) {
        return Ze(e, t, n)
    }
    function Ne(e) {
        var t, n, r, i, o = arguments;
        for (t = 1, r = arguments.length; t < r; t++) for (n in i = o[t]) e[n] = i[n];
        return e
    }
    function ke(e, t, n, r) {
        if (t in e) throw new Error(r + " " + t + " already exists");
        e[t] = n
    }
    function Le(e, t, n) {
        if (Array.isArray(e)) {
            var r = e.indexOf(t);
            if ( - 1 === r) throw new Error(n + " " + t + " does not exist");
            return r
        }
        if (! (t in e)) throw new Error(n + " " + t + " does not exist");
        return e[t]
    }
    function Re(e) {
        return Array.isArray(e) || ArrayBuffer.isView(e)
    }
    function ze(e, t) {
        return Be(e, t)
    }
    function Me(e, t) {
        for (var n = Object.keys(t), r = 0; r < n.length; ++r) {
            var i = n[r];
            e[i] = t[i]
        }
        return e
    }
    function Pe(e) {
        return Ge(e)
    }
    function Fe(e, t, n) {
        if (Array.isArray(e)) e.forEach(t, n);
        else {
            if (!_e(e)) throw new Error("forEach: invalid argument " + JSON.stringify(e));
            var r = Object.keys(e);
            if (n) for (var i = 0; i < r.length; ++i) {
                var o = r[i];
                t.call(n, e[o], o)
            } else for (i = 0; i < r.length; ++i) t(e[o = r[i]], o)
        }
    }
    function De(t, n, e) {
        var r = e;
        return Object.keys(t).forEach(function(e) {
            r = n(r, t[e])
        }),
        r
    }
    function Oe(e) {
        if (Array.isArray(e)) {
            for (t = new Array(e.length), r = 0; r < e.length; ++r) t[r] = Oe(e[r]);
            return t
        }
        if (null != e && e.constructor === Object) {
            for (var t = {},
            n = Object.keys(e), r = 0; r < n.length; ++r) {
                var i = n[r];
                t[i] = Oe(e[i])
            }
            return t
        }
        return e
    }
    function Be(e, t) {
        if ("string" == typeof t) {
            if ( - 1 === t.indexOf(".")) return null == e ? void 0 : e[t];
            for (var n = t.indexOf("."); e && -1 !== n;) e = e[t.substr(0, n)],
            n = (t = t.substr(n + 1)).indexOf(".");
            return e ? e[t] : void 0
        }
        for (var r = 0,
        i = t.length; r < i; ++r) {
            if (!e) return;
            e = e[t[r]]
        }
        return e
    }
    var je = function() {};
    function Ue(n, e) {
        Fe(e,
        function(e, t) {
            Object.defineProperty(n, t, {
                enumerable: !0,
                get: e
            })
        })
    }
    var He = function() {},
    Xe = /\{\s*\[native code\]\s*\}/;
    function We(e) {
        return "string" == typeof e && !Xe.test("" + e)
    }
    function Ge(e) {
        if ("object" == typeof e) {
            var t = e.constructor;
            if (We(t)) for (var n = Object.keys(t.prototype), r = 0; r < n.length; ++r) {
                var i = n[r];
                "function" == typeof t.prototype[i] && (e[i] = He)
            }
        }
    }
    function qe(r, i, o) {
        void 0 === o && (o = "."),
        i || (i = function(e) {
            return ! _e(e)
        });
        for (var s = {},
        a = Object.keys(r), e = function(e) {
            var n = a[e],
            t = r[n];
            i(t) ? s[n] = t: function(e, t) {
                for (var n = Object.keys(e), r = 0, i = n.length; r < i; ++r) {
                    var o = n[r];
                    t(e[o], o)
                }
            } (qe(t, i),
            function(e, t) {
                s["" + n + o + t] = e
            })
        },
        t = 0; t < a.length; ++t) e(t);
        return s
    }
    function Ye(e, t, n) {
        for (var r = t.split("."), i = 0; i < r.length - 1; ++i) {
            var o = r[i],
            s = e[o];
            s || (s = {},
            e[o] = s),
            e = s
        }
        e[r[r.length - 1]] = n
    }
    function Ve(e) {
        for (var t = {},
        n = Object.keys(e), r = 0; r < n.length; ++r) {
            var i = n[r];
            Ye(t, i, e[i])
        }
        return t
    }
    function $e(e, t, n) {
        void 0 === n && (n = []);
        for (var r = Object.keys(e), i = 0; i < r.length; ++i) {
            var o = r[i],
            s = e[o],
            a = t ? t + o: o;
            "object" != typeof s || null === s || Array.isArray(s) ? n.push(a) : $e(s, a + ".", n)
        }
        return n
    }
    function Ze(e, t, n) {
        if (void 0 === e) return Ie(t);
        if (!_e(e) && n && ((e = {})[n] = e), _e(t)) {
            var r = {};
            for (var i in t) {
                var o = t[i],
                s = e[i];
                _e(o) ? r[i] = Ze(s, o) : r[i] = void 0 === s ? Ie(o) : s
            }
            return r
        }
        return e
    }
    var Qe = J("xmldom", {
        throwOnError: !1
    }),
    Je = J("canvas", {
        throwOnError: !1
    }),
    Ke = null,
    et = null,
    tt = null;
    function nt() {
        if (et) return et;
        throw new Error('unable to use "document"; if you use Node JS install the "xmldom" package')
    }
    function rt() {
        if (et) return et.implementation.createDocument("", "", null);
        throw new Error('unable to create XML document; if you use Node JS install the "xmldom" package')
    }
    function it(e) {
        if (Ke) return (new Ke).serializeToString(e);
        throw new Error('unable to instantiate XMLSerializer; if you use Node JS install the "xmldom" package')
    }
    "undefined" != typeof XMLSerializer ? Ke = XMLSerializer: Qe && (Ke = Qe.XMLSerializer),
    "undefined" != typeof document ? et = document: Qe && (et = (new Qe.DOMImplementation).createDocument());
    tt = Je ?
    function(e, t) {
        void 0 === e && (e = 40),
        void 0 === t && (t = 40);
        var n = new Je(e, t);
        return n.style = {},
        n
    }: "undefined" != typeof document ?
    function(e, t) {
        void 0 === e && (e = 40),
        void 0 === t && (t = 40);
        var n = document.createElement("canvas");
        return dt(n, e, t),
        n
    }: function(e, t) {
        return void 0 === e && (e = 40),
        void 0 === t && (t = 40),
        {
            __dummy: !0,
            __context: new ot,
            style: {},
            width: e,
            height: t,
            getContext: function() {
                return this.__context
            },
            toDataURL: function() {
                return "data:image/png;base64,"
            }
        }
    };
    var ot = function() {};
    function st() {
        return "undefined" != typeof window && window.devicePixelRatio || 1
    }
    function at(e, t) {
        this.data = e,
        this.type = t
    }
    function ut(e, t) {
        return "undefined" != typeof Blob ? new Blob(e, {
            type: t
        }) : new at(e, t)
    }
    function lt(e, t, n) {
        if ("undefined" == typeof window || window.__OGMA_HEADLESS) return e;
        var r = null,
        i = null,
        o = null;
        if (window.Blob ? (r = "blob" === n ? e: "dataURL" === n ? Ogma.utils.dataUrlToBlob(e) : Ogma.utils.createBlob([e], "text/xml"), i = window.URL.createObjectURL(r)) : o = "data:text/xml;charset=UTF-8," + encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>') + encodeURIComponent(e), navigator.msSaveBlob) navigator.msSaveBlob(r, t);
        else if (navigator.msSaveOrOpenBlob) navigator.msSaveOrOpenBlob(r, t);
        else {
            var s = document.createElement("a");
            s.setAttribute("href", window.Blob ? i: o),
            s.setAttribute("download", t),
            document.body.appendChild(s),
            s.click(),
            document.body.removeChild(s)
        }
        return i && setTimeout(function() {
            window.URL.revokeObjectURL(i)
        },
        0),
        e
    }
    function dt(e, t, n) {
        var r = st();
        e.style.width = t + "px",
        e.style.height = n + "px",
        e.width = t * r,
        e.height = n * r
    }
    function ct(n, e) {
        Fe(e,
        function(e, t) {
            void 0 !== e && n.setAttribute(t, e)
        })
    }
    function ht(e, t) {
        var n = nt().createElementNS("http://www.w3.org/2000/svg", e);
        return n.style || (n.style = {}),
        t && ct(n, t),
        n
    }
    function ft(e, t, n, r) {
        r = r || 0;
        var i = ee(),
        o = 0 === r ? n: function(e) {
            var t = ee();
            r < t - i && (n(e), i = t)
        };
        return e.addEventListener(t, o),
        {
            listener: o,
            elt: e,
            eventName: t
        }
    }
    function pt(e) {
        e.elt.removeEventListener(e.eventName, e.listener)
    }
    function gt(e, t) {
        if ("undefined" == typeof Image) t(null);
        else {
            var n = new Image;
            n.src = e,
            n.onload = function() {
                t(n)
            },
            n.onerror = function() {
                t(null)
            }
        }
    }
    function vt(r) {
        return new Promise(function(e, t) {
            var n = new XMLHttpRequest;
            n.open("GET",
            function(e) {
                if (0 === e.indexOf("http://") || 0 === e.indexOf("https://")) return e;
                var t = window.location.origin,
                n = window.location.pathname,
                r = n.lastIndexOf("/");
                return t += -1 === r ? "/" + e: n.substr(0, r) + "/" + e
            } (r), !0),
            n.onreadystatechange = function() {
                4 === n.readyState && (200 === n.status ? e(n.responseText) : t(n.status))
            },
            n.onerror = function(e) {
                t(e)
            },
            n.send()
        })
    }
    ot.prototype.fill = function() {},
    ot.prototype.stroke = function() {},
    ot.prototype.clearRect = function() {},
    ot.prototype.fillRect = function() {},
    ot.prototype.strokeRect = function() {},
    ot.prototype.beginPath = function() {},
    ot.prototype.closePath = function() {},
    ot.prototype.moveTo = function() {},
    ot.prototype.lineTo = function() {},
    ot.prototype.arc = function() {},
    ot.prototype.measureText = function(e) {
        return {
            width: 1.6 * e.length
        }
    },
    ot.prototype.drawImage = function() {};
    var yt = function() {
        this.list = new Int32Array(8),
        this.size = 0,
        this.capacity = this.list.length
    };
    yt.prototype.add = function(e) {
        if (this.size === this.capacity) {
            var t = new Int32Array(2 * this.capacity);
            t.set(this.list),
            this.list = t,
            this.capacity = this.list.length
        }
        this.list[this.size] = e,
        this.size += 1
    },
    yt.prototype.addIfMissing = function(e) {
        return ! this.has(e) && (this.add(e), !0)
    },
    yt.prototype.remove = function(e) {
        if (0 === this.size) return ! 1;
        var t = this.list.lastIndexOf(e, this.size - 1);
        return - 1 !== t && (this.size -= 1, this.list[t] = this.list[this.size], !0)
    },
    yt.prototype.has = function(e) {
        return 0 !== this.size && -1 !== this.list.lastIndexOf(e, this.size - 1)
    },
    yt.prototype.clear = function() {
        this.size = 0
    },
    yt.prototype.pop = function() {
        return this.size -= 1,
        this.list[this.size]
    };
    var mt = {};
    function _t(e) {
        return "number" == typeof e && isNaN(e)
    }
    var bt = function() {
        this._keys = [],
        this._values = []
    };
    bt.prototype.set = function(e, t) {
        var n = this._getIndex(e);
        return - 1 === n ? (this._keys.push(e.slice()), this._values.push(t), !0) : (this._values[n] = t, !1)
    },
    bt.prototype.get = function(e) {
        var t = this._getIndex(e);
        return - 1 === t ? void 0 : this._values[t]
    },
    bt.prototype.has = function(e) {
        return - 1 !== this._getIndex(e)
    },
    bt.prototype.delete = function(e) {
        var t = this._getIndex(e);
        return - 1 !== t && (this._keys.splice(t, 1), this._values.splice(t, 1), !0)
    },
    bt.prototype.keys = function() {
        return this._keys.map(function(e) {
            return e.slice()
        })
    },
    bt.prototype.values = function() {
        return this._values.slice()
    },
    bt.prototype._getIndex = function(e) {
        for (var t = 0; t < this._keys.length; ++t) {
            var n = this._keys[t];
            if (n.length === e.length) {
                for (var r = !0,
                i = 0; i < e.length; ++i) {
                    var o = n[i],
                    s = e[i];
                    if (! (o === s || _t(o) && _t(s))) {
                        r = !1;
                        break
                    }
                }
                if (r) return t
            }
        }
        return - 1
    };
    var xt = function() {
        this.clear()
    },
    wt = {
        size: {}
    };
    function At(e, t) {
        return _t(t) ? e._keys.indexOf(mt) : e._keys.indexOf(t)
    }
    xt.prototype.clear = function() {
        this._keys = [],
        this._values = [],
        this._arrays = new bt,
        this._size = 0
    },
    wt.size.get = function() {
        return this._size
    },
    xt.prototype.delete = function(e) {
        if (Re(e)) return !! this._arrays.delete(e) && (this._size -= 1, !0);
        var t = At(this, e);
        return - 1 !== t && (this._keys.splice(t, 1), this._values.splice(t, 1), this._size -= 1, !0)
    },
    xt.prototype.get = function(e) {
        if (Re(e)) return this._arrays.get(e);
        var t = At(this, e);
        return - 1 === t ? void 0 : this._values[t]
    },
    xt.prototype.has = function(e) {
        return Re(e) ? -1 !== At(this, e) : this._arrays.has(e)
    },
    xt.prototype.set = function(e, t) {
        if (Re(e)) this._arrays.set(e, t) && (this._size += 1);
        else {
            var n = At(this, e); - 1 === n ? (this._size += 1, this._keys.push(_t(e) ? mt: e), this._values.push(t)) : this._values[n] = t
        }
        return this
    },
    xt.prototype.keys = function() {
        for (var e = this._keys.slice(), t = 0; t < e.length; ++t) e[t] === mt && (e[t] = NaN);
        return e.concat(this._arrays.keys())
    },
    xt.prototype.values = function() {
        return this._values.slice().concat(this._arrays.values())
    },
    Object.defineProperties(xt.prototype, wt);
    var Et = function() {
        this._map = new Map,
        this._arrays = new bt
    },
    Ct = {
        size: {}
    };
    Et.prototype.clear = function() {
        return this._arrays = new bt,
        this._map.clear()
    },
    Et.prototype.delete = function(e) {
        return Re(e) ? this._arrays.delete(e) : this._map.delete(e)
    },
    Et.prototype.get = function(e) {
        return Re(e) ? this._arrays.get(e) : this._map.get(e)
    },
    Et.prototype.set = function(e, t) {
        return Re(e) ? this._arrays.set(e, t) : this._map.set(e, t),
        this
    },
    Et.prototype.keys = function() {
        return Array.from(this._map.keys()).concat(this._arrays.keys())
    },
    Et.prototype.values = function() {
        return Array.from(this._map.values()).concat(this._arrays.values())
    },
    Ct.size.get = function() {
        return this._map.size + this._arrays._keys.length
    },
    Object.defineProperties(Et.prototype, Ct);
    var St = xt;
    if ("undefined" != typeof Map && void 0 !== Map.prototype.keys && void 0 !== Map.prototype.values) try { (new Map).keys().next(),
        (new Map).values().next(),
        St = Et
    } catch(e) {}
    var It = St,
    Tt = function(e) {
        this._constructor = e,
        this._array = new e(8),
        this._capacity = 8,
        this.length = 0
    };
    function Nt(e, t, n, r) {
        if (n === r) return n;
        var i = n + ((r - n) / 2 | 0),
        o = t - e[i];
        return 0 === o ? i: o < 0 ? Nt(e, t, n, i) : Nt(e, t, i + 1, r)
    }
    function kt(e, t, n, r, i, o) {
        o = o || {};
        var s = jt(e, t, n, r),
        a = .5 * i * -((r - t) / s),
        u = .5 * i * ((n - e) / s);
        return o.x1 = e - a,
        o.y1 = t - u,
        o.x2 = e + a,
        o.y2 = t + u,
        o
    }
    function Lt(e, t, n, r, i, o, s) {
        var a = jt(n, r, i, o),
        u = (i - n) / a * (s / 2),
        l = (o - r) / a * (s / 2),
        d = n + l,
        c = r - u,
        h = e - d,
        f = t - c,
        p = n - l - d,
        g = r + u - c,
        v = i + l - d,
        y = o - u - c,
        m = h * p + f * g,
        _ = h * v + f * y;
        return 0 < m && m < p * p + g * g && 0 < _ && _ < v * v + y * y
    }
    function Rt(e, t, n, r, i) {
        if (i && (zt(e, n) || zt(e, r) || zt(t, n) || zt(t, r))) return ! 1;
        var o = (e.y - n.y) * (r.x - n.x) - (e.x - n.x) * (r.y - n.y),
        s = (t.x - e.x) * (r.y - n.y) - (t.y - e.y) * (r.x - n.x);
        if (0 === s) return ! 1;
        var a = o / s,
        u = (o = (e.y - n.y) * (t.x - e.x) - (e.x - n.x) * (t.y - e.y)) / s;
        return ! (a <= 0 || 1 <= a || u <= 0 || 1 <= u)
    }
    function zt(e, t) {
        return e.x === t.x && e.y === t.y
    }
    function Mt(e, t, n, r) {
        return Math.atan2(r - t, n - e)
    }
    function Pt(e, t, n, r, i, o) {
        o = o || {};
        var s = jt(e, t, n, r),
        a = (n - e) / s,
        u = (r - t) / s;
        return o.x = i * -u,
        o.y = i * a,
        o
    }
    function Ft(e, t, n, r, i, o) {
        o = o || {};
        var s = jt(e, t, n, r);
        return o.x = (n - e) / s * i,
        o.y = (r - t) / s * i,
        o
    }
    function Dt(e, t, n, r, i, o, s, a) {
        var u, l, d, c = (a - o) * (n - e) - (s - i) * (r - t);
        return 0 == c ? null: (d = (s - i) * (u = t - o) - (a - o) * (l = e - i), l = ((n - e) * u - (r - t) * l) / c, {
            x: e + (u = d / c) * (n - e),
            y: t + u * (r - t)
        })
    }
    function Ot(e, t, n, r, i, o, s, a) {
        var u, l = [];
        return (u = Dt(e, t, n, r, i, o, i, a)) && l.push(u),
        (u = Dt(e, t, n, r, i, a, s, a)) && l.push(u),
        (u = Dt(e, t, n, r, s, a, s, o)) && l.push(u),
        (u = Dt(e, t, n, r, s, o, i, o)) && l.push(u),
        l
    }
    function Bt(e, t, n, r, i, o) {
        o = o || {};
        var s = Math.cos(i),
        a = Math.sin(i),
        u = e - n,
        l = t - r;
        return o.x = s * u - a * l + n,
        o.y = a * u + s * l + r,
        o
    }
    function jt(e, t, n, r) {
        return Math.sqrt((e - n) * (e - n) + (t - r) * (t - r))
    }
    function Ut(e, t, n, r) {
        var i = e - n,
        o = t - r;
        return i * i + o * o
    }
    function Ht(e, t, n) {
        var r = Mt(e.x, e.y, t.x, t.y) - Mt(n.x, n.y, t.x, t.y);
        return r < 0 && (r += 2 * Math.PI),
        r
    }
    function Xt(e, t, n, r, i, o) {
        if (o = o || {},
        0 === jt(e, t, n, r)) o.x = i,
        o.y = 0;
        else {
            var s = i / jt(e, t, n, r);
            o.x = (n - e) * s,
            o.y = (r - t) * s
        }
        return o
    }
    Tt.prototype.reserve = function(e) {
        if (this._capacity < e) {
            e = Math.pow(2, Math.ceil(Math.log2(e + 1)));
            var t = new this._constructor(e);
            t.set(this._array),
            this._capacity = e,
            this._array = t
        }
    },
    Tt.prototype.has = function(e) {
        var t = Nt(this._array, e, 0, this.length);
        return t < this.length && this._array[t] === e
    },
    Tt.prototype.add = function(e) {
        var t = Nt(this._array, e, 0, this.length),
        n = t < this.length && this._array[t] === e;
        return n || (this.length === this._capacity && this.reserve(this.length + 1), this._array.copyWithin(t + 1, t, this.length), this._array[t] = e, this.length += 1),
        !n
    },
    Tt.prototype.remove = function(e) {
        var t = Nt(this._array, e, 0, this.length),
        n = t < this.length && this._array[t] === e;
        return n && (this._array.copyWithin(t, t + 1, this.length), this.length -= 1),
        n
    },
    Tt.prototype.removeByPosition = function(e) {
        return ! (e >= this.length) && (this._array.copyWithin(e, e + 1, this.length), this.length -= 1, !0)
    },
    Tt.prototype.get = function(e) {
        return this._array[e]
    },
    Tt.prototype.clear = function() {
        this.length = 0
    },
    Tt.prototype.slice = function() {
        return this._array.slice(0, this.length)
    };
    var Wt = ["x", "y", "ax", "ay", "zx", "zy", "ox", "oy"];
    function Gt() {
        this.x = 0,
        this.y = 0,
        this.ax = 0,
        this.ay = 0,
        this.zx = 0,
        this.zy = 0,
        this.ox = 0,
        this.oy = 0
    }
    function qt(e, t, n, r, i, o) {
        var s = e,
        a = t;
        n.x = s.x - a.x,
        n.y = s.y - a.y,
        n.ax = s.ax - a.ax,
        n.ay = s.ay - a.ay,
        n.zx = s.zx - a.zx,
        n.zy = s.zy - a.zy,
        n.ox = s.ox - a.ox,
        n.oy = s.oy - a.oy,
        r.x = s.x + a.x,
        r.y = s.y - a.y,
        r.ax = s.ax + a.ax,
        r.ay = s.ay - a.ay,
        r.zx = s.zx + a.zx,
        r.zy = s.zy - a.zy,
        r.ox = s.ox + a.ox,
        r.oy = s.oy - a.oy,
        i.x = s.x + a.x,
        i.y = s.y + a.y,
        i.ax = s.ax + a.ax,
        i.ay = s.ay + a.ay,
        i.zx = s.zx + a.zx,
        i.zy = s.zy + a.zy,
        i.ox = s.ox + a.ox,
        i.oy = s.oy + a.oy,
        o.x = s.x - a.x,
        o.y = s.y + a.y,
        o.ax = s.ax - a.ax,
        o.ay = s.ay + a.ay,
        o.zx = s.zx - a.zx,
        o.zy = s.zy + a.zy,
        o.ox = s.ox - a.ox,
        o.oy = s.oy + a.oy
    }
    Gt.prototype.reset = function() {
        for (var e = 0; e < Wt.length; ++e) this[Wt[e]] = 0;
        return this
    },
    Gt.prototype.add = function(e) {
        for (var t = 0; t < Wt.length; ++t) {
            var n = Wt[t];
            this[n] += e[n]
        }
        return this
    },
    Gt.prototype.mergeCoordinates = function() {
        return {
            x: this.x + this.zx + this.ax + this.ox,
            y: this.y + this.zy + this.ay + this.oy
        }
    },
    Gt.prototype.set = function(e) {
        if (e instanceof Gt) for (var t = 0; t < Wt.length; ++t) {
            var n = Wt[t];
            this[n] = e[n]
        } else Fe(e,
        function(e, t) {
            this[t] = e
        },
        this);
        return this
    },
    Gt.prototype.setAll = function(e, t, n, r, i, o, s, a) {
        return this.x = e,
        this.y = t,
        this.ax = i,
        this.ay = o,
        this.zx = n,
        this.zy = r,
        this.ox = s,
        this.oy = a,
        this
    },
    Gt.prototype.setXY = function(e, t) {
        return this.x = e,
        this.y = t,
        this
    },
    Gt.prototype.setZXY = function(e, t) {
        return this.zx = e,
        this.zy = t,
        this
    },
    Gt.prototype.setAXY = function(e, t) {
        return this.ax = e,
        this.ay = t,
        this
    },
    Gt.prototype.setOXY = function(e, t) {
        return this.ox = e,
        this.oy = t,
        this
    },
    Gt.prototype.addXY = function(e, t) {
        return this.x += e,
        this.y += t,
        this
    },
    Gt.prototype.addZXY = function(e, t) {
        return this.zx += e,
        this.zy += t,
        this
    },
    Gt.prototype.addOXY = function(e, t) {
        return this.ox += e,
        this.oy += t,
        this
    },
    Gt.prototype.clone = function() {
        return (new Gt).setAll(this.x, this.y, this.zx, this.zy, this.ax, this.ay, this.ox, this.oy)
    };
    var Yt = {
        x: 0,
        y: 0
    };
    function Vt(e, t, n, r, i, o, s, a) {
        Xt(e.x, e.y, t.x, t.y, .5, Yt),
        i.x = e.x - Yt.y * n,
        i.y = e.y + Yt.x * n,
        i.ax = e.ax - Yt.y * r,
        i.ay = e.ay + Yt.x * r,
        i.zx = e.zx,
        i.zy = e.zy,
        i.ox = e.ox,
        i.oy = e.oy,
        o.x = e.x + Yt.y * n,
        o.y = e.y - Yt.x * n,
        o.ax = e.ax + Yt.y * r,
        o.ay = e.ay - Yt.x * r,
        o.zx = e.zx,
        o.zy = e.zy,
        o.ox = e.ox,
        o.oy = e.oy,
        a.x = t.x - Yt.y * n,
        a.y = t.y + Yt.x * n,
        a.ax = t.ax - Yt.y * r,
        a.ay = t.ay + Yt.x * r,
        a.zx = t.zx,
        a.zy = t.zy,
        a.ox = t.ox,
        a.oy = t.oy,
        s.x = t.x + Yt.y * n,
        s.y = t.y - Yt.x * n,
        s.ax = t.ax + Yt.y * r,
        s.ay = t.ay - Yt.x * r,
        s.zx = t.zx,
        s.zy = t.zy,
        s.ox = t.ox,
        s.oy = t.oy
    }
    function $t(e) {
        Array.call(this),
        Object.defineProperty(this, "__internalCounter", {
            value: {},
            writable: !0
        });
        for (var t = 0; t < e; ++t) this.push(new Gt);
        for (t = 0; t < Wt.length; ++t) Zt(this, Wt[t]);
        for (t = 0; t < Qt.length; ++t) this.__internalCounter[Qt[t]] = 0
    }
    function Zt(e, n) {
        Object.defineProperty(e, n, {
            get: function() {
                for (var e = new Array(this.length), t = 0; t < this.length; ++t) e[t] = this[t][n];
                return e
            },
            set: function(e) {
                for (var t = 0; t < this.length; ++t) this[t][n] = e
            },
            enumerable: !1
        })
    }
    $t.prototype = Object.create(Array.prototype);
    var Qt = ["setXY", "setZXY", "setAXY", "setOXY"]; ($t.prototype.constructor = $t).prototype.reset = function() {
        for (var e = 0; e < Qt.length; ++e) this.__internalCounter[Qt[e]] = 0;
        for (e = 0; e < this.length; ++e) this[e].reset();
        return this
    };
    for (var Jt = 0; Jt < Qt.length; ++Jt) Kt(Qt[Jt]);
    function Kt(n) {
        $t.prototype[n] = function(e, t) {
            return this[this.__internalCounter[n]][n](e, t),
            this.__internalCounter[n] += 1,
            this.__internalCounter[n] === this.length && (this.__internalCounter[n] = 0),
            this
        }
    }
    $t.prototype.mergeCoordinates = function() {
        for (var e = [], t = 0; t < this.length; ++t) e.push(this[t].mergeCoordinates());
        return e
    },
    $t.prototype.getXYList = function() {
        for (var e = new Array(this.length), t = 0; t < this.length; ++t) e[t] = {
            x: this[t].x,
            y: this[t].y
        };
        return e
    };
    var en = [],
    tn = [RegExp, Date];
    function nn(e, t) {
        for (var n = 0; n < t.length; ++n) if (e instanceof t[n]) return ! 0;
        return ! 1
    }
    "undefined" != typeof HTMLElement && en.push(HTMLElement);
    var rn = function(e) {
        return "object" != typeof e || null === e || Re(e) || nn(e, tn)
    };
    function on(e, t, n, r) {
        if (void 0 === t && (t = rn), void 0 === n && (n = []), void 0 === r && (r = []), !nn(e, en)) {
            if (t(e)) n.push({
                path: r.slice(),
                value: e
            });
            else for (var i = Object.keys(e), o = 0; o < i.length; ++o) {
                var s = i[o],
                a = r.slice();
                a.push(s),
                on(e[s], t, n, a)
            }
            return n
        }
    }
    var sn = function() {
        this._keys = [],
        this._values = [],
        this._size = 0,
        this._cachedPath = [],
        this._cachedIndex = -1
    },
    an = {
        size: {}
    };
    function un(e, t) {
        if (ln(t, e._cachedPath)) return e._cachedIndex;
        e._cachedPath = t.slice();
        for (var n = 0; n < e._keys.length; ++n) if (ln(e._keys[n], t)) return e._cachedIndex = n;
        return e._cachedIndex = -1
    }
    function ln(e, t) {
        if (e.length !== t.length) return ! 1;
        for (var n = 0; n < e.length; ++n) if (e[n] !== t[n]) return ! 1;
        return ! 0
    }
    an.size.get = function() {
        return this._size
    },
    sn.prototype.set = function(e, t) { - 1 !== un(this, e) ? this._values = t: (ln(this._cachedPath, e) && (this._cachedIndex = this._keys.length), this._keys.push(e), this._values.push(t), this._size += 1)
    },
    sn.prototype.get = function(e) {
        var t = un(this, e);
        return - 1 !== t ? this._values[t] : void 0
    },
    sn.prototype.has = function(e) {
        return - 1 !== un(this, e)
    },
    sn.prototype.keys = function() {
        return this._keys.slice()
    },
    Object.defineProperties(sn.prototype, an);
    var dn = 50;
    function cn(e, t, n, r, i, o, s, a) {
        for (var u = e.updateComposite(t, dn), l = 2 * Math.PI / dn, d = o / 2, c = l, h = {
            x: n,
            y: r,
            zx: i,
            zy: 0
        },
        f = {
            x: n,
            y: r,
            zx: i,
            zy: 0,
            ox: d,
            oy: 0
        },
        p = 0; p < dn; ++p) {
            var g = Math.cos(c),
            v = Math.sin(c),
            y = {
                x: n,
                y: r,
                zx: g * i,
                zy: v * i
            },
            m = {
                x: n,
                y: r,
                zx: g * i,
                zy: v * i,
                ox: g * d,
                oy: v * d
            };
            u[p] = e.quadrilateral(u[p], h, y, m, f, s, a),
            h = y,
            f = m,
            c += l
        }
        return e.composite(t, u)
    }
    var hn = function(e) {
        this.size = 0,
        this.totalSize = 0,
        this.exists = [],
        this.attributes = {
            exists: this.exists
        },
        this._attributesList = [this.exists],
        this._availableIndexes = [],
        this._nbAvailableIndexes = 0,
        e && this.addAttributes(e)
    };
    hn.prototype.addAttribute = function(e) {
        if (this.attributes[e]) throw new Error("Attribute " + e + " already exists.");
        this.attributes[e] = [],
        this._attributesList.push(this.attributes[e])
    },
    hn.prototype.addAttributes = function(e) {
        var n = this;
        Fe(e,
        function(e, t) {
            n.addAttribute(t, e)
        })
    },
    hn.prototype.reserve = function(e) {},
    hn.prototype.addElement = function() {
        var e;
        if (0 === this._nbAvailableIndexes) {
            e = this.size,
            this.totalSize += 1;
            for (var t = 0; t < this._attributesList.length; ++t) this._attributesList[t].push(0)
        } else for (this._nbAvailableIndexes -= 1, e = this._availableIndexes[this._nbAvailableIndexes], t = 0; t < this._attributesList.length; ++t) this._attributesList[t][e] = 0;
        return this.exists[e] = 1,
        this.size += 1,
        e
    },
    hn.prototype.removeElement = function(e) {
        return !! (0 < this.size && this.exists[e]) && (this.exists[e] = 0, this.size -= 1, this._availableIndexes[this._nbAvailableIndexes] = e, this._nbAvailableIndexes += 1, !0)
    },
    hn.prototype.clear = function() {
        this.size = 0;
        for (var e = this._nbAvailableIndexes = 0; e < this._attributesList.length; ++e) this._attributesList[e].fill(0)
    },
    hn.prototype.filter = function(e) {
        var t = this.attributes.exists,
        n = this.attributes[e];
        if (!n) throw new Error("attribute " + e + " does not exist");
        for (var r = new Array(this.size), i = 0, o = 0, s = this.totalSize; o < s; ++o) t[i] && (r[i] = n[o], i += 1);
        return r
    },
    hn.prototype.getIndexList = function() {
        for (var e = this.attributes.exists,
        t = new Array(this.size), n = 0, r = 0, i = this.totalSize; r < i; ++r) e[n] && (t[n] = r, n += 1);
        return t
    },
    hn.prototype.remove = hn.prototype.removeElement,
    hn.prototype.add = hn.prototype.addElement;
    var fn = function(e) {
        this._isNode = e,
        this._name = e ? "node": "edge",
        this._nextIndex = 1,
        this._freeIndexes = [],
        this._idToIndex = Object.create(null),
        this._indexToId = [void 0],
        this._size = 0,
        this._flexArrays = [],
        this._defaultValues = [],
        this._flexArraysByName = {},
        this._indexes = []
    };
    function pn(e, t) {
        e._indexToId[t] = void 0,
        e._freeIndexes.push(t)
    }
    function gn(e) {
        return e._freeIndexes.length ? e._freeIndexes.pop() : e._nextIndex++
    }
    fn.prototype.addElements = function(e) {
        for (var t = this,
        n = [], r = 0, i = e.length; r < i; ++r) {
            var o = e[r],
            s = t._idToIndex[o];
            void 0 === s && (s = gn(t), t._idToIndex[o] = s, t._indexToId[s] = o),
            n.push(s)
        }
        this._size += e.length;
        for (var a = 0; a < this._flexArrays.length; ++a) t._flexArrays[a].increaseNbElements(t._size);
        return this._indexes = this.getAllIndexes(),
        n
    },
    fn.prototype.removeElements = function(e) {
        for (var t = this,
        n = 0,
        r = e.length; n < r; ++n) {
            var i = e[n],
            o = t._indexToId[i];
            void 0 !== o && (delete t._idToIndex[o], pn(t, i), t._size -= 1)
        }
        for (var s = 0; s < this._flexArrays.length; ++s) for (var a = t._flexArrays[s], u = t._defaultValues[s], l = 0, d = e.length; l < d; ++l) a.set(e[l], u);
        this._indexes = this.getAllIndexes()
    },
    fn.prototype.filterIds = function(e) {
        for (var t = Object.create(null), n = [], r = 0, i = e.length; r < i; ++r) {
            var o = e[r];
            o in this._idToIndex && !(o in t) && (t[o] = 0, n.push(this._idToIndex[o]))
        }
        return n
    },
    fn.prototype.clear = function() {
        this._idToIndex = Object.create(null),
        this._indexToId = [void 0],
        this._size = 0,
        this._nextIndex = 1,
        this._freeIndexes = [],
        this._indexes = [];
        for (var e = 0; e < this._flexArrays.length; ++e) this._flexArrays[e].reset()
    },
    fn.prototype.has = function(e) {
        return void 0 !== this._indexToId[e]
    },
    fn.prototype.hasId = function(e) {
        return e in this._idToIndex
    },
    fn.prototype.getIndex = function(e, t) {
        void 0 === t && (t = !1);
        var n = this._idToIndex[e];
        if (void 0 === n && t) throw new Error(this._name + ' id "' + e + '" not found');
        return n
    },
    fn.prototype.indexList = function(e) {
        for (var t = new Array(e.length), n = 0, r = e.length; n < r; ++n) {
            var i = this._idToIndex[e[n]];
            if (void 0 === i) throw new Error(this._name + ' id "' + e[n] + '" not found');
            t[n] = i
        }
        return t
    },
    fn.prototype.getAllIndexes = function() {
        for (var e = this._nextIndex,
        t = this._freeIndexes.length,
        n = new Array(e), r = 0; r < e; ++r) n[r] = r;
        for (var i = 0; i < t; ++i) {
            for (var o = this._freeIndexes[i], s = o; n[s] !== o; --s);
            n.splice(s, 1)
        }
        return n.shift(),
        n
    },
    fn.prototype.allIndexes = function() {
        return this._indexes
    },
    fn.prototype.createFlexArray = function(e) {
        var t = e.name;
        if (t && this._flexArraysByName[t]) throw new Error(this._name + ' flexArray "' + t + '" already exists');
        var n = e.
    default;
        void 0 === n && "any" !== e.storage && "resource" !== e.storage && (n = 0);
        var r = this._nextIndex,
        i = new A({
            storage: e.storage,
            size: r,
        default:
            n
        });
        return this._flexArrays.push(i),
        this._defaultValues.push(e.
    default),
        t && (this._flexArraysByName[t] = i),
        i
    },
    fn.prototype.removeFlexArray = function(e) {
        if ("string" == typeof e) {
            var t = e;
            e = this._flexArraysByName[t],
            delete this._flexArraysByName[t]
        }
        var n = this._flexArrays.indexOf(e); - 1 !== n && (this._flexArrays.splice(n, 1), this._defaultValues.splice(n, 1))
    },
    fn.prototype.getFlexArray = function(e) {
        return this._flexArraysByName[e] || null
    },
    fn.prototype.getId = function(e) {
        return this._indexToId[e]
    },
    fn.prototype.getIdList = function(e, t) {
        t || (t = new Array(e.length));
        for (var n = 0; n < e.length; ++n) t[n] = this._indexToId[e[n]];
        return t
    };
    var vn = function() {
        this._BIG_LIST = new Uint8Array([ - 1])[0],
        this._MAX_LIST_SIZE = 8,
        this._capacity = 8,
        this._buffer = new Uint32Array(this._capacity * this._MAX_LIST_SIZE),
        this._sizes = new Uint8Array(this._capacity),
        this._bigLists = [],
        this._nextIndex = 0,
        this._constList = new Array(this._MAX_LIST_SIZE)
    };
    function yn(e, t) {
        var n = new e.constructor(t);
        return n.set(e),
        n
    }
    vn.prototype.addEntry = function(e) {
        return void 0 === e && (e = this._nextIndex++),
        e >= this._capacity && this._expand(e + 1),
        this._sizes[e] = 0,
        e
    },
    vn.prototype.get = function(e) {
        var t = this._sizes[e],
        n = this._MAX_LIST_SIZE * e;
        if (t <= this._MAX_LIST_SIZE) {
            for (var r = 0,
            i = this._constList.length = t; r < i; ++r) this._constList[r] = this._buffer[n + r];
            return this._constList
        }
        if (t === this._BIG_LIST) {
            var o = this._buffer[n];
            return this._bigLists[o]
        }
    },
    vn.prototype.size = function(e) {
        var t = this._sizes[e];
        return t <= this._MAX_LIST_SIZE ? t: this._bigLists[this._buffer[e * this._MAX_LIST_SIZE]].length
    },
    vn.prototype.sizes = function(e) {
        for (var t = this._sizes,
        n = this._bigLists,
        r = this._buffer,
        i = this._MAX_LIST_SIZE,
        o = e.length,
        s = new Array(o), a = 0; a < o; a++) {
            var u = e[a],
            l = t[u];
            s[a] = l <= i ? l: n[r[u * i]].length
        }
        return s
    },
    vn.prototype.addTo = function(e, t) {
        var n = this._sizes[e],
        r = e * this._MAX_LIST_SIZE;
        if (n < this._MAX_LIST_SIZE) this._buffer[r + n] = t,
        this._sizes[e] = n + 1;
        else if (n === this._BIG_LIST) {
            var i = this._buffer[r];
            this._bigLists[i].push(t)
        } else {
            for (var o = new Array(this._MAX_LIST_SIZE), s = 0; s < this._MAX_LIST_SIZE; ++s) o[s] = this._buffer[r + s];
            o.push(t),
            this._bigLists.push(o),
            this._sizes[e] = this._BIG_LIST,
            this._buffer[r] = this._bigLists.length - 1
        }
    },
    vn.prototype.removeFrom = function(e, t) {
        this.removeFromAndGetSize(e, t)
    },
    vn.prototype.removeFromAndGetSize = function(e, t) {
        var n = this._sizes[e],
        r = this._MAX_LIST_SIZE * e;
        if (n <= this._MAX_LIST_SIZE) {
            for (var i = r,
            o = r + n; i < o; ++i) if (this._buffer[i] === t) return n -= 1,
            this._buffer[i] = this._buffer[o - 1],
            this._sizes[e] = n
        } else if (n === this._BIG_LIST) {
            var s = this._buffer[r],
            a = this._bigLists[s],
            u = a.indexOf(t);
            if ( - 1 !== u) return a.splice(u, 1),
            a.length
        }
        throw new Error('topology: Table: "removeFrom" failed, should not happen')
    },
    vn.prototype.reserve = function(e) {
        this._capacity < e && this._expand(e)
    },
    vn.prototype._expand = function(e) {
        this._capacity = Math.pow(2, Math.ceil(Math.log2(e))),
        this._buffer = yn(this._buffer, this._capacity * this._MAX_LIST_SIZE),
        this._sizes = yn(this._sizes, this._capacity)
    };
    var mn = function(e, t) {
        this._graph = e,
        this._onUpdate = t,
        this._nodesToUpdate = this._graph._createIndexSet(!0),
        this._edgesToUpdate = this._graph._createIndexSet(!1),
        this._updateAll = !1,
        this._timeout = null
    };
    function _n(e) {
        var t, n;
        e._updateAll ? (t = e._graph._allIndexes(!0).slice(), n = e._graph._allIndexes(!1).slice(), e._nodesToUpdate.clear(), e._edgesToUpdate.clear(), e._updateAll = !1) : (t = e._nodesToUpdate.clear(), n = e._edgesToUpdate.clear()),
        e._timeout = null,
        e._onUpdate({
            nodes: t,
            edges: n
        })
    }
    function bn(e) {
        e._timeout || (e._timeout = setTimeout(_n, 0, e))
    }
    mn.prototype.updateAll = function() {
        this._updateAll = !0,
        bn(this)
    },
    mn.prototype.updateNodes = function(e) {
        this._nodesToUpdate.addMultiple(e),
        this._edgesToUpdate.addMultiple(this._graph._collectAdjacentEdges(e)),
        bn(this)
    };
    var xn = J("webworker-threads", {
        throwOnError: !(mn.prototype.updateEdges = function(e) {
            this._edgesToUpdate.addMultiple(e),
            bn(this)
        })
    }),
    wn = null;
    function An(e) {
        return wn ? new wn(new Function(e)) : "undefined" == typeof URL || -1 !== navigator.appVersion.indexOf("MSIE 10") ? new En(e) : function(e) {
            try {
                var t = new Blob([e], {
                    type: "application/javascript"
                }),
                n = URL.createObjectURL(t),
                r = new Worker(n);
                return r
            } catch(t) {
                return new En(e)
            }
        } (e)
    }
    xn && (wn = xn.Worker);
    var En = function(e) {
        this._f = new Function("self", e),
        this._main = !0,
        this._listeners = [],
        this._terminated = !1,
        this._otherSide = new Cn(this),
        this._f(this._otherSide)
    };
    En.prototype.terminate = function() {
        this._terminated = !1,
        this._otherSide._terminated = !0
    },
    En.prototype.addEventListener = Sn,
    En.prototype.postMessage = In;
    var Cn = function(e) {
        this._main = !1,
        this._listeners = [],
        this._terminated = !1,
        this._otherSide = e
    };
    function Sn(e, t) {
        this._listeners.push(t)
    }
    function In(e) {
        setTimeout(Tn, 0, this._otherSide, {
            data: e
        })
    }
    function Tn(e, t) {
        if (!e._terminated) for (var n = 0; n < e._listeners.length; ++n) e._listeners[n](t)
    }
    Cn.prototype.addEventListener = Sn,
    Cn.prototype.postMessage = In;
    var Nn = {
        FlexArray: A,
        EventTarget: k,
        requestAnimFrame: M,
        cancelAnimFrame: function(e) {
            e && z(e)
        },
        getBrowser: O,
        parseColor: G,
        colorToHexa: V,
        createXmlDocument: rt,
        serializeXMLDocument: it,
        get createCanvas() {
            return tt
        },
        getPixelRatio: st,
        dataUrlToBlob: function(e) {
            var t, n, r, i = ";base64,";
            if ( - 1 === e.indexOf(i)) return n = (t = e.split(","))[0].split(":")[1],
            ut(r = decodeURIComponent(t[1]), n);
            n = (t = e.split(i))[0].split(":")[1];
            for (var o = (r = window.atob(t[1])).length, s = new Uint8Array(o), a = 0; a < o; ++a) s[a] = r.charCodeAt(a);
            return ut([s], n)
        },
        createBlob: ut,
        isBlob: function(e) {
            return "undefined" != typeof Blob && e instanceof Blob || e instanceof at
        },
        promptDownload: lt,
        computeTextWidth: function(e, t, n, r) {
            var i = document.createElement("div");
            document.body.appendChild(i),
            i.style.fontFamily = t,
            i.style.fontSize = n + "px",
            i.style.fontStyle = "italic" === r ? "italic": "normal",
            i.style.fontWeight = "bold" === r ? "bold": "normal",
            i.innerHTML = e;
            var o = i.offsetWidth;
            return i.parentElement.removeChild(i),
            o
        },
        resizeElement: dt,
        createAndAppend: function(e, t, n, r, i) {
            var o = nt().createElement(t);
            if (n && Fe(n,
            function(e, t) {
                void 0 !== e && o.setAttribute(t, e)
            }), void 0 !== r || i) {
                "[object Object]" === Object.prototype.toString.call(r) && (r = JSON.stringify(r));
                var s = document.createTextNode(r);
                o.appendChild(s)
            }
            return e.appendChild(o),
            o
        },
        setAttributes: ct,
        createSvgElement: ht,
        bindEvt: ft,
        unbindEvt: pt,
        getImage: gt,
        fetch: vt,
        isHTMLElement: function(e) {
            return "undefined" != typeof HTMLElement && e instanceof HTMLElement
        },
        getClosestValue: function(e, t, n) {
            for (var r = Math.abs(t - e[0]), i = 0, o = 1; o < e.length; ++o) {
                var s = Math.abs(t - e[o]);
                s < r && (r = s, i = o)
            }
            return n ? i: e[i]
        },
        isPowerOfTwo: function(e) {
            return ie(Math.log(e) / Math.LN2)
        },
        isInteger: ie,
        computeRange: function(e, t, n) {
            if (1 === n) return [e];
            for (var r = (t - e) / (n - 1), i = new Array(n), o = 0; o < n; ++o) i[o] = e + r * o;
            return i
        },
        findFunctionParameter: function(e, t, n, r, i) {
            for (var o = e(n) <= e(r), s = n, a = r, u = 0; u < oe; ++u) {
                var l = (s + a) / 2,
                d = e(l);
                if (Math.abs(d - t) <= i) return l;
                d < t ? o ? s = l: a = l: o ? a = l: s = l
            }
            return l
        },
        getUpperPowerOf: se,
        createCounter: function() {
            var e = 0;
            return function() {
                return++e
            }
        },
        convertToString: function(e) {
            var t = typeof e;
            return "string" === t ? e: "function" === t || "number" === t || "boolean" === t ? e.toString() : null === e ? "null": void 0 === e ? "undefined": JSON.stringify(e)
        },
        toPropertyPath: ae,
        throttle: ue,
        getFunctionBody: function(e) {
            var t = e.toString();
            return t.substring(t.indexOf("{") + 1, t.lastIndexOf("}"))
        },
        convertToFloat: de,
        isParsableNumber: function(e) {
            return ! isNaN(de(e))
        },
        forEach: Fe,
        reduce: De,
        map: function(e, t) {
            if (Array.isArray(e)) return e.map(t);
            if (_e(e)) {
                for (var n = {},
                r = Object.keys(e), i = 0; i < r.length; ++i) {
                    var o = r[i];
                    n[o] = t(e[o])
                }
                return n
            }
            throw new Error("map: invalid argument " + JSON.stringify(e))
        },
        merge: function(e, t) {
            for (var n = Object.keys(t), r = 0, i = n.length; r < i; ++r) {
                var o = n[r];
                t[o] = e[o]
            }
            return t
        },
        shallowCopy: function(e) {
            var n = {};
            return Fe(e,
            function(e, t) {
                n[t] = e
            }),
            n
        },
        stringify: function(e) {
            return void 0 === e ? "undefined": JSON.stringify(e)
        },
        deepCopy: Oe,
        updateObject: function n(r, e) {
            Fe(e,
            function(e, t) {
                "object" == typeof t && null !== t ? ("object" == typeof r[e] && null !== r[e] || (r[e] = {}), n(r[e], t)) : r[e] = t
            })
        },
        extendList: function(t, e) {
            e.forEach(function(e) { - 1 === t.indexOf(e) && t.push(e)
            })
        },
        propertyAccess: Be,
        hasProperty: function(e, t) {
            for (var n = t.indexOf("."); e && -1 !== n;) e = e[t.substr(0, n)],
            n = (t = t.substr(n + 1)).indexOf(".");
            return !! e && e.hasOwnProperty(t)
        },
        setPathValue: function(e, t, n) {
            for (var r = t.indexOf("."); - 1 !== r;) {
                var i = t.substr(0, r),
                o = e[i];
                o || (o = {},
                e[i] = o),
                r = (t = t.substr(r + 1)).indexOf("."),
                e = o
            }
            e[t] = n
        },
        bindProperty: function(e, t, n, r) {
            for (var i = t.indexOf("."); - 1 !== i;) {
                var o = t.substr(0, i),
                s = e[o];
                s || (s = {},
                e[o] = s),
                i = (t = t.substr(i + 1)).indexOf("."),
                e = s
            }
            var a = e[t];
            Object.defineProperty(e, t, {
                get: n ||
                function() {
                    return a
                },
                set: r || je,
                configurable: !0
            })
        },
        unbindProperty: function(e, t) {
            for (var n = t.indexOf("."), r = t; e && -1 !== n;) e = e[t.substr(0, n)],
            n = (t = t.substr(n + 1)).indexOf(".");
            if (!e) throw new Error('No property "' + r + '" exist.');
            var i = e[t];
            Object.defineProperty(e, t, {
                value: i,
                configurable: !0
            })
        },
        concat: function() {
            for (var e = arguments,
            t = arguments.reduce(function(e, t) {
                return e + (t ? t.length: 0)
            },
            0), n = new Array(t), r = 0, i = 0; i < arguments; ++i) if (e[i]) for (var o = 0; o < arguments[i].length; ++o) n[r] = e[i][o],
            ++r;
            return n
        },
        removeDuplicates: function(e) {
            for (var t = [], n = 0, r = e.length; n < r; ++n) {
                var i = e[n]; - 1 === t.indexOf(i) && t.push(i)
            }
            return t
        },
        setReadOnly: Ue,
        isNotNative: We,
        kill: Ge,
        flatten: qe,
        setProperty: Ye,
        unflatten: Ve,
        getFlattenedKeys: $e,
        getOptions: Ze,
        Position: Gt,
        PositionList: $t,
        rectangleFromCenterAndDimensions: qt,
        lineFromBoundaries: Vt,
        PathMap: sn,
        objToValueList: on,
        roundedRect: function(e, t, n, r, i, o, s, a, u) {
            if (0 === s) return e.rectangle(t, {
                x: n + i / 2,
                y: r + o / 2
            },
            {
                zx: i / 2,
                zy: o / 2
            },
            a, u);
            var l = e.updateComposite(t, 7);
            return l[0] = e.quadrilateral(l[0], {
                x: n,
                y: r + s - 1
            },
            {
                x: n + i,
                y: r + s - 1
            },
            {
                x: n + i,
                y: r + o - s + 1
            },
            {
                x: n,
                y: r + o - s + 1
            },
            a, u),
            l[1] = e.quadrilateral(l[1], {
                x: n + s,
                y: r
            },
            {
                x: n + i - s,
                y: r
            },
            {
                x: n + i - s,
                y: r + s
            },
            {
                x: n + s,
                y: r + s
            },
            a, u),
            l[2] = e.quadrilateral(l[2], {
                x: n + s,
                y: r + o - s
            },
            {
                x: n + i - s,
                y: r + o - s
            },
            {
                x: n + i - s,
                y: r + o
            },
            {
                x: n + s,
                y: r + o
            },
            a, u),
            l[3] = e.circle(l[3], {
                x: n + s,
                y: r + s
            },
            0, s, a, u),
            l[4] = e.circle(l[4], {
                x: n + i - s,
                y: r + s
            },
            0, s, a, u),
            l[5] = e.circle(l[5], {
                x: n + s,
                y: r + o - s
            },
            0, s, a, u),
            l[6] = e.circle(l[6], {
                x: n + i - s,
                y: r + o - s
            },
            0, s, a, u),
            e.composite(t, l)
        },
        circleStroke: cn,
        smartRequire: J,
        now: ee,
        getDate: te,
        getTime: ne,
        createDelayer: function() {
            var n = null;
            return {
                fire: function(e, t) {
                    n && (clearTimeout(n), n = null),
                    n = setTimeout(function() {
                        n = null,
                        e()
                    },
                    t)
                },
                stop: function() {
                    n && (clearTimeout(n), n = null)
                }
            }
        },
        isBool: ce,
        isNumber: he,
        isPositive: fe,
        isStrictPositive: pe,
        isString: ge,
        isText: ve,
        isColor: ye,
        isOptionalColor: me,
        isEnum: function(e) {
            return new Function("x", "return " + e.map(function(e) {
                return "(x === " + e + ")"
            }).join("||"))
        },
        createWorker: An
    };
    function kn(e, t, n, r, i, o) {
        var s, a, u, l, d, c, h, f, p;
        return a = r - e,
        u = i - t,
        n + o < (l = Math.sqrt(a * a + u * u)) ? null: l < Math.abs(n - o) ? null: (p = t + u * (s = (n * n - o * o + l * l) / (2 * l)) / l, [[(f = e + a * s / l) + (c = (d = Math.sqrt(n * n - s * s)) / l * -u), p + (h = a * (d / l))], [f - c, p - h]])
    }
    function Ln(e, t, n, r, i, o) {
        if (0 <= e - i && n - i < 0) return 1;
        if (e - i < 0 && 0 <= n - i) return - 1;
        if (e - i == 0 && n - i == 0) return 0 <= t - r || 0 <= r - o ? t - r: r - t;
        var s = (e - i) * (r - o) - (n - i) * (t - o);
        return s < 0 ? 1 : 0 < s ? -1 : (e - i) * (e - i) + (t - o) * (t - o) - ((n - i) * (n - i) + (r - o) * (r - o))
    }
    function Rn(e, t, n) {
        var r = e[2],
        i = Math.abs(e[0] - t),
        o = Math.abs(e[1] - n);
        return i + o <= r || !(r < i || r < o) && Math.sqrt(i * i + o * o) < r + 1e-12
    }
    function zn(e, t, n, r) {
        var i = e[0] - t,
        o = e[1] - n,
        s = e[2] - r;
        return i * i + o * o < s * s + 1e-6
    }
    function Mn(e, t) {
        var n = Math.max(t.minX, Math.min(t.maxX, e[0])),
        r = Math.max(t.minY, Math.min(t.maxY, e[1])),
        i = e[0] - n,
        o = e[1] - r;
        return i * i + o * o < e[2] * e[2]
    }
    function Pn(e, t, n, r, i, o, s, a) {
        var u, l, d, c, h = .5 * ( - (l = o) * (d = s) + r * ( - (u = i) + d) + n * (l - (c = a)) + u * c),
        f = 1 / (2 * h) * (r * s - n * a + (a - r) * e + (n - s) * t),
        p = 1 / (2 * h) * (n * o - r * i + (r - o) * e + (i - n) * t);
        return 0 < f && 0 < p && 0 < 1 - f - p
    }
    function Fn(e, t, n, r, i, o) {
        return n <= e && e <= i && r <= t && t <= o
    }
    function Dn(e, t, n, r) {
        void 0 === r && (r = n.length);
        for (var i = r - 1,
        o = !1,
        s = 0; s < r; ++s)(n[s].y < t && n[i].y >= t || n[i].y < t && n[s].y >= t) && (n[s].x <= e || n[i].x <= e) && (o ^= n[s].x + (t - n[s].y) / (n[i].y - n[s].y) * (n[i].x - n[s].x) < e),
        i = s;
        return o
    }
    function On(e, t) {
        return e < 0 ? e += t: t <= e && (e -= t),
        e
    }
    function Bn(e, t) {
        var n = On(t - 1, e.length),
        r = On(t + 1, e.length);
        if (Ht(e[n], e[t], e[r]) > Math.PI) return ! 1;
        for (var i = 0; i < e.length; ++i) if (i !== t && i !== n && i !== r && Pn(e[i].x, e[i].y, e[n].x, e[n].y, e[r].x, e[r].y, e[t].x, e[t].y)) return ! 1;
        return ! 0
    }
    function jn(e) {
        if (3 === e.length) return [[e[0].index, e[1].index, e[2].index]];
        var t = function(e) {
            for (var t = 0; t < e.length; ++t) if (Bn(e, t)) return t;
            return 0
        } (e),
        n = [e[On(t - 1, e.length)].index, e[t].index, e[On(t + 1, e.length)].index];
        e.splice(t, 1);
        var r = jn(e);
        return r.push(n),
        r
    }
    function Un(e) {
        for (var t = e.length,
        n = (t - 2) * Math.PI, r = 0, i = 0; i < t; ++i) {
            r += Ht(e[On(i - 1, t)], e[i], e[On(i + 1, t)])
        }
        var o = e.slice();
        for (i = 0; i < o.length; ++i) o[i].index = i;
        return n < r - 1e-4 && o.reverse(),
        jn(o)
    }
    function Hn(e, t, n, r, i, o, s) {
        return (s = s || {}).x = (e + n) / i + (r - t) / o,
        s.y = (t + r) / i + (e - n) / o,
        s
    }
    function Xn(e, t, n, r, i, o, s, a) {
        return (a = a || {}).x = (1 - e) * (1 - e) * t + 2 * (1 - e) * e * o + e * e * r,
        a.y = (1 - e) * (1 - e) * n + 2 * (1 - e) * e * s + e * e * i,
        a
    }
    function Wn(e, t, n, r, i, o, s, a, u) {
        var l = jt(n, r, i, o);
        if (Math.abs(e - n) > l || Math.abs(t - r) > l) return ! 1;
        var d = .5,
        c = jt(e, t, n, r) < jt(e, t, i, o) ? -.01 : .01,
        h = 100;
        Xn(d, n, r, i, o, s, a, Vn);
        for (var f, p = jt(e, t, Vn.x, Vn.y); 0 < h--&&0 <= d && d <= 1 && u < p && (.001 < c || c < -.001);) f = p,
        Xn(d, n, r, i, o, s, a, Vn),
        f < (p = jt(e, t, Vn.x, Vn.y)) ? d += c = -c / 2 : d + c < 0 || 1 < d + c ? (c /= 2, p = f) : d += c;
        return p < u
    }
    var Gn = 7;
    function qn(e, t, n, r) {
        return (r = r || {}).x1 = e - n * Gn,
        r.y1 = t,
        r.x2 = e,
        r.y2 = t + n * Gn,
        r
    }
    function Yn(e, t, n, r, i, o, s, a, u, l) {
        var d = (1 - e) * (1 - e) * (1 - e),
        c = 3 * e * (1 - e) * (1 - e),
        h = 3 * e * e * (1 - e),
        f = e * e * e;
        return (l = l || {}).x = d * t + c * o + h * a + f * r,
        l.y = d * n + c * s + h * u + f * i,
        l
    }
    var Vn = {};
    function $n(e, t, n, r, i, o, s, a, u, l, d) {
        var c = jt(n, r, s, a);
        if (Math.abs(e - n) > c || Math.abs(t - r) > c) return ! 1;
        for (var h, f = .5,
        p = jt(e, t, n, r) < jt(e, t, i, o) ? -.01 : .01, g = 100, v = Yn(f, n, r, i, o, s, a, u, l), y = jt(e, t, v.x, v.y); 0 < g--&&0 <= f && f <= 1 && d < y && (.001 < p || p < -.001);) h = y,
        Yn(f, n, r, i, o, s, a, u, l, v),
        h < (y = jt(e, t, v.x, v.y)) ? f += p = -p / 2 : f + p < 0 || 1 < f + p ? (p /= 2, y = h) : f += p;
        return y < d
    }
    function Zn(e, t, n, r, i, o) {
        var s = Math.sqrt,
        a = Math.log,
        u = e - 2 * n + i,
        l = t - 2 * r + o,
        d = 2 * n - 2 * e,
        c = 2 * r - 2 * t,
        h = 4 * (u * u + l * l),
        f = 4 * (u * d + l * c),
        p = d * d + c * c,
        g = 2 * s(h + f + p),
        v = s(h),
        y = 2 * h * v,
        m = 2 * s(p),
        _ = f / v;
        return (y * g + v * f * (g - m) + (4 * p * h - f * f) * a((2 * v + _ + g) / (_ + m))) / (4 * y)
    }
    var Qn = .01,
    Jn = {};
    function Kn(e, t, n, r, i, o, s, a) {
        for (var u = 0,
        l = e,
        d = t,
        c = Qn; c <= 1; c += Qn) Yn(c, e, t, s, a, n, r, i, o, Jn),
        u += jt(l, d, Jn.x, Jn.y),
        l = Jn.x,
        d = Jn.y;
        return u
    }
    var er = {
        circleCircleIntersection: kn,
        circleSortCompare: Ln,
        circleContainsPoint: Rn,
        circleContainsCircle: zn,
        circleIntersectsBox: Mn,
        lineFromPoint: kt,
        isPointInLine: Lt,
        distanceFromLine: function(e, t, n, r, i, o) {
            var s = i - n,
            a = o - r;
            return Math.abs(a * e - s * t + i * r + i * o) / Math.sqrt(s * s + a * a)
        },
        vectorToLine: function(e, t, n, r, i, o) {
            var s, a, u = i - n,
            l = o - r,
            d = l / u,
            c = r - d * n;
            return 0 === u ? (s = n, a = t) : a = d * (s = (u * e + l * t - c * l) / (u + d * l)) + c,
            {
                x: s - e,
                y: a - t
            }
        },
        twoSegmentsIntersect: Rt,
        lineAngle: Mt,
        orthogonal: Pt,
        normalize: Ft,
        isPointInsideRectangle: function(e, t, n, r, i, o) {
            return n <= e && e <= i && r <= t && t <= o
        },
        segmentIntersection: Dt,
        lineRectangleIntersection: Ot,
        clipLine: function(e, t, n, r, i) {
            for (var o, s, a, u = i[0], l = i[1], d = i[2], c = i[3], h = 0, f = 1, p = n - e, g = r - t, v = 0; v < 4; v++) {
                if (0 === v && (o = -p, s = -(u - e)), 1 === v && (o = p, s = l - e), 2 === v && (o = -g, s = -(d - t)), 3 === v && (o = g, s = c - t), a = s / o, 0 === o && s < 0) return null;
                if (o < 0) {
                    if (f < a) return null;
                    h < a && (h = a)
                } else if (0 < o) {
                    if (a < h) return null;
                    a < f && (f = a)
                }
            }
            return [[e + h * p, t + h * g], [e + f * p, t + f * g]]
        },
        lineIntersection: function(e, t, n, r, i, o, s, a) {
            var u, l, d, c, h = {
                x: null,
                y: null,
                onLine1: !1,
                onLine2: !1
            };
            return 0 == (u = (a - o) * (n - e) - (s - i) * (r - t)) || (c = (n - e) * (l = t - o) - (r - t) * (d = e - i), l = ((s - i) * l - (a - o) * d) / u, d = c / u, h.x = e + l * (n - e), h.y = t + l * (r - t), 0 < l && l < 1 && (h.onLine1 = !0), 0 < d && d < 1 && (h.onLine2 = !0)),
            h
        },
        unitVector: Xt,
        rotate: Bt,
        distance: jt,
        squaredDistance: Ut,
        squareContainsSquare: function(e, t, n, r, i, o) {
            return r - o <= e - n && r + o <= e + n && i - o <= t - n && i + o <= t + n
        },
        slope: function(e, t) {
            return (e.y - t.y) / (e.x - t.x)
        },
        angle: Ht,
        isPointInTriangle: Pn,
        incenter: function(e, t, n, r, i, o) {
            var s = jt(n, r, i, o),
            a = jt(e, t, i, o),
            u = jt(e, t, n, r),
            l = s + a + u;
            return 0 === l ? {
                x: e,
                y: t
            }: {
                x: (s * e + a * n + u * i) / l,
                y: (s * t + a * r + u * o) / l
            }
        },
        centroid: function(e, t, n, r, i, o) {
            return {
                x: (e + n + i) / 3,
                y: (t + r + o) / 3
            }
        },
        isPointInRectangle: Fn,
        isPointInPolygon: Dn,
        triangulatePolygon: Un,
        getQuadraticControlPoints: Hn,
        getPointOnQuadraticCurve: Xn,
        isPointOnQuadraticCurve: Wn,
        SELF_LOOP_SIZE_MULTIPLIER: Gn,
        getSelfLoopControlPoints: qn,
        getPointOnBezierCurve: Yn,
        isPointOnBezierCurve: $n,
        quadraticCurveLength: Zn,
        cubicCurveLength: Kn
    };
    function tr(e, t, n, r, i, o) {
        var s, a, u, l, d, c, h = 0;
        for (u = 0; u < r; u++) for (l = 0; l < r; l++) {
            var f = o[u],
            p = o[l];
            f !== p && (a = e[f][p], (s = 1 / ((a *= i) * a)) && (d = t[f] - t[p], c = n[f] - n[p], h += s * Math.pow(a - Math.sqrt(d * d + c * c), 2)))
        }
        return h
    }
    function nr(e, t, n, r, i, o, s) {
        var a, u, l, d, c, h, f = 0;
        if ( - 1 === i) return 0;
        for (a = 0; a < r; a++) for (u = 0; u < r; u++) {
            var p = s[a],
            g = s[u];
            p === g || p !== i && g !== i || (l = e[p][g], (d = 1 / ((l *= o) * l)) && (c = t[p] - t[g], h = n[p] - n[g], f += d * Math.pow(l - Math.sqrt(c * c + h * h), 2)))
        }
        return f
    }
    function rr(e, t, n, r, i, o, s, a) {
        s = s || 0;
        var u, l, d, c, h, f, p, g = 0,
        v = 0;
        for (u = 0; u < r; u++) for (l = 0; l < r; l++) {
            var y = a[u],
            m = a[l];
            y !== m && (d = e[y][m], (c = 1 / ((d *= o) * d)) && (h = t[y] - t[m], f = n[y] - n[m], g += p = c * Math.pow(d - Math.sqrt(h * h + f * f), 2), y !== i && m !== i || (v += p)))
        }
        return (1 - s) * g + s * v
    }
    function ir(e, t, n, r, i, o, s, a, u) {
        var l, d, c, h, f, p = t,
        g = n;
        s = s || 0,
        -1 === (i = void 0 === i ? -1 : i) && (s = 0);
        for (var v = t[i], y = n[i], m = 0; m < r; m++) {
            var _ = a[m],
            b = u(e[i][m]),
            x = s / (b * b);
            if (0 !== b) {
                var w, A = 0,
                E = 0,
                C = 0,
                S = t[_],
                I = n[_];
                for (w = 0; w < r; w++) {
                    var T, N, k, L, R, z = a[w];
                    z !== _ && (N = 1 / ((T = e[_][z] * o) * T), k = t[z], L = n[z], 0 !== N && (E += (1 - s) * N * (k + T * (d = S - k) * (R = (h = d * d + (c = I - L) * c) < 1e-6 ? 0 : 1 / Math.sqrt(h))), C += (1 - s) * N * (L + T * (I - L) * R)), A += N)
                }
                0 !== (l = (1 - s) * A + x) && (h = (h = (d = S - v) * d + (c = I - y) * c) < 1e-6 ? 0 : 1 / Math.sqrt(h), f = 0 === b ? 0 : x * (b * h), p[_] = (E + f * t[_]) / l, g[_] = (C + f * n[_]) / l)
            }
        }
        return {
            X: p,
            Y: g
        }
    }
    function or(o, s, a, u) {
        void 0 === o && (o = function(e, t) {
            return e - t
        }),
        void 0 === s && (s = []),
        void 0 === a && (a = {}),
        void 0 === u && (u = function(e) {
            return e
        });
        var l = s.length;
        function t(e) {
            for (;;) {
                var t = 2 * e + 1,
                n = t + 1,
                r = e;
                if (t < l && o(s[t], s[r]) < 0 && (r = t), n < l && o(s[n], s[r]) < 0 && (r = n), r === e) return e;
                var i = s[r];
                s[r] = s[e],
                s[e] = i,
                a[u(s[r])] = r,
                a[u(i)] = e,
                e = r
            }
        }
        var e = {
            heapify: t,
            pop: function() {
                if (! (l <= 0)) {
                    if (1 === l) return l--,
                    s[0];
                    var e = s[0];
                    return s[0] = s[l - 1],
                    l--,
                    t(0),
                    e
                }
            },
            decreaseKey: function(e, t) {
                for (void 0 !== t && (s[e] = t, a[u(t)] = e); 0 < e;) {
                    var n = e - 1 >> 1;
                    if (! (0 < o(s[n], s[e]))) break;
                    var r = s[e];
                    s[e] = s[n],
                    s[n] = r,
                    a[u(s[e])] = e,
                    e = a[u(r)] = n
                }
                return e
            },
            min: function() {
                return s[0]
            },
            remove: function(e) {
                return this.decreaseKey(e, Number.NEGATIVE_INFINITY),
                this.pop()
            },
            push: function(e) {
                var t = ++l - 1;
                for (s[t] = e; 0 < t;) {
                    var n = t - 1 >> 1;
                    if (! (0 < o(s[n], s[t]))) break;
                    var r = s[t];
                    s[t] = s[n],
                    s[n] = r,
                    a[u(s[t])] = t,
                    t = a[u(r)] = n
                }
                return t
            },
            empty: function() {
                return l <= 0
            },
            toArray: function() {
                return s.slice(0, l)
            }
        };
        return Object.defineProperty(e, "keys", {
            get: function() {
                return a
            },
            enumerable: !0
        }),
        Object.defineProperty(e, "size", {
            get: function() {
                return l
            },
            enumerable: !0
        }),
        e
    }
    function sr(e) {
        var t = e.sources,
        n = e.targets,
        r = e.weights,
        i = e.source,
        o = e.target,
        s = e.undirected;
        void 0 === s && (s = !1);
        var a = e.indexes,
        u = e.N;
        if (u = a ? a.length: u, !isFinite(u) || 0 === u) throw new Error("Invalid number of nodes " + u);
        var l, d, c, h, f, p, g, v, y, m, _, b = new Float32Array(u),
        x = new Int32Array(u),
        w = {},
        A = Number.POSITIVE_INFINITY;
        if (!r) for (l = 0, r = new Uint8Array(u); l < u; l++) r[l] = 1;
        if (!a) for (l = 0, a = new Uint32Array(u); l < u; l++) a[l] = l + 1;
        for (l = 0; l < u; l++) b[l] = A,
        x[l] = -1,
        w[a[l]] = l;
        for (b[w[i]] = 0, l = 1, d = u; l <= d; l++) {
            for (_ = !1, c = 0, h = r.length; c < h; c++) v = t[c],
            y = n[c],
            p = w[v],
            g = w[y],
            void 0 !== p && void 0 !== g && (m = r[c], f = b[p] + m, b[p] !== A && f < b[g] && (b[g] = f, x[g] = v, _ = !0), s && (f = b[g] + m, b[g] !== A && f < b[p] && (b[p] = f, x[p] = y, _ = !0)));
            if (!_) break
        }
        if (_) for (l = 0, d = r.length; l < d; l++) if (v = t[l], y = n[l], p = w[v], g = w[y], void 0 !== p && void 0 !== g && (m = r[l], b[p] + m < b[g])) return null;
        var E = null,
        C = null;
        if (void 0 !== o) {
            var S = w[o];
            if (void 0 !== S && b[S] !== A) {
                for (l = o, E = []; - 1 !== l; l = x[w[l]]) E.push(l);
                E = E.reverse(),
                C = b[S]
            }
        }
        return {
            distances: b,
            path: E,
            pathLength: C
        }
    }
    function ar(e, t, n, r, i, o, s) {
        var a, u, l = r ? r.length: e.length,
        d = new Float32Array(l),
        c = new Int32Array(l),
        h = new Uint32Array(l),
        f = Number.POSITIVE_INFINITY,
        p = {};
        if (0 === l) return {
            distances: d,
            path: null,
            pathLength: null
        };
        if (!r) for (a = 0, r = new Uint32Array(l); a < l; a++) r[a] = a + 1;
        if (!i) for (a = 0, i = {}; a < l; a++) i[r[a]] = a;
        for (a = 0; a < l; a++) d[a] = f,
        c[a] = -1,
        h[a] = p[a] = a;
        var g = or(function(e, t) {
            return d[e] - d[t]
        },
        h, p);
        for (d[i[t]] = 0, g.decreaseKey(p[i[t]]); 0 !== g.size;) {
            var v = g.pop(),
            y = d[v],
            m = e[v];
            if (y === f) break;
            for (a = 0, u = m.nodes.length; a < u; a++) {
                var _ = m.nodes[a],
                b = o ? 1 : s ? s(r[v], _) : m.weights[a],
                x = i[_];
                if (void 0 !== x) {
                    var w = y + b;
                    w < d[x] && (d[x] = w, c[x] = v, g.decreaseKey(p[x]))
                }
            }
        }
        var A = null,
        E = null;
        if (void 0 !== n) {
            var C = i[n];
            if (d[C] !== f) {
                for (a = C, A = []; - 1 !== a; a = c[a]) A.push(r[a]);
                A = A.reverse(),
                E = d[n]
            }
        }
        return {
            distances: d,
            path: A,
            pathLength: E
        }
    }
    function ur(e) {
        var t, n, r, i, o, s, a = e.sources,
        u = e.targets,
        l = e.weights,
        d = e.indexes,
        c = e.adjacency,
        h = e.undirected,
        f = e.ignoreWeights,
        p = Number.POSITIVE_INFINITY,
        g = d ? d.length: c.length;
        if (!d) for (t = 0, d = new Uint32Array(g); t < g; t++) d[t] = t + 1;
        var v = new Array(g),
        y = {};
        for (t = 0; t < g; t++) {
            for (v[t] = new Float32Array(g), r = 0; r < g; r++) v[t][r] = t === r ? 0 : p;
            y[d[t]] = t
        }
        var m = g,
        _ = l.length;
        for (a = a.slice(), u = u.slice(), l = l.slice(), t = 0; t < g; t++) a[_ + t] = m,
        u[_ + t] = d[t],
        l[_ + t] = 0,
        f && (l[t] = 1);
        var b = sr({
            sources: a,
            targets: u,
            weights: l,
            undirected: h,
            N: g + 1,
            source: m
        });
        if (null === b) throw new Error("Graph has negative weight loops");
        for (i = b.distances, t = 0, n = l.length; t < n; t++) o = y[a[t]],
        s = y[u[t]],
        void 0 !== o && void 0 !== s && (l[t] = l[t] + i[o] - i[s]);
        for (a = a.slice(0, _), u = u.slice(0, _), l = l.slice(0, _), t = 0; t < g; t++) {
            var x = d[t];
            for (o = y[x], i = ar(c, x, void 0, d, y, f).distances, r = 0; r < g; r++) v[t][r] = t === r ? 0 : i[r]
        }
        return v
    }
    var lr, dr = (function(e) { !
        function() {
            function t(e) {
                if (! (this instanceof t)) return new t(e);
                this.points = e || []
            }
            function v(e, t, n) {
                return 0 < (t[0] - e[0]) * (n[1] - e[1]) - (t[1] - e[1]) * (n[0] - e[0])
            }
            function y(e, t) {
                return v(e, t.dest, t.orig)
            }
            function m(e, t) {
                return v(e, t.orig, t.dest)
            }
            function _(e, t) {
                return y(e.dest, t)
            }
            function b(e, t, n, r) {
                if (e[0] === r[0] && e[1] === r[1] || t[0] === r[0] && t[1] === r[1] || n[0] === r[0] && n[1] === r[1]) return ! 1;
                var i = e[0] * e[0] + e[1] * e[1],
                o = t[0] * t[0] + t[1] * t[1],
                s = n[0] * n[0] + n[1] * n[1],
                a = r[0] * r[0] + r[1] * r[1],
                u = s - a,
                l = n[1] - r[1],
                d = n[1] * a - s * r[1],
                c = n[0] - r[0],
                h = n[0] * a - s * r[0],
                f = n[0] * r[1] - n[1] * r[0];
                return 1 < e[0] * (t[1] * u - o * l + d) - e[1] * (t[0] * u - o * c + h) + i * (t[0] * l - t[1] * c + f) - t[0] * d + t[1] * h - o * f
            }
            function s(e, t, n) {
                this.onext = e,
                this.rot = t,
                this.orig = n,
                this.mark = !1
            }
            function x(e, t) {
                var n = new s(null, null, e),
                r = new s(null, null, null),
                i = new s(null, null, t),
                o = new s(null, null, null);
                return n.onext = n,
                i.onext = i,
                (r.onext = o).onext = r,
                (((n.rot = r).rot = i).rot = o).rot = n
            }
            function w(e, t) {
                var n = e.onext.rot,
                r = t.onext.rot,
                i = e.onext,
                o = r.onext,
                s = n.onext;
                e.onext = t.onext,
                t.onext = i,
                n.onext = o,
                r.onext = s
            }
            function A(e, t) {
                var n = x(e.dest, t.orig);
                return w(n, e.lnext),
                w(n.sym, t),
                n
            }
            function E(e) {
                w(e, e.oprev),
                w(e.sym, e.sym.oprev)
            }
            t.prototype = {
                triangulate: function() {
                    var e = this.points;
                    e.sort(function(e, t) {
                        return e[0] === t[0] ? e[1] - t[1] : e[0] - t[0]
                    });
                    for (var t = e.length - 1; 1 <= t; t--) e[t][0] === e[t - 1][0] && e[t][1] === e[t - 1][1] && e.splice(t, 1);
                    if (e.length < 2) return {};
                    for (var n = function e(t) {
                        var n, r, i, o; {
                            if (2 === t.length) return {
                                le: n = x(t[0], t[1]),
                                re: n.sym
                            };
                            if (3 === t.length) return n = x(t[0], t[1]),
                            r = x(t[1], t[2]),
                            w(n.sym, r),
                            v(t[0], t[1], t[2]) ? (i = A(r, n), {
                                le: n,
                                re: r.sym
                            }) : v(t[0], t[2], t[1]) ? {
                                le: (i = A(r, n)).sym,
                                re: i
                            }: {
                                le: n,
                                re: r.sym
                            };
                            for (var s = Math.ceil(t.length / 2), a = e(t.slice(0, s)), u = e(t.slice(s)), l = a.le, d = a.re, c = u.le, h = u.re;;) if (m(c.orig, d)) d = d.lnext;
                            else {
                                if (!y(d.orig, c)) break;
                                c = c.rprev
                            }
                            var f = A(c.sym, d);
                            for (d.orig === l.orig && (l = f.sym), c.orig === h.orig && (h = f);;) {
                                var p = f.sym.onext;
                                if (_(p, f)) for (; b(f.dest, f.orig, p.dest, p.onext.dest);) o = p.onext,
                                E(p),
                                p = o;
                                var g = f.oprev;
                                if (_(g, f)) for (; b(f.dest, f.orig, g.dest, g.oprev.dest);) o = g.oprev,
                                E(g),
                                g = o;
                                if (!_(p, f) && !_(g, f)) break;
                                f = !_(p, f) || _(g, f) && b(p.dest, p.orig, g.orig, g.dest) ? A(g, f.sym) : A(f.sym, p.sym)
                            }
                            return {
                                le: l,
                                re: h
                            }
                        }
                    } (e).le, r = [], i = 0, o = [n]; m(n.onext.dest, n);) n = n.onext;
                    for (var s = n; o.push(s.sym), s.mark = !0, (s = s.lnext) !== n;);
                    do {
                        var a = o[i++];
                        if (!a.mark) for (s = a; r.push(s.orig), s.sym.mark || o.push(s.sym), s.mark = !0, (s = s.lnext) != a;);
                    } while ( i < o . length );
                    return r
                }
            },
            s.prototype = {
                get sym() {
                    return this.rot.rot
                },
                get dest() {
                    return this.sym.orig
                },
                get rotSym() {
                    return this.rot.sym
                },
                get oprev() {
                    return this.rot.onext.rot
                },
                get dprev() {
                    return this.rotSym.onext.rotSym
                },
                get lnext() {
                    return this.rotSym.onext.rot
                },
                get lprev() {
                    return this.onext.sym
                },
                get rprev() {
                    return this.sym.onext
                }
            },
            t.prototype.ccw = v,
            t.prototype.rightOf = y,
            t.prototype.leftOf = m,
            t.prototype.inCircle = b,
            e.exports = t
        } ()
    } (lr = {
        exports: {}
    },
    lr.exports), lr.exports);
    function cr(e) {
        for (var t, n, r, i = e.length,
        o = [0, 1], s = 2, a = 2; a < i; a++) {
            for (; 1 < s && (t = e[o[s - 2]], n = e[o[s - 1]], r = e[a], (n[0] - t[0]) * (r[1] - t[1]) - (n[1] - t[1]) * (r[0] - t[0]) <= 0);)--s;
            o[s++] = a
        }
        return o.slice(0, s)
    }
    function hr(e) {
        var t, n = e.length;
        if (n < 3) return null;
        var r = new Array(n),
        i = new Array(n);
        for (t = 0; t < n; t++) r[t] = [ + e[t][0], +e[t][1], t];
        for (r.sort(function(e, t) {
            return e[0] - t[0] || e[1] - t[1]
        }), t = 0; t < n; t++) i[t] = [r[t][0], -r[t][1]];
        var o = cr(r),
        s = cr(i),
        a = s[0] === o[0],
        u = s[s.length - 1] === o[o.length - 1],
        l = [];
        for (t = o.length - 1; 0 <= t; --t) l.push(e[r[o[t]][2]]);
        for (t = +a; t < s.length - u; t++) l.push(e[r[s[t]][2]]);
        return l
    }
    function fr(e, t, n, r, i) {
        void 0 === t && (t = 1),
        void 0 === n && (n = 0),
        r && i || (e = e.map(function(e) {
            return [e.x, e.y]
        }), r = new dr(e.slice()).triangulate(), i = hr(e));
        var o, s, a, u, l, d, c, h, f, p, g, v, y, m, _ = n * n,
        b = [],
        x = {};
        for (s = 0, a = r.length; s < a; s += 3) pr(i, gr(r[s], r[s + 1], r[s + 2])) && (l = r[s], d = r[s + 1], c = r[s + 2], void 0, h = gr(l, d, c), f = h[0], p = h[1], g = l[0], v = l[1], _ < (u = (y = f - g) * y + (m = p - v) * m) && (b.push(s), x[s] = u));
        if (0 === b.length) return b;
        b.sort(function(e, t) {
            return x[e] - x[t]
        });
        var w = b[0],
        A = x[w],
        E = [];
        for (s = 0, a = b.length; s < a; s++) o = b[s],
        A < (u = x[o]) && _ < u && (w = o, A = u, E.push(w), E.length > t && E.shift());
        return E.map(function(e) {
            return function(e, t, n) {
                for (var r = arguments,
                i = gr(e, t, n), o = 0, s = 0; s < 3; s++) {
                    var a = r[s],
                    u = a[0] - i[0],
                    l = a[1] - i[1],
                    d = Math.sqrt(u * u + l * l);
                    o < d && (o = d)
                }
                return i.concat(o)
            } (r[e], r[e + 1], r[e + 2])
        })
    }
    function pr(e, t) {
        for (var n, r, i = e.length,
        o = e[i - 1], s = t[0], a = t[1], u = o[0], l = o[1], d = !1, c = 0; c < i; c++) n = (o = e[c])[0],
        a < (r = o[1]) != a < l && s < (u - n) * (a - r) / (l - r) + n && (d = !d),
        u = n,
        l = r;
        return d
    }
    function gr(e, t, n) {
        var r = [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2],
        i = [(t[0] + n[0]) / 2, (t[1] + n[1]) / 2],
        o = -1 / ((t[1] - e[1]) / (t[0] - e[0])),
        s = -1 / ((n[1] - t[1]) / (n[0] - t[0])),
        a = r[1] - o * r[0],
        u = (a - (i[1] - s * i[0])) / (s - o);
        return [u, o * u + a]
    }
    function vr(e, t, n, r) {
        if (!r) {
            r = new Uint32Array(e.length);
            for (var i = 0,
            o = e.length; i < o; i++) r[i] = i
        }
        var s = n ?
        function(e, t, n, r, i, o) {
            var s = n - e,
            a = r - t,
            u = o - i,
            l = Math.sqrt(s * s + a * a);
            return [(e + n + s / l * u) / 2, (t + r + a / l * u) / 2, (l + i + o) / 2]
        }: function(e, t, n, r) {
            var i = e - n,
            o = t - r;
            return [(e + n) / 2, (t + r) / 2, Math.sqrt(i * i + o * o) / 2]
        },
        a = n ?
        function(e, t, n, r, i, o, s, a, u) {
            var l = 2 * (e - n),
            d = 2 * (t - r),
            c = 2 * (a - s),
            h = e * e + t * t - s * s - n * n - r * r + a * a,
            f = 2 * (e - i),
            p = 2 * (t - o),
            g = 2 * (u - s),
            v = e * e + t * t - s * s - i * i - o * o + u * u,
            y = f * d - l * p,
            m = (d * v - p * h) / y - e,
            _ = (p * c - d * g) / y,
            b = (f * h - l * v) / y - t,
            x = (l * g - f * c) / y,
            w = _ * _ + x * x - 1,
            A = 2 * (m * _ + b * x + s),
            E = m * m + b * b - s * s,
            C = ( - A - Math.sqrt(A * A - 4 * w * E)) / (2 * w);
            return [m + _ * C + e, b + x * C + t, C]
        }: function(e, t, n, r, i, o) {
            var s = 2 * (e * (r - o) + n * (o - t) + i * (t - r));
            if (0 === s) return null;
            var a = ((e * e + t * t) * (r - o) + (n * n + r * r) * (o - t) + (i * i + o * o) * (t - r)) / s,
            u = ((e * e + t * t) * (i - n) + (n * n + r * r) * (e - i) + (i * i + o * o) * (n - e)) / s,
            l = a - e,
            d = u - t;
            return [a, u, Math.sqrt(l * l + d * d)]
        },
        u = n ? zn: Rn;
        return n = n || [],
        function e(t, n, r, i, o, s, a, u, l) {
            var d, c, h, f, p, g, v, y, m, _, b, x = null;
            if (0 === r || 3 === n.length) c = i,
            h = o,
            f = s,
            p = u,
            g = l,
            _ = null,
            1 === (b = (d = n).length) ? _ = [c[v = d[0]], h[v], f[v] || 0] : 2 === b ? (v = d[0], y = d[1], _ = p(c[v], h[v], c[y], h[y], f[v], f[y])) : 3 === b && (v = d[0], y = d[1], m = d[2], _ = g(c[v], h[v], c[y], h[y], c[m], h[m], f[v], f[y], f[m])),
            x = _;
            else {
                var w = t[r - 1];
                null !== (x = e(t, n, r - 1, i, o, s, a, u, l)) && a(x, i[w], o[w], s[w]) || (n.push(w), x = e(t, n, r - 1, i, o, s, a, u, l), n.pop())
            }
            return x
        } (r = function(e) {
            for (var t = e.length - 1; 0 <= t; t--) {
                var n = Math.floor(Math.random() * (t + 1));
                n = Math.max(Math.min(n, t), 0);
                var r = e[t];
                e[t] = e[n],
                e[n] = r
            }
            return e
        } (r), [], r.length, e, t, n, u, s, a)
    }
    function yr(e) {
        var n = e.X,
        r = e.Y,
        t = e.sizes,
        i = e.indexes,
        o = e.R,
        s = e.center,
        a = e.gap;
        void 0 === a && (a = 0);
        var u = e.epsilon;
        void 0 === u && (u = .001);
        var l = e.maxLoops;
        void 0 === l && (l = 5);
        var d = e.inPlace;
        void 0 === d && (d = !0);
        var c = i.length,
        h = c,
        f = s[0],
        p = s[1];
        d || (n = n.slice(), r = r.slice());
        for (var g, v, y, m, _, b, x = kn,
        w = Ln,
        A = i.slice().sort(function(e, t) {
            return w(n[e], r[e], n[t], r[t], f, p)
        }), E = A[c - 1], C = n[E], S = r[E], I = 0, T = !1; I < h - 1; I++) {
            var N = I % c,
            k = (I + 1) % c; - 1 === I && (N = c - 1, k = 0),
            N = A[N],
            k = A[k],
            g = n[N],
            v = r[N],
            y = n[k],
            m = r[k];
            var L = t[N] + t[k] + a,
            R = w(g, v, y, m, f, p);
            if ( - 1 === R && T && (R = 1), !(o < L)) {
                if (1 === R || L - jt(g, v, y, m) > u) {
                    var z = x(f, p, o, g, v, L);
                    z && (z = z[0], T = f < y && z[0] < f, y = n[k] = z[0], m = r[k] = z[1])
                } else T = !1;
                if (I % c == c - 2) {
                    var M = A[c - 1],
                    P = A[0];
                    if (r[M] > p && r[P] > p && n[M] - t[M] < n[P] + t[M]) for (_ = 0, h = Math.min(c * l, h + c); r[A[M]] > p && r[A[0]] > p && n[A[M]] < n[A[0]] && ++_ < c;) A.unshift(A.pop())
                }
            }
        }
        g = C - f,
        v = S - p,
        y = n[E] - f,
        m = r[E] - p;
        var F = g === y ? 0 : Math.abs(Math.acos((g * y + v * m) / (Math.sqrt(g * g + v * v) * Math.sqrt(y * y + m * m))));
        if (0 !== F) {
            var D, O = Math.sin( - F),
            B = Math.cos( - F);
            for (I = 0; I < c; I++) D = A[I],
            _ = n[D] - f,
            b = r[D] - p,
            n[D] = _ * B - b * O + f,
            r[D] = _ * O + b * B + p
        }
        return {
            X: n,
            Y: r
        }
    }
    var mr, _r = {
        minHeap: or,
        bellmanFord: sr,
        dijkstra: ar,
        johnson: ur,
        largestEmptyCircle: fr,
        minDisk: vr,
        removeRadialOverlap: yr,
        convexhull: hr,
        circlePack: function(e) {
            var N = e.X,
            k = e.Y,
            L = e.R,
            R = e.center,
            t = e.maxSteps;
            void 0 === t && (t = 1e3);
            var z = e.padding;
            void 0 === z && (z = 5);
            var n = e.epsilon;
            void 0 === n && (n = 1e-5);
            var M = e.damping;
            void 0 === M && (M = 2);
            var P = e.pinned,
            r = e.indexes,
            i = e.onUpdate,
            F = e.pushSmallerOut;
            void 0 === F && (F = !0);
            var o, D = r ? r.length: N.length,
            O = r;
            if (isFinite(P) || (P = -1), void 0 === O) for (O = new Uint32Array(D), o = 0; o < D; o++) O[o] = o;
            else O = r;
            if ( - 1 !== P) R = [N[P], k[P]];
            else if (!R) {
                var s = 0,
                a = 0;
                for (o = 0; o < D; o++) s += N[O[o]],
                a += k[O[o]];
                R = [s / D, a / D]
            }
            var u = function(e) {
                return--e * e * e + 1
            },
            l = function(e, t) {
                var n = e - R[0],
                r = t - R[1];
                return n * n + r * r
            },
            B = -1 / 0,
            j = 1 / 0;
            function d(e, t) {
                var n, r, i, o, s, a, u = 0;
                for (n = 0; n < D - 1; n++) for (r = n + 1; r < D; r++) if (n !== r) {
                    i = O[n],
                    o = O[r];
                    var l = N[i],
                    d = k[i],
                    c = L[i],
                    h = N[o],
                    f = k[o],
                    p = L[o],
                    g = h - l,
                    v = f - d,
                    y = c + p + z,
                    m = g * g + v * v;
                    if (m < y * y - e) {
                        var _ = (y - Math.sqrt(m)) * t,
                        b = 1 / m,
                        x = g * b * _,
                        w = v * b * _;
                        a = x * x + w * w,
                        o !== P && (u += a * (s = c / j), N[o] += x * s, k[o] += w * s),
                        i !== P && (u += a * (s = p / j), N[i] -= x * s, k[i] -= w * s)
                    }
                }
                var A, E, C = e * M * (1 - t),
                S = R[0],
                I = R[1];
                for (n = 0; n < D; n++) if ((i = O[n]) !== P) {
                    A = N[i],
                    E = k[i],
                    s = (y = L[i]) / B;
                    var T = F ? C * s: C;
                    u += a = (x = (A - S) * T) * x + (w = (E - I) * T) * w,
                    N[i] -= x,
                    k[i] -= w
                }
                return u
            }
            O.sort(function(e, t) {
                var n = L[e],
                r = L[t];
                return B = Math.max(B, n, r),
                j = Math.min(j, n, r),
                r * l(N[t], k[t]) - n * l(N[e], k[e])
            });
            var c = 0,
            h = 0,
            f = u(1 / D);
            for (o = 0; o < t && (c = d(f, u((o + 1) / t)), i && setTimeout(function() {
                return i(N, k)
            }), !(Math.abs(c - h) < n)); o++) h = c;
            return {
                X: N,
                Y: k
            }
        },
        weightedStress: tr,
        distanceStress: nr,
        constrainedStress: rr,
        stressMinimizationStep: ir,
        stressMinimizationStepGeneral: function(e, t, n, r, i, o, s, a) {
            var u, l = t,
            d = n;
            s = s || 0,
            -1 === (i = void 0 === i ? -1 : i) && (s = 0);
            for (var c = 0; c < r; c++) {
                var h, f, p, g, v, y = a[c],
                m = 0,
                _ = 0,
                b = 0,
                x = t[y],
                w = n[y];
                for (h = 0; h < r; h++) {
                    var A, E, C, S, I, T = a[h],
                    N = 0;
                    T !== y && (A = 1 / ((f = e[y][T] * o) * f), y !== i && T !== i || (N = A), m += I = (1 - s) * A + s * N, 0 !== A && (1e-6 < (v = (p = x - (E = t[T])) * p + (g = w - (C = n[T])) * g) && (S = 1 / Math.sqrt(v)), _ += I * (E + f * (x - E) * S), b += I * (C + f * (w - C) * S)))
                }
                0 !== (u = m) && (l[y] = _ / u, d[y] = b / u)
            }
            return {
                X: l,
                Y: d
            }
        }
    },
    br = (mr = 0, "undefined" != typeof requestAnimationFrame ? requestAnimationFrame: function(e) {
        var t = Date.now(),
        n = Math.max(1, 16 - (t - mr)),
        r = t + n;
        return mr = r,
        setTimeout(function() {
            e(r)
        },
        n)
    }),
    xr = function(e) {
        var t = this;
        this.renderFunction = e,
        this._animationFrame = function(e) {
            t._newFrame(e)
        },
        this._delayBetweenFrames = 0,
        this._time = 0,
        this._inFrame = !1,
        this._mustRefresh = !1,
        this._updateTimeCounter = !0,
        this._nextFrame = [],
        this._nbFrames = 0,
        this._totalElapsed = 0
    };
    xr.prototype.kill = function() {
        Pe(this),
        this._nextFrame = void 0
    },
    xr.prototype.setFpsLimit = function(e) {
        this._delayBetweenFrames = e ? 1e3 / e: 0
    },
    xr.prototype.requestNewFrame = function() {
        this._inFrame ? (this._mustRefresh = !0, this._updateTimeCounter = !0) : this._requestDone || (this._requestDone = !0, br(this._animationFrame))
    },
    xr.prototype.atNextFrame = function(e) {
        this._nextFrame.push(e)
    },
    xr.prototype._newFrame = function(e) {
        var t = e - this._time;
        if (t < this._delayBetweenFrames) br(this._animationFrame);
        else {
            if (this._inFrame = !0, this._mustRefresh = !1, this._time = e, this.renderFunction(this._updateTimeCounter ? t: 0), this._nextFrame.length) {
                var n = this._nextFrame;
                this._nextFrame = [];
                for (var r = 0; r < n.length; ++r) n[r]()
            }
            this._mustRefresh ? br(this._animationFrame) : (this._inFrame = !1, this._requestDone = !1, this._updateTimeCounter = !1)
        }
    };
    var wr = "undefined" != typeof Image ? Image: function() {},
    Ar = new wr;
    Ar.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAACAASURBVHic7N15fBXV3T/wzzkzd4/sayCExLpbV1Q2ta5V29rN2qd92j5VZHvU2j79VWVRBEHRx2pVfIAAam3d2qqtWrW1FkVxw71uWEkCWdgDhNx1Zs75/XGTAAKaZOZO7r35vP/yD/3OeXknM98553u+ByAiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIi8p7o7gEQUdfoTEbrdBo6lQLSaeiMBaRTUFu3QW/fDrV9O3RTEwBANW4AUqkOxxaDBkCUlEAYBsTQoRCRMOTgwRCxKBAMQYRDQDAIEYkAoRCkYfBZQlRg+EdLVCBUU5N2qmug6urhNDZCNTRCNzVBbdkCvbUJatt26G3bcjoGYZoQA/pD9O0L2bcvxKCBkAMHQg4ZDGPECIiyYTDKyyGjUT5biPIc/0iJ8oi2ba137IDe2gRnw0Y4n3wCtaYa9vsfQjU1QScTQCoFnc4Att3dw20ngkEgHIYIh4FoFMawUhhfPgLmgQdCHlgJ2b8/RP9+ELEYhJR87hDlAf4hEnUj7ThaZzJw/v0p7Hffg/Pue3DWroWqa4DauBFQqruH6JoIhSCHD4McPhzGIQfBOOooBI45CmLIkOwSAxMCom7BPzwin+mdO7Wzrg7Op2tgvb4K9quvQW3cBGQy0JkMoHV3DzF3DAMiFAIiYRgVlQicPA7m0V+GHDkSxvBhEIEAn0lEPuEfG1GOacvSemcLnDVrYK14Edbrq6DX1cPZuBFwnO4eXrcTkUh2hqCyAsFTTkHgpBMghg6BiEQgWFxIlDP84yLKEdXUpO33P4S9ahUyf3sWzpo1gNJFMa2fK8IwgFAI5oknIHjGaTCPOxbGlw6ECIf5rCLyGP+oiDyildJ6+w441dXI/PVpWKvegK6rh9q+vbuHVpgMA3LwIBgVFQiccTqCp50KMXgQZCzG5xaRB/iHROSSVkqrtetg/fN5pP/xD9ir3gQsq7uHVXRk374wT/sKgmechsD4sZB9+vD5ReQC/4CIukArpVVTE5wPP0LmL0+2FvJthOaLP+dESQzGyJEInHk6guecDTliBGcFiLqAfzREnaS2bNHpvz6NzJNPwXnn3WzlPnUL2b8/zLGjEfredxE46UTWChB1Av9YiDpA27Z21lTDevYfSD/2Fzj1DZ1qrUs5JATEAQfAPOZohL73HZgnnQRj8CA+24i+AP9IiD6HymS0alyPzAMPIv3U36AaGljFn8dEIADzmKMQ+O53EDrvnLbzDPicI9oH/mEQ7Yf94Uc6/dAfkH7iSegdzdyzX0BEMAg5shzh//oRAud8FcaAAXzWEX0G/yiIdqMtSzvr6pB++A+w/vYsnLXrirszX5ET4TCMI49A6MILEDz7LIjevdh6mKgV/xCIWjkNDTr9xF+Ruue30Bs2dvdwyEPCMGAcezTCky5B8JSTISIRPvuox+MfAfV4assWnXn+BaTv/R3sj1f3jD38gQBEIAAA0FoDmUyPWOKQvXvDHDsa4Yt/CuPII3hsMfVovPmpx1KOo+2XX0FqyTLYK1+BzqPjdbtK9OmdPXp34ECIaARy4EDANCEHDwJaX/gAslPhsZLsP2sNtW0b9O67GnY0QzU3Q6dS0Js2QycSUJs3Q28ojl4Hsl8/BL75dYQvvgjmiDI+B6lH4o1PPZL96Rqdvu/3yDz5FFRTU2Gs87dudxN9+0D06gU5cACMipEwKiqyh+mUDoWIRLNf96EgIA0gGACEhAgFO7X2rSxLw7azOx5aZwd0xgIyaaht26Ea10M1NMBZ/Un2n5uaoHc0Q382kchnpgGjogKRSy6GefZZMPr15fOQehTe8NSjqJa4zjz1NFJL74bz70/zd0ufEICUENEojIMPgnnUkZAHHQxjxHDIoUMhBw2C7HVAXvz9aqW02rwFevNmOA2NULW1sD9eDfudd6EbGrMzK0rlbZIlwmEExo9D+NIpMI85mkWC1GPwRqceQTuOtlevRmrRElh/ezY/v1JDQcjBQ2AMHwbjsENhnjAK5lFHQhxwABAMQgQ79xXfXbTjaJ3OAJkM1PoNsN96C9aqN6FqauDUN0A3NeVf4iUl5KCBCP/0Jwhd8B3IgQPz/v8zkVu8yanoqZ07debxJ5FcvAS6rh46T14+wjSBSBjG8OEwR58Ec+xoGOXlMEqHQhyQH1/3XtFKab1lC1Tjetgfr4b1wouw334Hevv2bDKWL7MDponAuLGIXnEZ5JePhAwGi+p3INodb24qavana3Ty9gWw/vZ36HS6u4cDABC9e8M87FCYxx4D87SvwPzyERChUI/qWKdsW2PHDlgrX84mAx98CPXpmrwpMBR9+iB86RSE/+NCyF69eszvQj0Lb2wqSiqR1NY/lyN5511wPl7dvYNpLd4zyoYjcMbpCJx6CmRFOWTfvgUxpZ9r2rK02rgJ9r/eR+bvz8J5402oTZu7fZlGhMMIfOUURH/5C4jKCkjT7PG/FRUX3tBUdNSWLTq5ZBlS990PJBLdOhajtBTmqScjcMZpCIwfDxnhaXVfxGlo1Nby5cg8+xzs19+A7s7fUAgY5eWI/PIKBM87F4JJABUR3sxUNLRta/uDD5G87XZYL73cbQ19RK9eMA45GMHzzkHg5PGQw4ZBRtl5rrNU0zbtfLoGmaeehrXiRai6+m47eln064fwf1yI0E9+BGPoEP6WVBR4I1PRSD36Z5287XaouvpuKSoTkQiC55yNwNfPQ+DEE/Nmm14xcGrXauullUg/8hjst97unkFIicCpJyN27QwYlZX8bang8Samgqe2b9ep+36P1N33Qm/b7u/FhYAsLUVg7BiEvn8BjMMPg4zF+HeVA9pxtG5qQmb5C8g8/iTsd96B3tni7yCkhFExEtFrZ8AcNxYyEOBvTQWLNy8VNKexUSf+91Zk/vKEv73spYTo0wehb5+P4DfPh3HE4SwS85FqbtbWK68hff+DsFf5Xycg+vdH5IrLELrwAkgeLEQFyuzuARB1hVZKOx+vRvwXv4L1+ipfG8vIAf0R+OrZCP/kRzAqKyC4V9x3bVvzVEtcWy++hPT9D8B6bVW2bbEP9NatSN54M3R9A5ymJm3068d7gAoOEwAqOMq2tf3Kq4jPngfnk0/8We8XAqIkhuBZZyL4g//ItuYNs6K/u8mS7HKLatqmM8ufR+re+7LbPn1IBHQyieS998HZsAHOpk3aGDSI9wMVFCYAVFC0bWvr2ecQv24O1IaN/lzUNGEefxwiEy9G4JSTIUIhPujzjGw9yEc1Nen0gw8j/cBDcBoac58cZjLIPPkU9KbNcKprtFFZwXuDCgZvVioYOpXSqfsfQmrBXVBN23J/QcOAUT4CoZ/+BMGvng1jyGD+vRQAbVnaWbMGqfvuh/XU01B+FIYKAfP44xGd9iuYxx7To7o6UuHiTUoFQaVSOnP/Q0jceht0Szz3FwwGEf7B9xG66CcwK/hVV4iUZWn7xZeQXLAQ9tvv+FInYhxYidjNNyIw6njeM5T3eJNS3lM7d+rk7Xci9cBDQDzH1d6mCfPooxCZOhmBcWMgolH+jRQ4tXGjTj38R6QfeCi7bJTjZQGjsgKRK3+JwFlncmcI5TXWAFBeU/GETt5yK1L3Pwjk+DAf2asXgj/6IcI/+U8YQ4fywV0k5ODBQtm2Dowfi9SChcgsfyGnswFOdQ0S185GNF9OOCTaDz7kKG+p5mad/M2dSP/u/ty2gJUS5qGHIPyzyxA8/Sss8itizubNOv3b3yP98B+gNm3O6bXk0KGIXjsDofPO4f1EeYk3JuUlFU/o5K9vQ/r+B3N6KpyIxRA471xEL/9viLLhkDydr+hpx9HWiheR/M0dsP/1QU4bSGWTgOkInH0WlwMo73AJgPKO2rlTJ2+5FenfP5DTL385dAjCUyYhfOEFXOvvQdoq9O2GBp389W+Q+evTQI6STLV+PRKz5iAqeHtR/uFdSXlFpVI69X+LkFy0JHdr/q37+qO/+BnMUcdDsJ97j6Wam3X6kT8jtXAx1KZNOSsQNMpHIDZvDsyxY7hFkPIGb0TKGzqV0un7H0L817fmrNpfhEIInv8NhH9xOcxhw3j/U3ZJ4PU3kLzhRtjvvZ+z63CLIOUb3oiUF7Rt6/RDf0Tixvk52+cvevdGeNIEhH/yo/Ze8kRt7E/+rRM3/xr2CytytvRkHHkESm65CeZhh/L+o27Hm5C6nVZKZ55bjsS0GVCbt+TkGnLQIESvm4ngmWdChHh4D+2bs3WrTt21CKl778tNcaAQMI87FiV33gaDM1DUzVgESN3OevV1JObMzc3LXwgYhxyM6Ixp2cY+XH+lz2H07y9Uc7MW/fshveRuqG0et5zWGvZbbyMx7yaoLVu0HDCA9yN1GyYA1K3sf3+qW674H6h1dd4HFwLmiaNQMmcW5MEHQ3CLH3WA7NVLaMvSctBAJG/+tff9ArRG5m9/h+zfDyqR0JI7UKibMAGgbuNs3Kjj02bC+fAj74MLgcBZZyA242oYI0fyAUudIgIBoR1Hi3AYyVtug1O71tsL2DbSf/gT5PBhUKmU5tHS1B2YAFC3UDt26MT8W2A9v8L7rVemieB55yI64yoYQ4bwwUpdIgxDKMfRcuBAxGfOgvPvTz2Nr1MpJBcuhiwd6mlcoo6S3T0A6pnSf3oU6Ucfy0mhVfDcryJ23TV8+ZNr0jBEYPRJIjZ3NuSIMs/j623bkfj1b2B/8CEPDiDfMQEgXynH0eln/6FTi5d43n1NBAIInv8NRKdfDdm/H1/+5BnzhFEo+d/5MA4+yPPYau06xGfPhbOujkkA+YpLAOQrtXYtkjfeDLVxk+exA+eeg+h1M2H078+XP3mqbfeI9epruuVXV3tbtKoU7NdeR3JRFbRta8EzA8gnnAEg36jmZp285Tdwqmu8DWyaCH7ja4hOu5Ivf8qp9pmAg77keezM408i/Yc/QVsWZwLIF5wBIF+odFqnlt6NzD+e87zoL3jeuYhddw2n/Snn9pgJuGo6lIe7A/TOnUjedkdOlhmI9oUzAOQL+9XXkKpa5u0BP0IgcMp4RH71P3z5k6+ME0Yhes0MyMGDPI2rNm1C8tbboTZv5iwA5RwTAMo5u75Bp25fAL19u3dBhUDghOMRu+5amCPK+PInX0nDEMHTTkV0xtWQAwd6GttetQqpe+6DSiaZBFBOcQmAckqlUjp50y2w3nnX07jySwciMv1qGAdW8uVP3UIYhlCWpcMbNiJ5y22eHSCkMxZS994H8/jjPIlHtD9MAChntFI689QzSD/8R0/3+4v+/RGbdhXMo4/yLOZnacvSasuW7FbFWAyyf3+eI1BAVCql9ZYt0JYF0as3ZN8+OWkFLQMBoVriWjc1IXXPfdAeLXHpeBzJOxbArl2rzZHlvO8oJ5gAUM449Q1ILaqCjnt3vK/odQCiM65C4NSTc9bbX8UTOvW7B5C697dQdfUwDj8M0WlX5uJSlAMqntCpZfcgfc9voZq2wTzpRER/fnnOridLYkLt3KmdjZuQeewvnsW13/sXMr9/AMpxtGTySTnABIByQluWjl9/A2wv+/ybJkI/+iFCX/86crVXWsUTOrVkGZKLqoBkEgDgvP8BEtfMRubFl3RgzOicXZvc29fvZ7/8CuIbNub095MHHCCcmlqt1tXBfuttb3a6KIX0nx6BeeIo97GI9oFFgJQT1ksrYf35ce+m/oVA8IzTEZk8CSIUzMkLWCeSOlW1BMmFi9tfHm2c6mrEr5wG6+VXc3Fp8kB3/35GxUgRnTkdcsgQz2Kq7TuQXFgFZ/0GFgSS55gAkOechkadXLAQurnZs5jm4YchMu1XkH165+bLP5HQyaqlSC3af4ti1bge8VmzkXlxpdaOwwdyHsmX38885ihEfvlziJKYNwG1hv3ue0g/+hgU7znyGBMA8lz68SfgvPMutEcNf0TfPgj/8ucwKypy8/JvievUkruRWrwE+gvOJ1DVNUhcPQPWy69AK8UHch7Ip99PSCmCXzsXoe99FzA9WmF1HKR//yCcf73vTTyiVkwAyFP2x6t15r77oW3bm4DBAMIXX4TgKSd7E+8zVCKhk0vvRvKOBdCJRIf+G6e+HomZs5gE5IF8/P1kNCoiv7gC5gnerd2r9euRWrwEqrmZ9xt5hgkAeUbF4zp1971wNmzwJqAQCJ5+GkI//TFEIOD5179qietk1TKkq5YCnUxYnNq1SMy4FtbKl8HlgO6Rz7+f7N1bRP/fLyDLhnsTUGtYzy2HvfIVb+IRgQkAech+4y2k//I4oJQn8YyyMkT+5woYvXp5//JPZLeKpe68q8vbFJ3atYhfNYOFgd2gEH6/wKjjRXjCRRCG4Uk8nU4juXgJnKZtTDjJE0wAyBOqpUWnlt4NpLxphCIiEYQvnQJ54IGexNtdtlp8GVKLqjr95fhZqqEB8WuvQ2bFS1rbNh/MPiik3y/07W8i8I2veZYE2B9+hMwTT4L3GnmBCQC5ppXS1nPL4bz1ljcBpUTw/K8j9M3zIT3es63iCZ1cXIXUwsUdXjP+wpjVNYhfNQ3WK5wJyLVC+/1knz4i+rPLICtGehMwnUb67nvhNDR6E496NCYA5JrasgWpu++FavGm459x0JcQnjgBIhL2/OWfbRLzxdXinY7duB6Ja+cg8+JLWvHrLCcK9feTFSMRvuRiIBDwJJ5TuxaZP/yRtSfkGhMAcs16bjlsrw77EQKhn/4Y5kFf8vTlr5XSmaefQapq6X73ibvlVFcjfvUM2KwJ8JyKJ3RqaWuHvxz+fomZ10HXN3gaV0gpguedg+Dpp3kWM/PXZ+DU1HoWj3omJgDkimps1On7H/QmmBAInvtVhM4715t4u9EtLbCe+6en5xLsi6pvXVNmsyDPqETrl/+ChXt1+POas3YtrNde9zyu7N1bhCZfAjlsmCfxnLVrkfnTI9CWxXuMuowJAHWZdhydfvrvsD9e7Uk8OWQwQhMuguzTx/Oqf620Z8e1fhFVU4vE9JmwVr7CaVqX2pr8JBcvAfz4/bTO2XUCxx6D0PcvAKQHj12lkP7jo3DWrHEfi3osJgDUZap5Z/b0M8vyJF7oW+cjOOr4nHT7kweUIHjaV4BIJBfh9+Ksq0N8+kxuEXShbatf8vY7AY8K/r6IHD4M5okn5CS2kFKELvgOzMMO9SSe2rYNmT8/wSSTuowJAHWJUkpbTz0N5+OPPYlnHnIwgt+/0JNY+yIMQwS//S1EpkwCwuGcXWd3qq4e8WtmIbOChYGdpeIJnapqXfP36kCpLyArKxCbPw/GgZW5u8bQoQhNuAiipMR9MMdB+pm/wVlT7T4W9Ug8Dpi6RG/egvQf/gTtwde/CIcR/MH3YZSP8GBk+ydjUaHiCQ2tkMpBJfm+qJpaxKfNQGz+vJxfq1i0F/zdtdCfaX8AsrQUsTmzEDx5fE6PehZSCm1ZOvPkU7D+udx1PFVTi8xTz3gwMuqJOANAXWKvegOOR2v/xpePROjCCyCkzOnDF8gmAeFJExGeOhkiGs315QBkCwPbtpixgcvna9/qt7DKt5e/UVmB2M03IDBmtC/XE4GAiEy4CLJPb0/iZZ78K5wtW3hfUacxAaAuST/woDdf0LEYIhf/FDIWy/nLv002CZiA8JRJ3p3Y9gX8OI++0GU7/C1BcuHinFf7t5HDhyF6/XUInjxeCI+bTn0e47hjEDjzTE8KAtXadcg8+mcPRkU9DRMA6rTMiyu188GHnsQKjj4R5tgxnsTqDBmNivCEixC+/FKImEdnt38BP86jL1QqkdDJqqVILVqSs33+nyXLyxGbPw/m6JN8ud4e145GRfinP4bo08d1LJ3JIPPM3+Fs3MR7ijqFCQB1ikokdfrRx6Cad7qOJSIRhH74A8g+vX378tqdLImJyKQJCE26xLeZgFyfR1+I2rb6pRb7U5cBZF/+JTfMQWDcWM/bTXd4DIccjNA3vgYI95e33/sX7Lff8WBU1JMwAaBO0fX12U53Hpz4Z44dA3OsP+uu+yOjURG55GJEfnaZbzUBuT6PvpCoREInl96N5B0LPOvt/0Xk8GGIzZsNc+wYX+pO9juOYFAEv/NtyCGD3QezLGSe+CsUZ5aoE5gAUKdkXlgBtWGD6ziiVy+EfvB9yGi02x7AbWRJTIQnXozw5IlAKOTLNXN9Hn0hUC1xnaxahnTVUten+nWUUVmB2E03wBwzultf/m3Mww9F4CunehLLfvNNqE8+8SQW9QxMAKjDVDyuM48/6Uks84jDEchRw5WukNGoiEy6BJGp/vUJyPV59PmsrclP6s67ct6euY0sLUV0ziwEx48T3TXt/1kiGBSh730XwoPEU23ajMzf/8GjgqnDmABQh9mvr4Kzbp37QIaB4Pe+A9m7V148hNuIaESEJ01EZOpk3zoG5vo8+nyUrfZfhtSiKt++/KXPW/06wzjkYATO/ar7WgDHgfXccqitW70ZGBU9JgDUISqZ1NbyF6B3NLuOZR56iGfTnl6TsagIT5yQnQkIBn25Zi7Po883Kp7QycVVSC1c7O+af2uTHz+3+nWULCkRoe9+G6JXL9ex7Pc/gP3hRx6MinoCJgDUIXrzFmT+uTx7WIobponQBd+B6O1NE5RckLGoCF8yAZFLpwJ+NQvK4Xn0+aK9yY9PXRgBwKgYidj8eXn55b8787jjYB5ysPtAjgPrqWd6bF0JdQ4TAOoQ6623oerqXccxhg+DefpXum3rVUe1NQuKTJkEGIYv13SqqxG/ekZ2l0WRaW/vu6jKv33+ZWWIzp2dt1/+u5MlMRH87rc9iWW/9TacxvWexKLixgSAvpC2bW397VlPYpmjT4IxIrc9/73S1iwocsXl/s0E1LfWBBRRsyCVaP3yX7DQvw5/ZWUoufH6vP/y311gzGgYI0e6jqMaGmG/+577AVHRYwJAX0jVN8D+yINT/0IhhM7/el5sv+qoti2CkckT/asJqKlFYvpMWCtfKfip3LYmP8nFS/zr7V8xErH5c7P7/A2jcO61IYMROP1U1+2BdTIJe+XL0KlUQd87lHtMAOgLWe++B93Y6DpO4NijYXixzukzGW0tDLxsqm+7A5x1dYhPn1nQWwTbtvolb78T8LHgL3r9dQiOHycK6eUPACIUEoGzzvLkkCDruX9CbdvuwaiomDEBoM+lkkltv7QSOp12FUcEg9nK/759PRqZv9oLA6f41ydA1dUjfs0sZFYUXmGgiid0qqp1zd9xfLmmrKwoiIK/zxMYdRzkgQe6jqO2bIX9xpsejIiKGRMA+nwtLbBWvOg+Tt++CJx1JmSBfZXtrn2L4JSJEH4lATW1iE+bAbuAtgi2F/zdtdC/L//S0rze6tdRIhgUoW98zX0gpWA9/0KPbzVNn8+fE1CoYFlvvQ29xX1jkcAxR8OoGOk6TneTsahQ8YSGkNnDa3x4wan6hvYtgoExo5HPL7hdW/2q/Fvzr6xAdM6sgv7y351x3LGQAwZAbdnS9SBaw/7wI0/adlPx4gwAfS47W4jmOk7g3LMLqiDr87RtEQxPmeTbKYJOdTXiV07L65qAbIe/JUguXOxftX/bmn+Bf/nvzqisgHn0Ua7jqLp6qHV1HoyIihUTANovZ2uTtj/40HXzH1lWBvPIIz0aVX5o2yIYvvxSiFjMl2uqxvWIz5qdl1sEVSKhk1VLkVq0xL99/uXliM2fB3P0Sb5czy8yFhPmV05xfT6A3rkT9rvvcRmA9osJAO2XrvfmC8I8+CDIoUM8GFF+kSUxEZk0AaFJl/g2E6Cqa5C4ekZeHSXcttUvtdi/Dn+yvBwlN8xBYNzYvG8q1RXB8eOAqPsdJ9ZLL3tydDcVJyYAtF/2Rx9Dbd7sLkgwAHP0SZAlJUX3kAZaTxG85GJEfnYZhE/Ngpz6eiRmzsqLJEAlEjq59G4k71jgb2//ebOz+/wLqKdEZ8iy4TCPOMJ1HOf9D6A2ufwbpqLFBID2STuOtla94X76PxZD4NSTPRpVfmprFhSePBHw4FjXjnBq1yIx41pYK1/utmZBqiWuk1XLkK5a6tupfkZlBWI33QBzzOiiffkDgAgEROC0U12fEKiSSdhvcjsg7Rt3AdC+KQX7rbddh5EVFTAqKzwYUH6T0ajQiaSGVkj6tA7u1K5F/KoZiN10Q86v9VnZ9r53I3XnXf4d6VtaiuicWQiOH1e0L/7dmUd9GbJ3L6jtO7oeJJ2G/ab7v2MqTpwBoH2y11R7s/1v/FjfDtPpbiIaEeFJExGZOtm3joGqofXsgBUvae1Ts6Bstf8ypBZV+ffyr6xA7OYbrJaLnAAAIABJREFUimarX0fIESMg3Z6boRRUdTVUc3Ne1ItQfmECQPvkrHoTcNn9D8EgjGOOKeqp2s9qbxY0dZJ/ZwdU1yB+1TRYPjQLUvGETi6uQmrhYn/X/IugyU9nyUEDISsrIFwuAzg1tawDoH1iAkB70Y6j7Q8+ACzLVRxjWCmMEWUejapwtLcNvnSqf6cINq5vbxaUq7bBu5r8+Fftnz3Yp7Db+3aVkFIERh0P7fJwILVhI7TbYl4qSqwBoL3oHc1wamqhXW4fksOGQQ4r9WhUhUXGokIlEhpCZA/D8aEfvlNdjfjVMxC7cZ7nsdvb+y6q8m+ff1kZonNn95g1/30xjj8OQkpXzbh0JgPno9UejoqKBWcAaC96x3bojRvdBRECxuGHQUajPfbh3dYsKHLF5f7NBNS31gR42CwoW/C3DMkFC/3r8FdWhpIbr++RX/67M0pLIT0oorU/9uA4byo6TABoL2rLVqgGl8f/Sglz1HHeDKiAtW0RjEye6F9NQE0tEtNnwsq2cXaVBLQ1+UkuXuJfb/+KkYjNn5vd518k7aO7SoRDCIw63nUc5/0PoPKkcRTlDy4B0F6cunpolw97EQjAOOQQj0ZU2GS07QAhILmwypevaGddHeLTZ7paDmjb6ufXEgawW2//Hjztv4dgEMbhh2X7AbjoyaG2bYdmISB9BmcAaC/OavfrhWJEGWSfPh6Mpji0FwZOmQT4dZRwXT3i18xCZkXnCwNVPKFTVa1r/n69/CsremzB3/4IKYUsGw5RUuIqjk4moKqrPRoVFQvOANBe1KfuHxSBo49yfZhJsWk/SlgrpHyqpFc1tYhPm4HY/I7PBLQX/N210Ldpf1la2r7Vz5cLFhA5fBhk/35wdu7sepBUGk7tWu8GRUWBMwC0B21Z2q6tdR3HOPQQIBhwP6Aikz1KeCLCUyf7dnaAqm9o3yL4Rc2C2rf6Lazyb82/Bzb56Qw5eDDQu7erGDqVgrN2XbefHUH5hQkA7UFt2gS4bfASiUCWj+jxBVz7k00CJiA8ZZJvpwg61dWIXzkN1sv7bxaU7fC3BMmFi/2r9m9b8+9hTX46Q5aUCGPYMHdBtIbauNF9cy8qKkwAaA9O7Vpolw9/0asXjEGDPBpRcWrbIhi+/FKIWMyXa6rG9YjPmr3PLYIqkdDJqqVI+XSOAZA90jc2fx7M0Sf5cr1CZhxykOsYqr4BqqXFg9FQsWANAO1Bb9joeupXHlAC0b+/RyMqXrIklm0WBPh2qI6qrkHi6hmIzp8LrZQWUoq2rX6pxf51+JPl5Si5YU5RH+nrJVkx0nUMvXkLkOIMAO3CBID24Gza7DoBEL16MQHoIBmNCtUS10IIpBZV+dJf36mvR2LmLETnzYFqadHJpT6f6jd8GGLzZvPl3wnGyJGuY6itW6G5BEC7YQJA7ZRSOnnjzdCWuxeBHDIYMhLmg72D2mcCtEby/xb5sk7r1K5FYtpMGCeMgvXM3317+RuVFYhefx3M0Sfx5d8Jom9fyH59oZq2dTmG3rnTtwOcqDAwAaBdEkn3LYAByCFDPBhMzyKjUaETSQ2tkPRpHd5ZVwdnXV3Or9NGlpYiOmcWm/x0gQgGIQcOdJUAAICq8+/3pvzHBIB2sTJQ29w9YABADGUC0BUiGmntGCizDXh8qsT3g6ysQGzOLG716yIRDEIMHAis/sRVHLVxk0cjomLABIDaadt2vQMAAIzSoR6MpmdqbxYkkD18x6e9+Lkkhw9jkx+3QkGIQQNdh9HxuAeDoWLBBIDa6WTKky8EMdD9g6on29UxENlDeAp43daoGIno9dfxy9+tQADSg8Ja5eOSD+U/9gGgXZQCXBYAAoDBBMC1tmZBkSmTAMPo7uF0iSwrQ3TubDb58YAMBoXs19d9IMtyH4OKBmcAaJd0GmrrVlchxAEHQBfoCyvftG0RBJCtCSigmQBZVoaSG6+HyS9/75SUZDtHutix4TSu93BAVOiYANAuynHfA6BPb4gAzwDwyh5bBH08nMcNo2IkonNnwxwzmu2gPSR79c6er+Fmy6ZPjZ6oMDABoHY64356UEQigOTKkpdkdLfCwIX5vTugvbc/t/p5L2C6/9tSCtqytAgE+PsQEwDaRW3Y4DqG6N8fgqcAem6PwsCFi/PyS45b/XJL9OsLEQpBt3S9kl+nUlDbt3s4KipkTACondsOgAAgpATPG82NXUmAQmqRf337O0KWlnKrX44Jw4AQLv++tIZ2HK+GRAWOCQBRAdnVJ0BmD+/Jg8JAo7ICUX75ExUcJgDkKREIQLAGIKdkLJotDBQCyTsW+NbHf59j4Zo/UcFiAkDeGjQQCAa7exRFr22LoNYa6aql3dLhTZaXZ0/1G32S79fuicTgQdkiWyKPMAEgbxkGIPgx6If2LYKOg9QdC/y99tAhiM29DoFxY3mqn18ME5r/p8lDnKslIiLqgZgAkLccB9DcB+AH1RLXyaplSC+7x/9rr9+AxDXXwVr5MrTj8Af3g2ND8P80eYgJAHlr0+aC6FZX6FQioVPL7kHqzru67YQ3p3Yt4lfNgPXyq91y/Z5Gb9zkyWmdRG2YAJCntGVBK9XdwyhqOpHUqaplSC2q6tYdAACgGhoQv/Y6ZFa8pLVt8/uUqIAwASAqICqe0MnFVUgtXJwXPQAAQFXXIH7VNFivcCaAqJAwAaB2IuB+U4hWCixUzg0VT+jUkmVI5lkXQABQjeuRuHYOMi++pBVnAnJCa+2+vkYICIObvyiLCQC1k0OGuI6ht2z15FAh2pOKJ3Rq6bLsscB59vJv41RXI371DNisCcgJ3bQNKp12FUOEw5B9ens0Iip0TAConReH+OhUEmANgKdUovXLf8HCvD4JEABUfWtNwIsrNXcHeCydyR7Z7YaU4EmA1IYJAO0iDfdd/HY0Q1ucAfCKaonr1JK7kVy8pGB2V6iaWiSmz4S18hVuEfSQat4BuJ1di4S9GQwVBSYAtEsoBNm/v6sQqrkZgqeNeaJtq1/y9juBPCn46yhnXR3i02dyi6CXWlpc7/owhg71aDBUDJgA0C5SAh4UAjqbNnswmJ5NxRM6VdW65l+gCZWqq0f8mlnIrGBhoFsqk9GqaZv7QAH3y3xUPJgAUDsRCUMOHuQ6jt7CBMCN9oK/uxYW3Jf/Z6maWsSnzYDNLYLuWBbU1q2uw8gRZR4MhooFEwBqJ0zTk9PGnMb1HoymZ2rf6rewqmDW/L+Iqm9o3yLIZkFdlM5AezCzJkpKPBgMFQsmALRLIAjZt6/rMHr9Bg8G0/NkO/wtQXLh4ryv9u8sp7oa8SunsSagi3QmA73ZfQIgBw30YDRULJgA0C7RCMTgwa7DqA1MADpLJRI6WbUUqUVLfNvnL8vKEPrutyFiMV+upxrXIz5rNrcIdoHOZKC8SAC4BEC7YQJA7aSUQvTr57ojoFq/ASqZ5AO+g9q2+qUW+9fhT5aXo2T+XETnzEJo0iWA6U93OFVdg8TVM2C9/Aq0UrxHOkhv2wa3RYDigAMgIlGPRkTFgD0haQ/GoIHZXgBW17cb6Z07obc2eTiq4pX98l+G1J13+Xawjxw+DLF5s2GOHQMhpVAtcS2EQGpRlS/nCzj19UjMnIXovDnQSmkhJRvTfAGnttZ1DDloIESYfQBoF84A0B7EkMGumwGpnTuht27xaETFS7XEdbJqGdJVS317+RuVFYjddAPMMaPR9uKVJTERnngxwpMnAqGQL+NwatciMeNaWCtfZrOgDlA1ta5jiIEDgLA/vy8VBs4A0B6MkeUQkQj0tu1dD7KjGWrDRu8GVYSy7X3v9vfLv7QU0TmzEBw/bq8vbhmNCp1IamiFpE91CE7tWsSvmoHYTTfk/FqFzln9b9cx5NChEFEuAdAunAGgPchBgwCXDwmdSsFZV8cvu/3IVvsvQ2pRlX8v/8oKxG6+AYExo/f774hoRIQnTURk6mTAg+2gHaEaWs8OWMEtgvujWlq009DgLogQkEMGcwmA9sAEgPYgAgFhjhzpOo6z+hOeCrgPKp7QycVVSC1c7Mt6O9C65j9nFoInjxfCND93vV3GoiI8cQIiUye5Pxeig1R1DeJXTYPFZkH7pDZuBHbscBckFIIxYgRYb0G7YwJAe5FfqnQdw3rnPcDl0aXFpr3JzyL/qv2NipGIzZ/3uV/+nyVjURG+ZAIil051PRvUUapxfXuzILYN3pOqb4ByWVQrIhEYI8s9GhEVCyYAtBfjkENcx9B1dVDbXdQRFJn29r6Lqnzd5x+dO7tDX/57/bexqAhPmoDIlEmAYeRqiHtwqqsRv3oGbDYLaqeV0qquHrqlxVUcEY1AVrpP7Km4sAiQ9mKUDYcIBqHdtKK1bTirV3s3qAKmEq0H+9y10Lf2vrKsDCU3Xg+zE1/+e8WIRoVqiWsA2cTFhyULVd9aE/DiSh0YOxrCMHr2lHUmA+fDjwDtblJE9unDLoC0F84A0F7kgP6Qw0pdxdCOA3vVWx6NqHC1NflJLl7i28s/O+0/N7vP3+ULtG2LYGTyRP9qAmpqkZg+E9bKV3p8IalOpWG98abrOMaRR3D9n/bCBID2Inr3cd8SWGs4H30Ilei5HQFVIqFTy+5B8vY7fTvVTw4fhuj11yE4fpzw6utZRlsLAy+b6tvuAGddHeLTZ/b4swOcxkao6hrXcczDDvVgNFRsmADQXkTvXjAqRkJId7eHqm+Ecrt9qUCpeOu0/6IqwHF8uaasrOh0wV+HY7cVBk6ZBPi0lUzV1SN+zSxkVvTcwkDnzbeglXIVQ4RCMA51X9dDxYcJAO1FGIYwjzgCCARcxVHr18NZV+fRqApHe8HfXQv9+/IvLe3wVr8uX6Nti+CUib7tJ1c1tYhPmwG7B24R1Epp6403IVwmAHLwIIiBXP+nvbEIkPbJOOH4bFtYF1v5dDoN5513elS/911b/ar8W/OvrEB0zqycfPl/loxFhYonNITMHl7kU2Fg2xbBwJjRyFWCk2/Ups1Q1TXQLgsAjYqRLACkfeIMAO2TeWAlxID+ruNYL62E9mkKvLtlO/wtQXLhYiCZ9OWa7Wv+Ofzy3+uarVsEw1Mm+XaKoFNdjfiV03pUTYBatw5q3Tp3QaSErKyE7NWrRyRN1DlMAGjfpIR53LGuw6iaWk+KmPJd9lS/pUj51EcfyB7pG5s/D+bok3y53h7XjkZFeMJFCF9+KUQs5ss1VeN6xGfNRubFlbon7A6w3/sX1I5mVzFEKATzePd/x1ScmADQPgnDEIETRgHC3YeDjidgvbDCo1Hlp7atfqnF/nX4k+XlKLlhDgLjxkJ205S4LImJyKQJCE26xLeZAFVdg8TVM2C9/Aq0UkWbBGjL0tbyF1zv/0ck0i0JIhUGJgC0X+Zhh0K6LB7SmQzsV1+Damkpyoe1SiR0cundSN6xwN/e/vNmZ/f5d3NthYxGReSSixH52WW+nTTn1NcjMXNWUScBqq4e9gcfuI4TOOpIyL59PRgRFSMmALRfYvhwyBFlruPYn/wbav0GD0aUX1RLXCerliFdtdS3U/2MygrEbroB5pjR3f7yb9PWLCg8eWK2cNQHTu1aJGZcC2vly0XZLCjz0kog4b6OxBw7FnC5nZeKF+8M2i+jfz9hHnG462UAVVcP+1/vezSq/NDW5Cd1513Q8bgv15SlpYjOmYXg+HGiu6b990dGoyIy6ZLsKYI+bRF0atciftWMoisMVPG4tp9fAe3yMC1RUgLz6C/nTaJI+YcJAH0uc9wYCA8Og7Ge+XvRfKllq/2XIbWoyrcvf1lZgdjNN/iy1a+rRDQiwpMmIjJ1sm8dA1VD69kBK17SukiaBTnVNbDffc91HFle5skMHhUv9gGgzxU47liIAf2hN2x0Fcd65x04NbXeDKobqXhCJxdXIeXjkb5y+LD2Jj++XNCFXX0CgOQCfw4/UtU1iF81DbGbb8z5tfzgvPU21JYtruOYhx3mvqU3FTXOANDnKylB4JST3cdp2gbr7/8o6KKtXU1+/Hv5Zw/2yU1731xpbxt86VTAp8JA1bi+vVlQIbcN1pmMTj/xV/eBDAOB074C2dNPU6TPxQSAPpeMRIQ5fhyEy+IubVmwnn8BuqnJo5H5q72976Iq//b5l5UhOne2r01+vNLWLCgyZRLgwRJSRzjV1YhfPQN2AdcEWG+8BbVmjes4on8/mKOO82BEVMyYANAXChx9FESpu+OBAcB+9z04qz/xYET+UonWL/8FC/3r8FdWhpIbry+oL//PamsWFLnicv9mAupbawIKsFmQTqe19eyzUNt3uI4VPOtMiN59PBgVFTMmAPSF5PBhnhwnqlMppB9/sqCWAdqa/CQXL/Gvt3/FSMTmz83u8y/wKdy2LYKRyROBYNCXa6qaWiSmz4S18pWCKjxVGzbC+ucLgNvT/yIRmGPHQEbCBX3vUO4xAaAvJExTBL56liex7Fdfg7PWZX9zn7Rt9Uvefqd/p/q19fYfP04U+su/jYy2niJ42VTfdgc46+oQnz6zoLYIWq+8Cqe21nUcOXwYzKOPcj8gKnpMAKhDAscdC1k23HUc1dAI+5/P5/2XmYondKqqdc3fp8OMZGVFwRX8dVR7YeAU//oEqLp6xK+ZhcyK/C8MVC1xnXnkMU9imcceA6N0qCexqLgxAaAOEQMHIHj6ae7PBrAspB95FGrbdo9G5r32gr+7Fvr35V9a2r7Vr9AK/jpKxlpnAqZMhPArCaipRXzaDNiv5PdMgL1qFeyPV7sPZBgInHdOwS8dkT+YAFCHyEhEBE47FaJ3L9ex7I9Xw3r+BQ9G5b32rX4Lq/xb8y+AJj9eye4OmIjw1Mm+nR2g6hvatwjmY7Mg1dKi04/9BbrZ3cl/AGAeeSTMww/3YFTUEzABoA4zTzwBxogR7gM5DjJ/egRqx468ehhnO/wtQXLhYv+q/dvW/Iv4y/+z2rYIhqdM8u0UQae6GvErp+VlTYCz+hNYz/zdfSDDQOCM0yD793Mfi3oEJgDUYTIWE8Hzv+5JLPuDj2C9/oYnsbygEgmdrFqK1KIl/u3zLy9HbP68Hnlca9sWwfDll0LEYr5cUzWuR3zW7LzaIqgzGZ3+4yOu+/4DgBw0CMGzz0RPSSTJPSYA1CnBU0+BHDLEdRzd3Iz0gw9BJxLd/iBu2+qXWuxje9/ycpTcMAeBcWORbwf7+EWWxERk0gSEJl3i20yAqq5B4uoZeXOUsP3hx54th5nHHwfj4IM8iUU9AxMA6hQxfDjMsaM9OWLUevlVWC+/4sGouk4lEjq59G4k71gA7eNWv9i82dl9/j38pDYZjYrIJRcj8rPLfKsJcOrrkZg5q9uTAJXJ6Myjj0G5PGcDABAIIHj+11j8R53CBIA6RUYjIvSdb0P2OsB9sFQK6QcegtrePbUAqiWuk1XLkK5a6tupfkZlBWI33QBzzOge//Jv09YsKDx5IuCy5XRHObVrkZhxLayVL3fbllS1+hOkn/groN1f3jzqyzCPOcaDUVFPwgSAOi148jhhHOFBpbHWsF59HXY3zAK0NflJ3XkXdDzuyzVlaSmic2YhOH6c6KnT/vsjo1ERmXQJIlP96xPg1K5F/KoZ3VIYqBIJnbr3d9Db3W+HFaEgguecDWPwIN5T1ClMAKhLQj/8gSd7uXU8juSye6Dicd++wrLV/suQWlTl25e/7EFb/bpKRCMiPGkiIlMn+9YxUDW0nh2wwt8tgs5b78D6xz9ct/0FADliBILf+ZYHo6KehgkAdYl5wigYhx7iSSzn/Q+QfvhPvqzHqnhCJxdXIbVwsb9r/kXe5Mcr7c2Cpk7y7+yA6hrEr5oGy6dmQdqydHLZPZ4c+gMAwa9/DcaAAbyvqNOYAFCXiIEDELrwAohAwHUsnUoh89DDcNau9WBk+9fe5GeRf9X+2YN9irO9b660tw2+dKp/pwg2rm9vFpTLtsFaKZ1+/EnYr6/yJJ6sGIngeed4Eot6HiYA1CVSShE471wYh7o/JRAA7NWfIPPQHz2JtS/acXTmsT9ne/v7tdWvrAzRubP55d8Fbc2CIlMmAYbhyzWd6mrEr54BtaY6Z9dQ69cjvewe6JYW98EMA8FzvwqjssJ9LOqRmABQl8leByD47W8CHswCAED6L48j88abOfn6UjtbkFn+vH8d/srKUHLj9fzyd6GtWVDkisv9mwmob/Ds6/yztFI6/adHYX/0sSfxRN++CF3wXTb+oS7zp/sGFSVhGEI1NurMY3+G/a/3XcfTGzchveweqG3btezbx9OHmpACwqc1ZaNiJKJzZ2e3+nFftiuyJCZUIqGhdfZwJj/OZ8jRfWK9/Q7SD//Jk8I/SInID/8DckSZ+1jUY3EGgFyRpaUi9J8/8CSWVgqZp/+G9FNPexJvd6KkBIEzTs9529n23v7jxwm+/L0ho62FgZdNzfnuADmyHIHRJ3oeV+3YodOLl0I1NHgSzxhZjuC3zocMBHiPUZdxBoBcC5xxGsxjjob9zrvug2mN9L2/g/3vT7V50Jc8e7gJKYWKJ7Sqb8ge9pODOgBZWYHYnFmc9s8BGYsKFU9oaOT895PDhnkaVyul0w//EZl/LvcsZvC8cyFHlnsWj3omJgDkmhwwAOGLf4rE9JlQLe6b6jifforUkmXQyZQWkbBnScCul4hCyuOdALK0tH2rn2dBaQ+F+vupmlqklt4NWJYn8WT5CAQvvIDLS+QaEwByTUgpVEuLNo47DmrFi+4DKoXM40/CPO5YaMfRXj7o2l8iQmYP//GgF4BRWYEov/x9UWi/n9q+XcdnzYGqqfUmYCiE8ISLYAwr9SYe9WhMAMgTsqREZF54UVuvvw6k3B9tqpNJpO5aCPPYoz0Y3Z5kLJotLBMCyTsWuOoGuPuav4dDpM9RSL9f+rG/wHrir9CO40k88/DDEDr/66z8J08wASDPmKOOQ+ib5yP9x0c8qXR26uqRvPV2qJ07tTzgAE8feDIaFaolrrXWSFct7dJ5ALK8PHuq3+iTvBwadUAh/H7WG2/qlp//0rOXvwiFEJk8EbJvX778yRNMAMgzMhYT9sertf3iSjiNje4Dao3Mc8th3HMftGVp4XHFc/sWMwCpO+/q1JekLC9HyQ1zeKRvN8rn30/t2KF3Tr4Uqq7ek3hCiGyx7bixnsQjApgAkMfMQw8RiYWLdeqW26C9OGjHspC+514Yhx/mPtY+tH1JCiGQWlTVoTVlOXxY9suRL/9ul4+/n0okdPLmW2CvesOzmKJ0KMJTJkH28nYmjHo2JgDkudC3vgl7+QuwX18F7cFZ56ppG5K3/gZ2Ta02K0Z6/gDco9nM/y0C0vuvYTAqKxC9/jqYo0/iyz9P5NPvp5XS6Uceyy6DeXXSpGEg9J8/gHnkEd7EI2rFBIA8ZwwdIjLLn9fxj1dD7/DmxDPnw4+QvPEmqO3btezjbZdAIPslqRNJDa2QXLRkn/vMZWkponNmseAvD+XL72e/8x6Sv/4NtAfbYduYRx+F0He/zW1/5DkmAJQTgfHjEPjW+Uj//gHAiyIorWE9tzx7kl86rUUo5PnDUEQj7VvMkouq9jg3gE1+8l93/372mmod/9XVUBs2eBZT9OmNyNRJMIYM4cufPMcEgHJCBALCXlennbfe9uScAADQto3M/Q/C+NKB0Latc7EVqm2fuejVC6l7fwtVVw/z8MMQmXYlv/wLQHufgICJ9D2/hWrahsBJJyJ8xWUIjj4pZ7+f2rlTx6fNhP3mW94FlRLh712AwBmnexeTaDd8oFHOaKV05qlnEL9yWpe2ae2PHDAAsfnzYJ5xGmSO1uG1ZWm1ZQt0MgVZUgLRvx+nYAuISqW02rwZwnaA3r0g+/TJWc2Gaonr1J0LkLrnPujPqT/oLPOYYxC7/dcwR5bzvqOc4AwA5YyQUqhUSoe+/z2kfvs7b5YCAKgtW5C4YT5i/ft5Em9fvN5ySP6SYe9aSH8eZVk6ffe9SN39W2gPTyoUsSjCP/tvvvwpp3gaIOWUDIdFaMJFCBzjbUc/p6YWiRtugr2m2v02A6Iu0I6jraeeRmrJ3Z6+/BEIIPzT/0Jg7BjvYhLtAxMAyjlz+DARvuIyiD59vAuqNew33kRi1hw4dXVMAshXynF0ZvkLSMybD7V5s6exAyedgPBF/wUZifDrn3KKCQD5whx9EsKTJkCEQt4F1RrWSyuRuPlWqK1bmQSQb5xVbyBx/TyojZs8jSsGDkTkF1dADhzAlz/lHGsAyBcyFBKquVk7H3yEzFNPAx40CAKQbRf81NMQWsNpbNRGaSkfnJQz2nG0veoNxGfOgqpd62lsUVKC6C+vgHn0UZ7GJdofJgDkG9mrl7Crq7Xz8cdw1lR7F9i2kX7iSWgh4GzZqo0B/ZkEUE7Yq95Ay6+uhlpX53ns4LfOR+h7F/CkP/INlwDIV7K8HJFpV0IOHuR57MzTzyAxey6cxkYuB5CntONo69XXdPya67x/+QsB86QTEZk8kS9/8hVnAMhXsnUvfXLZPTpx86/32bK1yywLmcefgNAaautWLftzJoC8kcsvf2PkSMRmzYQxooz3K/mKCQB1i9AF34HzaTXSD//Bs/4AbdJPPwNICWf9Bm0MZQtV6jrlONppW/PPwctf9O2LyC9/DvOIw3mfku+YAFC3kL17C2fjRq02boD1z+e9KwoEsjUBjz8BHW+BvWaNNg88kA9X6jTtODrz1NNI3nIbHI8L/gBAhMMIT52EwFlneh6bqCOYAFC3MQYPFva/P9UtGzbC+eBDb4Nrjcxzy6Gad8L+6GMtDzk4Z22Dqfhoy9KZx/6MxE23QG3ydp8/AMA0EbrwAoR//CPIsPcHWxF1BIsAqVuZB31JRGdOhxxR5n1wrbNrt1f8EvZLL0M7DosD6Qup5madrFqKxNz5uXn5C4HQV89G+GeXQUbZ7Ie6D28+6nZaKZ15bjkS02ZAbd6Sk2vIQQMRnXUj5WH+AAANpElEQVQNgmedgVwcJUzFwdm6VafuWoTUvfd5XpsCIFvxf9yxiN1xG8zhw3gfUrfiEgB1OyGl0Lat9c+vQOLG+dAt3p0c2EZt2oz49Gug1q6Fam7WslcvPnxpD/Yn/9bxq2bAfmFFbl7+AIwvH4nY/HkwSofmJD5RZzABoLwgTFPoVEojnUb817cC8YTn19A7diB5+wI4NbVwGhq1MYxdA6l9jz9afvH/4Lz/Qc6uIysrEZs1E+bBB/G+o7zABIDyhgiHhUqltNqxHalFSzw9W72NTqeRfuzPUOvqYL3yqjZGHQ/Jo397LNXcrFP33Y/UwkW5We9vJUeUoeT6WTCPPSZn1yDqLCYAlFdkOCzUzp1a72xB+vcPeHvMahvbgfXa63B+8f8QnjIJKp7QMhZlEtDD2A0NOjF7LtJPPuVtQ6rPkIMGITr9agTGj+M9RnmFCQDlHXnAAULFExpCIH3/g9A5ejir9RuQvPkWOB98BHvtOm2Wj+ADugfQjqOtFS8i/t+Xw/7XBzlb7wcAWToU0WtmIHjWGTm7BlFXMQGgvCRjUaGamzUApH93f25mAgDoeAKZRx6F/f77SD/9jA6cfhokdwkULWfzZp247Q5kHv5DTqf8gd1e/uecDcEeFJSHmABQ3pK9emVnArTOzgTkoCYAALTjwPnwI8SvnI7wj38IZ/16bQwdygd2EVG2rdW//oXEVdORWf4CoFROrycHDeLLn/Ieb0zKe2rnTp28/U6kHngoJ7sD9mAaMI8+GpGpk2GOGwMZZW1AoVMbN+rUw39E+oGHoDZs9Lbt9D7IipGIXvWrbM8Jnu5HeYw3JxUElUrpzP0PIXHrbTnpE7CXYBDhH3wf4Yv+C0bFSP6dFCBlWdp+aSUSd/4fnLffyflXP5Dd6lfyv/MRGHUc7xnKe7xJqWDoVEqn7n8IyTsXQG/bnvsLGgaM8nKEL/oJAmefBWPIYP69FABtWdpZswap++5H5qmn/blXhIA56nhEr/4VzGOPgWg99poon/EmpYKibVtn/v4PJGZfn53O9YEwTZijjkd4wkUwTz2ZRYJ5TDU16dSDDyPzwENwGhpzPt0PAJASgRNPQOzGuTAqK3hvUMHgzUoFR9m2dl57HfHZ8+B88ok/D3khIGIxBM86E6H//AHMo47kmQJ5xGnapu3nX0Dynt9Crf4kZwWjnyVCQQS+ejai10yHHDCABX9UUHizUkHSSmnn49VIzJ4L6/VVvqzvthH9+yN4ztkI//g/IQ+shAwG+XfUTVRLXFsvvoT0/Q/Afv0N3178ACAiEYR+/J8IT50Eo18/3gNUcHjTUkFzGht18n9vRfovT+S0octepITo0wfBb52P8Le/CeOIw7nu6yPV3KztV19H8vcPwFn1BnQix7tDPkMO6I/Izy5D8MILICM80pcKE29cKnhq+3aduu/3SN19rz8FX7sTArJ0KAJjxyB04QUwjjgcMhbj31UOaMfRqqkJ9vMrkP7LE7DfeQd6Z4u/g5ASRsVIRK+dgcC4sRA8R4IKGG9eKhrpR/+sE7fdDlVX709dwGeISASBc85G6Otfg3niKPDIYe/YtWu1/dJKpB95DPZbb3fPIKRE4NRTELt2Bov9qCjwJqaioW1bOx98iMRtt8N66WXAsrplHKJXLxiHHITgeecgeMopEKWlkFFOE3eW2rZdO//+FOmnnoa14kXouvqctYT+IrJfP4T+40KEfvIjGEOH8LekosAbmYqO2rJFp5YsQ/K++wGf14Y/S5aWInDqyQiecTrM8WO5XtwBTkOjtpYvR+bZ57KFfd39G44sR/SXP0fwvHPZ2Y+KCm9mKko6kdSZfy7//+3d+Y9e11kH8O+97zpeYo+X8R5vwaVKHDtVcJWtiZuqREgIEaVQ8QPQVkJAJZD4S5AqJEQLFRWgwk+FbNRWBKUbrZPShJDG9RJiZ7yMx2M7bjMz77zvvfzwBimN0uCQ2DOe+Xx+G2k0urpznufce895npPpL/xZBi8fnd+LKYoUK1em3LY17YcPpvXgx9LYtTNZvTqlsrHUc3N1dX4i/f98Mb1Dh9N/9rnUExeu2ymQ16rodtN66MGM/Mkfp7F7l8mfRceAZlHrHz9Rv/GnX0j/0OEbWiL2bopVq9L88IfSvOuutD5+MM07bk867SVVRVD1+3WuXEnv299J/9++lf6L/5Xq+InU87Rs83bF6OqM/OHvp/Pp30x5y8ol839haTGwWfSqq1fr3j8+num/+NJwHfkG9gx4V81mim435bataX30QJr33pPGju0pN29KuXJxTTp1VdXV5GSqM2fTf/lo5r7xzfT/44epL19OZmbmZdPmOylarTTvvScjf/T5NO/cm0KPBxYxg5sloR4M6v7Ro5n58y9m7uuH5/3z8jtqt9PYtDHFli1pfvgX0zpwdxp37k2xYkWKTid1q3VTLBnUg0Fdz/aSXi/V2XPp/+AHmTvyXKpXXkk1fibVxYs3tHHTNSmKlBvG0v2d3077sV9PY2xswd9neL8McpaU6ic/rXtPPZ2ZL/1VBseOL7yJ6H8VRYpGIxkZSfNDe9LYe3sae/aksW1bik0bU46tXzBlhnVV1dWFyVQXLqQaH0/136+m//LRDJ5/IdVr46n7/eF9XiBv+W9XdLtp3n9vRj7/B2nu36edL0uGgc6SNDh+op75yt+k98RTqaamFuzk9DPKcvg1YHR1ylWrUq5fl3LHjjR27kixdUsamzalWLYsabVStNtJo5Gi3U5dJEWn854mtrrXq+t+f3hfZnupq0HSm0t6s6kuXU515mwG4+MZHP1x6jNnh/fw9auppqYW5teVd9JsprFzR7qf+0xaj3wyjdFR+ZAlxYBnyaoGg7r/ne9m5ot/mf63vzt8U73JFatWpVy3NuXYWDLSTbl+fdJqpVy/bvhQ8JbfK5avGP5QV8MJ/C2bJAcXp5KfvpF6dib1xETq6ZlUExdSnzu3YDbqvR/FmtF0fu1X0/nsZ9K8dZs8yJJk4LPkVZOT9dy/fiPTX/5KBkd/PG8NhG6oVitpNZMkRYphhcSNPEthnhS33JLWffek+9nfTWPvHfoysKQZ/PCmwfh43Xv8yUx/+a9Tnzs/35fDB6ks0/zIXen+3ufSeuD+lMuWyX0seYIA3qKem6sHp05n9qt/n97XD6c6dfrm2B/AOyq63TTuuD2d33gsrU9+IuWqVTb5wZsEAvwc/Zd+VM9+9R8y+/gTqa+8viQ+kS8WRbud8hduS/e3Pj3c4LdunVwHbyMo4F1UvV5dnTmb2b/9u/SePpRqfHzhlg6StJpp7tuX9mOPpvMrjwyrJpZQh0V4LwQGXIO6368HJ06md+hwel/7p2F9+81S7rbYFUWKlSvS3L8/nU89muaBA2ls3CC3wf9BkMB7VE1O1r0nn87sE09l8MPn5+2IWpJizZq07rs3nU89mtZHD6ToduU0uEaCBf4f6qqqq6mpDF76UWa/9ngG3/t+qvPnF0WN/EJXrFiRxo7taX/i42k98sspb92WcvlyuQzeI0ED71NdVXX16qn0nvmXzD3zTOaOPLc0egncYOWa0TQPPpTWwYfSfuD+lKtXyV/wPggg+IDUVVVXly6nOnkys08+ncGzz2Vw6nTqK1fm+9JuTo1Gyg1jaezcmdbDB9M6+GDKDRu87cMHRCDBdVJNTdX9F19K/8iRzP7zoVQnXxlWEKgi+LmKRiPpdtP8pbvTfvhgGh/Zn8bu21KOWNuHD5qgguusnpur66s/yeD48cx981uZ+/6RVK+eTjUxobdAknS7KbduSXP37rQ+9kCaB+5OuXlTipERJXxwHQkuuMHqq1frwanT6R87nsGRZzP3799LdX4i6fWGFQWLufPgmycUFstGUu7aldb996W57840dm5PsXlzynZbToIbRLDBPKoHg7ru9VIdO57+8y+k//wLGbx6KtXp11KdP78olguKTifl1q0pt21JY8+eNO/cm+b+fSk3bhg+EGjNC/NC4MECUvf7dXX5cuqLU6nOnc/g2LFUJ06m/+JLqaemUk2/kczMpJ7tJQvp+OJWK+XISNLtJsuXpbF5cxp7b09j1640btudYu2alGvXpli+3IQPC4RAhJtENTVV90+cTP3aeKozZ1JNXBj2HpicTHVxKtWly6kvXbq+F9Fsply3NsXoaMrR0ZRj61OsX59y48Y0tm9LuXVrGttvTeG0PVjwBCncpOp+v870dOqZ2dSzM0lvLvXsbKrJi6lfv/IzDwTV+NnUM9PX/LfLsbEUK1ckRZFy8+YUIyMpN4ylWL4s6XRSdDpJuz3cqNfp2KwHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXIP/AaA9WKQrVaF9AAAAAElFTkSuQmCC";
    var Er = function(e) {
        this.images = {},
        this.crossOrigin = e,
        this._whenReady = null,
        this._nbLoaded = 0,
        this._nbToLoad = 0
    };
    Er.prototype.whenReady = function(e) {
        this._nbLoaded === this._nbToLoad ? e() : this._whenReady = e
    },
    Er.prototype.use = function(e, t, n) {
        var r = this,
        i = this.images[e];
        if (i) {
            if (n) return;
            i.loaded ? t(i.content) : i.onLoad.push(t)
        } else {
            this._nbToLoad += 1;
            var o = new wr; (i = {
                content: o,
                loaded: !1,
                onLoad: [t]
            }).content.crossOrigin = this.crossOrigin,
            i.content.src = e,
            i.content.onload = function() {
                i.loaded = !0,
                i.onLoad.forEach(function(e) {
                    e(i.content)
                }),
                i.onLoad = void 0,
                r._nbLoaded += 1,
                r._nbLoaded === r._nbToLoad && r._whenReady && (r._whenReady(), r._whenReady = null)
            },
            i.content.onerror = function() {
                r.images[e] || (r.images[e].content = Ar, i.loaded = !0, i.onLoad.forEach(function(e) {
                    e(i.content)
                }), i.onLoad = void 0),
                r._nbLoaded += 1,
                r._nbLoaded === r._nbToLoad && r._whenReady && (r._whenReady(), r._whenReady = null)
            },
            this.images[e] = i
        }
    },
    Er.prototype.kill = function() {
        Pe(this),
        this.images = void 0
    },
    Er.prototype.getErrorImage = function() {
        return Ar
    },
    Er.prototype.getImage = function(e) {
        var t = this.images[e];
        return t && t.loaded ? t.content: null
    };
    var Cr = function(e, t, n, r) {
        var i = this;
        this.width = e,
        this.height = t,
        this.animationsEnabled = !0,
        this.animationMode = !1,
        this.animationDuration = 0,
        this.animationEndDate = 0,
        this.defaultFont = r.defaultFont,
        this._visibilityConditionTolerance = 0,
        this.shadowsEnabled = !1,
        this.shadowOffsetY = 0,
        this.shadowBlur = 0,
        this.semanticLayers = n,
        this.options = r,
        this.noRefresh = r.noRefresh,
        this.now = ee(),
        this._dummyDom = {
            style: {},
            addEventListener: function() {}
        };
        this.frameManager = new xr(function(e) {
            r.onRender && r.onRender(e),
            i.currentTime = ee(),
            i.render(e),
            i.currentTime <= i.animationEndDate && i.refresh()
        },
        r.debug),
        this.imageManager = new Er(r.imgCrossOrigin),
        this.DEFAULT_LAYER = {
            camera: {
                x: 0,
                y: 0,
                zoom: 1,
                angle: 0
            }
        }
    };
    Cr.prototype.setFpsLimit = function(e) {
        this.frameManager.setFpsLimit(e)
    },
    Cr.prototype.reloadFonts = function() {},
    Cr.prototype.kill = function() {},
    Cr.prototype.whenImagesLoaded = function(e) {
        this.imageManager.whenReady(e)
    },
    Cr.prototype.setOffset = function(e) {
        this._offset = e
    },
    Cr.prototype.animate = function(e, t) {
        this.currentTime = ee(),
        this.animationMode = !0,
        this.animationDuration = e,
        this.currentTime + e > this.animationEndDate && (this.animationEndDate = this.currentTime + e),
        t(),
        this.animationMode = !1
    },
    Cr.prototype.setAnimationsEnabled = function(e) {
        this.animationsEnabled = !!e
    },
    Cr.prototype.setVisibilityConditionTolerance = function(e) {
        this._visibilityConditionTolerance = e
    },
    Cr.prototype.getSemanticLayer = function(e) {
        if (void 0 === e) return this.DEFAULT_LAYER;
        var t = this.semanticLayers[e];
        if (!t) throw new Error('sub-layer "' + e + '" does not exist');
        return t
    },
    Cr.prototype.refresh = function() {
        this.noRefresh || this.frameManager.requestNewFrame()
    },
    Cr.prototype.atNextFrame = function(e) {
        this.frameManager.atNextFrame(e),
        this.refresh()
    },
    Cr.prototype.wrappedUpdate = function(e, t, n) {
        for (var r = this.updateComposite(e, t), i = 0; i < r.length; ++i) r[i] = n(r[i], i);
        return this.composite(e, r)
    },
    Cr.prototype.hide = function(e) {
        return this.setDepth(e, -1)
    },
    Cr.prototype.clear = function() {},
    Cr.prototype.domElement = function() {
        return this._dummyDom
    },
    Cr.prototype.resize = function(e, t) {},
    Cr.prototype.delete = function(e) {},
    Cr.prototype.updateComposite = function(e, t) {
        return []
    },
    Cr.prototype.composite = function(e, t) {},
    Cr.prototype.setDepth = function(e, t) {},
    Cr.prototype.setSymbolicSize = function(e, t) {},
    Cr.prototype.setColor = function(e, t) {},
    Cr.prototype.setVisibilityCondition1 = function(e, t, n, r) {},
    Cr.prototype.setVisibilityCondition2 = function(e, t, n, r) {},
    Cr.prototype.setBackgroundColor = function(e) {},
    Cr.prototype.circle = function(e, t, n, r, i, o, s, a) {},
    Cr.prototype.triangle = function(e, t, n, r, i, o, s, a) {},
    Cr.prototype.rectangle = function(e, t, n, r, i, o, s, a) {},
    Cr.prototype.quadrilateral = function(e, t, n, r, i, o, s, a, u, l) {},
    Cr.prototype.polygon = function(e, t, n, r, i, o) {},
    Cr.prototype.line = function(e, t, n, r, i, o, s, a, u) {},
    Cr.prototype.quadraticCurve = function(e, t, n, r, i, o, s, a, u, l) {},
    Cr.prototype.cubicCurve = function(e, t, n, r, i, o, s, a, u, l, d) {},
    Cr.prototype.image = function(e, t, n, r, i, o, s, a, u) {},
    Cr.prototype.text = function(e, t, n, r, i, o, s, a, u, l, d, c, h, f) {},
    Cr.prototype.textWidth = function(e, t, n, r) {},
    Cr.prototype.render = function(e) {};
    var Sr = 1 / Math.pow(2, 22),
    Ir = Math.pow(2, 18),
    Tr = Ir / 6 * 5 * Sr,
    Nr = Ir * Sr,
    kr = "undefined" != typeof document && null !== document.createElement("canvas").getContext("2d"),
    Lr = 2 * Math.PI,
    Rr = Math.PI / 2,
    zr = Math.PI,
    Mr = new Array(128),
    Pr = tt().getContext("2d"),
    Fr = null,
    Dr = null,
    Or = null,
    Br = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ";
    function jr(e) {
        for (var t = 0; t < e.length; ++t) if ( - 1 === Br.indexOf(e.charAt(t))) return ! 1;
        return ! 0
    }
    function Ur(e) {
        return "number" == typeof e && e % 1 == 0 && 0 <= e && 4294967295 !== e
    }
    var Hr = function(o) {
        function e(e, t, n, r) {
            var i = this;
            void 0 === r && (r = {}),
            o.call(this, e, t, n, r),
            this._parseColor = G,
            this._enableImages = !0,
            this.canvas = tt(e, t),
            this.ctx = this.canvas.getContext("2d"),
            this.backgroundColor = r.backgroundColor,
            this.canvas.style.position = "absolute",
            this.canvas.style.top = "0px",
            this.canvas.style.left = "0px",
            this.atomicShapes = [],
            this.nbAtomicShapes = 0,
            this.shapes = new hn({
                type: Int8Array,
                components: Array,
                info: Array,
                prevInfo: Array,
                depth: Float32Array,
                semanticLayer: Array,
                symbolicSize: Float32Array,
                threshold: Float32Array,
                animationDuration: Float32Array,
                creationDate: Int32Array,
                visibilityCondition1: Array,
                visibilityCondition2: Array
            }),
            this._refresh = function() {
                return i.refresh()
            }
        }
        return o && (e.__proto__ = o),
        ((e.prototype = Object.create(o && o.prototype)).constructor = e).prototype.setImagesEnabled = function(e) {
            this._enableImages = !!e
        },
        e.prototype.clear = function() {
            this.shapes.clear(),
            this.shapes.attributes.type.fill(Jr.DELETED),
            this.atomicShapes = [],
            this.nbAtomicShapes = 0
        },
        e.prototype.domElement = function() {
            return this.canvas
        },
        e.prototype.resize = function(e, t) {
            dt(this.canvas, e, t),
            this.refresh(),
            this.width = e,
            this.height = t
        },
        e.prototype.delete = function(e) {
            var t = this.shapes.attributes;
            if (!Ur(e) || t.type[e] === Jr.DELETED) return - 1;
            if (t.type[e] === Jr.COMPOSITE) for (var n = t.components[e], r = 0; r < n.length; ++r) this.delete(n[r]);
            else ei(this, e);
            return t.type[e] = Jr.DELETED,
            this.shapes.remove(e),
            -1
        },
        e.prototype.updateComposite = function(e, t) {
            var n = this.shapes.attributes,
            r = n.type[e];
            if (!Ur(e) || r === Jr.DELETED) return [];
            var i = n.components[e];
            if (r !== Jr.COMPOSITE) return ei(this, e),
            n.type[e] = Jr.COMPOSITE,
            [];
            if (i.length !== t) {
                for (var o = 0; o < i.length; ++o) this.delete(i[o]);
                return []
            }
            return i
        },
        e.prototype.composite = function(e, t) {
            var n = this.shapes.attributes;
            if (Ur(e) && n.type[e] === Jr.COMPOSITE) return n.components[e] !== t && (n.components[e] = t),
            e;
            var r = this.shapes.add();
            return n.type[r] = Jr.COMPOSITE,
            n.components[r] = t,
            r
        },
        e.prototype.setDepth = function(e, t) {
            Qr(this, e, "depth", t, $r),
            this.refresh()
        },
        e.prototype.setColor = function(e, t) {
            Qr(this, e, "color", t),
            this.refresh()
        },
        e.prototype.setVisibilityCondition1 = function(e, t, n, r, i) {
            Qr(this, e, "visibilityCondition1", t ? [n, r, i] : null)
        },
        e.prototype.setVisibilityCondition2 = function(e, t, n, r, i) {
            Qr(this, e, "visibilityCondition2", t ? [n, r, i] : null)
        },
        e.prototype.triangle = function(e, t, n, r, i, o, s, a, u) {
            return ti(this, e, Jr.POLYGON, [i, void 0, Zr(this, t), Zr(this, n), Zr(this, r)], o, s, a, u)
        },
        e.prototype.circle = function(e, t, n, r, i, o, s, a, u) {
            return ti(this, e, Jr.CIRCLE, [i, Zr(this, t), n, r], o, s, a, u)
        },
        e.prototype.rectangle = function(e, t, n, r, i, o, s, a, u) {
            return qt(t, n, Xr, Wr, Gr, qr),
            this.quadrilateral(e, Xr, Wr, Gr, qr, r, i, o, s, a, u)
        },
        e.prototype.quadrilateral = function(e, t, n, r, i, o, s, a, u, l, d) {
            return ti(this, e, Jr.POLYGON, [o, Vr(d), Zr(this, t), Zr(this, n), Zr(this, r), Zr(this, i)], s, a, u, l)
        },
        e.prototype.polygon = function(e, t, n, r, i, o, s) {
            var a = new Array(t.length + 2);
            a[0] = n;
            for (var u = 0; u < t.length; ++u) a[u + 2] = Zr(this, t[u]);
            return ti(this, e, Jr.POLYGON, a, r, i, o, s)
        },
        e.prototype.line = function(e, t, n, r, i, o, s, a, u, l) {
            return ti(this, e, Jr.LINE, [o, r, i, Zr(this, t), Zr(this, n)], s, a, u, l)
        },
        e.prototype.quadraticCurve = function(e, t, n, r, i, o, s, a, u, l, d) {
            return ti(this, e, Jr.QUADRATIC, [s, i, o, Zr(this, t), Zr(this, n), Zr(this, r)], a, u, l, d)
        },
        e.prototype.cubicCurve = function(e, t, n, r, i, o, s, a, u, l, d, c) {
            return ti(this, e, Jr.CUBIC, [a, o, s, Zr(this, t), Zr(this, n), Zr(this, r), Zr(this, i)], u, l, d, c)
        },
        e.prototype.image = function(e, t, n, r, i, o, s, a, u, l) {
            return this.imageManager.use(r, this._refresh, !0),
            ti(this, e, Jr.IMAGE, [r, Zr(this, t), Zr(this, n), i, o], s, a, u, l)
        },
        e.prototype.text = function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
            return ti(this, e, Jr.TEXT, [s, n, Zr(this, t), i, o, r, a, u, l, Vr(p)], d, c, h, f)
        },
        e.prototype.textWidth = function(e, t, n, r) {
            return t === Dr && n === Fr && r === Or || (Pr.font = ("italic" === r || "bold" === r ? r + " ": "") + n + "px " + t, Fr = n, Dr = t, Or = r),
            Pr.measureText(e).width
        },
        e.prototype.stopAnimations = function() {
            this.shapes.attributes.animationDuration.fill(0),
            this._refresh()
        },
        e.prototype.setBackgroundColor = function(e) {
            this.options.backgroundColor = e
        },
        e.prototype.render = function(e) {
            var w = st(),
            t = this.shapes.attributes,
            n = this.atomicShapes,
            r = this.nbAtomicShapes,
            i = this.ctx,
            o = this.width,
            s = this.height,
            A = 0,
            E = 0,
            a = 0,
            u = null,
            l = null,
            d = null,
            c = null,
            h = null,
            f = -1,
            p = Mr,
            g = 0,
            v = null,
            y = !1,
            C = 0,
            S = 0,
            m = "black",
            _ = this._parseColor,
            I = -1,
            b = this.animationsEnabled,
            x = this.currentTime,
            T = this._visibilityConditionTolerance,
            N = this._enableImages;
            function k(e, t, n) {
                var r, i, o, s, a = J[e],
                u = -1 !== I ? K[e] : void 0,
                l = void 0 !== t ? J[t] : void 0;
                if (l) {
                    S = 0;
                    var d, c, h = Math.abs(l.size) * X;
                    if ( - 1 === l.ratio ? (d = l.textWidth, c = l.textHeight) : (d = l.textWidth * X, c = l.textHeight * X), -99999 < l.length && l.length * X < d) C = 0;
                    else {
                        C = H - l.angle;
                        var f = 0 <= l.size ? -1 : 1; - 99999 <= l.length && (C < -Rr ? (C += zr) < -Rr && (C += zr) : Rr < C && Rr < (C -= zr) && (C -= zr)),
                        S = f * ((c + h) / 2 + l.strokeSize)
                    }
                    r = (a.x - j) * X,
                    i = (a.y - U) * X;
                    var p = W * r + G * i,
                    g = -G * r + W * i;
                    if (n) if (S += a.oy, u) {
                        r = (u.x - j) * X,
                        i = (u.y - U) * X;
                        var v = W * r + G * i,
                        y = -G * r + W * i;
                        A = v + (p - v) * I,
                        E = y + (g - y) * I
                    } else A = p,
                    E = g;
                    else {
                        var m = Math.cos(C),
                        _ = Math.sin(C),
                        b = a.ox + a.zx * X,
                        x = a.oy + a.zy * X + S;
                        A = m * b + _ * x + p,
                        E = -_ * b + m * x + g,
                        u && (r = (u.x - j) * X, i = (u.y - U) * X, A = (o = m * b + _ * x + (v = W * r + G * i)) + (A - o) * I, E = (s = -_ * b + m * x + (y = -G * r + W * i)) + (E - s) * I)
                    }
                } else r = (a.x - j) * X + a.ax,
                i = (a.y - U) * X + a.ay,
                A = W * r + G * i + a.zx * X + a.ox,
                E = -G * r + W * i + a.zy * X + a.oy,
                u && (r = (u.x - j) * X + u.ax, i = (u.y - U) * X + u.ay, o = W * r + G * i + u.zx * X + u.ox, s = -G * r + W * i + u.zy * X + u.oy, A = o + (A - o) * I, E = s + (E - s) * I);
                A = A * w | 0,
                E = E * w | 0
            }
            function L() {
                if (K && -1 !== I) {
                    var e = _(K[0]),
                    t = _(J[0]);
                    if (e === t) m = J[0];
                    else {
                        var n = e[0] + (t[0] - e[0]) * I,
                        r = e[1] + (t[1] - e[1]) * I,
                        i = e[2] + (t[2] - e[2]) * I,
                        o = e[3] + (t[3] - e[3]) * I;
                        m = "rgba(" + (255 * n | 0) + ", " + (255 * r | 0) + ", " + (255 * i | 0) + ", " + o + ")"
                    }
                } else m = J[0]
            }
            function R() {
                var e = x - t.creationDate[P];
                I = K && b && e < t.animationDuration[P] ? e / t.animationDuration[P] : -1
            }
            function z(e) {
                if (!e) return ! 0;
                var t = (e[0] - j) * X,
                n = (e[1] - U) * X;
                return A = W * t + G * n,
                E = -G * t + W * n,
                a = e[2] * X,
                -T < A + a && -T < E + a && A - a < o + T && E - a < s + T
            }
            i.clearRect(0, 0, o * w, s * w),
            this.options.backgroundColor && (i.fillStyle = this.options.backgroundColor, i.fillRect(0, 0, o * w, s * w));
            for (var M = 0; M < r; ++M) {
                var P = n[M],
                F = t.semanticLayer[P],
                D = t.symbolicSize[P],
                O = t.threshold[P],
                B = F.camera,
                j = B.x,
                U = B.y,
                H = B.angle,
                X = B.zoom,
                W = Math.cos(H),
                G = Math.sin(H);
                if (! (F.disabled || -1 !== D && D * F.camera.zoom < O)) {
                    var q = t.visibilityCondition1[P],
                    Y = t.visibilityCondition2[P];
                    if (z(q) || z(Y)) {
                        if (F.defineClipSpace) {
                            var V = t.depth[P];
                            f !== V || v !== F ? (f = V, v = F, g = 1, p[0] = P) : (p[g] = P, g += 1)
                        } else if (F.useClipSpace && t.depth[P] === f && t.type[P] !== Jr.TEXT) {
                            for (X = t.semanticLayer[P].camera.zoom, y = !0, i.save(), i.beginPath(), ee = 0; ee < g; ++ee) {
                                var $ = p[ee];
                                if (Q = t.type[$], J = t.info[$], K = t.prevInfo[$], R(), Q === Jr.POLYGON) {
                                    for (var Z = 2; Z < J.length; ++Z) k(Z),
                                    i[2 === Z ? "moveTo": "lineTo"](A, E);
                                    i.closePath()
                                } else Q === Jr.CIRCLE && (k(1), a = (J[2] * X + J[3]) * w, i.arc(A, E, a, 0, Lr))
                            }
                            i.clip()
                        }
                        var Q = t.type[P],
                        J = t.info[P],
                        K = t.prevInfo[P];
                        if (R(), Q === Jr.POLYGON || Q === Jr.TEXT || Q === Jr.CIRCLE ? (L(), i.fillStyle = m, i.strokeStyle = m, i.lineWidth = .08 * w) : Q !== Jr.LINE && Q !== Jr.QUADRATIC && Q !== Jr.CUBIC || (L(), i.strokeStyle = m, i.lineWidth = (J[1] * X + J[2]) * w), i.beginPath(), Q === Jr.POLYGON) {
                            for (var ee = 2; ee < J.length; ++ee) k(ee, 1),
                            1 === ee ? i.moveTo(A, E) : i.lineTo(A, E);
                            i.closePath(),
                            i.fill(),
                            i.stroke()
                        } else if (Q === Jr.CIRCLE) k(1),
                        a = (a = K && -1 !== I ? (K[2] + (J[2] - K[2]) * I) * X + (K[3] + (J[3] - K[3]) * I) : J[2] * X + J[3]) * w | 0,
                        i.arc(A, E, a, 0, Lr),
                        i.fill();
                        else if (Q === Jr.LINE) k(3),
                        i.moveTo(A, E),
                        k(4),
                        i.lineTo(A, E),
                        i.stroke();
                        else if (Q === Jr.QUADRATIC) {
                            k(3),
                            i.moveTo(A, E),
                            k(4);
                            var te = A,
                            ne = E;
                            k(5),
                            i.quadraticCurveTo(te, ne, A, E),
                            i.stroke()
                        } else if (Q === Jr.CUBIC) {
                            k(3),
                            i.moveTo(A, E),
                            k(4);
                            var re = A,
                            ie = E;
                            k(5);
                            var oe = A,
                            se = E;
                            k(6),
                            i.bezierCurveTo(re, ie, oe, se, A, E),
                            i.stroke()
                        } else if (Q === Jr.TEXT) {
                            var ae = J[3],
                            ue = J[4],
                            le = J[5],
                            de = J[6],
                            ce = J[7],
                            he = J[8],
                            fe = (ae * X + ue) * w,
                            pe = J[1];
                            if ("iconfont" === le && jr(pe) && (le = this.defaultFont), fe !== l || le !== u || de !== d) {
                                var ge = ("italic" === de || "bold" === de ? de + " ": "") + fe + "px " + le;
                                i.font = ge,
                                l = fe,
                                u = le,
                                d = de
                            }
                            ce !== c && (c = i.textAlign = ce),
                            he !== h && (h = i.textBaseline = he),
                            k(2, 9, !0),
                            J[9] ? (i.save(), i.translate(A, E), i.rotate( - C), i.fillText(pe, 0, S * w), i.restore()) : i.fillText(pe, A, E)
                        } else if (Q === Jr.IMAGE && N) {
                            var ve = this.imageManager.getImage(J[0]),
                            ye = J[3],
                            me = J[4],
                            _e = J[2];
                            if (ve) {
                                k(1);
                                var be = ((_e.zx + _e.x) * X + _e.ox) * w,
                                xe = ((_e.zy + _e.y) * X + _e.oy) * w;
                                if (ye) i.drawImage(ve, A - be, E - xe, 2 * be, 2 * xe);
                                else {
                                    if (i.save(), i.beginPath(), i.rect(A - be, E - xe, 2 * be, 2 * xe), i.clip(), me) {
                                        var we = 0,
                                        Ae = 0,
                                        Ee = A - be,
                                        Ce = E - xe;
                                        for (A -= ve.width / 2; Ee < A;) A -= ve.width,
                                        we += 1;
                                        for (E -= ve.height / 2; Ce < E;) E -= ve.height,
                                        Ae += 1;
                                        var Se = E;
                                        for (we = 2 * we + 1, Ae = 2 * Ae + 1, ee = 0; ee < we; ++ee) {
                                            for (Z = 0; Z < Ae; ++Z) i.drawImage(ve, A, E, ve.width, ve.height),
                                            E += ve.height;
                                            E = Se,
                                            A += ve.width
                                        }
                                    } else i.drawImage(ve, A - ve.width / 2, E - ve.height / 2, ve.width, ve.height);
                                    i.restore()
                                }
                            }
                        }
                        y && (y = !1, i.restore())
                    }
                }
            }
        },
        e
    } (Cr);
    Hr.available = kr;
    var Xr = new Gt,
    Wr = new Gt,
    Gr = new Gt,
    qr = new Gt,
    Yr = ["textWidth", "textHeight", "angle", "length", "size", "strokeSize", "ratio"];
    function Vr(e) {
        if (e) {
            for (var t = {},
            n = 0; n < Yr.length; ++n) {
                var r = Yr[n];
                t[r] = e[r]
            }
            return t
        }
    }
    function $r(e, t) {
        ei(e, t),
        Kr(e, t)
    }
    function Zr(e, t) {
        var n = e._offset,
        r = {
            x: t.x,
            y: t.y,
            zx: t.zx,
            zy: t.zy,
            ax: t.ax,
            ay: t.ay,
            ox: t.ox,
            oy: t.oy
        };
        return n && (r.x += n.x, r.y += n.y, r.zx += n.zx, r.zy += n.zy, r.ax += n.ax, r.ay += n.ay, r.ox += n.ox, r.oy += n.oy),
        r
    }
    function Qr(e, t, n, r, i) {
        var o = e.shapes.attributes;
        if (Ur(t) && o.type[t] !== Jr.DELETED) if (o.type[t] === Jr.COMPOSITE) for (var s = o.components[t], a = 0; a < s.length; ++a) Qr(e, s[a], n, r, i);
        else "depth" === n && o.semanticLayer[t].transparency && (r -= Sr),
        o[n][t] = r,
        i && i(e, t)
    }
    var Jr = {
        DELETED: -1,
        COMPOSITE: 0,
        POLYGON: 1,
        CIRCLE: 2,
        IMAGE: 3,
        TEXT: 4,
        LINE: 5,
        QUADRATIC: 6,
        CUBIC: 7
    };
    function Kr(e, t) {
        var n = e.shapes.attributes,
        r = e.atomicShapes,
        i = e.atomicShapes.length,
        o = n.depth[t],
        s = n.semanticLayer[t].level;
        if (! (o < 0)) {
            for (var a = 0; a < i; ++a) {
                var u = r[a],
                l = n.depth[u],
                d = n.semanticLayer[u].level;
                if (o < l || o === l && s < d) break
            }
            a === i ? r.push(t) : r.splice(a, 0, t),
            e.nbAtomicShapes += 1,
            e.refresh()
        }
    }
    function ei(e, t) {
        var n = e.atomicShapes.lastIndexOf(t, e.nbAtomicShapes - 1);
        0 < e.nbAtomicShapes && -1 !== n && (e.atomicShapes.splice(n, 1), e.nbAtomicShapes -= 1)
    }
    function ti(e, t, n, r, i, o, s, a) {
        void 0 === s && (s = -1),
        void 0 === a && (a = 0);
        var u = e.shapes.attributes,
        l = !0;
        if (Ur(t) && u.type[t] !== Jr.DELETED) if (u.type[t] === Jr.COMPOSITE) for (var d = u.components[t], c = 0; c < d.length; ++c) e.delete(d[c]);
        else l = !1;
        else t = e.shapes.add();
        var h = e.getSemanticLayer(i);
        return (l || void 0 !== o) && (o = Ae(o, 1), h.transparency && (o -= Sr), u.depth[t] = o),
        u.components[t] = void 0,
        e.animationMode ? (!u.prevInfo[t] || u.creationDate[t] + u.animationDuration[t] < e.currentTime) && (u.prevInfo[t] = l ? void 0 : u.info[t], u.creationDate[t] = e.currentTime, u.animationDuration[t] = e.animationDuration) : (u.prevInfo[t] = void 0, u.creationDate[t] = e.currentTime, u.animationDuration[t] = 0),
        u.info[t] = r,
        u.visibilityCondition1[t] = null,
        u.visibilityCondition2[t] = null,
        u.type[t] = n,
        u.semanticLayer[t] = h,
        u.symbolicSize[t] = s,
        u.threshold[t] = a,
        l ? Kr(e, t) : $r(e, t),
        t
    }
    var ni = {
        DELETED: -1,
        COMPOSITE: 0,
        POLYGON: 1,
        CIRCLE: 2,
        IMAGE: 3,
        TEXT: 4,
        LINE: 5,
        QUADRATIC: 6,
        CUBIC: 7,
        DUPLICATE_IMG: 8
    },
    ri = ["g", "polygon", "circle", "image", "text", "line", "path", "path", "rect"],
    ii = new Gt,
    oi = new Gt,
    si = new Gt,
    ai = new Gt,
    ui = tt().getContext("2d"),
    li = null,
    di = null,
    ci = null,
    hi = Math.PI / 2,
    fi = Math.PI,
    pi = 180 / fi,
    gi = new Array(128),
    vi = {
        left: "start",
        right: "end",
        center: "middle"
    },
    yi = {
        top: "hanging",
        bottom: "baseline",
        middle: "central"
    },
    mi = function(o) {
        function e(e, t, n, r) {
            var i = this;
            void 0 === r && (r = {}),
            o.call(this, e, t, n, r),
            this._parseColor = G,
            this.svg = ht("svg"),
            this.svg.style.userSelect = "none",
            this.svg.style.webkitUserSelect = "none",
            this.svg.style.MozUserSelect = "none",
            this.defs = ht("defs"),
            this.svg.appendChild(this.defs),
            this.resize(e, t),
            this.shapes = new hn({
                dom: Array,
                components: Array,
                type: Int8Array,
                semanticLayer: Array,
                depth: Float32Array,
                symbolicSize: Float32Array,
                threshold: Float32Array,
                info: Array,
                prevInfo: Array,
                animationDuration: Float32Array,
                creationDate: Int32Array,
                visibilityCondition1: Array,
                visibilityCondition2: Array
            }),
            this._refresh = function() {
                return i.refresh()
            }
        }
        return o && (e.__proto__ = o),
        ((e.prototype = Object.create(o && o.prototype)).constructor = e).prototype.clear = function() {
            for (this.shapes.clear(), this.shapes.attributes.type.fill(ni.DELETED); this.svg.firstChild;) this.svg.removeChild(this.svg.firstChild);
            for (; this.defs.firstChild;) this.defs.removeChild(this.defs.firstChild);
            this.svg.appendChild(this.defs)
        },
        e.prototype.domElement = function() {
            return this.svg
        },
        e.prototype.resize = function(e, t) {
            var n, r, i, o, s;
            this.width = e,
            this.height = t,
            n = this.svg,
            i = r = 0,
            o = e,
            s = t,
            n.setAttribute("viewBox", r + " " + i + " " + o + " " + s),
            this.svg.setAttribute("width", e),
            this.svg.setAttribute("height", t)
        },
        e.prototype.delete = function(e, t) {
            var n = this.shapes.attributes;
            if (!Ei(e) || n.type[e] === ni.DELETED) return - 1;
            if (n.type[e] === ni.COMPOSITE) for (var r = n.components[e], i = 0; i < r.length; ++i) this.delete(r[i]);
            else Ii(this, e);
            return t || (this.shapes.remove(e), n.type[e] = ni.DELETED),
            -1
        },
        e.prototype.updateComposite = function(e, t) {
            var n = this.shapes.attributes,
            r = n.type[e];
            if (!Ei(e)) return [];
            var i = n.components[e];
            if (r !== ni.COMPOSITE) return Ii(this, n.dom[e]),
            n.type[e] = ni.COMPOSITE,
            [];
            if (i.length !== t) {
                for (var o = 0; o < i.length; ++o) this.delete(i[o]);
                return []
            }
            return i
        },
        e.prototype.composite = function(e, t) {
            var n = this.shapes.attributes;
            if (Ei(e) && n.type[e] === ni.COMPOSITE) return n.components[e] !== t && (n.components[e] = t),
            e;
            var r = this.shapes.add();
            return n.type[r] = ni.COMPOSITE,
            n.components[r] = t,
            r
        },
        e.prototype.setDepth = function(e, t) {
            Ni(this, e, "depth", t, Ti)
        },
        e.prototype.setColor = function(e, t) {
            Ni(this, e, "color", t)
        },
        e.prototype.setVisibilityCondition1 = function(e, t, n, r, i) {
            Ni(this, e, "visibilityCondition1", t ? [n, r, i] : null)
        },
        e.prototype.setVisibilityCondition2 = function(e, t, n, r, i) {
            Ni(this, e, "visibilityCondition2", t ? [n, r, i] : null)
        },
        e.prototype.triangle = function(e, t, n, r, i, o, s, a, u) {
            return Ci(this, e, ni.POLYGON, [i, void 0, Ai(this, t), Ai(this, n), Ai(this, r)], o, s, a, u)
        },
        e.prototype.circle = function(e, t, n, r, i, o, s, a, u) {
            return Ci(this, e, ni.CIRCLE, [i, Ai(this, t), n, r], o, s, a, u)
        },
        e.prototype.rectangle = function(e, t, n, r, i, o, s, a, u) {
            return qt(t, n, ii, oi, si, ai),
            this.quadrilateral(e, ii, oi, si, ai, r, i, o, s, a, u)
        },
        e.prototype.quadrilateral = function(e, t, n, r, i, o, s, a, u, l, d) {
            return Ci(this, e, ni.POLYGON, [o, wi(d), Ai(this, t), Ai(this, n), Ai(this, r), Ai(this, i)], s, a, u, l)
        },
        e.prototype.polygon = function(e, t, n, r, i, o, s) {
            var a = new Array(t.length + 2);
            a[0] = n;
            for (var u = 0; u < t.length; ++u) a[u + 2] = t[u].clone();
            return Ci(this, e, ni.POLYGON, a, r, i, o, s)
        },
        e.prototype.line = function(e, t, n, r, i, o, s, a, u, l) {
            return Ci(this, e, ni.LINE, [o, r, i, Ai(this, t), Ai(this, n)], s, a, u, l)
        },
        e.prototype.quadraticCurve = function(e, t, n, r, i, o, s, a, u, l, d) {
            return Ci(this, e, ni.QUADRATIC, [s, i, o, Ai(this, t), Ai(this, n), Ai(this, r)], a, u, l, d)
        },
        e.prototype.cubicCurve = function(e, t, n, r, i, o, s, a, u, l, d, c) {
            return Ci(this, e, ni.CUBIC, [a, o, s, Ai(this, t), Ai(this, n), Ai(this, r), Ai(this, i)], u, l, d, c)
        },
        e.prototype.image = function(e, t, n, r, i, o, s, a, u, l) {
            return this.imageManager.use(r, this._refresh, !0),
            Ci(this, e, !i && o ? ni.DUPLICATE_IMG: ni.IMAGE, [r, Ai(this, t), Ai(this, n), i, o], s, a, u, l)
        },
        e.prototype.text = function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
            return Ci(this, e, ni.TEXT, [s, n, Ai(this, t), i, o, r, a, u, l, wi(p)], d, c, h, f)
        },
        e.prototype.textWidth = function(e, t, n, r) {
            return t === di && n === li && r === ci || (ui.font = ("italic" === r || "bold" === r ? r + " ": "") + n + "px " + t, li = n, di = t, ci = r),
            ui.measureText(e).width
        },
        e.prototype.stopAnimations = function() {
            this.shapes.attributes.animationDuration.fill(0),
            this._refresh()
        },
        e.prototype.setBackgroundColor = function(e) {
            this.options.backgroundColor = e
        },
        e.prototype.render = function(e) {
            var t, n = this.shapes.attributes,
            r = this.svg.childNodes,
            i = r.length,
            o = this.width,
            s = this.height,
            w = 0,
            A = 0,
            a = 0,
            u = "",
            l = -1,
            d = gi,
            c = 0,
            h = !1,
            f = null,
            E = 0,
            C = 0,
            p = "black",
            g = this._parseColor,
            S = -1,
            v = this.animationsEnabled,
            y = this.currentTime,
            m = this._visibilityConditionTolerance;
            function _(e, t, n) {
                var r, i, o, s, a = Q[e],
                u = -1 !== S ? J[e] : void 0,
                l = void 0 !== t ? Q[t] : void 0;
                if (l) {
                    C = 0;
                    var d, c, h = Math.abs(l.size) * j;
                    if ( - 1 === l.ratio ? (d = l.textWidth, c = l.textHeight) : (d = l.textWidth * j, c = l.textHeight * j), -99999 < l.length && l.length * j < d) E = 0;
                    else {
                        E = B - l.angle;
                        var f = 0 <= l.size ? -1 : 1; - 99999 <= l.length && (E < -hi ? (E += fi) < -hi && (E += fi) : hi < E && hi < (E -= fi) && (E -= fi)),
                        C = f * ((c + h) / 2 + l.strokeSize)
                    }
                    r = (a.x - D) * j,
                    i = (a.y - O) * j;
                    var p = U * r + H * i,
                    g = -H * r + U * i;
                    if (n) if (C += a.oy, u) {
                        r = (u.x - D) * j,
                        i = (u.y - O) * j;
                        var v = U * r + H * i,
                        y = -H * r + U * i;
                        w = v + (p - v) * S,
                        A = y + (g - y) * S
                    } else w = p,
                    A = g;
                    else {
                        var m = Math.cos(E),
                        _ = Math.sin(E),
                        b = a.ox + a.zx * j,
                        x = a.oy + a.zy * j + C;
                        w = m * b + _ * x + p,
                        A = -_ * b + m * x + g,
                        u && (r = (u.x - D) * j, i = (u.y - O) * j, w = (o = m * b + _ * x + (v = U * r + H * i)) + (w - o) * S, A = (s = -_ * b + m * x + (y = -H * r + U * i)) + (A - s) * S)
                    }
                } else r = (a.x - D) * j + a.ax,
                i = (a.y - O) * j + a.ay,
                w = U * r + H * i + a.zx * j + a.ox,
                A = -H * r + U * i + a.zy * j + a.oy,
                u && (r = (u.x - D) * j + u.ax, i = (u.y - O) * j + u.ay, o = U * r + H * i + u.zx * j + u.ox, s = -H * r + U * i + u.zy * j + u.oy, w = o + (w - o) * S, A = s + (A - s) * S);
                w |= 0,
                A |= 0
            }
            function b() {
                a = J && -1 !== S ? (J[2] + (Q[2] - J[2]) * S) * j + (J[3] + (Q[3] - J[3]) * S) : Q[2] * j + Q[3],
                a |= 0
            }
            function x() {
                a = J && -1 !== S ? (J[1] + (Q[1] - J[1]) * S) * j + (J[2] + (Q[2] - J[2]) * S) : Q[1] * j + Q[2],
                a |= 0
            }
            function I() {
                if (J && -1 !== S) {
                    var e = g(J[0]),
                    t = g(Q[0]);
                    if (e === t) p = Q[0];
                    else {
                        var n = e[0] + (t[0] - e[0]) * S,
                        r = e[1] + (t[1] - e[1]) * S,
                        i = e[2] + (t[2] - e[2]) * S,
                        o = e[3] + (t[3] - e[3]) * S;
                        p = "rgba(" + (255 * n | 0) + ", " + (255 * r | 0) + ", " + (255 * i | 0) + ", " + o + ")"
                    }
                } else p = Q[0]
            }
            function T() {
                var e = y - n.creationDate[R];
                S = J && v && e < n.animationDuration[R] ? e / n.animationDuration[R] : -1
            }
            function N(e) {
                if (!e) return ! 0;
                var t = (e[0] - D) * j,
                n = (e[1] - O) * j;
                return w = U * t + H * n,
                A = -H * t + U * n,
                a = e[2] * j,
                -m < w + a && -m < A + a && w - a < o + m && A - a < s + m
            }
            for (this.svg.style.background = this.options.backgroundColor; this.defs.firstChild;) this.defs.removeChild(this.defs.firstChild);
            for (var k = 1; k < i; ++k) {
                var L = r[k],
                R = L.__index__,
                z = n.semanticLayer[R],
                M = n.symbolicSize[R],
                P = n.threshold[R],
                F = z.camera,
                D = F.x,
                O = F.y,
                B = F.angle,
                j = F.zoom,
                U = Math.cos(B),
                H = Math.sin(B);
                if (z.disabled || -1 !== M && M * z.camera.zoom < P) L.setAttribute("visibility", "hidden");
                else {
                    L.setAttribute("visibility", "visible");
                    var X = n.visibilityCondition1[R],
                    W = n.visibilityCondition2[R];
                    if (N(X) || N(W)) {
                        if (L.setAttribute("visibility", "visible"), z.defineClipSpace) l !== (u = n.depth[R]) || f !== z ? (l = u, c = 1, f = z, d[0] = R) : (d[c] = R, c += 1);
                        else if (z.useClipSpace && n.depth[R] === l) for (j = n.semanticLayer[R].camera.zoom, h = !0, (t = ht("clipPath")).setAttribute("id", R), this.defs.appendChild(t), ee = 0; ee < c; ++ee) {
                            var G = d[ee];
                            if (Z = n.type[G], Q = n.info[G], J = n.prevInfo[G], T(), Z === ni.POLYGON) {
                                for (var q = ht("polygon"), Y = "", V = 2; V < Q.length; ++V) _(V, 1),
                                Y += w + "," + A + " ";
                                q.setAttribute("points", Y),
                                t.appendChild(q)
                            } else if (Z === ni.CIRCLE) {
                                var $ = ht("circle");
                                _(1),
                                b(),
                                $.setAttribute("cx", w),
                                $.setAttribute("cy", A),
                                $.setAttribute("r", a),
                                t.appendChild($)
                            }
                        }
                        var Z = n.type[R],
                        Q = n.info[R],
                        J = n.prevInfo[R];
                        if (T(), Z !== ni.IMAGE && I(), Z === ni.POLYGON) {
                            for (var K = "",
                            ee = 2; ee < Q.length; ++ee) _(ee, 1),
                            K += w + "," + A + " ";
                            L.setAttribute("points", K),
                            L.setAttribute("fill", p)
                        } else if (Z === ni.CIRCLE) _(1),
                        b(),
                        L.setAttribute("cx", w),
                        L.setAttribute("cy", A),
                        L.setAttribute("r", a),
                        L.setAttribute("fill", p);
                        else if (Z === ni.LINE) x(),
                        _(3),
                        L.setAttribute("x1", w),
                        L.setAttribute("y1", A),
                        _(4),
                        L.setAttribute("x2", w),
                        L.setAttribute("y2", A),
                        L.setAttribute("stroke", p),
                        L.setAttribute("stroke-width", a);
                        else if (Z === ni.QUADRATIC) x(),
                        u = "",
                        _(3),
                        u += "M " + w + " " + A,
                        _(4),
                        u += " Q " + w + " " + A,
                        _(5),
                        u += " " + w + " " + A,
                        L.setAttribute("d", u),
                        L.setAttribute("stroke", p),
                        L.setAttribute("stroke-width", a),
                        L.setAttribute("fill", "none");
                        else if (Z === ni.CUBIC) x(),
                        u = "",
                        _(3),
                        u += "M " + w + " " + A,
                        _(4),
                        u += " C " + w + " " + A,
                        _(5),
                        u += " " + w + " " + A,
                        _(6),
                        u += " " + w + " " + A,
                        L.setAttribute("d", u),
                        L.setAttribute("stroke", p),
                        L.setAttribute("stroke-width", a),
                        L.setAttribute("fill", "none");
                        else if (Z === ni.TEXT) {
                            var te = Q[3],
                            ne = Q[4],
                            re = Q[5],
                            ie = Q[6],
                            oe = Q[7],
                            se = Q[8],
                            ae = te * j + ne,
                            ue = Q[1];
                            "iconfont" === re && bi(ue) && (re = this.defaultFont),
                            _(2, 9, !0),
                            L.setAttribute("x", w),
                            L.setAttribute("y", A),
                            L.setAttribute("text-anchor", vi[oe]),
                            L.setAttribute("fill", p),
                            L.setAttribute("font-size", ae),
                            L.setAttribute("font-family", re),
                            L.setAttribute("alignment-baseline", yi[se]),
                            L.setAttribute("font-weight", "bold" === ie ? "bold": "normal"),
                            L.setAttribute("font-style", "italic" === ie ? "italic": "normal"),
                            L.firstChild ? L.firstChild.nodeValue = ue: L.appendChild(document.createTextNode(ue)),
                            Q[9] && L.setAttribute("transform", "rotate(" + ( - pi * E | 0) + " " + w + " " + A + ") translate(0 " + C + ")")
                        } else if (Z === ni.IMAGE) {
                            var le = this.imageManager.getImage(Q[0]),
                            de = Q[3],
                            ce = Q[2],
                            he = (ce.zx + ce.x) * j + ce.ox,
                            fe = (ce.zy + ce.y) * j + ce.oy;
                            if (!le) continue;
                            _(1),
                            de ? (L.setAttribute("x", w - he), L.setAttribute("y", A - fe), L.setAttribute("width", 2 * he), L.setAttribute("height", 2 * fe)) : (L.setAttribute("x", w - le.width / 2), L.setAttribute("y", A - le.height / 2), L.setAttribute("width", le.width), L.setAttribute("height", le.height)),
                            L.setAttribute("preserveAspectRatio", "none"),
                            L.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", Q[0])
                        } else if (Z === ni.DUPLICATE_IMG) {
                            if (le = this.imageManager.getImage(Q[0]), he = (ce = Q[2]).zx * j + ce.ox, fe = ce.zy * j + ce.oy, !le) continue;
                            _(1);
                            var pe = ht("pattern"),
                            ge = ht("image"),
                            ve = "img_" + R;
                            pe.setAttribute("id", ve),
                            pe.setAttribute("patternUnits", "userSpaceOnUse"),
                            pe.setAttribute("x", w - he),
                            pe.setAttribute("y", A - fe),
                            pe.setAttribute("width", le.width),
                            pe.setAttribute("height", le.height),
                            ge.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", Q[0]),
                            ge.setAttribute("x", 0),
                            ge.setAttribute("y", 0),
                            ge.setAttribute("width", le.width),
                            ge.setAttribute("height", le.height),
                            pe.appendChild(ge),
                            this.defs.appendChild(pe),
                            L.setAttribute("x", w - he),
                            L.setAttribute("y", A - fe),
                            L.setAttribute("width", 2 * he),
                            L.setAttribute("height", 2 * fe),
                            L.setAttribute("fill", "url(#" + ve + ")")
                        }
                        h ? (L.setAttribute("clip-path", "url(#" + R + ")"), h = !1) : L.removeAttribute("clip-path")
                    } else L.setAttribute("visibility", "hidden")
                }
            }
        },
        e
    } (Cr);
    mi.available = !0;
    var _i = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ";
    function bi(e) {
        for (var t = 0; t < e.length; ++t) if ( - 1 === _i.indexOf(e.charAt(t))) return ! 1;
        return ! 0
    }
    var xi = ["textWidth", "textHeight", "angle", "length", "size", "strokeSize", "ratio"];
    function wi(e) {
        if (e) {
            for (var t = {},
            n = 0; n < xi.length; ++n) {
                var r = xi[n];
                t[r] = e[r]
            }
            return t
        }
    }
    function Ai(e, t) {
        var n = e._offset,
        r = {
            x: t.x,
            y: t.y,
            zx: t.zx,
            zy: t.zy,
            ax: t.ax,
            ay: t.ay,
            ox: t.ox,
            oy: t.oy
        };
        return n && (r.x += n.x, r.y += n.y, r.zx += n.zx, r.zy += n.zy, r.ax += n.ax, r.ay += n.ay, r.ox += n.ox, r.oy += n.oy),
        r
    }
    function Ei(e) {
        return "number" == typeof e && e % 1 == 0 && 0 <= e && 4294967295 !== e
    }
    function Ci(e, t, n, r, i, o, s, a) {
        void 0 === s && (s = -1),
        void 0 === a && (a = 0),
        void 0 === o && (o = 1);
        var u, l = e.getSemanticLayer(i),
        d = e.shapes.attributes,
        c = !0;
        return Ei(t) ? d.type[t] !== n ? e.delete(t, !0) : c = !1 : t = e.shapes.add(),
        l.transparency && (o -= Sr),
        e.animationMode ? (!d.prevInfo[t] || d.creationDate[t] + d.animationDuration[t] < e.currentTime) && (d.prevInfo[t] = c ? void 0 : d.info[t], d.creationDate[t] = e.currentTime, d.animationDuration[t] = e.animationDuration) : (d.prevInfo[t] = void 0, d.creationDate[t] = e.currentTime, d.animationDuration[t] = 0),
        d.info[t] = r,
        d.type[t] = n,
        d.semanticLayer[t] = l,
        d.depth[t] = o,
        d.symbolicSize[t] = s,
        d.threshold[t] = a,
        d.visibilityCondition1[t] = null,
        d.visibilityCondition2[t] = null,
        c ? ((u = ht(ri[n])).__index__ = t, d.dom[t] = u, Si(e, t)) : Ti(e, t),
        t
    }
    function Si(e, t) {
        var n = e.shapes.attributes,
        r = e.svg.childNodes,
        i = n.dom[t],
        o = n.depth[t],
        s = n.semanticLayer[t].level;
        if (0 !== o) {
            for (var a = 1; a < r.length; ++a) {
                var u = r[a].__index__,
                l = n.depth[u],
                d = n.semanticLayer[u].level;
                if (o < l || o === l && s < d) break
            }
            a === r.length ? e.svg.appendChild(i) : e.svg.insertBefore(i, r[a]),
            e.refresh()
        }
    }
    function Ii(e, t) {
        var n = e.shapes.attributes.dom[t];
        n.parentNode === e.svg && e.svg.removeChild(n)
    }
    function Ti(e, t) {
        Ii(e, t),
        Si(e, t)
    }
    function Ni(e, t, n, r, i) {
        var o = e.shapes.attributes;
        if (Ei(t)) if (o.type[t] === ni.COMPOSITE) for (var s = o.components[t], a = 0; a < s.length; ++a) Ni(e, s[a], n, r, i);
        else o.semanticLayer[t].transparency && (r -= Sr),
        o[n][t] = r,
        i && i(e, t),
        e.refresh()
    }
    var ki = {},
    Li = {
        depth: "float",
        symbolicSize: "vec2",
        animation: "vec3",
        absolutePosition: "vec4",
        angleOffset: "vec4",
        zoomOffset: "vec4",
        offset: "vec4",
        visibilityCondition1: "vec4",
        visibilityCondition2: "vec4"
    },
    Ri = {
        depth: "float",
        symbolicSize: "vec2",
        animation: "vec3",
        absolutePosition: "vec4",
        zoomOffset: "vec4",
        offset: "vec4",
        textDimensions: "vec3",
        lineInfo: "vec4",
        visibilityCondition1: "vec4",
        visibilityCondition2: "vec4"
    },
    zi = {
        screenSize: "vec2",
        camPosition: "vec2",
        cosCamAngle: "float",
        sinCamAngle: "float",
        camAngle: "float",
        animationMode: "int",
        camZoom: "float",
        currentTime: "float",
        textureMultiplier: "float",
        vcMargin: "float",
        pixelRatio: "float"
    },
    Mi = {
        texture: "sampler2D"
    },
    Pi = {
        textureCoords: "vec2"
    },
    Fi = {
        vTextureCoords: "vec2"
    },
    Di = {
        bigTexture: "sampler2D",
        smallTexture: "sampler2D"
    },
    Oi = {
        textureCoords: "vec2"
    },
    Bi = {
        vTextureCoords: "vec2"
    },
    ji = {
        color: "vec4",
        prevColor: "vec4"
    },
    Ui = {
        vColor: "vec4"
    },
    Hi = ["bool isSelfLoop(in vec4 lineInfo) {", "  return lineInfo.y < -99999.0;", "}"],
    Xi = [["float interpolate(in float start, in float end, in float ratio) {", "  return start + (end - start) * ratio;", "}", "vec2 interpolate(in vec2 start, in vec2 end, in float ratio) {", "  return start + (end - start) * ratio;", "}", "vec3 interpolate(in vec3 start, in vec3 end, in float ratio) {", "  return start + (end - start) * ratio;", "}", "vec4 interpolate(in vec4 start, in vec4 end, in float ratio) {", "  return start + (end - start) * ratio;", "}"], ["vec2 rotate(in vec2 v, in float cosAngle, in float sinAngle) {", "  return vec2(cosAngle * v.x + sinAngle * v.y, -sinAngle * v.x + cosAngle * v.y);", "}"], ["vec2 computePositionOnScreen(in vec2 absoluteCoords, in vec2 camPos, in float zoom, in float cosAngle, in float sinAngle) {", "  vec2 tmp = (absoluteCoords - camPos) * zoom;", "  return vec2(", "    cosAngle * tmp.x + sinAngle * tmp.y,", "    -sinAngle * tmp.x + cosAngle * tmp.y", "  );", "}"], ["bool checkVisibilityCondition(in vec4 condition, in vec2 screenDimensions, in vec2 camPos, in float zoom, in float cosAngle, in float sinAngle) {", "  if (condition.w == 0.0) return true;", "  vec2 posOnScreen = computePositionOnScreen(condition.xy, camPos, zoom, cosAngle, sinAngle);", "  float radiusOnScreen = zoom * condition.z;", "  return posOnScreen.x - radiusOnScreen - vcMargin < screenDimensions.x && posOnScreen.x + radiusOnScreen + vcMargin > 0.0 && posOnScreen.y - radiusOnScreen - vcMargin < screenDimensions.y && posOnScreen.y + radiusOnScreen + vcMargin > 0.0;", "}"]];
    ki.polygon = {
        uniforms: zi,
        attributes: [Li, ji],
        varyings: Ui,
        functions: Xi,
        vertex: [["vec2 positionOnCamera, _position, _angleOffset, _zoomOffset, _offset;", "float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "if (!thresholdPassed || depth < 0.0) {", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {;", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "float animationRatio = 2.0;", "if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "if (animationRatio >= 1.0) {", "  _position = absolutePosition.xy;", "  _angleOffset = angleOffset.xy;", "  _zoomOffset = zoomOffset.xy;", "  _offset = offset.xy;", "} else {", "  _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "  _angleOffset = interpolate(angleOffset.zw, angleOffset.xy, animationRatio);", "  _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio);", "  _offset = interpolate(offset.zw, offset.xy, animationRatio);", "}", "vec2 tmp = ((_position - camPosition) * camZoom + _angleOffset);", "vec2 refPoint = vec2(", "  cosCamAngle * tmp.x + sinCamAngle * tmp.y,", "  -sinCamAngle * tmp.x + cosCamAngle * tmp.y", ");", "positionOnCamera = (refPoint + _zoomOffset * camZoom + _offset) * pixelRatio;", ["vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]], ["vec4 selectedColor = color;", "if (animationRatio < 1.0) {", "  selectedColor = interpolate(prevColor, color, animationRatio);", "}", "vColor = selectedColor;"]],
        fragment: ["gl_FragColor = vColor;"]
    },
    ki.circle = {
        uniforms: zi,
        attributes: [Li, ji, {
            circleMultiplier: "vec2"
        }],
        varyings: [Ui, {
            vMultiplier: "vec2"
        }],
        functions: Xi,
        vertex: [["vec2 positionOnCamera, _position, _angleOffset, _zoomOffset, _offset;", "float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "if (!thresholdPassed || depth < 0.0) {", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {;", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "float animationRatio = 2.0;", "if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "if (animationRatio >= 1.0) {", "  _position = absolutePosition.xy;", "  _angleOffset = angleOffset.xy;", "  _zoomOffset = zoomOffset.xy;", "  _offset = offset.xy;", "} else {", "  _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "  _angleOffset = interpolate(angleOffset.zw, angleOffset.xy, animationRatio);", "  _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio);", "  _offset = interpolate(offset.zw, offset.xy, animationRatio);", "}", "vec2 tmp = ((_position - camPosition) * camZoom + _angleOffset);", "vec2 refPoint = vec2(", "  cosCamAngle * tmp.x + sinCamAngle * tmp.y,", "  -sinCamAngle * tmp.x + cosCamAngle * tmp.y", ");", "positionOnCamera = (refPoint + _zoomOffset * camZoom + _offset) * pixelRatio;", ["vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]], ["vec4 selectedColor = color;", "if (animationRatio < 1.0) {", "  selectedColor = interpolate(prevColor, color, animationRatio);", "}", "vColor = selectedColor;"], "vMultiplier = circleMultiplier;"],
        fragment: ["const vec3 black = vec3(0.0, 0.0, 0.0);", "float d = length(vMultiplier);", "if (d <= 1.0) {", "  gl_FragColor = vColor;", "} else {", "  discard;", "}"]
    },
    ki.image = {
        uniforms: [zi, Mi],
        attributes: [Li, Pi],
        varyings: [Fi],
        functions: Xi,
        vertex: [["vec2 positionOnCamera, _position, _angleOffset, _zoomOffset, _offset;", "float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "if (!thresholdPassed || depth < 0.0) {", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {;", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "float animationRatio = 2.0;", "if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "if (animationRatio >= 1.0) {", "  _position = absolutePosition.xy;", "  _angleOffset = angleOffset.xy;", "  _zoomOffset = zoomOffset.xy;", "  _offset = offset.xy;", "} else {", "  _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "  _angleOffset = interpolate(angleOffset.zw, angleOffset.xy, animationRatio);", "  _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio);", "  _offset = interpolate(offset.zw, offset.xy, animationRatio);", "}", "vec2 tmp = ((_position - camPosition) * camZoom + _angleOffset);", "vec2 refPoint = vec2(", "  cosCamAngle * tmp.x + sinCamAngle * tmp.y,", "  -sinCamAngle * tmp.x + cosCamAngle * tmp.y", ");", "positionOnCamera = (refPoint + _zoomOffset * camZoom + _offset) * pixelRatio;", ["vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]], "vTextureCoords = textureCoords;"],
        fragment: ["gl_FragColor = texture2D(texture, vTextureCoords);"]
    },
    ki.nonScaledImage = {
        uniforms: [zi, Mi, {
            textureDimensions: "vec2"
        }],
        attributes: [Li, Pi, {
            textureBox: "vec2",
            duplicate: "float"
        }],
        varyings: [Fi, {
            vDuplicateTexture: "float"
        }],
        functions: Xi,
        vertex: [["vec2 positionOnCamera, _position, _angleOffset, _zoomOffset, _offset;", "float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "if (!thresholdPassed || depth < 0.0) {", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {;", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "float animationRatio = 2.0;", "if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "if (animationRatio >= 1.0) {", "  _position = absolutePosition.xy;", "  _angleOffset = angleOffset.xy;", "  _zoomOffset = zoomOffset.xy;", "  _offset = offset.xy;", "} else {", "  _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "  _angleOffset = interpolate(angleOffset.zw, angleOffset.xy, animationRatio);", "  _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio);", "  _offset = interpolate(offset.zw, offset.xy, animationRatio);", "}", "vec2 tmp = ((_position - camPosition) * camZoom + _angleOffset);", "vec2 refPoint = vec2(", "  cosCamAngle * tmp.x + sinCamAngle * tmp.y,", "  -sinCamAngle * tmp.x + cosCamAngle * tmp.y", ");", "positionOnCamera = (refPoint + _zoomOffset * camZoom + _offset) * pixelRatio;", ["vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]], "float offsetW = ((textureBox.x * camZoom) / (textureDimensions.x * 2.0)) + 0.5;", "float offsetH = ((textureBox.y * camZoom) / (textureDimensions.y * 2.0)) + 0.5;", "vTextureCoords = vec2(", "  textureCoords.x == 1.0 ? offsetW : 1.0 - offsetW,", "  textureCoords.y == 1.0 ? offsetH : 1.0 - offsetH", ");", "vDuplicateTexture = duplicate;"],
        fragment: ["if (vDuplicateTexture == 0.0 && (vTextureCoords.x < 0.0 || vTextureCoords.x > 1.0 || vTextureCoords.y < 0.0 || vTextureCoords.y > 1.0)) {", "  discard;", "} else {", "  gl_FragColor = texture2D(texture, vTextureCoords);", "}"]
    },
    ki.text = {
        uniforms: [zi, Di],
        attributes: [Li, Oi, ji],
        varyings: [Bi, Ui],
        functions: Xi,
        vertex: [["vec2 positionOnCamera, _position, _angleOffset, _zoomOffset, _offset;", "float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "if (!thresholdPassed || depth < 0.0) {", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {;", "  gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "  return;", "}", "float animationRatio = 2.0;", "if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "if (animationRatio >= 1.0) {", "  _position = absolutePosition.xy;", "  _angleOffset = angleOffset.xy;", "  _zoomOffset = zoomOffset.xy;", "  _offset = offset.xy;", "} else {", "  _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "  _angleOffset = interpolate(angleOffset.zw, angleOffset.xy, animationRatio);", "  _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio);", "  _offset = interpolate(offset.zw, offset.xy, animationRatio);", "}", "vec2 tmp = ((_position - camPosition) * camZoom + _angleOffset);", "vec2 refPoint = vec2(", "  cosCamAngle * tmp.x + sinCamAngle * tmp.y,", "  -sinCamAngle * tmp.x + cosCamAngle * tmp.y", ");", "positionOnCamera = (refPoint + _zoomOffset * camZoom + _offset) * pixelRatio;", ["vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"]], ["vTextureCoords = textureCoords;", ["vec4 selectedColor = color;", "if (animationRatio < 1.0) {", "  selectedColor = interpolate(prevColor, color, animationRatio);", "}", "vColor = selectedColor;"]]],
        fragment: [["vec4 textureColor = texture2D(bigTexture, vTextureCoords);", "float alpha = textureColor.a;", "vec3 rgb = vColor.rgb;", "gl_FragColor = vec4(rgb, alpha) + vColor;"]]
    },
    ki.lineText = {
        uniforms: [zi, Di],
        attributes: [Ri, Oi, ji],
        varyings: [Bi, Ui],
        functions: [Xi, Hi],
        vertex: [["  const float PI = 3.1415926535897932384626433832795;", "  const float PI_2 = PI / 2.0;", "  float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "  bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "  if (!thresholdPassed || depth < 0.0) {", "    gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "    return;", "  }", "  vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "  if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {", "    gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "    return;", "  }", "  float absoluteEdgeLength = lineInfo.y * camZoom;", "  float absoluteEdgeSize = abs(lineInfo.z) * camZoom;", "  float textWidth, textHeight;", "  if (textDimensions.z < 0.0) {", "    textWidth = textDimensions.x;", "    textHeight = textDimensions.y;", "  } else {", "    textWidth = camZoom * textDimensions.x;", "    textHeight = camZoom * textDimensions.y;", "  }", "  float cosToUse, sinToUse, s = 1.0;", "  vec2 additionalOffset, _position, _zoomOffset, _offset;", "  if (!isSelfLoop(lineInfo) && absoluteEdgeLength < textWidth) {", "    cosToUse = 1.0;", "    sinToUse = 0.0;", "    additionalOffset = vec2(0.0, 0.0);", "  } else {", "    float v = (textHeight + absoluteEdgeSize + lineInfo.w) / -2.0;", "    float angleToUse = camAngle - lineInfo.x;", "    if (!isSelfLoop(lineInfo)) {", "      if (angleToUse < -PI_2) { angleToUse += PI; if (angleToUse < -PI_2) { angleToUse += PI; } }", "      else if (angleToUse > PI_2) { angleToUse -= PI; if (angleToUse > PI_2) { angleToUse -= PI; } }", "    } else if (angleToUse > -PI_2 && angleToUse < PI_2) {", "      v = - v + absoluteEdgeSize * 2.0;", "    } else {", "      if (angleToUse < -PI_2) { angleToUse += PI; if (angleToUse < -PI_2) { angleToUse += PI; } }", "      else if (angleToUse > PI_2) { angleToUse -= PI; if (angleToUse > PI_2) { angleToUse -= PI; } }", "    }", "    additionalOffset = vec2(0.0, v * (lineInfo.z >= 0.0 ? 1.0 : -1.0));", "    cosToUse = cos(angleToUse);", "    sinToUse = sin(angleToUse);", "  }", "  float animationRatio = 2.0;", "  if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "  if (animationRatio > 1.0) {", "    _position = absolutePosition.xy;", "    _zoomOffset = zoomOffset.xy * camZoom;", "    _offset = offset.xy + additionalOffset;", "  } else {", "    _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "    _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio) * camZoom;", "    _offset = interpolate(offset.zw, offset.xy, animationRatio) + additionalOffset;", "  }", "  vec2 center, positionOnCamera;", "  center = rotate((_position - camPosition) * camZoom, cosCamAngle, sinCamAngle);", "  positionOnCamera = floor(center + rotate(_zoomOffset + _offset, cosToUse, sinToUse)) * pixelRatio;", "  positionOnCamera = floor(positionOnCamera);", "  vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "  gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"], ["vTextureCoords = textureCoords;", ["vec4 selectedColor = color;", "if (animationRatio < 1.0) {", "  selectedColor = interpolate(prevColor, color, animationRatio);", "}", "vColor = selectedColor;"]]],
        fragment: [["vec4 textureColor = texture2D(bigTexture, vTextureCoords);", "float alpha = textureColor.a;", "vec3 rgb = vColor.rgb;", "gl_FragColor = vec4(rgb, alpha) + vColor;"]]
    },
    ki.linePolygon = {
        uniforms: [zi],
        attributes: [Ri, ji],
        varyings: [Ui],
        functions: [Xi, Hi],
        vertex: [["  const float PI = 3.1415926535897932384626433832795;", "  const float PI_2 = PI / 2.0;", "  float symSize = symbolicSize.x, symSizeThreshold = symbolicSize.y;", "  bool thresholdPassed = symSize < 0.0 || (symSize * camZoom) > symSizeThreshold;", "  if (!thresholdPassed || depth < 0.0) {", "    gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "    return;", "  }", "  vec2 vcScreenSize = screenSize / textureMultiplier / pixelRatio;", "  if (!checkVisibilityCondition(visibilityCondition1, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle) && !checkVisibilityCondition(visibilityCondition2, vcScreenSize, camPosition, camZoom, cosCamAngle, sinCamAngle)) {", "    gl_Position = vec4(-1.0, -1.0, 1.0, 1.0);", "    return;", "  }", "  float absoluteEdgeLength = lineInfo.y * camZoom;", "  float absoluteEdgeSize = abs(lineInfo.z) * camZoom;", "  float textWidth, textHeight;", "  if (textDimensions.z < 0.0) {", "    textWidth = textDimensions.x;", "    textHeight = textDimensions.y;", "  } else {", "    textWidth = camZoom * textDimensions.x;", "    textHeight = camZoom * textDimensions.y;", "  }", "  float cosToUse, sinToUse, s = 1.0;", "  vec2 additionalOffset, _position, _zoomOffset, _offset;", "  if (!isSelfLoop(lineInfo) && absoluteEdgeLength < textWidth) {", "    cosToUse = 1.0;", "    sinToUse = 0.0;", "    additionalOffset = vec2(0.0, 0.0);", "  } else {", "    float v = (textHeight + absoluteEdgeSize + lineInfo.w) / -2.0;", "    float angleToUse = camAngle - lineInfo.x;", "    if (!isSelfLoop(lineInfo)) {", "      if (angleToUse < -PI_2) { angleToUse += PI; if (angleToUse < -PI_2) { angleToUse += PI; } }", "      else if (angleToUse > PI_2) { angleToUse -= PI; if (angleToUse > PI_2) { angleToUse -= PI; } }", "    } else if (angleToUse > -PI_2 && angleToUse < PI_2) {", "      v = - v + absoluteEdgeSize * 2.0;", "    } else {", "      if (angleToUse < -PI_2) { angleToUse += PI; if (angleToUse < -PI_2) { angleToUse += PI; } }", "      else if (angleToUse > PI_2) { angleToUse -= PI; if (angleToUse > PI_2) { angleToUse -= PI; } }", "    }", "    additionalOffset = vec2(0.0, v * (lineInfo.z >= 0.0 ? 1.0 : -1.0));", "    cosToUse = cos(angleToUse);", "    sinToUse = sin(angleToUse);", "  }", "  float animationRatio = 2.0;", "  if (animationMode == 1 && animation.x > 0.5) animationRatio = (currentTime - animation.y) / animation.z;", "  if (animationRatio > 1.0) {", "    _position = absolutePosition.xy;", "    _zoomOffset = zoomOffset.xy * camZoom;", "    _offset = offset.xy + additionalOffset;", "  } else {", "    _position = interpolate(absolutePosition.zw, absolutePosition.xy, animationRatio);", "    _zoomOffset = interpolate(zoomOffset.zw, zoomOffset.xy, animationRatio) * camZoom;", "    _offset = interpolate(offset.zw, offset.xy, animationRatio) + additionalOffset;", "  }", "  vec2 center, positionOnCamera;", "  center = rotate((_position - camPosition) * camZoom, cosCamAngle, sinCamAngle);", "  positionOnCamera = floor(center + rotate(_zoomOffset + _offset, cosToUse, sinToUse)) * pixelRatio;", "  positionOnCamera = floor(positionOnCamera);", "  vec2 clipSpace = (positionOnCamera * textureMultiplier / screenSize) * 2.0 - 1.0;", "  gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 1.0 - depth, 1.0);"], ["vec4 selectedColor = color;", "if (animationRatio < 1.0) {", "  selectedColor = interpolate(prevColor, color, animationRatio);", "}", "vColor = selectedColor;"]],
        fragment: ["gl_FragColor = vColor;"]
    };
    ki.antialias = {
        uniforms: [{
            texture: "sampler2D",
            screenTextureRatio: "vec2"
        }],
        attributes: [{
            positionOnScreen: "vec2"
        }],
        varyings: [{
            vTextureCoords: "vec2"
        }],
        functions: [],
        vertex: ["float coordX, coordY;", "float difRatioX = (1.0 - screenTextureRatio.x) / 2.0;", "float difRatioY = (1.0 - screenTextureRatio.y) / 2.0;", "if (positionOnScreen.x == -1.0) coordX = 0.0; else coordX = screenTextureRatio.x;", "if (positionOnScreen.y == -1.0) coordY = 0.0; else coordY = screenTextureRatio.y;", "vTextureCoords = vec2(coordX, coordY);", "gl_Position = vec4(positionOnScreen, 0.0, 1.0);"],
        fragment: ["gl_FragColor = texture2D(texture, vTextureCoords);"]
    };
    var Wi = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 _",
    Gi = function(e, t, n, r, i) {
        var o, s, a;
        "iconfont" === e && (i = 128),
        this.fontFamily = e,
        this.fontStyle = t,
        this.updateTexture = n,
        this.defaultFont = r,
        this.characterResolution = i,
        this.textureRatio = 32,
        s = t,
        a = e,
        (o = this).textureSize = se(o.characterResolution * o.textureRatio, 2),
        o.canvas = document.createElement("canvas"),
        o.canvas.width = o.textureSize,
        o.canvas.height = o.textureSize,
        o.ctx = o.canvas.getContext("2d"),
        o.ctx.textBaseline = "middle",
        o.ctx.textAlign = "iconfont" === o.fontFamily ? "center": "left",
        qi(o.ctx, a, s, o.characterResolution),
        o.ctx.fillStyle = "black",
        this.charList = "iconfont" === e ? "": Wi,
        this.mustUpdate = !1,
        this.reload(),
        this.updateIfNecessary(),
        this.missingCharacter = this.get("")
    };
    function qi(e, t, n, r) {
        e.font = ("italic" === n || "bold" === n ? n + " ": "") + r + "px " + t
    }
    function Yi(e) {
        return - 1 !== Wi.indexOf(e)
    }
    function Vi(e, t) {
        if (e.full) return null;
        "iconfont" === e.fontFamily && (Yi(t) ? qi(e.ctx, e.defaultFont, e.fontStyle, e.characterResolution) : qi(e.ctx, e.fontFamily, e.fontStyle, e.characterResolution));
        var n = "iconfont" !== e.fontFamily || Yi(t) ? e.ctx.measureText(t).width: 1.2 * e.characterResolution,
        r = e.characterResolution;
        if (e.nextX + n > e.textureSize && (e.nextX = 0, e.nextY += r + 5, e.nextY + 5 >= e.textureSize)) return e.full = !0,
        null;
        var i = "iconfont" === e.fontFamily ? n / 2 : 0;
        e.ctx.fillText(t, e.nextX + i, e.nextY + r / 2);
        var o = {
            x1: e.nextX / e.textureSize,
            y1: e.nextY / e.textureSize,
            x2: (e.nextX + n) / e.textureSize,
            y2: (e.nextY + r) / e.textureSize,
            ratio: n / r
        };
        return e.nextX += n,
        e.charMap[t] = o,
        e.charList += t,
        o
    }
    Gi.prototype.get = function(e) {
        var t = this.charMap[e];
        if (!t) {
            if (! (t = Vi(this, e))) return this.charMap[e] = this.missingCharacter,
            console.warn('Cannot create texture for character "' + e + '": BitMap font (' + this.fontFamily + ") [" + this.fontStyle + "] full."),
            this.missingCharacter;
            this.mustUpdate = !0
        }
        return t
    },
    Gi.prototype.updateIfNecessary = function() {
        this.mustUpdate && (this.bigTexture = this.updateTexture(this.canvas, this.bigTexture), this.mustUpdate = !1)
    },
    Gi.prototype.reload = function() {
        var e;
        this.nextX = 0,
        this.nextY = 0,
        this.charMap = {},
        this.full = !1,
        (e = this).ctx.clearRect(0, 0, e.textureSize, e.textureSize);
        var t = this.charList;
        this.charList = "";
        for (var n = 0; n < t.length; ++n) Vi(this, t[n]);
        this.mustUpdate = !0
    };
    var $i = function(e, t, n, r) {
        for (var i = Object.keys(r), o = 0; o < i.length; ++o) {
            var s = i[o],
            a = r[s],
            u = new Zi(e, t, n, s, a);
            this[s] = u
        }
    },
    Zi = function(i, e, t, n, r) {
        var o = i.getUniformLocation(t, n);
        if ( - 1 === o) throw new Error("program " + e + ": uniform location " + n + " should not be -1");
        switch (r) {
        case "vec4":
            this.set = function(e, t, n, r) {
                i.uniform4f(o, e, t, n, r)
            };
            break;
        case "vec3":
            this.set = function(e, t, n) {
                i.uniform3f(o, e, t, n)
            };
            break;
        case "vec2":
            this.set = function(e, t) {
                i.uniform2f(o, e, t)
            };
            break;
        case "float":
            this.set = function(e) {
                i.uniform1f(o, e)
            };
            break;
        default:
            this.set = function(e) {
                i.uniform1i(o, e)
            }
        }
    },
    Qi = {
        float: 1,
        vec2: 2,
        vec3: 3,
        vec4: 4
    },
    Ji = function(e, t, n, r) {
        this._gl = e,
        this._glprogram = n,
        this.programName = t,
        this._capacity = 256,
        this._attributeList = Object.keys(r);
        for (var i = this._pointSize = 0; i < this._attributeList.length; ++i) {
            var o = this._attributeList[i],
            s = Qi[r[o]],
            a = e.getAttribLocation(n, o);
            if (!s) throw new Error("attribute " + o + " has invalid type " + r[o]);
            if ( - 1 === a) throw new Error("program " + t + ": attribute location " + o + " should not be -1");
            this[o] = new eo(e, o, s, a, 256, o),
            this._pointSize += s
        }
        this._availableOffsets = new yt,
        this._nbTriangles = 0
    };
    Ji.prototype.draw = function() {
        if (0 !== this._nbTriangles) {
            for (var e = this._gl,
            t = 0; t < this._attributeList.length; ++t) {
                ro(this[this._attributeList[t]])
            }
            e.drawArrays(e.TRIANGLES, 0, 3 * this._nbTriangles)
        }
    },
    Ji.prototype.add = function() {
        var e;
        if (0 < this._availableOffsets.size) e = this._availableOffsets.pop();
        else {
            if (this._nbTriangles === this._capacity) {
                this._capacity = 1.5 * this._capacity | 0;
                for (var t = 0; t < this._attributeList.length; ++t) {
                    no(this[this._attributeList[t]], this._capacity)
                }
            }
            e = this._nbTriangles,
            this._nbTriangles += 1
        }
        return e
    },
    Ji.prototype.remove = function(e) {
        return ! this._availableOffsets.has(e) && (this._availableOffsets.add(e), this.depth.set1x1(e, -1), !0)
    },
    Ji.prototype.clear = function() {
        this._nbTriangles = 0,
        this._availableOffsets.clear()
    };
    var Ki = 0,
    eo = function(e, t, n, r, i, o) {
        this._location = r,
        this._id = Ki++,
        this._gl = e,
        this._size = n,
        this._glBuffer = e.createBuffer(),
        this._eltBuffer = new Float32Array(3 * n),
        this._nbToUpdate = 0,
        this._name = o,
        this._bufferAll = !0,
        this.programName = t,
        this._content = new Float32Array(0),
        this._toUpdate = new Int8Array(0),
        1 === n ? (this.set = this.set1x1, this.set3 = this.set1x3) : 2 === n ? (this.set = this.set2x1, this.set3 = this.set2x3) : 3 === n ? (this.set = this.set3x1, this.set3 = this.set3x3) : 4 === n && (this.set = this.set4x1, this.set3 = this.set4x3),
        no(this, i)
    };
    function to(e, t) {
        e._bufferAll || e._toUpdate[t] || (e._nbToUpdate += 1, 1e4 < e._nbToUpdate ? e._bufferAll = !0 : e._toUpdate[t] = 1)
    }
    function no(e, t) {
        var n = e._gl;
        n.bindBuffer(n.ARRAY_BUFFER, e._glBuffer),
        n.bufferData(n.ARRAY_BUFFER, t * e._size * 3 * 4, n.DYNAMIC_DRAW),
        n.bufferSubData(n.ARRAY_BUFFER, 0, e._content);
        var r = new Float32Array(t * e._size * 3),
        i = new Int8Array(t);
        r.set(e._content),
        i.set(e._toUpdate),
        e._content = r,
        e._toUpdate = i
    }
    function ro(e) {
        var t = e._gl;
        t.bindBuffer(t.ARRAY_BUFFER, e._glBuffer),
        function(e) {
            var t = e._gl;
            if (e._bufferAll) t.bufferSubData(t.ARRAY_BUFFER, 0, e._content),
            e._toUpdate.fill(0),
            e._bufferAll = !1,
            e._nbToUpdate = 0;
            else if (0 !== e._nbToUpdate) {
                for (var n = e._toUpdate,
                r = n.length,
                i = 3 * e._size,
                o = e._eltBuffer,
                s = e._content,
                a = 0; a < r; ++a) if (n[a]) {
                    for (var u = a * i,
                    l = 0; l < i; ++l) o[l] = s[u + l];
                    t.bufferSubData(t.ARRAY_BUFFER, 4 * u, o),
                    n[a] = 0
                }
                e._nbToUpdate = 0
            }
        } (e),
        t.vertexAttribPointer(e._location, e._size, t.FLOAT, !1, 0, 0)
    }
    eo.prototype.clear = function() {
        this._bufferAll = !0
    },
    eo.prototype.copy = function(e, t) {
        to(this, t);
        var n = this._content,
        r = e._content,
        i = 3 * t * this._size,
        o = i + 3 * this._size;
        n.length < r.length && (no(this, r.length / (3 * this._size)), n = this._content);
        for (var s = i; s < o; ++s) n[s] = r[s]
    },
    eo.prototype.fill = function(e) {
        this._content.fill(e),
        this._bufferAll = !0
    },
    eo.prototype.shift = function(e, t, n, r, i, o, s) {
        to(this, e);
        var a = this._content;
        a[(e *= 12) + 2] = a[e],
        a[e + 3] = a[e + 1],
        a[e + 6] = a[e + 4],
        a[e + 7] = a[e + 5],
        a[e + 10] = a[e + 8],
        a[e + 11] = a[e + 9],
        a[e] = t,
        a[e + 1] = n,
        a[e + 4] = r,
        a[e + 5] = i,
        a[e + 8] = o,
        a[e + 9] = s
    },
    eo.prototype.get = function(e, t) {
        return this._content[e * this._size * 3 + t]
    },
    eo.prototype.set1x3 = function(e, t, n, r) {
        to(this, e);
        var i = this._content;
        i[e *= 3] = t,
        i[e + 1] = n,
        i[e + 2] = r
    },
    eo.prototype.set1x1 = function(e, t) {
        to(this, e);
        var n = this._content;
        n[e *= 3] = t,
        n[e + 1] = t,
        n[e + 2] = t
    },
    eo.prototype.set2x3 = function(e, t, n, r, i, o, s) {
        to(this, e);
        var a = this._content;
        a[e *= 6] = t,
        a[e + 1] = n,
        a[e + 2] = r,
        a[e + 3] = i,
        a[e + 4] = o,
        a[e + 5] = s
    },
    eo.prototype.set2x1 = function(e, t, n) {
        to(this, e);
        var r = this._content;
        r[e *= 6] = t,
        r[e + 1] = n,
        r[e + 2] = t,
        r[e + 3] = n,
        r[e + 4] = t,
        r[e + 5] = n
    },
    eo.prototype.set3x3 = function(e, t, n, r, i, o, s, a, u, l) {
        to(this, e);
        var d = this._content;
        d[e *= 9] = t,
        d[e + 1] = n,
        d[e + 2] = r,
        d[e + 3] = i,
        d[e + 4] = o,
        d[e + 5] = s,
        d[e + 6] = a,
        d[e + 7] = u,
        d[e + 8] = l
    },
    eo.prototype.set3x1 = function(e, t, n, r) {
        to(this, e);
        var i = this._content;
        i[e *= 9] = t,
        i[e + 1] = n,
        i[e + 2] = r,
        i[e + 3] = t,
        i[e + 4] = n,
        i[e + 5] = r,
        i[e + 6] = t,
        i[e + 7] = n,
        i[e + 8] = r
    },
    eo.prototype.set4x3 = function(e, t, n, r, i, o, s, a, u, l, d, c, h) {
        to(this, e);
        var f = this._content;
        f[e *= 12] = t,
        f[e + 1] = n,
        f[e + 2] = r,
        f[e + 3] = i,
        f[e + 4] = o,
        f[e + 5] = s,
        f[e + 6] = a,
        f[e + 7] = u,
        f[e + 8] = l,
        f[e + 9] = d,
        f[e + 10] = c,
        f[e + 11] = h
    },
    eo.prototype.set4x1 = function(e, t, n, r, i) {
        to(this, e);
        var o = this._content;
        o[e *= 12] = t,
        o[e + 1] = n,
        o[e + 2] = r,
        o[e + 3] = i,
        o[e + 4] = t,
        o[e + 5] = n,
        o[e + 6] = r,
        o[e + 7] = i,
        o[e + 8] = t,
        o[e + 9] = n,
        o[e + 10] = r,
        o[e + 11] = i
    };
    var io = ["precision mediump float;", "precision mediump int;"];
    function oo(e, t, n, r, i, o, s, a) {
        var u, l, d, c, h, f, p, g, v, y, m, _ = so(n),
        b = so(r),
        x = so(i),
        w = co(e, t, (f = _, p = b, g = x, v = o, y = ["void main() {", y = s, "}"], (m = []).push(io), m.push(lo("uniform", f)), m.push(lo("attribute", p)), m.push(lo("varying", g)), (v || []).forEach(function(e) {
            m.push(e)
        }), m.push(y), m.map(function(e) {
            return uo(e)
        }).join("\n")), !0),
        A = co(e, t, (u = _, l = x, d = o, c = ["void main() {", c = a, "}"], (h = []).push(io), h.push(lo("uniform", u)), h.push(lo("varying", l)), (d || []).forEach(function(e) {
            h.push(e)
        }), h.push(c), h.map(function(e) {
            return uo(e)
        }).join("\n")), !1),
        E = e.createProgram();
        if (e.attachShader(E, w), e.attachShader(E, A), e.linkProgram(E), !e.getProgramParameter(E, e.LINK_STATUS)) throw new Error("unable to initialize WebGL program " + t + ": \n" + e.getProgramInfoLog(E));
        this._gl = e,
        this.programName = t,
        this._glProgram = E,
        this._attributeDef = b,
        this._attributeList = Object.keys(b),
        this.uniforms = new $i(e, t, E, _)
    }
    function so(e) {
        e instanceof Array || (e = [e]);
        for (var t = {},
        n = 0; n < e.length; ++n) ao(t, e[n]);
        return t
    }
    function ao(e, t) {
        for (var n = Object.keys(t), r = 0; r < n.length; ++r) {
            var i = n[r];
            e[i] = t[i]
        }
    }
    function uo(e) {
        if ("string" == typeof e) return e + "\n";
        for (var t = "",
        n = 0; n < e.length; ++n) t += uo(e[n]);
        return t
    }
    function lo(e, t) {
        t = t || {};
        for (var n = Object.keys(t), r = [], i = 0; i < n.length; ++i) {
            var o = n[i],
            s = t[o];
            r.push(e + " " + s + " " + o + ";")
        }
        return r
    }
    function co(e, t, n, r) {
        var i = e.createShader(r ? e.VERTEX_SHADER: e.FRAGMENT_SHADER);
        if (e.shaderSource(i, n), e.compileShader(i), !e.getShaderParameter(i, e.COMPILE_STATUS)) {
            var o = 0;
            throw console.log(n.split("\n").map(function(e) {
                return++o + "  " + e
            }).join("\n")),
            new Error("Error in program " + t + ":" + (r ? "vertex": "fragment") + ":\n" + e.getShaderInfoLog(i))
        }
        return i
    }
    oo.prototype.prepare = function(e) {
        this._gl.useProgram(this._glProgram);
        for (var t = e; t < this._attributeList.length; ++t) this._gl.enableVertexAttribArray(t);
        for (t = this._attributeList.length; t < e; ++t) this._gl.disableVertexAttribArray(t);
        return this._attributeList.length
    },
    oo.prototype.createBuffer = function() {
        return new Ji(this._gl, this.programName, this._glProgram, this._attributeDef)
    };
    var ho = function(e, t, n) {
        void 0 === n && (n = {}),
        this.renderer = e,
        this.gl = e.gl,
        this.renderFunction = t,
        this.ratio = Ae(n.ratio, 1),
        this.wrap = Ae(n.wrap, this.gl.CLAMP_TO_EDGE),
        this.minFilter = Ae(n.minFilter, this.gl.NEAREST_MIPMAP_LINEAR),
        this.magFilter = Ae(n.magFilter, this.gl.NEAREST),
        this.texture = null,
        this.framebuffer = null,
        this.depthStencilBuffer = null,
        this.screenWidth = null,
        this.screenHeight = null,
        this.renderWidth = null,
        this.renderHeight = null
    };
    ho.prototype.resize = function(e, t, n) {
        var r = st();
        if (e *= r, t *= r, this.screenWidth = e, this.screenHeight = t, this.renderWidth = e * this.ratio, this.renderHeight = t * this.ratio, n) {
            var i = this.gl,
            o = se(e, 2) * this.ratio,
            s = se(t, 2) * this.ratio;
            o === this.textureWidth && s === this.textureHeight || (this.textureWidth = o, this.textureHeight = s, this.texture && i.deleteTexture(this.texture), this.framebuffer && i.deleteFramebuffer(this.framebuffer), this.depthStencilBuffer && i.deleteRenderbuffer(this.depthStencilBuffer), this.texture = i.createTexture(), i.bindTexture(i.TEXTURE_2D, this.texture), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, this.wrap), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, this.wrap), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, this.minFilter), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, this.magFilter), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, this.textureWidth, this.textureHeight, 0, i.RGBA, i.UNSIGNED_BYTE, null), i.bindTexture(i.TEXTURE_2D, null), this.depthStencilBuffer = i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, this.depthStencilBuffer), i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, this.textureWidth, this.textureHeight), this.framebuffer = i.createFramebuffer(), i.bindFramebuffer(i.FRAMEBUFFER, this.framebuffer), i.framebufferTexture2D(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.TEXTURE_2D, this.texture, 0), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, this.depthStencilBuffer))
        }
    },
    ho.prototype.render = function(e) {
        var t = this.gl;
        t.bindFramebuffer(t.FRAMEBUFFER, this.framebuffer),
        t.viewport(0, 0, this.renderWidth, this.renderHeight),
        this.renderFunction(this.renderer, t, this, e)
    };
    var fo = 4096,
    po = 4096,
    go = !1,
    vo = new Gt,
    yo = new Gt,
    mo = new Gt,
    _o = new Gt;
    if ("undefined" != typeof document) try {
        go = !!(document.createElement("canvas").getContext("webgl") || document.createElement("canvas").getContext("experimental-webgl"))
    } catch(e) {}
    var bo = Math.SQRT2 + 1,
    xo = function(h) {
        function e(e, t, n, r) {
            void 0 === r && (r = {}),
            h.call(this, e, t, n, r),
            this._parseColor = G,
            this.samplingLevel = "super-sampling" === r.antialias && st() < 2 ? 2 : 1;
            for (var i = st(); 1 < this.samplingLevel && "firefox" === O() && (this.samplingLevel * window.innerWidth * i > fo || this.samplingLevel * window.innerHeight * i > po);) this.samplingLevel /= 2;
            var o = {
                stencil: !0,
                antialias: "native" === r.antialias || "super-sampling" === r.antialias && 1 !== st(),
                alpha: !0,
                premultipliedAlpha: !1
            };
            this.canvas = document.createElement("canvas"),
            this.canvas.style.position = "absolute",
            this.canvas.style.top = "0px",
            this.canvas.style.left = "0px",
            this.gl = this.canvas.getContext("webgl", o),
            this.gl || (xe('Using "experimental-webgl"'), this.canvas = document.createElement("canvas"), this.gl = this.canvas.getContext("experimental-webgl", o)),
            this.canvas.className = "ogma";
            var s = this.gl;
            this.setBackgroundColor(r.backgroundColor),
            s.enable(s.BLEND),
            s.blendFuncSeparate(s.SRC_ALPHA, s.ONE_MINUS_SRC_ALPHA, s.SRC_ALPHA, s.ONE),
            s.enable(s.DEPTH_TEST),
            s.depthFunc(s.LEQUAL),
            this._nbAttributesEnabled = 0;
            var a = this;
            this._createTextTexture = function(e, t) {
                return No(a, e, t, "text")
            },
            this.programs = {};
            for (var u = Object.keys(ki), l = 0; l < u.length; ++l) {
                var d = u[l],
                c = ki[d];
                this.programs[d] = new oo(s, d, c.uniforms, c.attributes, c.varyings, c.functions, c.vertex, c.fragment)
            }
            this.shapeList = new hn({
                bufferOffset: Int32Array,
                bufferIndex: Int32Array,
                components: Array
            }),
            this.texturesByUrl = {},
            this.textureCounter = 0,
            this.fontSamplingSize = r.fontSamplingSize,
            this.minSvgSize = r.minSvgSize,
            this.bitmapFontCounter = 0,
            this.bitmapFontsByIndex = {},
            this.bitmapFonts = {},
            this.buffersBySemanticLayer = {},
            this.bufferList = [],
            this._offset = null,
            this._renderSteps = [],
            this._renderSteps.push(new ho(this, wo, {
                ratio: this.samplingLevel
            })),
            1 !== this.samplingLevel && (this.antiAliasBuffer = this.programs.antialias.createBuffer(), this.antiAliasBuffer.add(), this.antiAliasBuffer.add(), this.antiAliasBuffer.positionOnScreen.set3(0, -1, -1, 1, -1, 1, 1), this.antiAliasBuffer.positionOnScreen.set3(1, 1, 1, -1, 1, -1, -1), this._renderSteps.push(new ho(this, Ao))),
            this._sortSemanticLayerFunction = function(e, t) {
                return r = t,
                Jo(n = a, e) - Jo(n, r);
                var n, r
            }, this.resize(48, 48)
        }
        return h && (e.__proto__ = h),
        ((e.prototype = Object.create(h && h.prototype)).constructor = e).prototype.render = function(e) {
            for (var t = null,
            n = 0; n < this._renderSteps.length; ++n) {
                var r = this._renderSteps[n];
                r.render(t),
                t = r
            }
            this.gl.flush()
        },
        e.prototype.resize = function(e, t) {
            dt(this.canvas, e, t),
            this.width = e,
            this.height = t;
            for (var n = 0,
            r = this._renderSteps.length; n < r; ++n) this._renderSteps[n].resize(e, t, n !== r - 1);
            this.refresh()
        },
        e.prototype.usedMemory = function() {
            return (this.bufferList.map(function(t) {
                return t._attributeList.map(function(e) {
                    return 4 * t[e]._content.length
                }).reduce(function(e, t) {
                    return e + t
                })
            },
            0).reduce(function(e, t) {
                return e + t
            },
            0) / 1e3 | 0) + "K"
        },
        e.prototype.setDepth = function(e, t) { !
            function e(t, n, r, i) {
                if (!Eo(r)) return;
                var o = t.shapeList.attributes,
                s = o.components[r];
                if (s) for (var a = 0; a < s.length; ++a) e(t, n, s[a], i);
                else {
                    var u = o.bufferIndex[r],
                    l = o.bufferOffset[r],
                    d = t.bufferList[u];
                    "depth" === n && d.transparency && 0 <= i && (i -= Sr),
                    d[n].set(l, i),
                    t.refresh()
                }
            } (this, "depth", e, t),
            this.refresh()
        },
        e.prototype.setVisibilityCondition1 = function(e, t, n, r, i) {
            Co(this, "visibilityCondition1", e, n, r, i, +t),
            this.refresh()
        },
        e.prototype.setVisibilityCondition2 = function(e, t, n, r, i) {
            Co(this, "visibilityCondition2", e, n, r, i, +t),
            this.refresh()
        },
        e.prototype.reloadFonts = function() {
            Fe(this.bitmapFonts,
            function(e) {
                Fe(e,
                function(e) {
                    e.reload()
                })
            })
        },
        e.prototype.updateComposite = function(e, t) {
            var n = this.shapeList.attributes;
            if (!Eo(e) || -2 === n.bufferIndex[e]) return [];
            var r = n.components[e];
            if (!r) return this.deleteTriangle(e),
            [];
            if (r.length !== t) {
                for (var i = 0; i < r.length; ++i) this.delete(r[i]);
                return []
            }
            return r
        },
        e.prototype.composite = function(e, t) {
            var n, r = this.shapeList.attributes;
            if (Eo(e) && -2 !== r.bufferIndex[e]) {
                r.components[e] !== t && (r.components[e] = t),
                n = e
            } else {
                var i = this.shapeList.add();
                r.bufferIndex[i] = -1,
                r.bufferOffset[i] = -1,
                r.components[i] = t,
                n = i
            }
            return n
        },
        e.prototype.setColor = function(e, t, n) {
            if (Eo(e)) {
                var r = this.shapeList.attributes,
                i = r.components[e];
                if (i) for (var o = 0; o < i.length; ++o) this.setColor(i[o], t, n);
                else {
                    var s = r.bufferIndex[e],
                    a = r.bufferOffset[e],
                    u = this.bufferList[s],
                    l = this._parseColor(t);
                    if ("shadowPolygon" === u.programName || "shadowCircle" === u.programName) return;
                    this.shadowsEnabled ? u.color.set(a, 0, 0, 0, .9) : (u.prevColor.copy(u.color, a), u.color.set(a, l[0], l[1], l[2], n ? 0 : l[3])),
                    this.refresh()
                }
            }
        },
        e.prototype.stopAnimations = function() {
            for (var e = this.bufferList,
            t = e.length,
            n = 0; n < t; ++n) e[n].animation.fill(0);
            this.refresh()
        },
        e.prototype._nbTriangles = function() {
            for (var e = 0,
            t = 0; t < this.bufferList.length; ++t) e += this.bufferList[t]._nbTriangles;
            return e
        },
        e.prototype.delete = function(e) {
            if (!Eo(e)) return - 1;
            var t = this.shapeList.attributes;
            if ( - 2 === t.bufferIndex[e]) return - 1;
            var n = t.components[e];
            if (n) for (var r = 0; r < n.length; ++r) this.delete(n[r]);
            else this.deleteTriangle(e);
            return t.bufferIndex[e] = -2,
            t.components[e] = void 0,
            this.shapeList.remove(e),
            this.refresh(),
            -1
        },
        e.prototype.deleteTriangle = function(e) {
            var t = this.shapeList.attributes,
            n = t.bufferIndex[e],
            r = t.bufferOffset[e];
            this.bufferList[n].remove(r)
        },
        e.prototype.domElement = function() {
            return this.canvas
        },
        e.prototype.triangle = function(e, t, n, r, i, o, s, a, u) {
            var l = Io(this, e, es(this, o), "polygon", t, n, r, s, a, u);
            return this.setColor(l, i),
            l
        },
        e.prototype.circle = function(e, t, n, r, i, o, s, a, u) {
            return vo.set(t).addZXY( - n, n).addOXY( - r, r),
            yo.set(t).addZXY( - n, -n * bo).addOXY( - r, -r * bo),
            mo.set(t).addZXY(n * bo, n).addOXY(r * bo, r),
            e = Io(this, e, es(this, o), "circle", vo, yo, mo, s, a, u),
            this.setColor(e, i),
            e
        },
        e.prototype.rectangle = function(e, t, n, r, i, o, s, a, u) {
            return qt(t, n, vo, yo, mo, _o),
            this.quadrilateral(e, vo, yo, mo, _o, r, i, o, s, a, u)
        },
        e.prototype.quadrilateral = function(e, t, n, r, i, o, s, a, u, l, d) {
            var c = d ? "linePolygon": "polygon";
            s = es(this, s);
            var h = this.updateComposite(e, 2);
            return h[0] = Io(this, h[0], s, c, t, n, r, a, u, l),
            h[1] = Io(this, h[1], s, c, r, i, t, a, u, l),
            d && (Qo(this, h[0], d.textWidth, d.textHeight, d.ratio, d.angle, d.length, d.size, d.strokeSize), Qo(this, h[1], d.textWidth, d.textHeight, d.ratio, d.angle, d.length, d.size, d.strokeSize)),
            e = this.composite(e, h),
            this.setColor(e, o),
            e
        },
        e.prototype.polygon = function(e, t, n, r, i, o, s) {
            if (! (t instanceof $t)) throw new Error('Argument "points" must be of type PositionList.');
            if (t.length < 3) throw new Error("A polygon must have at least 3 points.");
            r = es(this, r);
            for (var a = Un(t.getXYList()), u = this.updateComposite(e, a.length), l = 0; l < a.length; ++l) {
                var d = a[l],
                c = t[d[0]],
                h = t[d[1]],
                f = t[d[2]];
                u[l] = Io(this, u[l], r, "polygon", c, h, f, i, o, s),
                this.setColor(u[l], n)
            }
            return this.composite(e, u)
        },
        e.prototype.quadraticCurve = function(e, t, n, r, i, o, s, a, u, l, d) {
            return Xo(this, e, t, n, n, r, i, o, s, a, u, l, d, Wo)
        },
        e.prototype.cubicCurve = function(e, t, n, r, i, o, s, a, u, l, d, c) {
            return Xo(this, e, t, n, r, i, o, s, a, u, l, d, c, Go)
        },
        e.prototype.line = function(e, t, n, r, i, o, s, a, u, l) {
            return Vt(t, n, r, i, vo, yo, mo, _o),
            this.quadrilateral(e, vo, yo, mo, _o, o, s, a, u, l)
        },
        e.prototype.image = function(e, t, n, r, i, o, s, a, u, l) {
            var d, c;
            c = r,
            (d = this).texturesByUrl[c] || d.imageManager.use(c,
            function(e) {
                var t = c.endsWith(".svg"),
                n = No(d, e, null, t ? "svg": null);
                n.width = e.width,
                n.height = e.height,
                d.texturesByUrl[c] = n,
                d.refresh()
            }),
            qt(t, n, vo, yo, mo, _o),
            s = es(this, s);
            var h = i ? "image": "nonScaledImage",
            f = this.updateComposite(e, 2);
            return f[0] = Io(this, f[0], s, h, vo, yo, mo, a, u, l, r),
            f[1] = Io(this, f[1], s, h, mo, _o, vo, a, u, l, r),
            qo(this, f[0], i, o, 2 * n.zx, 2 * n.zy, 0, 0, 1, 0, 1, 1),
            qo(this, f[1], i, o, 2 * n.zx, 2 * n.zy, 1, 1, 0, 1, 0, 0),
            this.composite(e, f)
        },
        e.prototype.text = function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
            return function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g) {
                c = es(e, c);
                for (var v, y = 0,
                m = s,
                _ = o,
                b = g ? "lineText": "text", x = Vo(e, i, u), w = 0; w < r.length; ++w) {
                    var A = x.get(r[w]);
                    y += A.ratio
                }
                v = y * o,
                y *= s,
                $o.reset(),
                "center" === l ? ($o.ox -= y / 2, $o.zx -= v / 2) : "right" === l && ($o.ox -= y, $o.zx -= v);
                "middle" === d ? ($o.oy -= m / 2, $o.zy -= _ / 2) : "bottom" === d && ($o.oy -= m, $o.zy -= _);
                $o.oy += 1,
                vo.set(n).add($o),
                yo.set(n).add($o),
                mo.set(n).add($o),
                _o.set(n).add($o),
                yo.oy += m,
                _o.oy += m,
                yo.zy += _,
                _o.zy += _;
                var E = e.updateComposite(t, 2 * r.length),
                C = x.index;
                for (w = 0; w < r.length; ++w) {
                    var S = x.get(r[w]),
                    I = s * S.ratio,
                    T = o * S.ratio;
                    mo.ox = vo.ox + I,
                    _o.ox = yo.ox + I,
                    mo.zx = vo.zx + T,
                    _o.zx = yo.zx + T,
                    E[2 * w] = Io(e, E[2 * w], c, b, vo, mo, _o, h, f, p, C),
                    E[2 * w + 1] = Io(e, E[2 * w + 1], c, b, _o, yo, vo, h, f, p, C),
                    e.setColor(E[2 * w], a, !0),
                    e.setColor(E[2 * w + 1], a, !0),
                    Zo(e, E[2 * w], S.x1, S.y1, S.x2, S.y1, S.x2, S.y2, o, s),
                    Zo(e, E[2 * w + 1], S.x2, S.y2, S.x1, S.y2, S.x1, S.y1, o, s),
                    g && (Qo(e, E[2 * w], g.textWidth, g.textHeight, g.ratio, g.angle, g.length, g.size, g.strokeSize), Qo(e, E[2 * w + 1], g.textWidth, g.textHeight, g.ratio, g.angle, g.length, g.size, g.strokeSize)),
                    vo.set(mo),
                    yo.set(_o)
                }
                return e.composite(t, E)
            } (this, e, t, n, r, i, o, s, a, u, l, d, c, h, f, p)
        },
        e.prototype.textWidth = function(e, t, n, r) {
            for (var i = Vo(this, t, r), o = 0, s = 0; s < e.length; ++s) {
                o += i.get(e[s]).ratio
            }
            return o * n
        },
        e.prototype.clear = function() {
            this.shapeList.clear(),
            this.shapeList.attributes.bufferIndex.fill( - 2);
            for (var e = 0; e < this.bufferList.length; ++e) this.bufferList[e].clear()
        },
        e.prototype.setBackgroundColor = function(e) {
            if (e) {
                var t = this._parseColor(e);
                this.gl.clearColor(t[0], t[1], t[2], t[3])
            } else this.gl.clearColor(0, 0, 0, 0)
        },
        e
    } (Cr);
    function wo(e, t, n) {
        t.clear(t.COLOR_BUFFER_BIT | t.DEPTH_BUFFER_BIT | t.STENCIL_BUFFER_BIT),
        Fe(e.bitmapFonts,
        function(e) {
            Fe(e,
            function(e) {
                e.updateIfNecessary()
            })
        }),
        function(e, t, n) {
            var r = e.gl,
            i = e.buffersBySemanticLayer,
            o = Object.keys(i).sort(e._sortSemanticLayerFunction),
            s = st();
            r.enable(r.DEPTH_TEST);
            for (var a = 0; a < o.length; ++a) {
                var u = o[a],
                l = e.semanticLayers[u] || e.DEFAULT_LAYER,
                d = i[u],
                c = Object.keys(e.programs),
                h = l.camera;
                if (!l.disabled) {
                    Ko(r, l);
                    for (var f = 0; f < c.length; ++f) {
                        var p = c[f],
                        g = d[p];
                        if (g) {
                            var v = e.programs[p],
                            y = v.uniforms,
                            m = Object.keys(g);
                            e._nbAttributesEnabled = v.prepare(e._nbAttributesEnabled),
                            y.pixelRatio.set(s),
                            y.textureMultiplier.set(e.samplingLevel),
                            y.animationMode.set( + e.animationsEnabled),
                            y.screenSize.set(t, n),
                            y.camPosition.set(h.x, h.y),
                            y.camAngle.set(h.angle),
                            y.cosCamAngle.set(Math.cos(h.angle)),
                            y.sinCamAngle.set(Math.sin(h.angle)),
                            y.camZoom.set(h.zoom),
                            y.currentTime.set(e.currentTime),
                            y.vcMargin.set(e._visibilityConditionTolerance);
                            for (var _ = 0; _ < m.length; ++_) {
                                var b = m[_],
                                x = g[b];
                                if ("nonScaledImage" === p || "image" === p) {
                                    var w = e.texturesByUrl[b];
                                    if (!w) continue;
                                    r.activeTexture(r.TEXTURE0),
                                    r.bindTexture(r.TEXTURE_2D, w.texture),
                                    v.uniforms.texture.set(0),
                                    "nonScaledImage" === p && y.textureDimensions.set(w.width, w.height)
                                } else if ("text" === p || "lineText" === p) {
                                    var A = e.bitmapFontsByIndex[b],
                                    E = A.bigTexture;
                                    r.activeTexture(r.TEXTURE0),
                                    r.bindTexture(r.TEXTURE_2D, E.texture),
                                    v.uniforms.bigTexture.set(0)
                                }
                                x.draw()
                            }
                        }
                    }
                }
            }
        } (e, n.renderWidth, n.renderHeight)
    }
    function Ao(e, t, n, r) {
        t.disable(t.DEPTH_TEST),
        t.disable(t.STENCIL_TEST),
        e._nbAttributesEnabled = e.programs.antialias.prepare(e._nbAttributesEnabled),
        t.activeTexture(t.TEXTURE0),
        t.bindTexture(t.TEXTURE_2D, r.texture),
        t.generateMipmap(t.TEXTURE_2D);
        var i = e.programs.antialias.uniforms,
        o = n.renderWidth / (r.textureWidth / r.ratio),
        s = n.renderHeight / (r.textureHeight / r.ratio);
        i.texture.set(0),
        i.screenTextureRatio.set(o, s),
        e.antiAliasBuffer.draw()
    }
    function Eo(e) {
        return "number" == typeof e && e % 1 == 0 && 0 <= e && 4294967295 !== e
    }
    function Co(e, t, n, r, i, o, s) {
        if (Eo(n)) {
            var a = e.shapeList.attributes,
            u = a.components[n];
            if (u) for (var l = 0; l < u.length; ++l) Co(e, t, u[l], r, i, o, s);
            else {
                var d = a.bufferIndex[n],
                c = a.bufferOffset[n];
                e.bufferList[d][t].set(c, r, i, o, s),
                e.refresh()
            }
        }
    }
    xo.infoName = "WebGL",
    xo.available = go;
    var So = new Gt;
    function Io(e, t, n, r, i, o, s, a, u, l, d) {
        return void 0 === u && (u = -1),
        void 0 === l && (l = 0),
        void 0 === d && (d = "default"),
        function e(t, n, r, i, o, s, a, u, l, d, c, h) {
            var f, p, g = t.shapeList.attributes;
            if (Eo(n) && -2 !== g.bufferIndex[n]) {
                if (f = t.bufferList[g.bufferIndex[n]], p = g.bufferOffset[n], g.components[n] || !f || f.programName !== i || f.texture !== c) return t.delete(n),
                e(t, -1, r, i, o, s, a, u, l, d, c, h);
                t.animationMode ? (!f.animation.get(p, 0) || f.animation.get(p, 1) + f.animation.get(p, 2) < t.currentTime) && f.animation.set(p, 1, t.currentTime, t.animationDuration) : f.animation.set(p, 0, t.currentTime, t.animationDuration),
                void 0 !== u && f.depth.set(p, u)
            } else {
                n = t.shapeList.add(),
                g.components[n] = void 0;
                var v = Yo(Yo(t.buffersBySemanticLayer, r), i); (f = v[c]) || ((f = t.programs[i].createBuffer()).index = t.bufferList.length, f.transparency = h, v[f.texture = c] = f, t.bufferList.push(f)),
                p = f.add(),
                g.components[n] = void 0,
                g.bufferOffset[n] = p,
                g.bufferIndex[n] = f.index,
                f.animation.set(p, 0, 0, 0),
                f.depth.set(p, Ae(u, 1))
            }
            var y = t._offset || So;
            return f.absolutePosition.shift(p, o.x + y.x, o.y + y.y, s.x + y.x, s.y + y.y, a.x + y.x, a.y + y.y),
            f.zoomOffset.shift(p, o.zx + y.zx, o.zy + y.zy, s.zx + y.zx, s.zy + y.zy, a.zx + y.zx, a.zy + y.zy),
            f.offset.shift(p, o.ox + y.ox, o.oy + y.oy, s.ox + y.ox, s.oy + y.oy, a.ox + y.ox, a.oy + y.oy),
            f.visibilityCondition1.set(p, 0, 0, 0, 0),
            f.visibilityCondition2.set(p, 0, 0, 0, 0),
            "lineText" !== i && "linePolygon" !== i && f.angleOffset.shift(p, o.ax + y.ax, o.ay + y.ay, s.ax + y.ax, s.ay + y.ay, a.ax + y.ax, a.ay + y.ay),
            "circle" === i && f.circleMultiplier.set2x3(p, -1, 1, -1, -bo, bo, 1),
            f.symbolicSize.set(p, l, d),
            t.refresh(),
            n
        } (e, t, n, r, i, o, s, a, u, l, d, e.getSemanticLayer(n).transparency)
    }
    function To(e) {
        return "number" == typeof(t = Math.log(e) / Math.LN2) && t % 1 == 0;
        var t
    }
    function No(e, t, n, r) {
        var i, o, s = e.gl;
        n ? (o = n.texture, i = n) : (o = s.createTexture(), i = {
            index: e.textureCounter,
            texture: o
        },
        e.textureCounter += 1),
        t = function(e, t, n) {
            var r = t.width,
            i = t.height,
            o = !1;
            if (n && e.minSvgSize) {
                var s = Math.max(e.minSvgSize / r, e.minSvgSize / i);
                1 < s && (r = r * s | 0, i = i * s | 0, o = !0)
            }
            if (To(r) && To(i) || (r = se(r, 2), i = se(i, 2), o = !0), o) {
                var a = document.createElement("canvas"),
                u = a.getContext("2d");
                return a.width = r,
                a.height = i,
                u.drawImage(t, 0, 0, r, i),
                a
            }
            return t
        } (e, t, "svg" === r),
        s.bindTexture(s.TEXTURE_2D, o);
        var a, u = s.RGBA;
        try {
            s.texImage2D(s.TEXTURE_2D, 0, u, u, s.UNSIGNED_BYTE, t)
        } catch(t) {
            a = t,
            console.error(be() + " " + a),
            s.texImage2D(s.TEXTURE_2D, 0, s.RGBA, s.RGBA, s.UNSIGNED_BYTE, e.imageManager.getErrorImage())
        }
        var l = s.NEAREST,
        d = s.LINEAR;
        return s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MAG_FILTER, "text" === r ? l: s.LINEAR),
        s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MIN_FILTER, "text" === r ? d: s.NEAREST_MIPMAP_LINEAR),
        s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_S, s.CLAMP_TO_EDGE),
        s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_T, s.CLAMP_TO_EDGE),
        s.generateMipmap(s.TEXTURE_2D),
        s.bindTexture(s.TEXTURE_2D, null),
        i
    }
    var ko = 50,
    Lo = new Gt,
    Ro = new Gt,
    zo = new Gt,
    Mo = new Gt,
    Po = new Gt,
    Fo = new Gt,
    Do = new Gt,
    Oo = new Gt,
    Bo = new Gt,
    jo = new Gt,
    Uo = new Gt,
    Ho = new Gt;
    function Xo(e, t, n, r, i, o, s, a, u, l, d, c, h, f) {
        l = es(e, l),
        Mo.ax = (n.ax + o.ax) / 2,
        Mo.ay = (n.ay + o.ay) / 2,
        Mo.zx = (n.zx + o.zx) / 2,
        Mo.zy = (n.zy + o.zy) / 2,
        Mo.ox = (n.ox + o.ox) / 2,
        Mo.oy = (n.oy + o.oy) / 2,
        f(0, n, r, i, o, Mo, Lo),
        f(1 / ko, n, r, i, o, Mo, Ro),
        Vt(Lo, Ro, s, a, Po, Fo, Do, Oo);
        for (var p = e.updateComposite(t, 2 * ko), g = 2; g <= ko; ++g) f(g / ko, n, r, i, o, Mo, zo),
        Vt(Ro, zo, s, a, Bo, jo, Uo, Ho),
        p[2 * (g - 2)] = Io(e, p[2 * (g - 2)], l, "polygon", Po, Fo, jo, d, c, h),
        p[2 * (g - 2) + 1] = Io(e, p[2 * (g - 2) + 1], l, "polygon", jo, Bo, Po, d, c, h),
        Lo.set(Ro),
        Ro.set(zo),
        Po.set(Bo),
        Fo.set(jo);
        for (Vt(Lo, o, s, a, Bo, jo, Uo, Ho), p[2 * ko - 2] = Io(e, p[2 * ko - 2], l, "polygon", Bo, jo, Uo, d, c, h), p[2 * ko - 1] = Io(e, p[2 * ko - 1], l, "polygon", Uo, Ho, Bo, d, c, h), g = 0; g < p.length; ++g) e.setColor(p[g], u);
        return e.composite(t, p)
    }
    function Wo(e, t, n, r, i, o, s) {
        Xn(e, t.x, t.y, i.x, i.y, n.x, n.y, s),
        s.add(o)
    }
    function Go(e, t, n, r, i, o, s) {
        Yn(e, t.x, t.y, i.x, i.y, n.x, n.y, r.x, r.y, s),
        s.add(o)
    }
    function qo(e, t, n, r, i, o, s, a, u, l, d, c) {
        var h = e.shapeList.attributes,
        f = h.bufferIndex[t],
        p = h.bufferOffset[t],
        g = e.bufferList[f];
        n || (g.textureBox.set(p, i, o), g.duplicate.set(p, +r)),
        g.textureCoords.set2x3(p, s, a, u, l, d, c)
    }
    function Yo(e, t) {
        var n = e[t];
        return n || (n = {},
        e[t] = n),
        n
    }
    function Vo(e, t, n) {
        "italic" !== n && "bold" !== n && (n = "none");
        var r = e.bitmapFonts[t];
        r || (r = {},
        e.bitmapFonts[t] = r);
        var i = r[n];
        return i || ((i = new Gi(t, n, e._createTextTexture, e.defaultFont, e.fontSamplingSize)).index = e.bitmapFontCounter++, e.bitmapFontsByIndex[i.index] = i, r[n] = i),
        i
    }
    var $o = new Gt;
    function Zo(e, t, n, r, i, o, s, a, u, l) {
        var d = e.shapeList.attributes,
        c = d.bufferIndex[t],
        h = d.bufferOffset[t];
        e.bufferList[c].textureCoords.set2x3(h, n, r, i, o, s, a)
    }
    function Qo(e, t, n, r, i, o, s, a, u) {
        var l = e.shapeList.attributes,
        d = l.bufferIndex[t],
        c = l.bufferOffset[t],
        h = e.bufferList[d];
        h.textDimensions.set(c, n, r, i),
        h.lineInfo.set(c, o, s, a, u)
    }
    function Jo(e, t) {
        if ("undefined" === t) return 1e4;
        var n = e.semanticLayers[t],
        r = n.level;
        return n.transparency && (r += 5e3),
        r
    }
    function Ko(e, t) {
        t.defineClipSpace || t.useClipSpace ? (e.enable(e.STENCIL_TEST), e.stencilOp(e.KEEP, e.KEEP, e.REPLACE), t.defineClipSpace ? (e.clear(e.STENCIL_BUFFER_BIT), e.depthFunc(e.LEQUAL), e.stencilFunc(e.ALWAYS, 1, 1)) : (e.depthFunc(e.EQUAL), e.stencilFunc(e.EQUAL, 1, 1))) : (e.depthFunc(e.LEQUAL), e.disable(e.STENCIL_TEST))
    }
    function es(e, t) {
        if (void 0 !== t && !e.semanticLayers[t]) throw new Error('Sub-layer "' + t + '" does not exist.');
        return t
    }
    p.extend(function(e) {
        var t = new ts;
        e.modules.events = t,
        e.events.removeListener = function(e) {
            t.removeListener(e)
        }
    });
    var ts = function() {
        this._events = {}
    };
    ts.prototype.register = function(e, t) {
        var n = this;
        void 0 === t && (t = []),
        e.forEach(function(e) {
            if (n._events[e]) throw new Error('event "' + e + '" already exists');
            n._events[e] = new ns(!1, e)
        }),
        t.forEach(function(e) {
            if (n._events[e]) throw new Error('event "' + e + '" already exists');
            n._events[e] = new ns(!0, e)
        })
    },
    ts.prototype.on = function(e, t) {
        var n = this;
        _e(e) ? Ee(e,
        function(e, t) {
            return n.on(t, e)
        }) : e.split(" ").filter(function(e) {
            return !! e
        }).forEach(function(e) {
            return Le(n._events, e, "event").on(t)
        });
        return t
    },
    ts.prototype.removeListener = function(t) {
        Ee(this._events,
        function(e) {
            e.off(t)
        })
    },
    ts.prototype.fire = function(e, t) {
        Le(this._events, e, "event").trigger(t)
    },
    ts.prototype.once = function(e, t) {
        var n = arguments,
        r = this,
        i = function() {
            t.apply(null, n),
            r.removeListener(i)
        };
        return this.on(e, i)
    };
    var ns = function(e, t) {
        this._name = t,
        this._reverseOrder = e,
        this._subscribers = []
    };
    ns.prototype.trigger = function(e) {
        for (var t = 0; t < this._subscribers.length; ++t) this._subscribers[t](e, this._name)
    },
    ns.prototype.on = function(e) {
        if ("function" != typeof e) throw new Error("handler is not a function");
        this._reverseOrder ? this._subscribers.unshift(e) : this._subscribers.push(e)
    },
    ns.prototype.off = function(e) {
        for (var t; - 1 !== (t = this._subscribers.indexOf(e));) this._subscribers.splice(t, 1)
    },
    p.extend(function(e) {
        e.modules.events.register([], ["reset", "kill"]),
        e.reset = function() {
            return e.modules.events.fire("reset")
        },
        e.kill = function() {
            return e.modules.events.fire("kill")
        }
    }),
    p.atInit(function(e, t) {
        t.options && e.setOptions(t.options)
    }),
    p.extend(function(e) {
        var t = new rs(e);
        e.modules.settings = t,
        e.setOptions = function(e) {
            return t.update(e)
        }
    });
    var rs = function(e) {
        var t = this;
        this._currentValue = {},
        this._onChange = {},
        this._defaultValues = {},
        this._keys = [],
        e.modules.events.on("reset",
        function() {
            t.update(t._defaultValues)
        })
    };
    rs.prototype.register = function(e, t, n) {
        this._keys.push(e),
        this._currentValue[e] = t,
        this._defaultValues[e] = t,
        this._onChange[e] = n ||
        function() {}
    },
    rs.prototype.update = function(e) {
        e = qe(e);
        for (var t = this._keys,
        n = {},
        r = 0; r < t.length; ++r) {
            var i = t[r];
            if (i in e) {
                var o = e[i];
                void 0 === o && (o = this._defaultValues[i]),
                n[i] = this._currentValue[i],
                this._currentValue[i] = o
            }
        }
        for (var s = Object.keys(n), a = 0; a < s.length; ++a) {
            var u = s[a],
            l = this._currentValue[u],
            d = n[u];
            l !== d && this._onChange[u](l, d)
        }
        return Ve(n)
    },
    rs.prototype.get = function(e) {
        return void 0 === e ? Ve(this._currentValue) : this._currentValue[e]
    };
    var is = {
        x: 0,
        y: 0,
        zoom: 1,
        angle: 0
    },
    os = ["edgeHalos", "nodeHaloStrokes", "nodeHalos", "edgeShapes", "edgeOuterStrokes", "edgeOutlines", "edgeTextBackground", "edgeText", "nodeOuterStrokes", "nodeInnerStrokes", "nodeShapes", "nodePieCharts", "nodeIcons", "nodeImages", "nodeBadgeStroke", "nodeBadge", "nodeBadgeImage", "nodeBadgeText", "nodeOutlines", "nodeTextBackground", "nodeText", "edgePulses", "nodePulses", "guidelines", "legendBorders", "legendBackground", "legendContent"],
    ss = ["geo", "graphics", "legend", "brand", "tooltip", "resizing", "rewiring", "lasso", "connectNodes"],
    as = "default";
    p.atInit(function(t, e) {
        var n = e.container;
        n && t.setContainer(n),
        "undefined" != typeof document && document.fonts && document.fonts.ready instanceof Promise ? setTimeout(function() {
            return document.fonts.ready.then(function(e) {
                0 < e.size && t.reloadFonts()
            })
        },
        0) : setTimeout(t.reloadFonts, 2e3)
    }),
    p.extend(function(e, t) {
        var n = {
            type: Te(t.renderer, "webgl"),
            imgCrossOrigin: Te(t.imgCrossOrigin, "anonymous"),
            webglOptions: Te(t.webglOptions, {
                antiAliasing: "super-sampling",
                fontSamplingSize: 32,
                minimumSvgSize: null
            })
        },
        r = new us(e, n, t.dimensions);
        e.modules.render = r,
        e.setContainer = function(e) {
            return r.setContainer(e)
        },
        e.getContainer = function() {
            return r.getContainer()
        },
        e.reloadFonts = function() {
            return r.reloadFonts()
        },
        e.view.setFullScreen = function(e) {
            return r.setFullScreen(e)
        },
        e.view.isFullScreen = function(e) {
            return r.isFullScreen()
        },
        e.view.forceResize = function() {
            return r.resize()
        }
    });
    var us = function(e, t, n) {
        var r = this;
        void 0 === n && (n = {});
        var i = n.width;
        void 0 === i && (i = 80);
        var o = n.height;
        void 0 === o && (o = 60),
        this._events = e.modules.events,
        this._settings = e.modules.settings,
        this._windowEvtListener = function() {
            return ls(r, !0)
        },
        this._width = i,
        this._height = o,
        this._frameCount = 0,
        this._renderLayers = [],
        this._container = null,
        this._renderer = null,
        this._exportedRenderer = null,
        this._semanticLayers = {},
        this._defaultCursorStyle = as,
        this._cursorStyle = [],
        this._isFullScreen = !1,
        this._visibilityConditionTolerance = 0,
        this._canvas = null,
        this._settings.register("fpsLimit", null,
        function(e) {
            return r._renderer.setFpsLimit(e)
        }),
        this._settings.register("cursor.default", as,
        function(e) {
            r._defaultCursorStyle = e,
            ys(r)
        }),
        this._settings.register("backgroundColor", "white",
        function(e) {
            r._renderer.setBackgroundColor(e),
            r.refresh()
        }),
        this._settings.register("minimumWidth", 300,
        function() {
            return ls(r, !0)
        }),
        this._settings.register("minimumHeight", 300,
        function() {
            return ls(r, !0)
        }),
        this._events.register(["beforeNewFrame", "newFrame", "setContainer", "resize", "reloadFonts"]),
        this._init_(t),
        "undefined" != typeof window && window.addEventListener("focus",
        function() {
            return r.refresh()
        })
    };
    function ls(e, t) {
        if (e._container) {
            var n = e._width,
            r = e._height,
            i = e._container.clientWidth || 1,
            o = e._container.clientHeight || 1,
            s = e._settings.get("minimumWidth"),
            a = e._settings.get("minimumHeight");
            i = Math.max(i, s),
            o = Math.max(o, a),
            e._width = i,
            e._height = o,
            e._renderer.resize(i, o),
            e._renderLayers.forEach(function(e) {
                e.automaticResize && dt(e.element, i, o)
            }),
            t && e._events.fire("resize", {
                prevWidth: n,
                prevHeight: r,
                width: i,
                height: o,
                difWidth: i - n,
                difHeight: o - r
            })
        }
    }
    function ds(n) {
        if (n._container) {
            n._renderLayers.sort(function(e, t) {
                return e.level - t.level
            });
            var r = [];
            n._renderLayers.forEach(function(e) {
                var t = e.element;
                t.parentNode === n._container && n._container.removeChild(t),
                r.push(t)
            });
            var t = n._container.firstChild || null;
            r.forEach(function(e) {
                return n._container.insertBefore(e, e.__isOgmaTooltip ? null: t)
            })
        }
    }
    function cs(e) {
        e._renderer && e._renderer.refresh()
    }
    function hs(e, t) {
        var n = e._semanticLayers[t];
        if (!n) throw new Error('semantic layer "' + t + '" does not exist.');
        return n
    }
    function fs(e) {
        void 0 === e.x && (e.x = 0),
        void 0 === e.y && (e.y = 0),
        void 0 === e.zx && (e.zx = 0),
        void 0 === e.zy && (e.zy = 0),
        void 0 === e.ax && (e.ax = 0),
        void 0 === e.ay && (e.ay = 0),
        void 0 === e.ox && (e.ox = 0),
        void 0 === e.oy && (e.oy = 0)
    }
    function ps(e, t) {
        fs(e),
        fs(t)
    }
    function gs(e, t, n) {
        fs(e),
        fs(t),
        fs(n)
    }
    function vs(e, t, n, r) {
        fs(e),
        fs(t),
        fs(n),
        fs(r)
    }
    function ys(e) {
        if (e._renderer) {
            var t = e._cursorStyle[0] || e._defaultCursorStyle,
            n = e._renderer.domElement();
            n.style.cursor = t,
            n.style.cursor !== t && (n.style.cursor = "-webkit-" + t)
        }
    }
    us.prototype.addCursorStyle = function(e) {
        e && (this._cursorStyle.unshift(e), ys(this))
    },
    us.prototype.removeCursorStyle = function(e) {
        if (e) {
            var t = this._cursorStyle.indexOf(e); - 1 !== t && (this._cursorStyle.splice(t, 1), ys(this))
        }
    },
    us.prototype._init_ = function(e) {
        var n = this,
        t = e.type,
        r = e.imgCrossOrigin,
        i = e.webglOptions,
        o = {
            webgl: xo,
            canvas: Hr,
            svg: mi,
            dummy: Cr
        }; ! t || "undefined" != typeof window && window.__OGMA_HEADLESS || "node" === O() ? t = "dummy": ("webgl" !== t || o.webgl.available || (xe("The WebGL renderer is not available, fallbacking on canvas."), t = "canvas"), "canvas" !== t || o.canvas.available || (xe("The canvas renderer is not available, rendering will be disabled."), t = "dummy")),
        this._renderer = new o[t](this._width, this._height, this._semanticLayers, {
            imgCrossOrigin: r,
            antialias: i.antiAliasing,
            fontSamplingSize: i.fontSamplingSize,
            minSvgSize: i.minimumSvgSize,
            backgroundColor: "white",
            defaultFont: "Arial",
            onRender: function(e) {
                var t = {
                    elapsed: e
                };
                n._frameCount += 1,
                n._events.fire("beforeNewFrame", t),
                n._events.fire("newFrame", t)
            }
        }),
        this._renderer.setVisibilityConditionTolerance(this._visibilityConditionTolerance),
        this.addRenderLayer(this._renderer.domElement(), "graphics"),
        "undefined" != typeof window && window.addEventListener && window.addEventListener("resize", this._windowEvtListener),
        ys(this)
    },
    us.prototype.getDimensions = function() {
        return {
            width: this._width,
            height: this._height
        }
    },
    us.prototype.reset = function() {
        window.removeEventListener("resize", this._windowEvtListener)
    },
    us.prototype.addCanvasLayer = function(e) {
        var t = tt();
        return this.addRenderLayer(t, e, !0),
        t
    },
    us.prototype.addRenderLayer = function(e, t, n) {
        "string" == typeof t && (t = ss.indexOf(t)),
        t < 0 && (t = ss.length),
        n && (e.style.pointerEvents = "none", e.style.position = "absolute", e.style.top = "0px", e.style.left = "0px", dt(e, this._width, this._height)),
        this._renderLayers.push({
            element: e,
            level: t,
            automaticResize: n
        }),
        ds(this)
    },
    us.prototype.removeRenderLayer = function(e) {
        for (var t = 0; t < this._renderLayers.length; ++t) if (this._renderLayers[t].element === e) {
            this._renderLayers.splice(t, 1),
            this._container && this._container.removeChild(e);
            break
        }
        ds(this)
    },
    us.prototype.setContainer = function(e) {
        if ("string" == typeof e && (e = document.getElementById(e)), e !== this._container) {
            var t = this._container;
            this._container = e,
            this._container && (ls(this, !1), ds(this)),
            this._events.fire("setContainer", {
                element: e,
                prevElement: t
            })
        }
    },
    us.prototype.getContainer = function() {
        return this._container
    },
    us.prototype.getCanvas = function() {
        return this._renderer && this._renderer.domElement()
    },
    us.prototype.resize = function() {
        this._container && ls(this, !0)
    },
    us.prototype.addSemanticLayer = function(e, t) {
        if (void 0 === t && (t = {}), this._semanticLayers[e]) throw new Error("sub-layer " + e + " already exists");
        this._semanticLayers[e] = {
            name: e,
            level: Le(os, e, "semantic layer"),
            defineClipSpace: !!t.defineClipSpace,
            useClipSpace: !!t.useClipSpace,
            camera: t.camera || is,
            disabled: !1,
            transparency: t.transparency || !1
        }
    },
    us.prototype.type = function() {
        return this._renderType
    },
    us.prototype.getSemanticLayers = function() {
        return Oe(this._semanticLayers)
    },
    us.prototype.atNextFrame = function(e) {
        if (this._renderer) return this._renderer.atNextFrame(e)
    },
    us.prototype.setSemanticLayerEnabled = function(e, t) {
        hs(this, e).disabled = !t,
        cs(this)
    },
    us.prototype.setSemanticLayersEnabled = function(e, t) {
        for (var n = 0; n < e.length; ++n) {
            hs(this, e[n]).disabled = !t
        }
        cs(this)
    },
    us.prototype.animate = function(e, t) {
        this._renderer.animate(e, t)
    },
    us.prototype.stopAnimations = function() {
        this._renderer.stopAnimations()
    },
    us.prototype.setAnimationsEnabled = function(e) {
        this._renderer.setAnimationsEnabled(e)
    },
    us.prototype.setOffset = function(e) {
        e && fs(e),
        this._renderer.setOffset(e)
    },
    us.prototype.refresh = function() {
        this._renderer && this._renderer.refresh()
    },
    us.prototype.delete = function(e) {
        return this._exportedRenderer ? e: this._renderer.delete(e)
    },
    us.prototype.setDepth = function(e, t) {
        this._renderer.setDepth(e, t)
    },
    us.prototype.hide = function(e) {
        this._renderer.hide ? this._renderer.hide(e) : this._renderer.setDepth(e, 0)
    },
    us.prototype.setColor = function(e, t) {
        this._renderer.setColor(e, t)
    },
    us.prototype.setVisibilityCondition1 = function(e, t, n, r, i) {
        this._renderer.setVisibilityCondition1(e, t, n, r, i)
    },
    us.prototype.setVisibilityCondition2 = function(e, t, n, r, i) {
        this._renderer.setVisibilityCondition2(e, t, n, r, i)
    },
    us.prototype.wrappedUpdate = function(e, t, n) {
        return this._exportedRenderer ? this._exportedRenderer.wrappedUpdate( - 1, t, n) : this._renderer.wrappedUpdate(e, t, n)
    },
    us.prototype.updateComposite = function(e, t) {
        return this._exportedRenderer ? this._exportedRenderer.updateComposite( - 1, t) : this._renderer.updateComposite(e, t)
    },
    us.prototype.composite = function(e, t) {
        return this._exportedRenderer ? (this._renderer.composite( - 1, t), e) : this._renderer.composite(e, t)
    },
    us.prototype.circle = function(e, t, n, r, i, o, s, a, u) {
        return fs(t),
        this._exportedRenderer ? (this._exportedRenderer.circle( - 1, t, n, r, i, o, s, a, u), e) : this._renderer.circle(e, t, n, r, i, o, s, a, u)
    },
    us.prototype.triangle = function(e, t, n, r, i, o, s, a, u) {
        return gs(t, n, r),
        this._exportedRenderer ? (this._exportedRenderer.triangle( - 1, t, n, r, i, o, s, a, u), e) : this._renderer.triangle(e, t, n, r, i, o, s, a, u)
    },
    us.prototype.rectangle = function(e, t, n, r, i, o, s, a, u) {
        return ps(t, n),
        this._exportedRenderer ? (this._exportedRenderer.rectangle( - 1, t, n, r, i, o, s, a, u), e) : this._renderer.rectangle(e, t, n, r, i, o, s, a, u)
    },
    us.prototype.quadrilateral = function(e, t, n, r, i, o, s, a, u, l, d) {
        return vs(t, n, r, i),
        this._exportedRenderer ? (this._exportedRenderer.quadrilateral( - 1, t, n, r, i, o, s, a, u, l, d), e) : this._renderer.quadrilateral(e, t, n, r, i, o, s, a, u, l, d)
    },
    us.prototype.polygon = function(e, t, n, r, i, o, s) {
        return this._exportedRenderer ? (this._exportedRenderer.polygon( - 1, t, n, r, i, o, s), e) : this._renderer.polygon(e, t, n, r, i, o, s)
    },
    us.prototype.line = function(e, t, n, r, i, o, s, a, u, l) {
        return ps(t, n),
        this._exportedRenderer ? (this._exportedRenderer.line( - 1, t, n, r, i, o, s, a, u, l), e) : this._renderer.line(e, t, n, r, i, o, s, a, u, l)
    },
    us.prototype.quadraticCurve = function(e, t, n, r, i, o, s, a, u, l, d) {
        return gs(t, n, r),
        this._exportedRenderer ? (this._exportedRenderer.quadraticCurve( - 1, t, n, r, i, o, s, a, u, l, d), e) : this._renderer.quadraticCurve(e, t, n, r, i, o, s, a, u, l, d)
    },
    us.prototype.cubicCurve = function(e, t, n, r, i, o, s, a, u, l, d, c) {
        return vs(t, n, r, i),
        this._exportedRenderer ? (this._exportedRenderer.cubicCurve( - 1, t, n, r, i, o, s, a, u, l, d, c), e) : this._renderer.cubicCurve(e, t, n, r, i, o, s, a, u, l, d, c)
    },
    us.prototype.image = function(e, t, n, r, i, o, s, a, u, l) {
        return ps(t, n),
        this._exportedRenderer ? (this._exportedRenderer.image( - 1, t, n, r, i, o, s, a, u, l), e) : this._renderer.image(e, t, n, r, i, o, s, a, u, l)
    },
    us.prototype.text = function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
        return fs(t),
        this._exportedRenderer ? (this._exportedRenderer.text( - 1, t, n, r, i, o, s, a, u, l, d, c, h, f, p), e) : this._renderer.text(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p)
    },
    us.prototype.textWidth = function(e, t, n, r) {
        return this._exportedRenderer ? this._exportedRenderer.textWidth(e, t, n, r) : this._renderer.textWidth(e, t, n, r)
    },
    us.prototype.enableShadows = function(e, t, n) {
        return this._exportedRenderer ? this._exportedRenderer.enableShadows(e, t, n) : this._renderer.enableShadows(e, t, n)
    },
    us.prototype.disableShadows = function() {
        return this._exportedRenderer ? this._exportedRenderer.disableShadows() : this._renderer.disableShadows()
    },
    us.prototype.reloadFonts = function() {
        this._renderer.reloadFonts(),
        this._events.fire("reloadFonts")
    },
    us.prototype.setFullScreen = function(e) {
        if (void 0 === e && (e = !this._isFullScreen), this._container) if (e) {
            var t = function(e) {
                for (var t = 0; t < ms.length; ++t) {
                    var n = ms[t];
                    if ("function" == typeof e[n]) return n
                }
                return null
            } (this._container);
            t && this._container[t]()
        } else this._isFullScreen && (t = function() {
            for (var e = 0; e < _s.length; ++e) {
                var t = _s[e];
                if ("function" == typeof document[t]) return t
            }
            return null
        } (), document[t]());
        this._isFullScreen = e
    },
    us.prototype.setVisibilityConditionTolerance = function(e) {
        this._visibilityConditionTolerance = e,
        this._renderer && this._renderer.setVisibilityConditionTolerance(e)
    },
    us.prototype.clear = function() {
        this._renderer.clear(),
        this._renderer.refresh()
    },
    us.prototype.isFullScreen = function() {
        return this._isFullScreen
    },
    us.prototype.export = function(e, t, n, r, i) {
        var o = new e(t, n, this._semanticLayers, {
            noRefresh: !0,
            backgroundColor: r
        }),
        s = this._width,
        a = this._height;
        return o.setVisibilityConditionTolerance = this._visibilityConditionTolerance,
        this._exportedRenderer = o,
        this._width = t,
        this._height = n,
        i(),
        this._exportedRenderer = void 0,
        this._width = s,
        this._height = a,
        o
    };
    var ms = ["requestFullScreen", "webkitRequestFullScreen", "mozRequestFullScreen", "msRequestFullscreen"],
    _s = ["cancelFullScreen", "webkitCancelFullScreen", "mozCancelFullScreen", "msExitFullscreen"];
    var bs = function(e, t, n) {
        this._ogma = e,
        this._graph = t,
        this._isNode = n,
        this._name = n ? "node": "edge",
        this._filters = [],
        this._excluded = this._graph.createAttribute(this._isNode, {
            name: "excluded",
            storage: 1
        }),
        this._objects = this._graph.getAttribute(this._isNode, "object"),
        this._list = [],
        this._rules = [],
        this._nextRuleId = 1,
        this._sourceList = this._graph.getAttribute(!1, "source"),
        this._targetList = this._graph.getAttribute(!1, "target"),
        this._nodeExcluded = this._graph.getAttribute(!0, "excluded")
    };
    bs.prototype.getNonExcludedList = function(e) {
        e || (e = this._graph.allIndexes(this._isNode));
        for (var t = [], n = 0; n < e.length; ++n) {
            var r = e[n];
            0 === this._excluded.get(r) && t.push(r)
        }
        return t
    },
    bs.prototype.isExcluded = function(e) {
        return this._excluded.get(e)
    },
    bs.prototype.addFilter = function() {
        var e = this._graph.createAttribute(this._isNode, {
            storage: 1
        });
        return this._filters.push(e),
        e
    },
    bs.prototype.removeFilter = function(e) {
        this._graph._removeAttribute(this._isNode, e);
        var t = this._filters.indexOf(e); - 1 !== t && this._filters.splice(t, 1)
    },
    bs.prototype.refreshFilters = function(e) {
        for (var t = this._filters.length,
        n = this._excluded,
        r = [], i = [], o = [], s = 0, a = e.length; s < a; ++s) {
            var u = e[s],
            l = 0;
            if (!this._isNode) {
                var d = this._sourceList.get(u),
                c = this._targetList.get(u),
                h = this._nodeExcluded.get(d),
                f = this._nodeExcluded.get(c);
                l = h || f
            }
            if (!l) for (var p = 0; p < t; ++p) {
                if (this._filters[p].get(u)) {
                    l = 1;
                    break
                }
            }
            n.get(u) !== l && ((l ? i: o).push(u), n.set(u, l)),
            l && r.push(u)
        }
        return this._list = r,
        {
            newlyExcluded: i,
            newlyIncluded: o
        }
    },
    bs.prototype.refreshRules = function(e) {
        for (var t = 0; t < this._rules.length; ++t) this._refreshRule(this._rules[t], e)
    },
    bs.prototype._refreshRule = function(e, t) {
        t || (t = this._graph._allIndexes(this._isNode));
        for (var n = e.array,
        r = e.func,
        i = 0; i < t.length; ++i) {
            var o = t[i],
            s = this._objects.get(o);
            n.set(o, !r(s))
        }
    },
    bs.prototype.addRule = function(e) {
        var t = this.addFilter(),
        n = {
            id: this._nextRuleId,
            func: e,
            array: t
        };
        return this._rules.push(n),
        this._refreshRule(n),
        this._nextRuleId++
    },
    bs.prototype.removeRule = function(e) {
        var t = this._getRuleIndex(e),
        n = this._rules[t];
        this.removeFilter(n.array),
        this._rules.splice(t, 1)
    },
    bs.prototype.clearRules = function() {
        if (this._rules.length) {
            for (var e = 0; e < this._rules.length; ++e) this.removeFilter(this._rules[e].array);
            this._rules = []
        }
    },
    bs.prototype._getRuleIndex = function(e) {
        for (var t = 0; t < this._rules.length; ++t) if (this._rules[t].id === e) return t;
        throw new Error(this._name + " filter " + e + " does not exist")
    };
    var xs = function(e, t) {
        this._isNode = t,
        this._graph = e,
        this._array = this._graph.createAttribute(t, {
            storage: 1
        }),
        this._list = []
    },
    ws = {
        list: {},
        size: {}
    };
    function As(e) {
        for (var t = [], n = e._graph._allIndexes(e._isNode), r = 0; r < n.length; ++r) {
            var i = n[r];
            e._array.get(i) && t.push(i)
        }
        return t
    }
    xs.prototype.alter = function(e, t) {
        return t ? this.add(e) : this.remove(e)
    },
    xs.prototype.add = function(e) {
        return ! this._array.get(e) && (this._array.set(e, 1), this._list.push(e), !0)
    },
    xs.prototype.addMultiple = function(e) {
        for (var t = 0; t < e.length; ++t) {
            var n = e[t];
            this._array.get(n) || (this._array.set(n, 1), this._list.push(n))
        }
    },
    xs.prototype.addMultipleAndRetrieveDifference = function(e) {
        for (var t = new Array(e.length), n = 0, r = 0; r < e.length; ++r) {
            var i = e[r];
            this._array.get(i) || (this._array.set(i, 1), this._list.push(i), t[n] = i, n += 1)
        }
        return t.length = n,
        t
    },
    xs.prototype.has = function(e) {
        return !! this._array.get(e)
    },
    xs.prototype.hasMultiple = function(e) {
        for (var t = new Array(e.length), n = 0; n < e.length; ++n) t[n] = !!this._array.get(e[n]);
        return t
    },
    xs.prototype.getList = function() {
        return this._list.slice()
    },
    xs.prototype.getInvertedList = function() {
        for (var e = [], t = this._graph._allIndexes(this._isNode), n = 0; n < t.length; ++n) {
            var r = t[n];
            this.has(r) || e.push(r)
        }
        return e
    },
    xs.prototype.remove = function(e) {
        return !! this._array.get(e) && (this._array.set(e, 0), this._list.splice(this._list.indexOf(e), 1), !0)
    },
    xs.prototype.removeMultiple = function(e) {
        for (var t = e.length < 20,
        n = 0; n < e.length; ++n) {
            var r = e[n];
            this._array.get(r) && (this._array.set(r, 0), t && this._list.splice(this._list.indexOf(r), 1))
        }
        t || (this._list = As(this))
    },
    xs.prototype.removeMultipleAndRetrieveDifference = function(e) {
        for (var t = e.length < 20,
        n = new Array(e.length), r = 0, i = 0; i < e.length; ++i) {
            var o = e[i];
            this._array.get(o) && (this._array.set(o, 0), n[r] = o, r += 1, t && this._list.splice(this._list.indexOf(o), 1))
        }
        return t || (this._list = As(this)),
        n.length = r,
        n
    },
    xs.prototype.clear = function() {
        var e = this._list;
        return 0 !== e.length && this._array.reset(),
        this._list = [],
        e
    },
    ws.list.get = function() {
        return this._list
    },
    ws.size.get = function() {
        return this._list.length
    },
    Object.defineProperties(xs.prototype, ws);
    var Es = function(e) {
        this._NodeList = e.NodeList,
        this._EdgeList = e.EdgeList,
        this._nodeSet = e.modules.graph._createIndexSet(!0),
        this._edgeSet = e.modules.graph._createIndexSet(!1)
    };
    Es.prototype.addElements = function(e) {
        var t = e.isNode,
        n = e._indexes;
        return new this[t ? "_NodeList": "_EdgeList"](this[t ? "_nodeSet": "_edgeSet"].addMultipleAndRetrieveDifference(n))
    },
    Es.prototype.removeElements = function(e) {
        var t = e.isNode,
        n = e._indexes;
        return new this[t ? "_NodeList": "_EdgeList"](this[t ? "_nodeSet": "_edgeSet"].removeMultipleAndRetrieveDifference(n))
    },
    Es.prototype.getNodes = function() {
        return new this._NodeList(this._nodeSet.getList())
    },
    Es.prototype.getEdges = function() {
        return new this._EdgeList(this._edgeSet.getList())
    },
    Es.prototype.clearNodes = function() {
        return new this._NodeList(this._nodeSet.clear())
    },
    Es.prototype.clearEdges = function() {
        return new this._EdgeList(this._edgeSet.clear())
    },
    Es.prototype.hasNodes = function(e) {
        return this._nodeSet.hasMultiple(e._indexes)
    },
    Es.prototype.hasEdges = function(e) {
        return this._edgeSet.hasMultiple(e._indexes)
    };
    var Cs = function(e, t, n, r) {
        this._graph = e,
        this._isNode = t,
        this._id = n,
        this._deleted = !1,
        this._whenApplied = r
    };
    function Ss(e, t, n, r) {
        var i = e.modules.graph;
        e.modules.render;
        return r ? new Promise(function(e) {
            n.length
        }) : Promise.resolve(i[t](n))
    }
    Cs.prototype._checkDeleted = function() {
        if (this._deleted) throw new Error("the filter is deleted")
    },
    Cs.prototype.whenApplied = function(e) {
        return this._checkDeleted(),
        this._whenApplied.then(e)
    },
    Cs.prototype.delete = function() {
        return this._checkDeleted(),
        this._graph._removeFilterRule(this._isNode, this._id)
    },
    Cs.prototype.refresh = function() {
        return this._checkDeleted(),
        this._graph._refreshFilterRules(this._isNode)
    },
    p.atInit(function(e, t) {
        var n = t.graph;
        if (n) {
            var r = n.nodes,
            i = n.edges;
            r && e.addNodes(r),
            i && e.addEdges(i)
        }
    }),
    p.extend(function(s) {
        var a = new Is(s),
        e = a.Node,
        t = a.Edge,
        n = a.NodeList,
        r = a.EdgeList;
        s.modules.graph = a,
        s.Node = e,
        s.Edge = t,
        s.NodeList = n,
        s.EdgeList = r,
        s.events.onNodesAdded = function(e) {
            return s.modules.events.on("addNodes", e),
            s.events
        },
        s.events.onBeforeNodesRemoved = function(e) {
            return s.modules.events.on("beforeRemoveNodes", e),
            s
        },
        s.events.onNodesRemoved = function(e) {
            return s.modules.events.on("removeNodes", e),
            s.events
        },
        s.events.onEdgesAdded = function(e) {
            return s.modules.events.on("addEdges", e),
            s.events
        },
        s.events.onBeforeEdgesRemoved = function(e) {
            return s.modules.events.on("beforeRemoveEdges", e),
            s
        },
        s.events.onEdgesRemoved = function(e) {
            return s.modules.events.on("removeEdges", e),
            s.events
        },
        s.addNodes = function(e, t) {
            return void 0 === t && (t = {}),
            Ss(s, "addNodes", e, t.batchSize)
        },
        s.addEdges = function(e, t) {
            return void 0 === t && (t = {}),
            Ss(s, "addEdges", e, t.batchSize)
        },
        s.addNode = function(e) {
            return a.addNode(e)
        },
        s.addEdge = function(e) {
            return a.addEdge(e)
        },
        s.removeNodes = function(e) {
            return a.removeNodes(e)
        },
        s.removeEdges = function(e) {
            return a.removeEdges(e)
        },
        s.removeNode = function(e) {
            return a.removeNodes(e)
        },
        s.removeEdge = function(e) {
            return a.removeEdges(e)
        },
        s.getNodes = function(e) {
            return a.getNodes(e)
        },
        s.getEdges = function(e) {
            return a.getEdges(e)
        },
        s.getNode = function(e) {
            return a.getNode(e)
        },
        s.getEdge = function(e) {
            return a.getEdge(e)
        },
        s.clearGraph = function() {
            return a.clear()
        },
        s.setGraph = function(e, r) {
            void 0 === e && (e = {}),
            void 0 === r && (r = {});
            var t = e.nodes || [],
            i = e.edges || [];
            if (a.clear(), r.batchSize) return new Promise(function(n) {
                s.addNodes(t, r).then(function(t) {
                    s.addEdges(i, r).then(function(e) {
                        n({
                            nodes: t,
                            edges: e
                        })
                    })
                })
            });
            var n = a.addNodes(t),
            o = a.addEdges(i);
            return Promise.resolve({
                nodes: n,
                edges: o
            })
        },
        s.addGraph = function(e, r) {
            void 0 === e && (e = {}),
            void 0 === r && (r = {});
            var t = e.nodes || [],
            i = e.edges || [];
            return new Promise(function(n) {
                s.addNodes(t, r).then(function(t) {
                    s.addEdges(i, r).then(function(e) {
                        n({
                            nodes: t,
                            edges: e
                        })
                    })
                })
            })
        },
        e.prototype.getAdjacentNodes = function(e) {
            return a.getAdjacentNodes(this, e)
        },
        n.prototype.getAdjacentNodes = function(e) {
            return a.getAdjacentNodes(this, e)
        },
        e.prototype.getAdjacentEdges = function(e) {
            return a.getAdjacentEdges(this, e)
        },
        n.prototype.getAdjacentEdges = function(e) {
            return a.getAdjacentEdges(this, e)
        },
        e.prototype.getDegree = function(e) {
            return a.degree(this, e)
        },
        n.prototype.getDegree = function(e) {
            for (var t = new Array(this._indexes.length), n = 0; n < this._indexes.length; ++n) t[n] = a._degree(this._indexes[n], e);
            return t
        },
        s.addNodeFilter = function(e) {
            return a.addNodeFilterRule(e)
        },
        s.addEdgeFilter = function(e) {
            return a.addEdgeFilterRule(e)
        },
        s.getNodeFilters = function() {
            return a.getNodeFilters()
        },
        s.getEdgeFilters = function() {
            return a.getEdgeFilters()
        },
        s.getConnectedComponents = function() {
            return a.getConnectedComponents(!0, !0).map(function(e) {
                return a._getElements(!0, e)
            })
        },
        s.getConnectedComponentByNode = function(e) {
            return a._getElements(!0, a.getConnectedComponentByNode(e, !0, !0))
        },
        e.prototype.isExcluded = function() {
            return a.isNodeExcluded(this)
        },
        t.prototype.isExcluded = function() {
            return a.isEdgeExcluded(this)
        }
    });
    var Is = function(e) {
        var o = this;
        this._ogma = e,
        this._events = e.modules.events,
        this._elts = Se(new fn(!0), new fn(!1)),
        this._sets = Se([], []),
        this._buffer = [],
        this._events.register(["addNodes", "addEdges", "updateDirections", "refreshNodeFilters", "refreshEdgeFilters"], ["clear", "beforeRemoveNodes", "removeNodes", "beforeRemoveEdges", "removeEdges"]),
        this._promisesToResolve = [],
        this._init_(),
        this._sourceList = this.createEdgeAttribute({
            name: "source",
            storage: 32
        }),
        this._targetList = this.createEdgeAttribute({
            name: "target",
            storage: 32
        }),
        this._nodeDeduper = this.createNodeAttribute({
            storage: 1
        }),
        this._edgeDeduper = this.createEdgeAttribute({
            storage: 1
        }),
        this._directionUpdated = [],
        this.Node = function(e) {
            this._index = e
        },
        Object.defineProperty(this.Node.prototype, "_ogma", {
            value: e
        }),
        Object.defineProperty(this.Node.prototype, "isNode", {
            value: !0
        }),
        Object.defineProperty(this.Node.prototype, "size", {
            value: 1
        }),
        Object.defineProperty(this.Node.prototype, "__indexes", {
            value: [0]
        }),
        Object.defineProperty(this.Node.prototype, "_indexes", {
            get: function() {
                return this.__indexes[0] = this._index,
                this.__indexes
            }
        }),
        this.Edge = function(e) {
            this._index = e
        },
        Object.defineProperty(this.Edge.prototype, "_ogma", {
            value: e
        }),
        Object.defineProperty(this.Edge.prototype, "isNode", {
            value: !1
        }),
        Object.defineProperty(this.Edge.prototype, "size", {
            value: 1
        }),
        Object.defineProperty(this.Edge.prototype, "__indexes", {
            value: [0]
        }),
        Object.defineProperty(this.Edge.prototype, "_indexes", {
            get: function() {
                return this.__indexes[0] = this._index,
                this.__indexes
            }
        }),
        this.NodeList = function(e) {
            this._indexes = e || []
        },
        Object.defineProperty(this.NodeList.prototype, "_ogma", {
            value: e
        }),
        Object.defineProperty(this.NodeList.prototype, "size", {
            get: function() {
                return this._indexes.length
            }
        }),
        Object.defineProperty(this.NodeList.prototype, "isNode", {
            value: !0
        }),
        this.EdgeList = function(e) {
            this._indexes = e || []
        },
        Object.defineProperty(this.EdgeList.prototype, "_ogma", {
            value: e
        }),
        Object.defineProperty(this.EdgeList.prototype, "size", {
            get: function() {
                return this._indexes.length
            }
        }),
        Object.defineProperty(this.EdgeList.prototype, "isNode", {
            value: !1
        }),
        this._nodeFilterRules = [],
        this._edgeFilterRules = [],
        this._nodes = this.createAttribute(!0, {
            name: "object",
            storage: "any"
        }),
        this._edges = this.createAttribute(!1, {
            name: "object",
            storage: "any"
        }),
        this._filters = Se(new bs(e, this, !0), new bs(e, this, !1)),
        this._promisesToResolve = [],
        this._filterUpdater = new mn(this,
        function(e) {
            var t = e.nodes,
            n = e.edges,
            r = o._filters.nodes.refreshFilters(t),
            i = o._filters.edges.refreshFilters(n); (r.newlyIncluded.length || r.newlyExcluded.length) && o._events.fire("refreshNodeFilters", {
                isNode: !0,
                newlyIncluded: new o.NodeList(r.newlyIncluded),
                newlyExcluded: new o.NodeList(r.newlyExcluded)
            }),
            (i.newlyIncluded.length || i.newlyExcluded.length) && o._events.fire("refreshEdgeFilters", {
                isNode: !1,
                newlyIncluded: new o.EdgeList(i.newlyIncluded),
                newlyExcluded: new o.EdgeList(i.newlyExcluded)
            }),
            o._resolvePromises()
        }),
        this._events.on("reset",
        function() {
            o.clear(),
            o.clearNodeFilterRules(),
            o.clearEdgeFilterRules()
        })
    };
    function Ts(e) {
        return null == e ? {}: Re(e) ? {
            ids: e,
            filter: "all"
        }: "function" == typeof e ? {
            criteria: e
        }: "string" == typeof e ? {
            filter: e
        }: e
    }
    function Ns(e, t) {
        for (var n = e._elts.fetch(t), r = null; r = Math.random().toString().slice(2), n.hasId(r););
        return r
    }
    function ks(e) {
        if (void 0 === e) return "gen_" + Math.random().toString().slice(2) + "_";
        if ("string" != typeof e && ("number" != typeof e || !isFinite(e))) throw new Error(e + " is not a valid id, expected string or number");
        return e
    }
    function Ls(e, t) {
        return t instanceof e.Node ? t._index: e._elts.nodes.getIndex(t, !0)
    }
    function Rs(e, t) {
        var n = e._sourceList.get(t),
        r = e._targetList.get(t),
        i = Ps(n, r),
        o = e._parallelEdgesIndex[i];
        void 0 === o && (o = e._parallelTable.addEntry(), e._parallelEdgesIndex[i] = o, e._neighborTable.addTo(n, o), n !== r && e._neighborTable.addTo(r, o)),
        e._parallelTable.addTo(o, t),
        e._directionUpdated.push(o)
    }
    function zs(e, t) {
        var n = e._sourceList.get(t),
        r = e._targetList.get(t),
        i = Ps(n, r),
        o = e._parallelEdgesIndex[i];
        0 === e._parallelTable.removeFromAndGetSize(o, t) && (e._neighborTable.removeFrom(n, o), n !== r && e._neighborTable.removeFrom(r, o), e._parallelEdgesIndex[i] = void 0),
        e._directionUpdated.push(o)
    }
    function Ms(e, t, n) {
        for (var r = e._neighborTable.get(t), i = 0, o = 0; o < r.length; ++o) for (var s = e._parallelTable.get(r[o]), a = 0; a < s.length; ++a) {
            var u = s[a],
            l = e._sourceList.get(u),
            d = e._targetList.get(u);
            if (n && d === t || !n && l === t) {
                i += 1;
                break
            }
        }
        return i
    }
    function Ps(e, t) {
        var n = e < t ? e: t;
        return 67108864 * n + (e + t - n)
    }
    function Fs(e, t, n, r) {
        var i, o = e.getAdjacencyTable(!0, !0, null),
        s = e,
        a = s._getIndexes(!0),
        u = a.length,
        l = {},
        d = {},
        c = [];
        for (i = 0; i < u; i++) d[a[i]] = i;
        for (i = 0; i < u; i++) {
            var h = a[i];
            if (!l[h]) {
                for (var f = h,
                p = [h], g = [], v = !1; 0 !== p.length;) l[f = p.pop()] || (p.push.apply(p, o[d[f]].nodes), l[f] = 1, g.push(f), f === n && (v = !0));
                if (0 < g.length) {
                    if (t ? r && (g = g.map(function(e) {
                        return s._getId(!0, e)
                    })) : g = g.map(function(e) {
                        return s._getElement(!0, e)
                    }), v) return g;
                    c.push(g)
                }
            }
        }
        return c
    }
    function Ds(e) {
        1 < e && we("getData: more than one argument were specified, you probably want to use a single array argument instead of multiple arguments")
    }
    Is.prototype._resolvePromises = function() {
        var e = this._promisesToResolve;
        this._promisesToResolve = [],
        e.forEach(function(e) {
            return e()
        })
    },
    Is.prototype._init_ = function() {
        this._nodeList = [],
        this._edgeList = [],
        this._neighborTable = new vn,
        this._parallelTable = new vn,
        this._parallelEdgesIndex = [],
        this._resolvePromises()
    },
    Is.prototype._triggerDirectionUpdate_ = function() {
        this._events.fire("updateDirections", {
            directions: this._directionUpdated
        }),
        this._directionUpdated = []
    },
    Is.prototype.isNodeExcluded = function(e) {
        return this._isExcluded(!0, e._index)
    },
    Is.prototype.isEdgeExcluded = function(e) {
        return this._isExcluded(!1, e._index)
    },
    Is.prototype._isExcluded = function(e, t) {
        return this._filters.fetch(e).isExcluded(t)
    },
    Is.prototype._addFilter = function(e) {
        return this._filters.fetch(e).addFilter()
    },
    Is.prototype._removeFilter = function(e, t) {
        return this._filters.fetch(e).removeFilter(t)
    },
    Is.prototype.addNodeFilterRule = function(e) {
        return this._addFilterRule(!0, e)
    },
    Is.prototype.addEdgeFilterRule = function(e) {
        return this._addFilterRule(!1, e)
    },
    Is.prototype._addFilterRule = function(e, t) {
        var n = this,
        r = this._filters.fetch(e).addRule(t),
        i = new Promise(function(e) {
            return n._promisesToResolve.push(e)
        }),
        o = new Cs(this, e, r, i);
        return this[e ? "_nodeFilterRules": "_edgeFilterRules"].push(o),
        this._filterUpdater.updateAll(),
        o
    },
    Is.prototype._removeFilterRule = function(e, t) {
        var n = this;
        this._filters.fetch(e).removeRule(t),
        this._filterUpdater.updateAll();
        for (var r = this[e ? "_nodeFilterRules": "_edgeFilterRules"], i = 0; i < r.length; ++i) r[i]._id === t && r.splice(i, 1);
        return new Promise(function(e) {
            n._promisesToResolve.push(e)
        })
    },
    Is.prototype.getNodeFilters = function() {
        return this._nodeFilterRules.slice()
    },
    Is.prototype.getEdgeFilters = function() {
        return this._edgeFilterRules.slice()
    },
    Is.prototype.clearNodeFilterRules = function() {
        return this._clearFilterRules(!0)
    },
    Is.prototype.clearEdgeFilterRules = function() {
        return this._clearFilterRules(!1)
    },
    Is.prototype._clearFilterRules = function(e) {
        var t = this;
        return this._filters.fetch(e).clearRules(),
        this._filterUpdater.updateAll(),
        new Promise(function(e) {
            t._promisesToResolve.push(e)
        })
    },
    Is.prototype._refreshFilterRules = function(e, t) {
        var n = this;
        return this._filters.fetch(e).refreshRules(t),
        this._filterUpdater.updateAll(),
        new Promise(function(e) {
            n._promisesToResolve.push(e)
        })
    },
    Is.prototype._refreshFilters = function(e, t) {
        t ? e ? this._filterUpdater.updateNodes(t) : this._filterUpdater.updateEdges(t) : this._filterUpdater.updateAll()
    },
    Is.prototype.addNode = function(e) {
        return this._getElement(!0, this._addElements(!0, [e])[0])
    },
    Is.prototype.addEdge = function(e) {
        return this._getElement(!1, this._addElements(!1, [e])[0])
    },
    Is.prototype.addNodes = function(e) {
        return this._getElements(!0, this._addElements(!0, e))
    },
    Is.prototype.addEdges = function(e) {
        return this._getElements(!1, this._addElements(!1, e))
    },
    Is.prototype._addElements = function(e, t) {
        return function(e, t, n) {
            if (!Re(n)) throw new TypeError(n + " is not an array");
            for (var r = e._elts.fetch(t), i = [], o = [], s = n.length, a = [], u = [], l = {},
            d = 0; d < s; ++d) {
                var c = n[d];
                if ("object" != typeof c || null === c) throw new Error(c + " is not a valid " + (t ? "node": "edge"));
                var h = ks(c.id);
                r.getIndex(h, !1) || h in l || (o.push(h), i.push(c), l[h] = 1, t || (a.push(Ls(e, c.source)), u.push(Ls(e, c.target))))
            }
            var f = r.addElements(o),
            p = f.length;
            if (t) {
                e._neighborTable.reserve(f.length);
                for (var g = 0; g < p; ++g) e._neighborTable.addEntry(f[g])
            } else {
                e._parallelTable.reserve(f.length / 2 | 0);
                for (var v = 0; v < p; ++v) {
                    var y = f[v],
                    m = a[v],
                    _ = u[v];
                    e._sourceList.set(y, m),
                    e._targetList.set(y, _),
                    Rs(e, y)
                }
                e._triggerDirectionUpdate_()
            }
            for (var b = e[t ? "_nodes": "_edges"], x = e[t ? "Node": "Edge"], w = 0; w < p; ++w) {
                var A = f[w];
                b.set(A, new x(A))
            }
            var E = {
                objects: i
            };
            return E[t ? "nodes": "edges"] = e._getElements(t, f),
            e._events.fire(t ? "addNodes": "addEdges", E),
            e._filters.fetch(t).refreshRules(f),
            e._filters.fetch(t).refreshFilters(f),
            f
        } (this, e, t)
    },
    Is.prototype.removeNodes = function(e) {
        if (void 0 === e) throw new Error(e + " is not a valid argument");
        this._removeElements(!0, this.filterIndexes(!0, this._getIndexes(!0, e)))
    },
    Is.prototype.removeEdges = function(e) {
        if (void 0 === e) throw new Error(e + " is not a valid argument");
        this._removeElements(!1, this.filterIndexes(!1, this._getIndexes(!1, e)))
    },
    Is.prototype._removeElements = function(e, t) { !
        function e(t, n, r) {
            if (!r.length) return;
            if (n) {
                var i = t._collectAdjacentEdges(r);
                t._dedupe(!1, i),
                e(t, !1, i)
            }
            var o = t._elts.fetch(n),
            s = t._sets.fetch(n),
            a = (u = {},
            u[n ? "nodes": "edges"] = t._getElements(n, r), u);
            var u;
            t._events.fire(n ? "beforeRemoveNodes": "beforeRemoveEdges", a);
            for (var l = 0; l < s.length; ++l) s[l].removeMultiple(r);
            if (!n) {
                for (var d = 0,
                c = r.length; d < c; ++d) zs(t, r[d]);
                t._triggerDirectionUpdate_()
            }
            o.removeElements(r);
            t._events.fire(n ? "removeNodes": "removeEdges", a);
            return r
        } (this, e, t)
    },
    Is.prototype.getNodes = function(e) {
        var t = Ts(e),
        n = t.ids,
        r = t.filter,
        i = t.criteria,
        o = this._getIndexes(!0, n);
        return this._filter(!0, o, r),
        i && this._filterWithCriteria(!0, o, i),
        this._getElements(!0, o)
    },
    Is.prototype.getEdges = function(e) {
        var t = Ts(e),
        n = t.ids,
        r = t.filter,
        i = t.criteria,
        o = this._getIndexes(!1, n);
        return this._filter(!1, o, r),
        i && this._filterWithCriteria(!1, o, i),
        this._getElements(!1, o)
    },
    Is.prototype._getElements = function(e, t) {
        if (arguments.length < 2) throw new Error("_getElement: invalid number of parameters");
        return new this[e ? "NodeList": "EdgeList"](t)
    },
    Is.prototype.getNode = function(e) {
        return this._getElement(!0, this._getIndex(!0, e))
    },
    Is.prototype.getEdge = function(e) {
        return this._getElement(!1, this._getIndex(!1, e))
    },
    Is.prototype._getElement = function(e, t) {
        if (arguments.length < 2) throw new Error("_getElement: invalid number of parameters");
        if (t) return this[e ? "_nodes": "_edges"].get(t)
    },
    Is.prototype.getRaw = function() {
        return {
            nodes: this.getNodes("raw").toArray(),
            edges: this.getEdges("raw").toArray()
        }
    },
    Is.prototype.getVisible = function() {
        return {
            nodes: this.getNodes("visible").toArray(),
            edges: this.getEdges("visible").toArray()
        }
    },
    Is.prototype.clear = function() {
        this._events.fire("clear"),
        this._sets.nodes.forEach(function(e) {
            return e.clear()
        }),
        this._sets.edges.forEach(function(e) {
            return e.clear()
        }),
        this._elts.nodes.clear(),
        this._elts.edges.clear(),
        this._init_()
    },
    Is.prototype.forEachNode = function(e, t) {
        this._forEachElements(!0, e._indexes, t)
    },
    Is.prototype.forEachEdge = function(e, t) {
        this._forEachElements(!1, e._indexes, t)
    },
    Is.prototype._forEachElements = function(e, t, n) {
        for (var r = 0; r < t.length; ++r) n(this._getElement(e, t[r]), r)
    },
    Is.prototype.mapNodes = function(e, t) {
        return this._mapElements(!0, e._indexes, t)
    },
    Is.prototype.mapEdges = function(e, t) {
        return this._mapElements(!1, e._indexes, t)
    },
    Is.prototype._mapElements = function(e, t, n) {
        for (var r = new Array(t.length), i = 0; i < t.length; ++i) r[i] = n(this._getElement(e, t[i]), i);
        return r
    },
    Is.prototype.filterNodes = function(e, t) {
        return this._filterElements(!0, e._indexes, t)
    },
    Is.prototype.filterEdges = function(e, t) {
        return this._filterElements(!1, e._indexes, t)
    },
    Is.prototype._filterElements = function(e, t, n) {
        for (var r = [], i = 0; i < t.length; ++i) {
            var o = t[i];
            n(this._getElement(e, o), i) && r.push(o)
        }
        return this._getElements(e, r)
    },
    Is.prototype.reduceNodes = function(e, t, n) {
        return this._reduceElements(!0, e._indexes, t, n)
    },
    Is.prototype.reduceEdges = function(e, t, n) {
        return this._reduceElements(!1, e._indexes, t, n)
    },
    Is.prototype._reduceElements = function(e, t, n, r) {
        for (var i = r,
        o = 0; o < t.length; ++o) {
            var s = t[o];
            i = n(i, this._getElement(e, s), o)
        }
        return i
    },
    Is.prototype.dedupeNodes = function(e) {
        return this._getElements(!0, this._dedupe(!0, e._indexes.slice()))
    },
    Is.prototype.dedupeEdges = function(e) {
        return this._getElements(!1, this._dedupe(!1, e._indexes.slice()))
    },
    Is.prototype._dedupe = function(e, t) {
        var n = this[e ? "_nodeDeduper": "_edgeDeduper"],
        r = 0;
        n.reset();
        for (var i = 0; i < t.length; ++i) {
            var o = t[i];
            0 === n.get(o) && (n.set(o, 1), t[r] = o, r += 1)
        }
        return t.length = r,
        t
    },
    Is.prototype.inverse = function(e) {
        var t = e.isNode,
        n = e._indexes,
        r = this[t ? "_nodeDeduper": "_edgeDeduper"],
        i = this._elts.fetch(t).getFlexArray("excluded"),
        o = this._allIndexes(t),
        s = [];
        r.reset();
        for (var a = 0,
        u = n.length; a < u; ++a) {
            var l = n[a];
            r.set(l, 1)
        }
        for (var d = 0,
        c = o.length; d < c; ++d) {
            var h = o[d];
            0 === r.get(h) && 0 === i.get(h) && s.push(h)
        }
        return this._getElements(t, s)
    },
    Is.prototype.partitionNodes = function(e, t) {
        return this._partition(!0, e._indexes, t)
    },
    Is.prototype.partitionEdges = function(e, t) {
        return this._partition(!1, e._indexes, t)
    },
    Is.prototype._partition = function(e, t, n) {
        for (var r = {},
        i = 0; i < t.length; ++i) {
            var o = t[i],
            s = n(this._getElement(e, o), i),
            a = r[s];
            a || (a = new this.NodeList, r[s] = a),
            a._indexes.push(o)
        }
        return r
    },
    Is.prototype.concatNodes = function(e, t) {
        return this._getElements(!0, e._indexes.concat(t._indexes))
    },
    Is.prototype.concatEdges = function(e, t) {
        return this._getElements(!1, e._indexes.concat(t._indexes))
    },
    Is.prototype.createAttribute = function(e, t) {
        return this._elts.fetch(e).createFlexArray(t)
    },
    Is.prototype.createNodeAttribute = function(e) {
        return this.createAttribute(!0, e)
    },
    Is.prototype.createEdgeAttribute = function(e) {
        return this.createAttribute(!1, e)
    },
    Is.prototype.createAttributes = function(e) {
        var t = this;
        e.forEach(function(e) {
            "nodes" !== e.
            for && "both" !== e.
            for || t.createNodeAttribute(e),
            "edges" !== e.
            for && "both" !== e.
            for || t.createEdgeAttribute(e)
        })
    },
    Is.prototype._removeAttribute = function(e, t) {
        this._elts.fetch(e).removeFlexArray(t)
    },
    Is.prototype.getAttribute = function(e, t) {
        return this._elts.fetch(e).getFlexArray(t)
    },
    Is.prototype.getAttributes = function(t, e) {
        var n = this;
        return e.map(function(e) {
            return n.getAttribute(t, e)
        })
    },
    Is.prototype.getNodeAttribute = function(e) {
        return this.getAttribute(!0, e)
    },
    Is.prototype.getEdgeAttribute = function(e) {
        return this.getAttribute(!1, e)
    },
    Is.prototype._getIndexes = function(e, t, n) {
        if (void 0 === n && (n = !1), "boolean" != typeof e) throw new TypeError('"isNode" should be a boolean');
        var r, i = this[e ? "Node": "Edge"],
        o = this[e ? "NodeList": "EdgeList"],
        s = this._elts.fetch(e);
        if (void 0 === t) r = s.allIndexes().slice();
        else if (t instanceof o || t instanceof i) r = t._indexes.slice();
        else if (r = [], Re(t)) for (var a = 0; a < t.length; ++a) {
            var u = t[a];
            if (u instanceof i) r.push(u._index);
            else {
                var l = s.getIndex(u, n);
                l && r.push(l)
            }
        } else {
            var d = s.getIndex(t, n);
            d && r.push(d)
        }
        return r
    },
    Is.prototype._allIndexes = function(e) {
        return this._elts.fetch(e).allIndexes()
    },
    Is.prototype._getIndex = function(e, t, n) {
        return t instanceof this[e ? "Node": "Edge"] ? t._index: this._elts.fetch(e).getIndex(t, n)
    },
    Is.prototype.getNodeIndex = function(e) {
        return this._elts.nodes.getIndex(e)
    },
    Is.prototype.getEdgeIndex = function(e) {
        return this._elts.edges.getIndex(e)
    },
    Is.prototype.nodeIndexList = function(e) {
        return this._getIndexes(!0, e)
    },
    Is.prototype.edgeIndexList = function(e) {
        return this._getIndexes(!1, e)
    },
    Is.prototype.getAttributesArrays = function(e, t, n) {
        void 0 === n && (n = {});
        var r = n.destArrays,
        i = n.ids;
        if (!t) throw new Error("You must provide array of attributes to retrieve the values");
        return i || (i = this._elts[e ? "nodes": "edges"].getAllIndexes()),
        this.getAttributes(e, t).map(function(e, t) {
            return e.getMultiple(i, r ? r[t] : void 0)
        })
    },
    Is.prototype.getNodeAttributesArrays = function(e, t) {
        return this.getAttributesArrays(!0, e, t)
    },
    Is.prototype.getEdgeAttributesArrays = function(e, t) {
        return this.getAttributesArrays(!1, e, t)
    },
    Is.prototype._getId = function(e, t) {
        return this._elts.fetch(e).getId(t)
    },
    Is.prototype._getIds = function(e, t, n) {
        return this._elts.fetch(e).getIdList(t, n)
    },
    Is.prototype._getSource = function(e) {
        return this._sourceList.get(e)
    },
    Is.prototype._getSources = function(e, t) {
        return this._sourceList.getMultiple(e, t)
    },
    Is.prototype._getTarget = function(e) {
        return this._targetList.get(e)
    },
    Is.prototype._getTargets = function(e, t) {
        return this._targetList.getMultiple(e, t)
    },
    Is.prototype._setExtremities = function(e, t, n) {
        for (var r = 0; r < e.length; ++r) zs(this, e[r]);
        t && this._sourceList.setMultiple(e, t),
        n && this._targetList.setMultiple(e, n);
        for (var i = 0; i < e.length; ++i) Rs(this, e[i]);
        this._triggerDirectionUpdate_()
    },
    Is.prototype.setSource = function(e, t) {
        var n = this._getIndexes(!1, e),
        r = Array.isArray(t) ? this._getIndexes(!0, t) : this._getIndex(!0, t);
        this._setExtremities(n, r, void 0)
    },
    Is.prototype.setTarget = function(e, t) {
        var n = this._getIndexes(!1, e),
        r = Array.isArray(t) ? this._getIndexes(!0, t) : this._getIndex(!0, t);
        this._setExtremities(n, void 0, r)
    },
    Is.prototype.getParallelIndexes = function(e, t) {
        var n = this._parallelTable.get( + e);
        t || (t = new Array(n.length));
        for (var r = 0; r < n.length; ++r) t[r] = n[r];
        return t
    },
    Is.prototype.getEdgeDirection = function(e) {
        var t = Ps(this._sourceList.get(e), this._targetList.get(e));
        return this._parallelEdgesIndex[t]
    },
    Is.prototype._getAllEdgeDirections = function() {
        for (var e = [], t = Object.keys(this._parallelEdgesIndex), n = 0; n < t.length; ++n) e.push(this._parallelEdgesIndex[t[n]]);
        return e
    },
    Is.prototype._filter = function(e, t, n) {
        if ("all" === n) return t;
        var r = void 0,
        i = 0;
        r = "raw" === n ? this._elts.fetch(e).getFlexArray("virtual") : this._elts.fetch(e).getFlexArray("excluded");
        for (var o = 0; o < t.length; ++o) {
            var s = t[o];
            0 === r.get(s) && (t[i] = s, i += 1)
        }
        return t.length = i,
        t
    },
    Is.prototype._filterWithCriteria = function(e, t, n) {
        for (var r = 0,
        i = 0; i < t.length; ++i) {
            var o = t[i];
            n(this._getElement(e, o)) && (t[r] = o, r += 1)
        }
        return t.length = r,
        t
    },
    Is.prototype._collectAdjacentEdges = function(e, t) {
        for (var n = "in" === t,
        r = !("out" === t || n), i = [], o = 0; o < e.length; ++o) for (var s = e[o], a = this._neighborTable.get(s), u = 0; u < a.length; ++u) {
            var l = this._parallelTable.get(a[u]);
            if (r) i.push.apply(i, l);
            else for (var d = 0; d < l.length; ++d) {
                var c = l[d],
                h = this._sourceList.get(c),
                f = this._targetList.get(c);
                n !== (f === s) && h !== f || i.push(c)
            }
        }
        return i
    },
    Is.prototype._collectAdjacentNodes = function(e, t) {
        Re(e) || (e = [e]);
        for (var n = "out" === t,
        r = "in" === t,
        i = !(n || r), o = [], s = 0; s < e.length; ++s) for (var a = e[s], u = this._neighborTable.get(a), l = 0; l < u.length; ++l) for (var d = this._parallelTable.get(u[l]), c = 0; c < d.length; ++c) {
            var h = d[c],
            f = this._sourceList.get(h),
            p = this._targetList.get(h);
            if (f !== p && (i || r && a === p || n && a === f)) {
                o.push(f + p - a);
                break
            }
        }
        return o
    },
    Is.prototype.getAdjacentNodes = function(e, t) {
        return this._getElements(!0, this._getAdjacentElements(!0, this._getIndexes(!0, e), t))
    },
    Is.prototype.getAdjacentEdges = function(e, t) {
        return this._getElements(!1, this._getAdjacentElements(!1, this._getIndexes(!0, e), t))
    },
    Is.prototype._getAdjacentElements = function(e, t, n) {
        void 0 === n && (n = {});
        var r = n.direction,
        i = n.filter,
        o = n.includeSources;
        t = this._dedupe(!0, t.slice());
        var s = this._collectAdjacentEdges(t, r);
        if (this._filter(!1, s, i), e) {
            for (var a = [], u = 0; u < s.length; ++u) {
                var l = s[u],
                d = this._sourceList.get(l),
                c = this._targetList.get(l);
                a.push(d, c)
            }
            this._dedupe(!0, a),
            this._filter(!0, a, i);
            for (var h = a.length,
            f = 0; f < t.length; ++f) {
                var p = a.indexOf(t[f]); - 1 !== p && (h -= 1, a[p] = a[h])
            }
            return a.length = h,
            o && a.unshift.apply(a, t),
            a
        }
        return this._dedupe(!1, s),
        s
    },
    Is.prototype.degree = function(e, t) {
        return this._degree(this._getIndex(!0, e), t)
    },
    Is.prototype._degree = function(e, t) {
        return "in" !== t && "out" !== t ? this._neighborTable.size(e) : Ms(this, e, "in" === t)
    },
    Is.prototype._degrees = function(e, t) {
        if ("in" !== t && "out" !== t) return this._neighborTable.sizes(e);
        for (var n = new Array(e.length), r = "in" === t, i = 0, o = e.length; i < o; i++) n[i] = Ms(this, e[i], r);
        return n
    },
    Is.prototype._createIndexSet = function(e) {
        var t = new xs(this, e);
        return this._sets.fetch(e).push(t),
        t
    },
    Is.prototype.createSet = function() {
        return new Es(this._ogma)
    },
    Is.prototype.getAdjacencyTable = function(e, t, n, r) {
        return this._getAdjacencyTable(e, t, n, this._getIndexes(!0, r))
    },
    Is.prototype._getAdjacencyTable = function(e, t, n, r) {
        return function(t, e, n, r, i) {
            var o, s = e ? "out": "both",
            a = i || t._getIndexes(!0),
            u = a.map(function(e) {
                return t._collectAdjacentEdges([e], s)
            }),
            l = t._nodeIdList,
            d = t.getAttributes(!1, ["source", "target", "width"]),
            c = d[0],
            h = d[1],
            f = d[2],
            p = new Array,
            g = 1,
            v = !1,
            y = !1;
            "number" == typeof r ? (v = !0, g = r) : "function" == typeof r ? y = !0 : "string" != typeof r && (r = r ? "size": null);
            for (var m = 0,
            _ = u.length; m < _; m++) {
                for (var b = u[m], x = a[m], w = void 0, A = void 0, E = void 0, C = void 0, S = b.length, I = n ? new Array(S) : new Uint32Array(S), T = new Array(S), N = 0; N < S; N++) w = b[N],
                A = c.get(w),
                E = h.get(w),
                C = e ? E: x === A ? E: A,
                n && (C = t._getId(!0, C)),
                I[N] = C,
                r && (T[N] = v ? g: y ? r(l.get(A), l.get(E)) : f.get(w) || g); (o = Object.create(null)).nodes = I,
                o.id = n ? t._getId(!0, x) : x,
                r && (o.weights = T),
                p.push(o)
            }
            return p
        } (this, !e, !t, n, r)
    },
    Is.prototype.getConnectedComponents = function(e, t) {
        return Fs(this, e, -1, !t)
    },
    Is.prototype.getComponentByNode = function(e, t, n) {
        if (void 0 === e) throw new Error("topology.getComponentByNode: Node has to be defined");
        var r = void 0 === e.id ? e: e.id;
        if (! (e = this.getNode(r))) throw new Error('topology.getComponentByNode: Cannot find node "' + r + '"');
        return Fs(this, t, e.__index, !n)
    },
    Is.prototype.getConnectedComponentByNode = function(e, t, n) {
        if (void 0 === e) throw new Error("topology.getConnectedComponentByNode: Node has to be defined");
        var r = void 0 === e.id ? e: e.id;
        if (! (e = this.getNode(r))) throw new Error('topology.getConnectedComponentByNode: Cannot find node "' + r + '"');
        return Fs(this, t, e._index, !n)
    },
    Is.prototype.filterIndexes = function(e, t) {
        for (var n = this._elts.fetch(e), r = this._buffer, i = null, o = 0; o < t.length; ++o) {
            var s = t[o];
            n.has(s) && !r[s] ? (r[s] = 1, i && i.push(s)) : i || (i = t.slice(0, o))
        }
        return r.length = 0,
        i || t
    },
    Is.prototype.generateUnusedNodeId = function() {
        return Ns(this, !0)
    },
    Is.prototype.generateUnusedEdgeId = function() {
        return Ns(this, !1)
    },
    Is.prototype._generateUnusedId = function(e) {
        return Ns(this, e)
    },
    p.extend(function(e) {
        var r = e.modules.graph,
        t = e.Node,
        n = e.Edge,
        i = e.NodeList,
        o = e.EdgeList;
        t.prototype.toList = function() {
            return new i([this._index])
        },
        n.prototype.toList = function() {
            return new o([this._index])
        },
        i.prototype.toArray = function() {
            for (var e = this.size,
            t = new Array(e), n = 0; n < e; ++n) t[n] = r._getElement(!0, this._indexes[n]);
            return t
        },
        i.prototype.clone = function() {
            return new i(this._indexes.slice())
        },
        o.prototype.toArray = function() {
            for (var e = this.size,
            t = new Array(e), n = 0; n < e; ++n) t[n] = r._getElement(!1, this._indexes[n]);
            return t
        },
        o.prototype.clone = function() {
            return new o(this._indexes.slice())
        },
        t.prototype.getId = function() {
            return r._getId(!0, this._index)
        },
        i.prototype.getId = function() {
            return r._getIds(!0, this._indexes)
        },
        n.prototype.getId = function() {
            return r._getId(!1, this._index)
        },
        o.prototype.getId = function() {
            return r._getIds(!1, this._indexes)
        },
        n.prototype.getSource = function() {
            return r._getElement(!0, r._getSource(this._index))
        },
        o.prototype.getSource = function() {
            return r._getElements(!0, r._getSources(this._indexes))
        },
        n.prototype.getTarget = function() {
            return r._getElement(!0, r._getTarget(this._index))
        },
        o.prototype.getTarget = function() {
            return r._getElements(!0, r._getTargets(this._indexes))
        },
        n.prototype.getExtremities = function() {
            return r._getElements(!0, [r._getSource(this._index), r._getTarget(this._index)])
        },
        o.prototype.getExtremities = function() {
            return r._getElements(!0, r._getSources(this._indexes).concat(r._getTargets(this._indexes)))
        },
        n.prototype.setSource = function(e) {
            r.setSource(this, e)
        },
        n.prototype.setTarget = function(e) {
            r.setTarget(this, e)
        },
        i.prototype.get = function(e) {
            return r._getElement(!0, this._indexes[e])
        },
        i.prototype.forEach = function(e) {
            r.forEachNode(this, e)
        },
        i.prototype.map = function(e) {
            return r.mapNodes(this, e)
        },
        i.prototype.filter = function(e) {
            return r.filterNodes(this, e)
        },
        i.prototype.reduce = function(e, t) {
            return r.reduceNodes(this, e, t)
        },
        i.prototype.concat = function(e) {
            return r.concatNodes(this, e)
        },
        i.prototype.dedupe = function() {
            return r.dedupeNodes(this)
        },
        i.prototype.slice = function(e, t) {
            return new i(this._indexes.slice(e, t))
        },
        o.prototype.get = function(e) {
            return r._getElement(!1, this._indexes[e])
        },
        o.prototype.forEach = function(e) {
            r.forEachEdge(this, e)
        },
        o.prototype.map = function(e) {
            return r.mapEdges(this, e)
        },
        o.prototype.filter = function(e) {
            return r.filterEdges(this, e)
        },
        o.prototype.reduce = function(e, t) {
            return r.reduceEdges(this, e, t)
        },
        o.prototype.concat = function(e) {
            return r.concatEdges(this, e)
        },
        o.prototype.dedupe = function() {
            return r.dedupeEdges(this)
        },
        i.prototype.partition = function(e) {
            return r.partitionNodes(this, e)
        },
        o.prototype.partition = function(e) {
            return r.partitionEdges(this, e)
        },
        o.prototype.slice = function(e, t) {
            return new o(this._indexes.slice(e, t))
        },
        i.prototype.includes = function(e) {
            return - 1 !== this._indexes.indexOf(e._index) && r._getElement(!0, e._index) === e
        },
        o.prototype.includes = function(e) {
            return - 1 !== this._indexes.indexOf(e._index) && r._getElement(!1, e._index) === e
        },
        i.prototype.sort = function(n) {
            return new i(this._indexes.slice().sort(function(e, t) {
                return n(r._getElement(!0, e), r._getElement(!0, t))
            }))
        },
        i.prototype.inverse = function() {
            return r.inverse(this)
        },
        o.prototype.inverse = function() {
            return r.inverse(this)
        }
    }),
    p.extend(function(t) {
        var e = t.Node,
        n = t.Edge,
        r = t.NodeList,
        i = t.EdgeList,
        o = new Os(t);
        t.modules.data = o,
        t.events.onNodeDataChange = function(e) {
            return t.modules.events.on("updateNodeData", e),
            t.events
        },
        t.events.onEdgeDataChange = function(e) {
            return t.modules.events.on("updateEdgeData", e),
            t.events
        },
        e.prototype.setData = function(e, t) {
            return arguments.length < 2 && (t = e, e = null),
            o.setProperty(this, e, t),
            this
        },
        e.prototype.getData = function(e) {
            return Ds(arguments.length),
            o.getProperty(this, e)[0]
        },
        n.prototype.setData = function(e, t) {
            return arguments.length < 2 && (t = e, e = null),
            o.setProperty(this, e, t),
            this
        },
        n.prototype.getData = function(e) {
            return Ds(arguments.length),
            o.getProperty(this, e)[0]
        },
        r.prototype.setData = function(e, t) {
            return arguments.length < 2 && (t = e, e = null),
            o.setProperty(this, e, t, {
                dispatch: !0
            }),
            this
        },
        r.prototype.fillData = function(e, t) {
            return arguments.length < 2 && (t = e, e = null),
            o.setProperty(this, e, t, {
                dispatch: !1
            }),
            this
        },
        r.prototype.getData = function(e) {
            return Ds(arguments.length),
            o.getProperty(this, e)
        },
        i.prototype.setData = function(e, t) {
            return arguments.length < 2 && (t = e, e = null),
            o.setProperty(this, e, t, {
                dispatch: !0
            }),
            this
        },
        i.prototype.fillData = function(e, t) {
            return arguments.length < 2 && (t = e, e = null),
            o.setProperty(this, e, t, {
                dispatch: !1
            }),
            this
        },
        i.prototype.getData = function(e) {
            return Ds(arguments.length),
            o.getProperty(this, e)
        }
    });
    var Os = function(e) {
        var d = this;
        this._graph = e.modules.graph,
        this._events = e.modules.events,
        this._nodeChanges = [],
        this._edgeChanges = [],
        this._timeout = null,
        this._nodeDataList = this._graph.createAttribute(!0, {
            name: "data",
            storage: "any"
        }),
        this._edgeDataList = this._graph.createAttribute(!1, {
            name: "data",
            storage: "any"
        }),
        this._nodeList = this._graph.getAttribute(!0, "object"),
        this._edgeList = this._graph.getAttribute(!1, "object"),
        this._events.register(["updateNodeData", "updateEdgeData"]),
        this._tmp = new Array(2),
        this._events.on({
            "addNodes addEdges": function(e) {
                for (var t = e.nodes,
                n = e.edges,
                r = e.objects,
                i = t || n,
                o = i.isNode,
                s = i.size,
                a = i._indexes,
                u = d[o ? "_nodeDataList": "_edgeDataList"], l = 0; l < s; ++l) u.set(a[l], r[l].data)
            }
        })
    };
    function Bs(e, t) {
        var n, r = t ? "_nodeChanges": "_edgeChanges",
        i = [],
        o = e[r];
        e[r] = [];
        for (var s = 0; s < o.length; ++s) {
            var a = o[s];
            i.push.apply(i, a.indexes),
            a[t ? "nodes": "edges"] = e._graph._getElements(t, a.indexes),
            delete a.indexes
        }
        return (n = {
            isNode: t,
            changes: o
        })[t ? "nodes": "edges"] = e._graph._getElements(t, i).dedupe(),
        n
    }
    function js(e) {
        return "string" == typeof e ? e.split(".") : Array.isArray(e) ? e: null == e ? null: [e.toString()]
    }
    function Us(e, t, n, r, i, o) {
        for (var s = t.length - 1,
        a = 0; a < s; ++a) {
            var u = t[a],
            l = e[u];
            null == l && (l = {},
            e[u] = l),
            e = l
        }
        var d = t[s],
        c = e[d],
        h = r ? n(i) : n;
        e[d] = h,
        o[0] = c,
        o[1] = h
    }
    function Hs(e, t) {
        if (null === t || !t.length) return e;
        if (null != e) {
            for (var n = t.length - 1,
            r = 0; r < n; ++r) {
                if (null == (e = e[t[r]])) return
            }
            return e[t[n]]
        }
    }
    Os.prototype.setProperty = function(e, t, n, r) {
        void 0 === r && (r = {});
        var i = r.dispatch;
        return void 0 === i && (i = !1),
        function(e, t, n, r, i, o) {
            o && "function" == typeof i && (o = !1);
            r = js(r);
            for (var s = "function" == typeof i,
            a = t ? e._nodeList: e._edgeList, u = t ? e._nodeDataList: e._edgeDataList, l = function(e, t) {
                for (var n = 0; n < e.length; ++n) {
                    var r = e[n],
                    i = r.property;
                    if (null === t && null === i) return r;
                    if (t && i && i.length === t.length) {
                        for (var o = !0,
                        s = 0; s < i.length; ++s) if (i[s] !== t[s]) {
                            o = !1;
                            break
                        }
                        if (o) return r
                    }
                }
                var a = {
                    property: t && t.slice(),
                    indexes: [],
                    previousValues: [],
                    newValues: []
                };
                return e.push(a),
                a
            } (t ? e._nodeChanges: e._edgeChanges, r), d = 0; d < n.length; ++d) {
                var c = n[d],
                h = u.get(c),
                f = a.get(c),
                p = o ? i[d] : i,
                g = void 0,
                v = void 0;
                null === r ? (g = h, v = s ? p(f) : p, u.set(c, v)) : (null == h && (h = {},
                u.set(c, h)), Us(h, r, p, s, f, e._tmp), g = e._tmp[0], v = e._tmp[1]),
                l.indexes.push(c),
                l.previousValues.push(g),
                l.newValues.push(v)
            }
            y = e,
            y._timeout || (y._timeout = setTimeout(function() {
                var e, t, n;
                t = Bs(e = y, !0),
                n = Bs(e, !1),
                e._events.fire("updateNodeData", t),
                e._events.fire("updateEdgeData", n),
                y._timeout = null
            },
            0));
            var y
        } (this, e.isNode, e._indexes, t, n, i)
    },
    Os.prototype.getProperty = function(e, t) {
        return function(e, t, n, r, i) {
            r = js(r),
            i || (i = new Array(n.length));
            for (var o = t ? e._nodeDataList: e._edgeDataList, s = 0; s < n.length; ++s) {
                var a = n[s],
                u = o.get(a);
                i[s] = Hs(u, r)
            }
            return i
        } (this, e.isNode, e._indexes, t)
    };
    var Xs = {
        linear: function(e) {
            return e
        },
        quadraticIn: function(e) {
            return e * e
        },
        quadraticOut: function(e) {
            return e * (2 - e)
        },
        quadraticInOut: function(e) {
            return (e *= 2) < 1 ? .5 * e * e: -.5 * (--e * (e - 2) - 1)
        },
        cubicIn: function(e) {
            return e * e * e
        },
        cubicOut: function(e) {
            return--e * e * e + 1
        },
        cubicInOut: function(e) {
            return (e *= 2) < 1 ? .5 * e * e * e: .5 * ((e -= 2) * e * e + 2)
        }
    },
    Ws = {
        duration: 0,
        easing: "linear",
        callback: function() {},
        startAfter: 0
    };
    p.extend(function(e) {
        return e.modules.animations = new Gs(e)
    });
    var Gs = function(e) {
        var n = this;
        this._render = e.modules.render,
        this._events = e.modules.events,
        this._animationList = [],
        this._events.on("beforeNewFrame",
        function(e) {
            var t = e.elapsed;
            return function(e, t) {
                if (t < 0 || 0 === e._animationList.length) return ! 0;
                for (var n = [], r = e._animationList, i = 0; i < r.length; ++i) {
                    var o = r[i],
                    s = o.elapsed / o.duration,
                    a = o.startAfter,
                    u = o.easing(s);
                    if (1 <= s) o.func(1),
                    o.done = !0,
                    r.splice(i, 1),
                    i -= 1,
                    n.push(o.callback);
                    else if (a <= u) {
                        var l = 1 / (1 - a);
                        u = (u - a) * l,
                        o.func(u),
                        o.elapsed += t
                    } else o.elapsed += t
                }
                for (var d = 0; d < n.length; ++d) n[d](!1);
                e._render.refresh()
            } (n, t)
        })
    };
    Gs.prototype.play = function(e, t) {
        var n = Te(t, Ws),
        r = n.duration,
        i = n.easing,
        o = n.callback,
        s = n.startAfter,
        a = null;
        return r <= 0 ? (e(1), o()) : (a = {
            func: e,
            easing: "function" == typeof i ? i: Xs[i],
            duration: r,
            callback: o,
            elapsed: 0,
            startAfter: s,
            done: !1
        },
        this._animationList.push(a), this._render.refresh()),
        a
    },
    Gs.prototype.end = function(e, t) {
        void 0 === t && (t = !0);
        var n = this._animationList.indexOf(e); - 1 !== n && (e.func(1), e.done = !0, this._animationList.splice(n, 1), t && e.callback(!0))
    };
    var qs = {
        duration: 0,
        easing: "linear",
        startAfter: 0
    };
    function Ys(e) {
        return Math.abs(e) < 1e-9
    }
    p.extend(function(e) {
        var n = new Vs(e),
        t = e.modules,
        r = e.view;
        t.camera = n,
        r.setZoom = function(e, t) {
            return n.setZoom(e, t)
        },
        r.zoomIn = function(e, t) {
            return n.zoomIn(e, t)
        },
        r.zoomOut = function(e, t) {
            return n.zoomOut(e, t)
        },
        r.getZoom = function() {
            return n.zoom
        },
        r.setCenter = function(e, t) {
            return n.setCenter(e, t)
        },
        r.move = function(e, t) {
            return n.move(e, t)
        },
        r.getCenter = function() {
            return {
                x: n.x,
                y: n.y
            }
        },
        r.setAngle = function(e, t) {
            return n.setAngle(e, t)
        },
        r.rotate = function(e, t) {
            return n.rotate(e, t)
        },
        r.getAngle = function() {
            return n.angle
        },
        r.set = function(e, t) {
            return n.setView(e, t)
        },
        r.get = function() {
            return n.getView()
        },
        r.graphToScreenCoordinates = function(e) {
            return n.graphToScreenCoordinates(e)
        },
        r.screenToGraphCoordinates = function(e) {
            return n.screenToGraphCoordinates(e)
        },
        r.getSize = function() {
            return {
                width: n.width,
                height: n.height
            }
        }
    });
    var Vs = function(e) {
        var t = this;
        this._events = e.modules.events,
        this._render = e.modules.render,
        this._animations = e.modules.animations,
        this._settings = e.modules.settings,
        this._zoomAnimation = null,
        this._moveAnimation = null,
        $s(this),
        this._minZoom = 1e-8,
        this._maxZoom = 1e8,
        Ue(this, {
            width: function() {
                return t._dimensions.width
            },
            height: function() {
                return t._dimensions.height
            },
            x: function() {
                return t._x
            },
            y: function() {
                return t._y
            },
            zoom: function() {
                return t._zoom
            },
            angle: function() {
                return t._angle
            }
        }),
        this._events.register(["cameraMove", "cameraPan", "cameraZoom", "cameraRotate", "viewChanged"]),
        this._settings.register("minZoom", 1e-8,
        function(e) {
            t._minZoom = e,
            t._zoom < e && (t._zoom = e, t._events.fire("cameraMove"))
        }),
        this._settings.register("maxZoom", 1e8,
        function(e) {
            t._maxZoom = e,
            t._zoom > e && (t._zoom = e, t._events.fire("cameraMove"))
        }),
        this._events.on({
            setContainer: function() {
                $s(t),
                t._events.fire("cameraMove")
            },
            resize: function() {
                t.reloadDimensions(),
                t._events.fire("cameraMove")
            }
        })
    };
    function $s(e) {
        e._zoom = 1,
        e._x = 0,
        e._y = 0,
        e._angle = 0,
        e._dimensions = e._render.getDimensions()
    }
    Vs.prototype.setCenter = function(e, t) {
        var n = this,
        r = e.x,
        i = e.y;
        t = Te(t, qs);
        var o = this._x,
        s = this._y,
        a = r - this._x,
        u = i - this._y;
        return Ys(a) && Ys(u) ? Promise.resolve() : new Promise(function(e) {
            t.callback = Js(n, e),
            n._moveAnimation && n._animations.end(n._moveAnimation),
            n._moveAnimation = n._animations.play(function(e) {
                n._x = o + a * e,
                n._y = s + u * e,
                n._events.fire("cameraMove"),
                n._events.fire("cameraPan")
            },
            t)
        })
    },
    Vs.prototype.move = function(e, t) {
        var n = Ks(this, {
            x: e.x,
            y: e.y
        });
        return this.setCenter({
            x: this._x + n.x,
            y: this._y + n.y
        },
        t)
    },
    Vs.prototype.setZoom = function(c, h, e) {
        var f = this;
        void 0 === e && (e = {});
        var p = e.refX,
        g = e.refY;
        return h = Te(h, qs),
        c < this._minZoom ? c = this._minZoom: c > this._maxZoom && (c = this._maxZoom),
        Ys(this._zoom - c) ? Promise.resolve() : new Promise(function(e) {
            var t = f._dimensions.width / 2,
            n = f._dimensions.height / 2,
            r = f._zoom,
            i = t / r - t / c;
            if (h.callback = Js(f, e), void 0 !== p && void 0 !== g) {
                var o = (p - t) / r - (p - t) / c,
                s = (g - n) / r - (g - n) / c,
                a = Math.cos(f._angle),
                u = Math.sin(f._angle),
                l = a * o - u * s,
                d = u * o + a * s;
                f.setCenter({
                    x: f._x + l,
                    y: f._y + d
                },
                h)
            }
            f._zoomAnimation && f._animations.end(f._zoomAnimation),
            f._zoomAnimation = f._animations.play(function(e) {
                f._zoom = t / (t / r - i * e),
                f._events.fire("cameraMove"),
                f._events.fire("cameraZoom")
            },
            h)
        })
    },
    Vs.prototype.zoomIn = function(e, t, n) {
        return "number" != typeof e && (n = t, t = e, e = this._settings.get("interactions.zoom.modifier")),
        this.setZoom(this._zoom * e, t, n)
    },
    Vs.prototype.zoomOut = function(e, t, n) {
        return "number" != typeof e && (n = t, t = e, e = this._settings.get("interactions.zoom.modifier")),
        this.setZoom(this._zoom / e, t, n)
    },
    Vs.prototype.setAngle = function(e, t) {
        var n = this;
        t = Te(t, qs);
        var r = this._angle,
        i = e - r;
        return Ys(i) ? Promise.resolve() : new Promise(function(e) {
            t.callback = Js(n, e),
            n._rotateAnimation && n._animations.end(n._rotateAnimation),
            n._rotateAnimation = n._animations.play(function(e) {
                for (n._angle = r + i * e; n._angle > Math.PI;) n._angle -= 2 * Math.PI;
                for (; n._angle < -Math.PI;) n._angle += 2 * Math.PI;
                n._events.fire("cameraMove"),
                n._events.fire("cameraRotate")
            },
            t)
        })
    },
    Vs.prototype.rotate = function(e, t) {
        return this.setAngle(this._angle + e, t)
    },
    Vs.prototype.graphToScreenCoordinates = function(e, t) {
        var n = e.x,
        r = e.y;
        void 0 === t && (t = {});
        var i = this._dimensions.width / 2,
        o = this._dimensions.height / 2;
        return Bt((n - this._x) * this._zoom + i, (r - this._y) * this._zoom + o, i, o, -1 * this._angle, t)
    },
    Vs.prototype.screenToGraphCoordinates = function(e, t) {
        var n = e.x,
        r = e.y;
        return void 0 === t && (t = {}),
        Bt(this._x + (n - this._dimensions.width / 2) / this._zoom, this._y + (r - this._dimensions.height / 2) / this._zoom, this._x, this._y, this._angle, t)
    },
    Vs.prototype.screenToGraphVector = function(e) {
        return Ks(this, {
            x: e.x,
            y: e.y
        })
    },
    Vs.prototype.getView = function() {
        return {
            x: this._x,
            y: this._y,
            zoom: this._zoom,
            angle: this._angle
        }
    },
    Vs.prototype.setView = function(e, t) {
        var n = Te(e, {
            x: this._x,
            y: this._y,
            zoom: this._zoom,
            angle: this._angle
        }),
        r = n.x,
        i = n.y,
        o = n.zoom,
        s = n.angle;
        return this.setCenter({
            x: r,
            y: i
        },
        t),
        this.setZoom(o, t),
        this.setAngle(s, t)
    },
    Vs.prototype.reloadDimensions = function() {
        this._dimensions = this._render.getDimensions()
    },
    Vs.prototype.animationInProgress = function() {
        var e = this._moveAnimation,
        t = this._zoomAnimation;
        return e && !e.done || t && !t.done
    };
    var Zs = 200,
    Qs = ue(function(e) {
        return e._events.fire("viewChanged")
    },
    Zs);
    function Js(e, t) {
        var n = arguments;
        return function() {
            t.apply(void 0, n),
            clearTimeout(e._moveEndTimer),
            e._moveEndTimer = setTimeout(function() {
                return Qs(e)
            },
            Zs)
        }
    }
    function Ks(e, t) {
        var n = t.x,
        r = t.y;
        n /= e._zoom,
        r /= e._zoom;
        var i = Math.cos(e._angle),
        o = Math.sin(e._angle);
        return {
            x: i * n - o * r,
            y: o * n + i * r
        }
    }
    var ea = 2,
    ta = 4,
    na = new Gt,
    ra = new Gt,
    ia = {},
    oa = {};
    function sa(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g, v, y, m, _) {
        return t = r === i ? n.drawLoop(e, t, o, s, l, d, c, h, p, g, y, m, v, _) : 0 === c ? n.drawStraight(e, t, o, s, a, u, l, d, h, f, p, g, y, m, v, _) : n.drawCurved(e, t, o, s, a, u, l, d, c, h, f, p, g, y, m, v, _)
    }
    function aa(e, t, n, r, i, o) {
        return i < 0 ? Hn(e, t, n, r, ea, ta / i, o) : Hn(n, r, e, t, ea, ta / i * -1, o)
    }
    function ua(e, t, n, r, i) {
        return qn(e, t, r + n, i)
    }
    function la(T, N) {
        return {
            drawStraight: function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
                for (var g = s * T,
                v = g * N,
                y = g + v,
                m = jt(n, r, i, o), _ = (i - n) / m, b = (o - r) / m, x = .7 * u, w = (m - x) / y | 0, A = x, E = e.updateComposite(t, w), C = 0; C < w; ++C) na.setXY(n + _ * A, r + b * A),
                A += g,
                ra.setXY(n + _ * A, r + b * A),
                A += v,
                E[C] = e.line(E[C], na, ra, s, a, d, c, h, f, p);
                return e.composite(t, E)
            },
            drawCurved: function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g) {
                for (var v = s * T,
                y = v * N,
                m = v + y,
                _ = aa(n, r, i, o, u, _), b = Zn(n, r, _.x, _.y, i, o), x = .7 * l, w = (b - x) / m | 0, A = v / b, E = y / b, C = x / b, S = e.updateComposite(t, w), I = 0; I < w; ++I) Xn(C, n, r, i, o, _.x, _.y, ia),
                na.setXY(ia.x, ia.y),
                Xn(C += A, n, r, i, o, _.x, _.y, ia),
                ra.setXY(ia.x, ia.y),
                C += E,
                S[I] = e.line(S[I], na, ra, s, a, c, h, f, p, g);
                return e.composite(t, S)
            },
            drawLoop: function(e, t, n, r, i, o, s, a, u, l, d, c, h) {
                var f = i * T,
                p = f * N,
                g = ua(n, r, s, a, g),
                v = Kn(n, r, g.x1, g.y1, g.x2, g.y2, n, r),
                y = f / v,
                m = p / v,
                _ = .7 * a / v,
                b = 0;
                e.delete(t);
                for (var x = []; _ <= 1;) {
                    for (Yn(_, n, r, n, r, g.x1, g.y1, g.x2, g.y2, na), _ += y; Yn(_, n, r, n, r, g.x1, g.y1, g.x2, g.y2, ra), _ += .01, jt(na.x, na.y, ra.x, ra.y) < f;);
                    for (; Yn(_, n, r, n, r, g.x1, g.y1, g.x2, g.y2, ra), _ -= .01, jt(na.x, na.y, ra.x, ra.y) > f;);
                    _ += m + .01,
                    x[b] = e.line(x[b], na, ra, i, o, u, l, d, c, h),
                    ++b
                }
                return e.composite( - 1, x)
            },
            detectStraight: function(e, t, n, r, i, o, s, a, u) {
                return Lt(e, t, n, r, i, o, s)
            },
            detectCurved: function(e, t, n, r, i, o, s, a, u, l) {
                return aa(n, r, i, o, a, oa),
                Wn(e, t, n, r, i, o, oa.x, oa.y, s / 2)
            },
            detectLoop: function(e, t, n, r, i, o, s) {
                return ua(n, r, o, s, oa),
                $n(e, t, n, r, n, r, oa.x1, oa.y1, oa.x2, oa.y2, i / 2)
            }
        }
    }
    var da = {
        getLoopControlPoints: ua,
        getCurveControlPoint: aa,
        getPointOnQuadraticCurve: Xn,
        getPointOnBezierCurve: Yn,
        distance: jt,
        lineAngle: Mt
    },
    ca = function(s, e, t, n, r, i) {
        var o, l = this;
        this._LAYER_DEPTH_VALUE = Nr,
        this._MIN_DEPTH = s ? Tr: 4 * Sr,
        this._EPSILON = Sr,
        this._name = s ? "node": "edge",
        this._ogma = e,
        this._shapes = t,
        this._graph = e.modules.graph,
        this._render = e.modules.render,
        this._settings = n,
        this._camera = r,
        this._nodes = i,
        this._edges = null,
        this._isNode = s,
        this._refreshAll = !0,
        this._nameList = [],
        this._byName = {},
        this._graphicsList = [],
        this._semanticLayers = [],
        this._properties = {},
        this._propertyList = [],
        this._propertiesByRootKey = {},
        this._aliases = {},
        this._drawFunctionModels = [],
        this._postDraw = [],
        this._contexts = {},
        this._components = [],
        this._toRefresh = this._graph._createIndexSet(s),
        this._getNodeAttribute = function(e) {
            return l._graph.getNodeAttribute(e)
        },
        this._getEdgeAttribute = function(e) {
            return l._graph.getEdgeAttribute(e)
        },
        this._toReconfigure = !1,
        this._toComputeCurvatures = !1,
        this._individualStyles = {},
        this._originalStyles = {},
        this._ruleStyles = {},
        this._finalStyles = {},
        this._curvaturesToRecompute = {},
        this._layerList = [],
        this._layers = {},
        this._elements = this._graph.getAttribute(s, "object"),
        this._excludedList = this._graph.getAttribute(s, "excluded"),
        this._nextRuleId = 1,
        this._ruleList = [],
        this._rules = {},
        this._layer = this._graph.createAttribute(s, {
            name: "layer",
            storage: 16
        }),
        this._depth = this._graph.createAttribute(s, {
            name: "depth",
            storage: "float"
        }),
        s || (this._graph.createEdgeAttribute({
            name: "curvature",
            storage: "int8"
        }), this._sourceList = this._graph.getEdgeAttribute("source"), this._targetList = this._graph.getEdgeAttribute("target")),
        e.modules.events.on(((o = {})[s ? "addNodes": "addEdges"] = function(e) {
            for (var t = e.objects,
            n = e.nodes,
            r = e.edges,
            i = n || r,
            o = new Array(t.length), s = i._indexes, a = 0; a < t.length; ++a) o[a] = t[a].style;
            l._updateDepth(s);
            for (var u = 0; u < t.length; ++u) o[u] = t[u].attributes;
            l._setIndividualStyles(s, o, !0, !1),
            l._computeRules(Object.keys(l._rules), s, !1),
            l._computeStyles(Object.keys(l._finalStyles), s),
            l._markToRefresh(s)
        },
        o[s ? "beforeRemoveNodes": "beforeRemoveEdges"] = function(e) {
            var t = e.nodes,
            n = e.edges;
            l._deleteGraphics((t || n)._indexes),
            l._render.refresh()
        },
        o[s ? "refreshNodeFilters": "refreshEdgeFilters"] = function(e) {
            var t = e.newlyIncluded,
            n = e.newlyExcluded;
            if (l._markToRefresh(t._indexes), l._markToRefresh(n._indexes), !s) {
                for (var r = [], i = 0; i < t._indexes.length; ++i) r.push(l._graph.getEdgeDirection(t._indexes[i]));
                for (var o = 0; o < n._indexes.length; ++o) r.push(l._graph.getEdgeDirection(n._indexes[o]));
                l._addCurvaturesToUpdate(r)
            }
        },
        o)),
        s || e.modules.events.on({
            updateDirections: function(e) {
                var t = e.directions;
                l._addCurvaturesToUpdate(t)
            }
        })
    };
    function ha(e, t, n, r, i, o, s, a) {
        return i ? r: s ? 1 !== t || 0 !== n || a ? e + 1 : 0 : t % 2 != 1 || a ? (1 + (e / 2 | 0)) * (e % 2 == 0 ? 1 : -1) * (o ? -1 : 1) : 0 === e ? 0 : ((e + 1) / 2 | 0) * (e % 2 == 0 ? 1 : -1) * (o ? -1 : 1)
    }
    function fa(e, t, n, r) {
        for (var i = void 0; 0 < t && void 0 === i;) {
            var o = Math.log2(t);
            "function" == typeof(i = e[0 | o].style[n]) && (i = i(r)),
            t -= 1 << o
        }
        return i
    }
    function pa(e, t) {
        return e = e.replace(/\$/g, "\\$"),
        t ? new RegExp(e + "\\('[ \\w.{}()\",-/*:]+'\\)", "g") : new RegExp(e, "g")
    }
    function ga(e, t, n) {
        return t || (n = t = "'"),
        e.substring(e.indexOf(t) + 1, e.lastIndexOf(n))
    }
    ca.prototype._assignEdges = function(e) {
        this._edges = e,
        this._edgeDepth = this._graph.getEdgeAttribute("depth")
    },
    ca.prototype._addCurvaturesToUpdate = function(e) {
        for (var t = 0; t < e.length; ++t) this._curvaturesToRecompute[e[t]] = 1;
        this._toComputeCurvatures = !0,
        this._render.refresh()
    },
    ca.prototype.updateAllCurvatures = function() {
        this._addCurvaturesToUpdate(this._graph._getAllEdgeDirections())
    },
    ca.prototype.getAttributeArray = function(e) {
        this._aliases[e] && (e = this._aliases[e]);
        var t = this._finalStyles[e],
        r = this._properties[e];
        if (!r) throw new Error("attribute " + e + " does not exist");
        return t || {
            get: function() {
                return r.
            default
            },
            getMultiple: function(e, t) {
                t || (t = new Array(e.length));
                for (var n = 0; n < e.length; ++n) t[n] = r.
            default;
                return t
            }
        }
    },
    ca.prototype.addFeature = function(t, e) {
        var o = this;
        this._nameList.push(t);
        var n = e.properties || {},
        r = e.settings || {},
        i = e.semanticLayers || {},
        s = e.draw ? Array.isArray(e.draw) ? e.draw: [e.draw] : [],
        a = e.aliases || {},
        u = e.context ||
        function() {},
        l = {
            name: t,
            semanticLayers: Object.keys(i),
            draw: s,
            enabled: !0,
            visible: !0
        };
        this._byName[t] = l,
        this._graphicsList.push(l),
        Ee(i,
        function(e, t) {
            var n = e.useClipSpace,
            r = e.defineClipSpace,
            i = e.transparency;
            o._semanticLayers.push(t),
            o._render.addSemanticLayer(t, {
                camera: o._camera,
                useClipSpace: n,
                defineClipSpace: r,
                transparency: i
            })
        }),
        Ee(a,
        function(e, t) {
            o._aliases[t] = e
        }),
        s.forEach(function(e) {
            o._drawFunctionModels.push({
                body: e,
                feature: t
            }),
            o._components.push(o._graph.createAttribute(o._isNode, {
                storage: 32,
            default:
                -1
            }))
        }),
        Ee(qe(n,
        function(e) {
            return "default" in e && "check" in e
        }),
        function(e, t) {
            var n = t.split(".")[0];
            o._properties[t] = e,
            o._propertyList.push(t),
            -1 !== ["x", "y", "radius", "width", "shape", "hidden", "color"].indexOf(t) && o._instanciateFinalStyleProperty(t),
            o._propertiesByRootKey[n] ? o._propertiesByRootKey[n].push(t) : o._propertiesByRootKey[n] = n === t ? null: [t]
        });
        var d = u(this._ogma, n, r);
        this._contexts[t] = d,
        e.postDraw && this._postDraw.push({
            context: d,
            func: e.postDraw
        }),
        this._reconfigure()
    },
    ca.prototype._computeCurvatures = function() {
        for (var e = this._graph,
        t = this._graph.getAttributes(!1, ["source", "target", "curvature", "width", "hidden"]), n = t[0], r = t[1], i = t[2], o = t[3], s = t[4], a = this._settings.edgesAlwaysCurvy, u = this._settings.directedEdges, l = Object.keys(this._curvaturesToRecompute), d = a ? 1 : 0, c = 0, h = l.length; c < h; ++c) {
            var f = l[c],
            p = e.getParallelIndexes(f);
            if (e._filter(!1, p), this._markToRefresh(p), 1 === p.length) i.set(p[0], d);
            else {
                for (var g = p[0], v = n.get(g), y = 0, m = 0, _ = 0, b = 0, x = 0, w = 0, A = 0; A < p.length; ++A) {
                    var E = p[A];
                    s.get(E) || (n.get(E) === v ? y += 1 : m += 1)
                }
                for (var C = y + m,
                S = 0; S < p.length; ++S) {
                    var I = p[S];
                    if (!s.get(I)) {
                        var T = n.get(I),
                        N = r.get(I),
                        k = o.get(I),
                        L = T === v,
                        R = T === N,
                        z = u ? ha(L ? x: w, y, m, (L ? _: b) + k / 2, R, !1, !0, a) : ha(x + w, C, 0, _ + b + k / 2, R, !L, !1, a);
                        i.set(I, z),
                        L ? (_ += k, x += 1) : (b += k, w += 1)
                    }
                }
            }
        }
    },
    ca.prototype.setGraphicsVisibility = function(e, t) {
        var n = this._byName[e];
        n && (this._render.setSemanticLayersEnabled(n.semanticLayers, t), n.visible = t)
    },
    ca.prototype.addLayer = function(e, t, n) {
        if (16 === this._layerList.length) throw new Error("cannot add layer: maximum number of layers (16) reached");
        if (this._layers[e]) throw new Error("layer " + e + " already exists");
        var r = {
            name: e,
            depth: t
        };
        this._layers[e] = r,
        this._layerList.push(r),
        this._layerList.sort(function(e, t) {
            return e.depth - t.depth
        }),
        this._layerList.forEach(function(e, t) {
            return e.index = t
        }),
        this.setLayerStyle(e, n || {})
    },
    ca.prototype.formatStyle = function(e) {
        var n = qe(e);
        return Ee(this._aliases,
        function(e, t) {
            t in n && (n[e] = n[t], delete n[t])
        }),
        n
    },
    ca.prototype.setLayerStyle = function(e, t) {
        var n = this,
        r = this._getLayer(e),
        i = this.formatStyle(t),
        o = Object.keys(i);
        o.forEach(function(e) {
            if (!n._properties[e]) throw new Error('style property "' + e + '" does not exist');
            n._instanciateFinalStyleProperty(e)
        }),
        r.propertyList = o,
        r.style = i
    },
    ca.prototype.updateLayerStyle = function(e, t) {
        var n = this._getLayer(e);
        Ee(qe(t),
        function(e, t) {
            return n.style[t] = e
        }),
        this.setLayerStyle(e, n.style)
    },
    ca.prototype._getLayer = function(e) {
        var t = this._layers[e];
        if (!t) throw new Error("layer " + e + " does not exist");
        return t
    },
    ca.prototype.putOnLayer = function(e, t) {
        this._layerAction(!0, e, t)
    },
    ca.prototype.removeFromLayer = function(e, t) {
        this._layerAction(!1, e, t)
    },
    ca.prototype._layerAction = function(e, t, n) {
        var r = this._getLayer(t); (e ?
        function(e, t, n) {
            for (var r = 1 << t,
            i = 0,
            o = n.length; i < o; ++i) {
                var s = n[i];
                e.set(s, e.get(s) | r)
            }
        }: function(e, t, n) {
            for (var r = Math.pow(2, e.elementBitSize()) - 1 - (1 << t), i = 0, o = n.length; i < o; ++i) {
                var s = n[i];
                e.set(s, e.get(s) & r)
            }
        })(this._layer, r.index, n),
        this._updateDepth(n),
        this._computeStyles(r.propertyList, n),
        this._markToRefresh(n)
    },
    ca.prototype._updateDepth = function(e) {
        for (var t = 0,
        n = e.length; t < n; ++t) {
            var r = e[t],
            i = this._layer.get(r),
            o = Math.log2(i) + 1 | 0,
            s = this._MIN_DEPTH + this._EPSILON * r + this._LAYER_DEPTH_VALUE * o;
            this._depth.set(r, s)
        }
    },
    ca.prototype._get = function(e) {
        var t = this._byName[e];
        if (!t) throw new Error((this._isNode ? "node": "edge") + ' graphics "' + e + '" do not exist');
        return t
    },
    ca.prototype._deleteGraphics = function(e) {
        for (var t = this._render,
        n = 0; n < this._components.length; ++n) for (var r = this._components[n], i = 0, o = e.length; i < o; ++i) t.delete(r.get(e[i]))
    },
    ca.prototype._markToRefresh = function(e) {
        this._refreshAll || (this._toRefresh.addMultiple(e), this._render.refresh())
    },
    ca.prototype._markAdjacentEdgesToRefresh = function(e) {
        this._edges._refreshAll || this._edges._markToRefresh(this._graph._collectAdjacentEdges(e))
    },
    ca.prototype._reconfigure = function() {
        this._toReconfigure = !0
    },
    ca.prototype._configure = function() {
        this._draw = function(p) {
            var e = p._drawFunctionModels,
            g = p._isNode,
            t = [],
            v = [],
            y = [],
            l = [],
            d = [],
            m = {},
            c = {},
            h = {},
            _ = {},
            b = {},
            n = g ? Ma: Pa,
            x = 1;
            v.push("var " + Da + " = " + n + "('hidden');"),
            v.push("var " + Oa + " = " + n + "('excluded');"),
            g ? t.push("var " + Ua + " = " + Da + ".get(" + Ea + ") || " + Oa + ".get(" + Ea + ");") : (v.push("var " + Ca + " = " + Pa + "('source');"), v.push("var " + Sa + " = " + Pa + "('target');"), v.push("var " + Ba + " = " + Ma + "('hidden');"), v.push("var " + ja + " = " + Ma + "('excluded');"), t.push("var " + Ia + " = " + Ca + ".get(" + Ea + ")"), t.push("var " + Ta + " = " + Sa + ".get(" + Ea + ")"), t.push("var " + Ua + " = " + Oa + ".get(" + Ea + ") || " + Da + ".get(" + Ea + ") || " + Ba + ".get(" + Ia + ") || " + Ba + ".get(" + Ta + ");"));
            for (var r = 0; r < e.length; ++r) v.push("var " + Ra + r + " = " + La + "[" + r + "];");
            e.forEach(function(e, t) {
                var f = e.body,
                n = f.match(Wa) || [],
                r = f.match(Ga) || [],
                i = f.match(qa) || [],
                o = f.match(Va) || [],
                s = f.match(Ya) || [],
                a = f.match($a) || [];
                n = n.concat(a),
                f = (f = (f = (f = (f = f.replace(Za, za + " =")).replace(Qa, za)).replace(Ja, xa)).replace(Ka, wa)).replace(nu, Ea),
                g || (f = (f = f.replace(eu, Ia)).replace(tu, Ta));
                var u = function(e, t, n) {
                    var r = ga(e),
                    i = t ? m: n ? _: b,
                    o = t ? va: n ? ya: ma,
                    s = i[r],
                    a = t ? "att": n ? "srcAtt": "trgAtt",
                    u = "_" + a + "_" + s;
                    if (!s) {
                        s = x++;
                        var l = t ? p._properties: p._nodes._properties,
                        d = l[r],
                        c = t ? Ea: n ? Ia: Ta,
                        h = "_" + a + "List_" + s;
                        u = "_" + a + "_" + s,
                        i[r] = s,
                        d && !p._graph.getAttribute(!t || g, r) ? y.push("var " + u + " = " + JSON.stringify(d.
                    default)):
                        (v.push("var " + h + " = " + (g || !t ? Ma: Pa) + "('" + r + "');"), y.push("var " + u + " = " + h + ".get(" + c + ");"))
                    }
                    f = (f = f.replace(pa(o + "\\('" + r + "'\\)"), u)).replace(pa(o + '\\("' + r + '"\\)'), u)
                };
                n.forEach(function(e) {
                    return u(e, !0)
                }),
                g || (r.forEach(function(e) {
                    return u(e, !1, !0)
                }), i.forEach(function(e) {
                    return u(e, !1, !1)
                })),
                s.forEach(function(e) {
                    var t = ga(e),
                    n = h[t];
                    n || (n = "_s" + x++, h[t] = n, v.push("var " + n + " = " + Fa + "['" + t + "'];")),
                    f = (f = f.replace(pa(_a + "\\('" + t + "'\\)"), "" + n)).replace(pa(_a + '\\("' + t + '"\\)'), "" + n)
                }),
                o.forEach(function(e) {
                    var t = ga(e),
                    n = c[t];
                    n || (n = "_cst" + x++, c[t] = n, v.push("var " + n + " = " + t + ";"));
                    for (var r = ba + "('" + t + "')"; - 1 !== f.indexOf(r);) f = f.replace(r, n)
                }),
                a.length && (a = a.map(function(e) {
                    return "_att_" + m[ga(e)]
                }).join(" || "), f = f.replace($a, ""), f = "\n        if (" + a + ") {\n          " + f + "\n        } else {\n          " + za + " = " + xa + ".delete(" + za + ");\n        }"),
                f = f.replace(ru, Xa),
                l.push("    var " + Xa + " = " + Ha + "." + e.feature + ";", "    var " + za + " = " + Ra + t + ".get(" + Ea + ");", f, "    " + Ra + t + ".set(" + Ea + ", " + za + ");", ""),
                d.push("    " + xa + ".hide(" + Ra + t + ".get(" + Ea + "));")
            });
            var i = [v.join("\n"), "", "for (var " + Na + " = 0, " + ka + " = " + Aa + ".length; " + Na + " < " + ka + "; ++" + Na + ") {", "  var " + Ea + " = " + Aa + "[" + Na + "];", t.map(function(e) {
                return "  " + e
            }).join("\n"), "", "  if (" + Ua + ") {", d.join("\n"), "  } else {", y.map(function(e) {
                return "    " + e
            }).join("\n"), l.join("\n"), "  }", "}"].join("\n");
            return new Function(xa, wa, Ma, Pa, Fa, La, Aa, Ha, "Position", "PositionList", "$utils", i)
        } (this)
    },
    ca.prototype._instanciateFinalStyleProperty = function(e) {
        if (this._finalStyles[e]) return this._finalStyles[e];
        if (!this._properties[e]) throw new Error('cannot instanciate non-existing attribute "' + e + '"');
        var t = this._properties[e],
        n = this._graph.createAttribute(this._isNode, {
            name: e,
        default:
            t.
        default,
            storage: t.storage || "resource"
        });
        return this._finalStyles[e] = n,
        this._reconfigure(),
        n
    },
    ca.prototype._instanciateStyleProperty = function(e, t) {
        if (!this._properties[e]) throw new Error('unknown attribute "' + e + '"');
        var n = this._graph.createAttribute(this._isNode, {
        default:
            void 0,
            storage: "resource"
        });
        return t[e] = n,
        this._instanciateFinalStyleProperty(e),
        n
    },
    ca.prototype.drawAllSynchronously = function() {
        var e = this._graph._allIndexes(this._isNode);
        this._draw || this._configure(),
        this._doDraw(e)
    },
    ca.prototype._doDraw = function(e) {
        this._draw(this._render, this._shapes, this._getNodeAttribute, this._getEdgeAttribute, this._settings, this._components, e, this._contexts, Gt, $t, da)
    },
    ca.prototype.draw = function() {
        if (this._toReconfigure && (this._configure(), this._toReconfigure = !1), this._toComputeCurvatures && (this._computeCurvatures(), this._curvaturesToRecompute = {},
        this._toComputeCurvatures = !1), this._toRefresh.size || this._refreshAll) {
            var e = this._refreshAll ? this._graph._allIndexes(this._isNode) : this._toRefresh.list;
            this._doDraw(e),
            this._settings.edgeClipping && !this._isNode && this._setupClipping(e);
            for (var t = 0; t < this._postDraw.length; ++t) {
                var n = this._postDraw[t];
                n.func(this._ogma, n.context)
            }
            this._toRefresh.clear(),
            this._refreshAll = !1
        }
    },
    ca.prototype.refresh = function(e) {
        this._markToRefresh(e),
        this._isNode && this._markAdjacentEdgesToRefresh(e)
    },
    ca.prototype.refreshAll = function() {
        this._refreshAll = !0,
        this._render.refresh()
    },
    ca.prototype._setupClipping = function(e) {
        for (var t = this._graph.getAttributes(!0, ["x", "y", "radius"]), n = t[0], r = t[1], i = t[2], o = this._graph.getAttributes(!1, ["source", "target"]), s = o[0], a = o[1], u = this._components, l = u.length, d = 0, c = e.length; d < c; ++d) for (var h = e[d], f = s.get(h), p = a.get(h), g = n.get(f), v = r.get(f), y = i.get(f), m = n.get(p), _ = r.get(p), b = i.get(p), x = 0; x < l; ++x) {
            var w = u[x].get(h);
            this._render.setVisibilityCondition1(w, !0, g, v, y),
            this._render.setVisibilityCondition2(w, !0, m, _, b)
        }
    },
    ca.prototype.setEnabled = function(e, t) {},
    ca.prototype._computeStyles = function(e, t) {
        for (var n = this._layer,
        r = this._layerList,
        i = t.length,
        o = this._shapes,
        s = 0; s < e.length; ++s) for (var a = e[s], u = this._properties[a], l = u.
    default, d = u.check, c = this._finalStyles[a], h = this._originalStyles[a], f = this._ruleStyles[a], p = this._individualStyles[a], g = 0; g < i; ++g) {
            var v = t[g],
            y = this._elements.get(v),
            m = fa(r, n.get(v), a, y);
            void 0 === m && void 0 === (m = p && p.get(v)) && void 0 === (m = f && f.get(v)) && (m = h && h.get(v)),
            void 0 !== m && d(m, o) || (m = l),
            c.set(v, m)
        }
    },
    ca.prototype.getIndividualStyles = function(o, s) {
        var a = this;
        s = s || Object.keys(this._properties);
        for (var u = new Array(o.length), e = 0; e < o.length; ++e) u[e] = {};
        return s.forEach(function(e) {
            Array.isArray(e) && (e = s.join(".")),
            a._aliases[e] && (e = a._aliases[e]);
            var t = a._properties[e];
            if (!t) throw new Error('attribute "' + t + '" does not exist');
            for (var n = a._graph.getAttribute(a._isNode, e) || {
                get: function() {
                    return t.
                default
                }
            },
            r = 0; r < o.length; ++r) {
                var i = n.get(o[r]);
                Array.isArray(i) && (i = i.slice()),
                Ye(u[r], e, i)
            }
        }),
        u
    },
    ca.prototype.getIndividualStyle = function(e, t) {
        return this.getAttributeArray(t).getMultiple(e)
    },
    ca.prototype._setIndividualStyles = function(e, t, n, r) {
        var i = Array.isArray(t) ? this._setIndividualStylesByArray(e, t, n) : this._setIndividualStylesBySingleValue(e, t, n);
        r && (this._computeStyles(i, e), this._markToRefresh(e), i.reduce(function(e, t) {
            return e || "x" === t || "y" === t || "radius" === t
        },
        !1) && this._markAdjacentEdgesToRefresh(e))
    },
    ca.prototype._setIndividualStylesBySingleValue = function(e, t, n) {
        for (var r = this[n ? "_originalStyles": "_individualStyles"], i = this.formatStyle(t), o = Object.keys(i), s = 0; s < o.length; ++s) for (var a = o[s], u = r[a] || this._instanciateStyleProperty(a, r), l = i[a], d = 0, c = e.length; d < c; ++d) u.set(e[d], l);
        return o
    },
    ca.prototype._setIndividualStylesByArray = function(e, t, n) {
        for (var r = this._properties,
        i = this._propertiesByRootKey,
        o = this[n ? "_originalStyles": "_individualStyles"], s = this._aliases, a = {},
        u = 0, l = e.length; u < l; ++u) {
            var d = e[u],
            c = t[u];
            if (c) for (var h = Object.keys(c), f = 0; f < h.length; ++f) {
                var p = h[f];
                if (r[p])(o[p] || this._instanciateStyleProperty(p, o)).set(d, c[p]),
                a[p] = !0;
                else if (i[p]) {
                    var g = c[p];
                    if (null === g || "object" != typeof g || Array.isArray(g)) {
                        var v = s[p];
                        if (v)(o[v] || this._instanciateStyleProperty(v, o)).set(d, g),
                        a[v] = !0
                    } else for (var y = $e(g), m = 0; m < y.length; ++m) {
                        var _ = y[m],
                        b = p + "." + _;
                        if (s[b] && (b = s[b]), r[b])(o[b] || this._instanciateStyleProperty(b, o)).set(d, ze(g, _)),
                        a[b] = !0
                    }
                }
            }
        }
        return Object.keys(a)
    },
    ca.prototype._setSingleAttribute = function(e, t, n) {
        this._instanciateStyleProperty(t, this._individualStyles).setMultiple(e, n)
    },
    ca.prototype.setIndividualStyles = function(e, t) {
        this._setIndividualStyles(e, t, !1, !0)
    },
    ca.prototype.setSingleAttribute = function(e, t, n) {
        t = Array.isArray(t) ? t.join(".") : t,
        this._setSingleAttribute(e, t, n),
        this._computeStyles([t], e),
        this._markToRefresh(e),
        "x" !== t && "y" !== t && "radius" !== t || this._markAdjacentEdgesToRefresh(e)
    },
    ca.prototype.resetIndividualStyles = function(e, t) {
        var n = Object.keys(this._individualStyles);
        t && (t = ae(t).join("."), n = n.filter(function(e) {
            return e.startsWith(t)
        }));
        for (var r = 0; r < n.length; ++r) for (var i = n[r], o = this._individualStyles[i], s = 0; s < e.length; ++s) o.set(e[s], void 0);
        this._computeStyles(n, e),
        this._markToRefresh(e)
    },
    ca.prototype.computeRules = function(e) {
        this._computeRules(Object.keys(this._rules), e, !0)
    },
    ca.prototype._computeRules = function(e, t, n) {
        for (var r = this._graph,
        i = this._isNode,
        o = 0; o < e.length; ++o) {
            var s = e[o],
            a = this._rules[s],
            u = this._ruleStyles[s] || this._instanciateStyleProperty(s, this._ruleStyles);
            if (a) for (var l = 0; l < t.length; ++l) {
                for (var d = t[l], c = void 0, h = 0; h < a.length && void 0 === c; ++h) {
                    c = (0, a[h])(r._getElement(i, d))
                }
                "color" !== s && Array.isArray(c) && (c = c[0]),
                u.set(d, c)
            } else u.reset()
        }
        n && (this._computeStyles(e, t), this._markToRefresh(t), e.reduce(function(e, t) {
            return e || "x" === t || "y" === t || "radius" === t
        },
        !1) && this._markAdjacentEdgesToRefresh(t))
    },
    ca.prototype.getRuleIds = function() {
        return this._ruleList.map(function(e) {
            return e.id
        })
    },
    ca.prototype.addRule = function(l, e) {
        var d = this;
        e || (e = l, l = void 0);
        var t = this.formatStyle(e),
        c = {},
        n = this._nextRuleId++;
        return Ee(t,
        function(e, t) {
            if ("function" != typeof e) {
                var n = e; (e = new Function("return " + (void 0 === (r = n) ? "undefined": JSON.stringify(r)) + ";")).metaData = {
                    constant: n
                }
            }
            var r;
            if (l) {
                var i = e,
                o = e.onAdd,
                s = e.onRemove,
                a = e.metaData,
                u = e.getMapping; (e = function(e) {
                    if (l(e)) return i(e)
                }).onAdd = o,
                e.onRemove = s,
                e.metaData = a,
                e.getMapping = u
            }
            e.onAdd && e.onAdd(d._isNode),
            c[t] = e
        }),
        this._ruleList.unshift({
            id: n,
            style: c
        }),
        this._constructRules(Object.keys(t)),
        n
    },
    ca.prototype.removeRule = function(e) {
        var t = this.getRuleIndex(e),
        n = this._ruleList[t];
        this._removeRule(n),
        this._ruleList.splice(t, 1),
        this._constructRules(Object.keys(n.style))
    },
    ca.prototype._removeRule = function(e) {
        var t = this;
        Ee(e.style,
        function(e) {
            e.onRemove && e.onRemove(t._isNode)
        })
    },
    ca.prototype.getRuleIndex = function(e) {
        for (var t = 0; t < this._ruleList.length; ++t) if (this._ruleList[t].id === e) return t;
        throw new Error(this._name + ' style rule "' + e + '" does not exist')
    },
    ca.prototype.setRuleIndex = function(e, t) {
        var n = this.getRuleIndex(e),
        r = this._ruleList[n];
        this._ruleList.splice(n, 1),
        t >= this._ruleList.length ? this._ruleList.push(r) : (t < 0 && (t = 0), this._ruleList.splice(t, 0, r)),
        this._constructRules(Object.keys(r.style))
    },
    ca.prototype.clearRules = function() {
        for (var e = 0; e < this._ruleList.length; ++e) this._removeRule(this._ruleList[e]);
        this._ruleList = [],
        this._constructRules(Object.keys(this._rules))
    },
    ca.prototype._constructRules = function(e) {
        var r = this;
        this._rules = {},
        this._ruleList.forEach(function(e) {
            Ee(e.style,
            function(e, t) {
                var n = r._rules[t];
                n || (n = [], r._rules[t] = n),
                n.push(e)
            })
        }),
        this.refreshAll(),
        this._computeRules(e, this._graph._allIndexes(this._isNode), !0)
    },
    ca.prototype.getAttributeRuleList = function(e) {
        return (this._rules[e] || []).slice()
    };
    var va = "A",
    ya = "S",
    ma = "T",
    _a = "$setting",
    ba = "$constant",
    xa = "_render",
    wa = "_shapes",
    Aa = "_indexes",
    Ea = "_index",
    Ca = "_sourceIndexes",
    Sa = "_targetIndexes",
    Ia = "_sourceIndex",
    Ta = "_targetIndex",
    Na = "_i",
    ka = "_l",
    La = "_componentList",
    Ra = "_components",
    za = "_component",
    Ma = "_getNodeAttribute",
    Pa = "_getEdgeAttribute",
    Fa = "_settings",
    Da = "_hiddenList",
    Oa = "_excludedList",
    Ba = "_nodeHiddenList",
    ja = "_nodeExcludedList",
    Ua = "_hidden",
    Ha = "_contexts",
    Xa = "_context",
    Wa = pa(va, !0),
    Ga = pa(ya, !0),
    qa = pa(ma, !0),
    Ya = pa(_a, !0),
    Va = pa(ba, !0),
    $a = pa("$ensure", !0),
    Za = pa("return"),
    Qa = pa("$component"),
    Ja = pa("$render"),
    Ka = pa("$shapes"),
    eu = pa("$source"),
    tu = pa("$target"),
    nu = pa("$index"),
    ru = pa("$context");
    var iu = function(e, t, n) {
        this._graphics = e,
        this._isNode = t,
        this._id = n,
        this._deleted = !1
    };
    function ou(e, n, r) {
        for (var t = 0; t < e.length; ++t) {
            e[t].prototype[n] = function(e, t) {
                return we('Deprecated method "' + n + '"; please use "' + r + '" instead.'),
                this[r](e, t)
            }
        }
    }
    iu.prototype._checkDeleted = function() {
        if (this._deleted) throw new Error("the rule is deleted")
    },
    iu.prototype.whenApplied = function(e) {
        var t = this;
        return this._checkDeleted(),
        new Promise(function(e) {
            return t._graphics._addResolver(e)
        }).then(e)
    },
    iu.prototype.refresh = function() {
        return this._checkDeleted(),
        this._graphics._refreshStyleRules(this._isNode)
    },
    iu.prototype.getIndex = function() {
        return this._checkDeleted(),
        this._graphics._getRuleIndex(this._isNode, this._id)
    },
    iu.prototype.setIndex = function(e) {
        this._checkDeleted(),
        this._graphics._setRuleIndex(this._isNode, this._id, e)
    },
    iu.prototype.delete = function() {
        return this._checkDeleted(),
        this._graphics._removeRule(this._isNode, this._id),
        this._deleted = !0,
        this._graphics._refreshStyleRules(this._isNode)
    },
    p.extend(function(e) {
        var r = new au(e),
        t = e.modules.camera,
        n = e.Node,
        i = e.Edge,
        o = e.NodeList,
        s = e.EdgeList;
        e.modules.graphics = r,
        e.styles.setNodesVisibility = function(e) {
            return r.setNodesVisibility(e)
        },
        e.styles.setEdgesVisibility = function(e) {
            return r.setEdgesVisibility(e)
        },
        n.prototype.setAttributes = function(e, t) {
            return r.setAttributes(this, e, t)[0]
        },
        n.prototype.setAttribute = function(e, t, n) {
            return r.setAttribute(this, e, t, n)
        },
        n.prototype.getAttributes = function(e) {
            return r.getAttributes(this, e)[0]
        },
        n.prototype.getAttribute = function(e) {
            return r.getAttribute(this, e)[0]
        },
        n.prototype.resetAttributes = function(e) {
            return r.resetAttributes(this, e)
        },
        o.prototype.setAttributes = function(e, t) {
            return r.setAttributes(this, e, t)
        },
        o.prototype.setAttribute = function(e, t, n) {
            return r.setAttribute(this, e, t, n)
        },
        o.prototype.getAttributes = function(e) {
            return r.getAttributes(this, e)
        },
        o.prototype.getAttribute = function(e) {
            return r.getAttribute(this, e)
        },
        o.prototype.resetAttributes = function(e) {
            return r.resetAttributes(this, e)
        },
        i.prototype.setAttributes = function(e, t) {
            return r.setAttributes(this, e, t)[0]
        },
        i.prototype.setAttribute = function(e, t, n) {
            return r.setAttribute(this, e, t, n)
        },
        i.prototype.getAttributes = function(e) {
            return r.getAttributes(this, e)[0]
        },
        i.prototype.getAttribute = function(e) {
            return r.getAttribute(this, e)[0]
        },
        i.prototype.resetAttributes = function(e) {
            return r.resetAttributes(this, e)
        },
        s.prototype.setAttributes = function(e, t) {
            return r.setAttributes(this, e, t)
        },
        s.prototype.setAttribute = function(e, t, n) {
            return r.setAttribute(this, e, t, n)
        },
        s.prototype.getAttributes = function(e) {
            return r.getAttributes(this, e)
        },
        s.prototype.getAttribute = function(e) {
            return r.getAttribute(this, e)
        },
        s.prototype.resetAttributes = function(e) {
            return r.resetAttributes(this, e)
        },
        n.prototype.getPosition = function() {
            return this.getAttributes(["x", "y"])
        },
        o.prototype.getPosition = function() {
            return this.getAttributes(["x", "y"])
        },
        n.prototype.getPositionOnScreen = function() {
            return t.graphToScreenCoordinates(this.getPosition())
        },
        n.prototype.isInScreen = function() {
            var e = this.getPositionOnScreen();
            return 0 <= e.x && e.x <= t.width && 0 <= e.y && e.y <= t.height
        },
        e.styles.addNodeRule = function(e, t) {
            return r.addNodeRule(e, t)
        },
        e.styles.addEdgeRule = function(e, t) {
            return r.addEdgeRule(e, t)
        },
        e.styles.getNodeRules = function() {
            return r.getNodeRules()
        },
        e.styles.getEdgeRules = function() {
            return r.getEdgeRules()
        },
        ou([n, i, o, s], "setStyle", "setAttributes"),
        ou([n, i, o, s], "resetStyle", "resetAttributes"),
        ou([n, i, o, s], "getStyle", "getAttribute"),
        ou([n, o], "setPosition", "setAttributes")
    });
    var su = [],
    au = function(e) {
        var i = this,
        t = e.modules,
        n = t.settings,
        r = t.events,
        o = t.graph,
        s = t.camera,
        a = t.render;
        this._graph = o,
        this._render = a,
        this._camera = s,
        this._events = r,
        this._shapes = Se({},
        {}),
        this._cameraForRender = {
            x: 0,
            y: 0,
            angle: 0,
            zoom: 1
        },
        this._animations = [],
        this._animationsToProcess = [],
        this._settings = n._currentValue,
        this._resolvers = [],
        this._refreshNodeRules = !1,
        this._refreshEdgeRules = !1,
        this._nodeRules = [],
        this._edgeRules = [];
        var u = function() {
            return i.refreshAll()
        };
        n.register("edgeClipping", !0, u),
        n.register("edgeClippingPadding", 100, u),
        n.register("edgesAlwaysCurvy", !1,
        function() {
            return i._elts.edges.updateAllCurvatures()
        }),
        n.register("directedEdges", !1,
        function() {
            return i._elts.edges.updateAllCurvatures()
        }),
        this._featuresVisibility = Se({},
        {}),
        this._showNodes = !0,
        this._showEdges = !0,
        this._render.setVisibilityConditionTolerance(100);
        var l = new ca(!0, e, this._shapes.nodes, this._settings, this._cameraForRender),
        d = new ca(!1, e, this._shapes.edges, this._settings, this._cameraForRender, l);
        l._assignEdges(d),
        this._elts = Se(l, d),
        this._draw = function() {
            i._elts.nodes.draw(),
            i._elts.edges.draw()
        },
        this._xList = this._graph.getNodeAttribute("x"),
        this._yList = this._graph.getNodeAttribute("y"),
        this.refreshAll(),
        r.on({
            clear: function() {
                return i._render.clear()
            },
            cameraMove: function() {
                var e = {
                    x: i._camera.width / 2 / i._camera.zoom,
                    y: i._camera.height / 2 / i._camera.zoom
                };
                Bt(e.x, e.y, 0, 0, i._camera.angle, e),
                i._cameraForRender.x = i._camera.x - e.x,
                i._cameraForRender.y = i._camera.y - e.y,
                i._cameraForRender.angle = i._camera.angle,
                i._cameraForRender.zoom = i._camera.zoom,
                i._render.refresh()
            },
            newFrame: function() {
                i._refreshNodeRules && (i._computeStyleRules(!0), i._refreshNodeRules = !1),
                i._refreshEdgeRules && (i._computeStyleRules(!1), i._refreshEdgeRules = !1),
                i._draw();
                var e = i._resolvers.slice();
                if (i._resolvers = [], e.forEach(function(e) {
                    return e()
                }), i._animationsToProcess.length) {
                    var t = i._animationsToProcess;
                    i._animationsToProcess = [];
                    for (var n = 0; n < t.length; ++n) {
                        var r = t[n];
                        i._animations.push(r),
                        r.timeout = setTimeout(lu(i, r), r.duration),
                        r.func(),
                        i._render.animate(r.duration, i._draw)
                    }
                }
            },
            reset: function() {
                i._nodeRules.forEach(function(e) {
                    return e.delete()
                }),
                i._edgeRules.forEach(function(e) {
                    return e.delete()
                })
            },
            reloadFonts: function() {
                i.drawAllSynchronously()
            }
        })
    };
    function uu(e) {
        return void 0 === e && (e = {}),
        "number" == typeof e && (e = {
            duration: e
        }),
        {
            duration: du(e.duration),
            skipAnimations: !!e.skipAnimations
        }
    }
    function lu(t, n) {
        return function() {
            var e = t._animations.indexOf(n); - 1 !== e && t._animations.splice(e, 1),
            n.callback && n.callback(n.callbackArg)
        }
    }
    function du(e) {
        return void 0 === e || "number" != typeof e || !isFinite(e) || e < 0 ? 0 : e
    }
    au.prototype._getAttributeArray = function(e, t) {
        return this._elts.fetch(e).getAttributeArray(t)
    },
    au.prototype._getAttributeArrays = function(t, e) {
        var n = this;
        return e.map(function(e) {
            return n._getAttributeArray(t, e)
        })
    },
    au.prototype._addShape = function(e, t, n) {
        ke(this._shapes.fetch(e), t, n, "shape")
    },
    au.prototype.getNodeShape = function(e) {
        return Le(this._shapes.nodes, e, "shape")
    },
    au.prototype.getEdgeShape = function(e) {
        return Le(this._shapes.edges, e, "shape")
    },
    au.prototype._addFeature = function(e, t, n) {
        this._elts.fetch(e).addFeature(t, n),
        this._featuresVisibility.fetch(e)[t] = !0
    },
    au.prototype._setFeatureVisibility = function(e, t, n) {
        var r = this._elts.fetch(e),
        i = this._featuresVisibility.fetch(e),
        o = i[t];
        return o !== n && (i[t] = n, r.setGraphicsVisibility(t, this[e ? "_showNodes": "_showEdges"] && n)),
        o
    },
    au.prototype.setNodesVisibility = function(e) {
        return this._setElementsVisibility(!0, !!e)
    },
    au.prototype.setEdgesVisibility = function(e) {
        return this._setElementsVisibility(!1, !!e)
    },
    au.prototype._setElementsVisibility = function(e, n) {
        var t = e ? "_showNodes": "_showEdges",
        r = this[t];
        if (r !== n) {
            this[t] = n;
            var i = this._elts.fetch(e);
            Ee(this._featuresVisibility.fetch(e),
            function(e, t) {
                i.setGraphicsVisibility(t, e && n)
            })
        }
        return r
    },
    au.prototype._refresh = function(e, t) {
        this._elts.fetch(e).refresh(t)
    },
    au.prototype._refreshAll = function(e) {
        this._elts.fetch(e).refreshAll()
    },
    au.prototype.refreshAll = function() {
        this._elts.nodes.refreshAll(),
        this._elts.edges.refreshAll()
    },
    au.prototype.camera = function() {
        return this._cameraForRender
    },
    au.prototype.animate = function(t, n, r) {
        var i = this;
        return du(n) ? new Promise(function(e) {
            i._animationsToProcess.push({
                duration: n,
                func: t,
                callback: e,
                callbackArg: r
            }),
            i._render.refresh()
        }) : (t(r), Promise.resolve(r))
    },
    au.prototype.stopAnimations = function(e) {
        void 0 === e && (e = !0),
        this._render.stopAnimations();
        var t = this._animations.slice();
        this._animations = [];
        for (var n = 0; n < t.length; ++n) {
            var r = t[n];
            r.callback && e && r.callback(),
            r.timeout && clearTimeout(r.timeout)
        }
    },
    au.prototype.isAnimating = function() {
        return 0 < this._animations.length
    },
    au.prototype.setAttributes = function(e, t, n) {
        var r = this,
        i = uu(n).duration;
        return this.animate(function() {
            r._elts.fetch(e.isNode).setIndividualStyles(e._indexes, t)
        },
        i)
    },
    au.prototype.setAttribute = function(e, t, n, r) {
        var i = this,
        o = uu(r).duration;
        return this.animate(function() {
            i._elts.fetch(e.isNode).setSingleAttribute(e._indexes, t, n)
        },
        o)
    },
    au.prototype.resetAttributes = function(e, t) {
        this._elts.fetch(e.isNode).resetIndividualStyles(e._indexes, t)
    },
    au.prototype.getAttributes = function(e, t) {
        return this._elts.fetch(e.isNode).getIndividualStyles(e._indexes, t)
    },
    au.prototype.getAttribute = function(e, t) {
        return this._elts.fetch(e.isNode).getIndividualStyle(e._indexes, t)
    },
    au.prototype.addLayer = function(e, t) {
        void 0 === t && (t = {});
        var n = t.nodeAttributes,
        r = t.edgeAttributes,
        i = t.depth;
        void 0 === i && (i = Le(su, e, "layer")),
        this._elts.nodes.addLayer(e, i, n),
        this._elts.edges.addLayer(e, i, r)
    },
    au.prototype._resetLayerStyle = function(e, t, n) {
        void 0 === n && (n = {}),
        this._elts.fetch(t).setLayerStyle(e, n)
    },
    au.prototype._updateLayerStyle = function(e, t, n) {
        void 0 === n && (n = {}),
        this._elts.fetch(t).updateLayerStyle(e, n)
    },
    au.prototype.putOnLayer = function(e, t) {
        this._putOnLayer(t.isNode, e, t._indexes)
    },
    au.prototype._putOnLayer = function(e, t, n) {
        this._elts.fetch(e).putOnLayer(t, n)
    },
    au.prototype.removeFromLayer = function(e, t) {
        this._removeFromLayer(t.isNode, e, t._indexes)
    },
    au.prototype._removeFromLayer = function(e, t, n) {
        this._elts.fetch(e).removeFromLayer(t, n)
    },
    au.prototype.addNodeRule = function(e, t) {
        return this._addRule(!0, e, t)
    },
    au.prototype.addEdgeRule = function(e, t) {
        return this._addRule(!1, e, t)
    },
    au.prototype.getNodeRules = function() {
        return this._getRules(!0)
    },
    au.prototype.getEdgeRules = function() {
        return this._getRules(!1)
    },
    au.prototype._addRule = function(e, t, n) {
        var r = this._elts.fetch(e).addRule(t, n),
        i = new iu(this, e, r);
        return this[e ? "_nodeRules": "_edgeRules"][r] = i
    },
    au.prototype._removeRule = function(e, t) {
        this._elts.fetch(e).removeRule(t),
        this[e ? "_nodeRules": "_edgeRules"][t] = void 0
    },
    au.prototype._getRuleIndex = function(e, t) {
        return this._elts.fetch(e).getRuleIndex(t)
    },
    au.prototype._setRuleIndex = function(e, t, n) {
        return this._elts.fetch(e).setRuleIndex(t, n)
    },
    au.prototype._getRules = function(e) {
        var t = this[e ? "_nodeRules": "_edgeRules"];
        return this._elts.fetch(e).getRuleIds().map(function(e) {
            return t[e]
        })
    },
    au.prototype._computeStyleRules = function(e, t) {
        t || (t = this._graph._allIndexes(e)),
        this._elts.fetch(e).computeRules(t)
    },
    au.prototype._refreshStyleRules = function(t) {
        var n = this;
        return new Promise(function(e) {
            n._addResolver(e),
            n[t ? "_refreshNodeRules": "_refreshEdgeRules"] = !0
        })
    },
    au.prototype.drawAllSynchronously = function() {
        this._elts.nodes.drawAllSynchronously(),
        this._elts.edges.drawAllSynchronously()
    },
    au.prototype._getAttributeRuleList = function(e, t) {
        return this._elts.fetch(e).getAttributeRuleList(t)
    },
    au.prototype._addResolver = function(e) {
        this._resolvers.push(e),
        this._render.refresh()
    },
    au.prototype._setPositionsByArrays = function(e, n, r) {
        this._elts.nodes.setIndividualStyles(e, e.map(function(e, t) {
            return {
                x: n[t],
                y: r[t]
            }
        }))
    },
    au.prototype.toggleTexts = function(e) {
        var t = e.nodes,
        n = e.edges;
        return {
            nodes: this._setFeatureVisibility(!0, "text", t),
            edges: this._setFeatureVisibility(!1, "text", n)
        }
    };
    var cu = {
        color: {
            check: function(e) {
                return null === e || "inherit" === e || ye(e)
            },
        default:
            "white"
        },
        scale: {
            check: fe,
        default:
            .45
        },
        positionScale: {
            check: fe,
        default:
            1
        },
        image: {
            check: ve,
        default:
            null
        },
        threshold: {
            check: fe,
        default:
            6
        },
        stroke: {
            color: {
                check: function(e) {
                    return null === e || "inherit" === e || ye(e)
                },
            default:
                "black"
            },
            width: {
                check: fe,
            default:
                2
            }
        },
        text: {
            content: {
                check: ve,
            default:
                null
            },
            color: {
                check: function(e) {
                    return "inherit" === e || ye(e)
                },
            default:
                "black"
            },
            font: {
                check: ge,
            default:
                "Arial"
            },
            style: {
                check: function(e) {
                    return - 1 !== ["none", "italic", "bold"].indexOf(e)
                },
            default:
                "none"
            },
            scale: {
                check: fe,
            default:
                1
            }
        }
    },
    hu = "\n    var _p = $constant('new Position(\"badgesPosition\")'),\n        _d = $constant('new Position(\"badgesDimensions\")'),\n        SQRT_2 = $constant('Math.sqrt(2)');\n\n    if (!A('badges.{{position}}.text.content') && !A('badges.{{position}}.image')) {\n      return $render.delete($component);\n    } else {\n      var components = $render.updateComposite($component, 4),\n        nodeSize = A('radius'),\n        badgeSize = nodeSize * A('badges.{{position}}.scale'),\n        offset = nodeSize * A('badges.{{position}}.positionScale'),\n        inheritedColor = A('color'),\n        fillColor = A('badges.{{position}}.color'),\n        strokeColor = A('badges.{{position}}.stroke.color'),\n        strokeWidth = A('badges.{{position}}.stroke.width'),\n        text = A('badges.{{position}}.text.content'),\n        textSize = badgeSize * A('badges.{{position}}.text.scale'),\n        textColor = A('badges.{{position}}.text.color'),\n        textFont = A('badges.{{position}}.text.font'),\n        textStyle = A('badges.{{position}}.text.style'),\n        image = A('badges.{{position}}.image'),\n        depth = A('depth');\n\n      if (typeof inheritedColor !== 'string') inheritedColor = inheritedColor[0];\n      if (fillColor === 'inherit') fillColor = inheritedColor;\n      if (strokeColor === 'inherit') strokeColor = inheritedColor;\n      if (textColor === 'inherit') textColor = inheritedColor;\n      if (typeof text === 'number') text = text.toString();\n\n      _p.setXY(A('x') + offset * X_OFFSET_MULTIPLIER / SQRT_2, A('y') + offset * Y_OFFSET_MULTIPLIER / SQRT_2);\n\n      if (fillColor) {\n        components[0] = $render.circle(components[0], _p, badgeSize, 0, fillColor, 'nodeBadge', depth, badgeSize, A('badges.{{position}}.threshold'));\n      } else {\n        components[0] = $render.delete(components[0]);\n      }\n\n      if (strokeColor) {\n        components[1] = $render.circle(components[1], _p, badgeSize, strokeWidth, strokeColor, 'nodeBadgeStroke', depth, badgeSize, A('badges.{{position}}.threshold'));\n      } else {\n        components[1] = $render.delete(components[1]);\n      }\n\n      if (image) {\n        _d.zx = badgeSize;\n        _d.zy = badgeSize;\n        components[2] = $render.image(components[2], _p, _d, image, true, false, 'nodeBadgeImage', depth, badgeSize, A('badges.{{position}}.threshold'));\n      } else {\n        components[2] = $render.delete(components[2]);\n      }\n\n      if (text) {\n        components[3] = $render.text(components[3], _p, text, textFont, textSize, 0, textColor, textStyle, 'center', 'middle', 'nodeBadgeText', depth, badgeSize, A('badges.{{position}}.threshold'));\n      } else {\n        components[3] = $render.delete(components[3]);\n      }\n\n      return $render.composite($component, components);\n    }\n  ",
    fu = {
        topLeft: [ - 1, -1],
        topRight: [1, -1],
        bottomLeft: [ - 1, 1],
        bottomRight: [1, 1]
    },
    pu = {
        semanticLayers: {
            nodeBadge: {
                defineClipSpace: !0
            },
            nodeBadgeStroke: {},
            nodeBadgeImage: {
                useClipSpace: !0
            },
            nodeBadgeText: {}
        },
        aliases: {
            "badges.topLeft.text": "badges.topLeft.text.content",
            "badges.topRight.text": "badges.topRight.text.content",
            "badges.bottomLeft.text": "badges.bottomLeft.text.content",
            "badges.bottomRight.text": "badges.bottomRight.text.content"
        },
        properties: {
            badges: {
                bottomRight: cu,
                bottomLeft: cu,
                topRight: cu,
                topLeft: cu
            }
        },
        draw: [gu("topLeft"), gu("bottomLeft"), gu("topRight"), gu("bottomRight")]
    };
    function gu(e) {
        for (var t = hu; - 1 !== t.indexOf("{{position}}");) t = t.replace("{{position}}", e);
        return t = (t = t.replace("X_OFFSET_MULTIPLIER", fu[e][0])).replace("Y_OFFSET_MULTIPLIER", fu[e][1])
    }
    p.extend(function(e) {
        e.modules.graphics._addFeature(!0, "badges", pu)
    });
    var vu = {
        properties: {
            halo: {
                color: {
                    check: me,
                default:
                    null
                },
                size: {
                    check: fe,
                default:
                    50
                },
                strokeColor: {
                    check: me,
                default:
                    null
                },
                strokeWidth: {
                    check: fe,
                default:
                    1
                }
            }
        },
        settings: {
            halo: {
                clustering: {
                    check: ce,
                default:
                    !1
                },
                clusteringMaxRadius: {
                    check: fe,
                default:
                    1e3
                }
            }
        },
        aliases: {
            halo: "halo.color"
        },
        semanticLayers: {
            nodeHaloStrokes: {},
            nodeHalos: {}
        },
        draw: "$ensure('halo.color');\n\n    var DEPTH = " + Sr + ",\n        pos = $constant('new Position(\"halo\")'),\n        c = $render.updateComposite($component, 2);\n\n    c[0] = $render.circle(c[0], pos.setXY(A('x'), A('y')), A('radius'), A('halo.size'), A('halo.color'), 'nodeHalos', DEPTH);\n\n    if (A('halo.strokeColor')) {\n      c[1] = $render.circle(c[1], pos, A('radius'), A('halo.size') + A('halo.strokeWidth'), A('halo.strokeColor'), 'nodeHaloStrokes', DEPTH);\n    } else {\n      c[1] = $render.delete(c[1]);\n    }\n\n    return $render.composite($component, c);",
        context: function(t, e, n) {
            var r = {
                clusterCircles: [],
                ogma: t,
                clear: function() {
                    for (var e = 0; e < this.clusterCircles.length; ++e) t.render.delete(this.clusterCircles[e]);
                    return this.clusterCircles = [],
                    this.clusterCircles
                }
            };
            return t.modules.events.on({
                cameraZoom: function() {
                    return yu(t, n.halo, r)
                },
                clear: function() {
                    return r.clear()
                }
            }),
            r
        },
        _postDraw: yu
    };
    function yu(e, t, n) {
        if (t.clustering.
    default) {
            for (var r = e.modules.graph.getFlexArray(!0, "halo"), i = e.modules.graph.getAttributes(!0, ["x", "y", "radius", "halo.size", "halo.color", "halo.strokeColor", "halo.strokeWidth"]), o = i[0], s = i[1], a = i[2], u = (i[3], i[4], i[5], i[6], e.graph.indexList(!0)), l = u.length, d = e.modules.camera.zoom, c = e.moudles.render, h = 2 * Sr, f = [], p = new Gt, g = 0; g < l; ++g) {
                var v = u[g];
                r.get(v) && f.push([v])
            } !
            function e(t, n, r, i, o, s, a, u, l, d) {
                var c;
                for (var h = 0; h < t.length; ++h) {
                    var f = t[h];
                    if (f) {
                        for (var p = 0,
                        g = 0,
                        v = 0,
                        y = 0; y < f.length; ++y) c = f[y],
                        p += n.get(c),
                        g += r.get(c);
                        for (p /= f.length, g /= f.length, y = 0; y < f.length; ++y) c = f[y],
                        v = Math.max(v, jt(p, g, n.get(c), r.get(c)) + i.get(c));
                        for (y = h + 1; y < t.length; ++y) {
                            var m = t[y];
                            if (m) {
                                for (var _ = 0,
                                b = 0,
                                x = 0,
                                w = 0; w < m.length; ++w) c = m[w],
                                _ += n.get(c),
                                b += r.get(c);
                                for (_ /= m.length, b /= m.length, w = 0; w < m.length; ++w) c = m[w],
                                x = Math.max(x, jt(_, b, n.get(c), r.get(c)) + i.get(c));
                                var A = jt(p, g, _, b) * l,
                                E = v + x,
                                C = E * l + 2 * haloSize;
                                if (A <= C && C - haloSize <= d) return t[h] = f.concat(m),
                                t[y] = null,
                                void e(t, haloSize, n, r, i, l, d)
                            }
                        }
                    }
                }
            } (f, o, s, a, 0, 0, 0, 0, d, t.nodeHaloClusteringMaxRadius / d);
            var y = n.clear();
            for (g = 0; g < f.length; ++g) {
                var m = f[g];
                if (m && 1 !== m.length) {
                    for (var _ = 0,
                    b = 0,
                    x = 0,
                    w = 0; w < m.length; ++w) v = m[w],
                    _ += o.get(v),
                    b += s.get(v);
                    for (_ /= m.length, b /= m.length, w = 0; w < m.length; ++w) v = m[w],
                    x = Math.max(x, jt(_, b, o.get(v), s.get(v)) + a.get(v));
                    var A = c.circle( - 1, p.setXY(_, b), 0, x * d + haloSize, haloColor, "nodeHalos", h);
                    if (y.push(A), haloStrokeColor) {
                        var E = c.circle( - 1, p.setXY(_, b), 0, x * d + haloSize + haloStrokeWidth, haloStrokeColor, "nodeHaloStrokes", h);
                        y.push(E)
                    }
                }
            }
        } else n.clusterCircles.length && n.clear()
    }
    var mu = {
        properties: {
            halo: {
                color: {
                    check: me,
                default:
                    null
                },
                size: {
                    check: fe,
                default:
                    10
                }
            }
        },
        aliases: {
            halo: "halo.color"
        },
        semanticLayers: {
            edgeHalos: {}
        },
        draw: "$ensure('halo.color');\n\n    var DEPTH = " + Sr + ",\n        shape = $shapes[A('shape')],\n        defaultShape = $shapes['line'],\n        params = $constant('{}'),\n        haloSize = A('halo.size'),\n        haloColor = A('halo.color');\n\n    if ($source === $target) {\n      return (shape.haloLoop || defaultShape.haloLoop)($render, $component, S('x'), S('y'), A('width'), haloSize, A('curvature'), S('radius'), haloColor, 'edgeHalos', DEPTH, undefined, undefined, params);\n    } else if (A('curvature') !== 0) {\n      return (shape.haloCurved || defaultShape.haloCurved)($render, $component, S('x'), S('y'), T('x'), T('y'), A('width'), haloSize, A('curvature'), S('radius'), T('radius'), haloColor, 'edgeHalos', DEPTH, undefined, undefined, params);\n    } else {\n      return (shape.haloStraight || defaultShape.haloStraight)($render, $component, S('x'), S('y'), T('x'), T('y'), A('width'), haloSize, S('radius'), T('radius'), haloColor, 'edgeHalos', DEPTH, undefined, undefined, params);\n    }"
    };
    p.extend(function(e) {
        e.modules.graphics._addFeature(!0, "halo", vu),
        e.modules.graphics._addFeature(!1, "halo", mu)
    });
    var _u = {
        properties: {
            icon: {
                content: {
                    check: ve,
                default:
                    null
                },
                font: {
                    check: ge,
                default:
                    "Arial"
                },
                color: {
                    check: ye,
                default:
                    "black"
                },
                scale: {
                    check: fe,
                default:
                    1.4
                },
                threshold: {
                    check: fe,
                default:
                    5
                }
            }
        },
        aliases: {
            icon: "icon.content"
        },
        semanticLayers: {
            nodeIcons: {
                useClipSpace: !0
            }
        },
        draw: "$ensure('icon.content');\n\n    var pos = $constant('new Position()');\n\n    pos.setXY(A('x'), A('y'));\n    return $render.text($component, pos, A('icon.content'), A('icon.font'), A('radius') * A('icon.scale'), 0, A('icon.color'), 'none', 'center', 'middle', 'nodeIcons', A('depth'), A('radius'), A('icon.threshold'));\n  "
    };
    p.extend(function(e) {
        e.modules.graphics._addFeature(!0, "icon", _u)
    });
    var bu = {
        properties: {
            image: {
                url: {
                    check: ve,
                default:
                    null
                },
                scale: {
                    check: fe,
                default:
                    1
                },
                rescale: {
                    check: ce,
                default:
                    !0
                },
                duplicate: {
                    check: ce,
                default:
                    !1
                },
                threshold: {
                    check: fe,
                default:
                    5
                }
            }
        },
        aliases: {
            image: "image.url"
        },
        semanticLayers: {
            nodeImages: {
                useClipSpace: !0
            }
        },
        draw: "$ensure('image.url');\n\n    var imgCenter = $constant('new Position(\"imgCenter\")'),\n        imgDimensions = $constant('new Position(\"imgDimensions\")'),\n        imgSize = A('radius') * A('image.scale');\n\n    imgCenter.setXY(A('x'), A('y'));\n    imgDimensions.setZXY(imgSize, imgSize);\n\n    return $render.image($component, imgCenter, imgDimensions, A('image.url'), A('image.rescale'), A('image.duplicate'), 'nodeImages', A('depth'), A('radius'), A('image.threshold'));"
    };
    p.extend(function(e) {
        e.modules.graphics._addFeature(!0, "image", bu)
    });
    var xu = {
        properties: {
            outline: {
                enabled: {
                    check: ce,
                default:
                    !1
                },
                color: {
                    check: ye,
                default:
                    "rgba(0, 0, 0, 0.36)"
                }
            }
        },
        aliases: {
            outline: "outline.enabled"
        },
        semanticLayers: {
            nodeOutlines: {
                transparency: !0
            }
        },
        draw: "\n    $ensure('outline.enabled');\n\n    var EPSILON = " + Sr + ",\n        offset = $constant('new Position(\"outline\")'),\n        additionalOffset = A('outerStroke.color') ? A('outerStroke.width') / 2 : 0;\n\n    offset.zy = 0.15 * A('radius');\n    offset.oy = 1 + additionalOffset;\n\n    $render.setOffset(offset);\n\n    return $shapes[A('shape')].draw($render, $component, A('x'), A('y'), A('radius') * 1.1, 0 + additionalOffset, A('outline.color'), 'nodeOutlines', A('depth') - EPSILON, A('radius'), A('innerStroke.threshold'));\n\n    $render.setOffset(null);\n  "
    },
    wu = {
        properties: {
            outline: {
                enabled: {
                    check: ce,
                default:
                    !1
                },
                color: {
                    check: ye,
                default:
                    "rgba(0, 0, 0, 0.36)"
                }
            }
        },
        aliases: {
            outline: "outline.enabled"
        },
        semanticLayers: {
            edgeOutlines: {
                transparency: !0
            }
        },
        draw: "\n    $ensure('outline.enabled');\n\n    var EPSILON = " + Sr + ",\n        offset = $constant('new Position(\"outline\")'),\n        additionalOffset = A('strokeWidth'),\n        shape = $shapes[A('shape')],\n        parameters = $constant('{}'),\n        outlineRelativeSize = A('width') * 1.1,\n        outlineAbsoluteSize = A('strokeWidth') + 0,\n        color = A('outline.color');\n\n    offset.zy = 0.15 * A('width');\n    offset.oy = 1 + additionalOffset;\n\n    $render.setOffset(offset);\n\n    if ($source === $target) {\n      return shape.drawLoop($render, $component, S('x'), S('y'), outlineRelativeSize, outlineAbsoluteSize, A('curvature'), S('radius'), color, 'edgeOutlines', A('depth') - EPSILON, A('width'), A('threshold'), parameters);\n    } else if (A('curvature') === 0) {\n      return shape.drawStraight($render, $component, S('x'), S('y'), T('x'), T('y'), outlineRelativeSize, outlineAbsoluteSize, S('radius'), T('radius'), color, 'edgeOutlines', A('depth') - EPSILON, A('width'), A('threshold'), parameters);\n    } else {\n      return shape.drawCurved($render, $component, S('x'), S('y'), T('x'), T('y'), outlineRelativeSize, outlineAbsoluteSize, A('curvature'), S('radius'), T('radius'), color, 'edgeOutlines', A('depth') - EPSILON, A('width'), A('threshold'), parameters);\n    }\n\n    $render.setOffset(null);\n  "
    };
    p.extend(function(e) {
        e.modules.graphics._addFeature(!0, "outline", xu),
        e.modules.graphics._addFeature(!1, "outline", wu)
    });
    var Au = {
        properties: {
            x: {
                check: he,
            default:
                0,
                storage: "float"
            },
            y: {
                check: he,
            default:
                0,
                storage: "float"
            },
            hidden: {
                check: ce,
            default:
                !1
            },
            radius: {
                check: fe,
            default:
                5,
                storage: "float"
            },
            color: {
                check: function(e) {
                    return ye(e) || Array.isArray(e) && e.every(ye) && 1 <= e.length
                },
            default:
                "grey"
            },
            shape: {
                check: function(e, t) {
                    return e in t
                },
            default:
                "circle"
            },
            innerStroke: {
                width: {
                    check: fe,
                default:
                    2
                },
                color: {
                    check: me,
                default:
                    "white"
                },
                threshold: {
                    check: fe,
                default:
                    5
                }
            },
            outerStroke: {
                width: {
                    check: fe,
                default:
                    5
                },
                color: {
                    check: me,
                default:
                    null
                },
                threshold: {
                    check: fe,
                default:
                    0
                }
            }
        },
        semanticLayers: {
            nodeOuterStrokes: {},
            nodeInnerStrokes: {},
            nodeShapes: {
                defineClipSpace: !0
            },
            nodePieCharts: {
                useClipSpace: !0
            }
        },
        draw: ["return $shapes[A('shape')].draw($render, $component, A('x'), A('y'), A('radius'), 0, typeof A('color') === 'string' ? A('color') : 'rgba(0, 0, 0, 0)', 'nodeShapes', A('depth'), A('radius'), 0, $constant('{}'));", "$ensure('innerStroke.color');\n    return $shapes[A('shape')].draw($render, $component, A('x'), A('y'), A('radius'), A('innerStroke.width'), A('innerStroke.color'), 'nodeInnerStrokes', A('depth'), A('radius'), A('innerStroke.threshold'), $constant('{}'));", "$ensure('outerStroke.color');\n    return $shapes[A('shape')].draw($render, $component, A('x'), A('y'), A('radius'), A('innerStroke.width') + A('outerStroke.width'), A('outerStroke.color'), 'nodeOuterStrokes', A('depth'), A('radius'), 0, $constant('{}'));", "  var _p = $constant('new PositionList(3, \"pieCharts\")'),\n          colors = A('color'),\n          nbColors = typeof colors !== 'string' && colors.length;\n\n      if (!nbColors) {\n        return $render.delete($component);\n      } else {\n        var triangles = $render.updateComposite($component, nbColors),\n            x = A('x'), y = A('y'),\n            depth = A('depth'),\n            size = A('radius');\n\n        _p.reset();\n\n        if (nbColors === 1) {\n          triangles[0] = $render.rectangle(triangles[0], _p[0].setXY(x, y), _p[1].setZXY(size, size), colors[0], 'nodePieCharts', depth);\n        } else if (nbColors === 2) {\n          triangles[0] = $render.rectangle(triangles[0], _p[0].setXY(x, y).setZXY(0, size), _p[1].setZXY(size, size), colors[0], 'nodePieCharts', depth);\n          triangles[1] = $render.rectangle(triangles[1], _p[0].setXY(x, y).setZXY(0, -size), _p[1].setZXY(size, size), colors[1], 'nodePieCharts', depth);\n        } else {\n          size *= 2;\n\n          _p.x = x;\n          _p.y = y;\n\n          var step = (2 * Math.PI) / nbColors,\n              startAngle = 0;\n\n          _p[2].zx = size;\n          _p[2].zy = 0;\n\n          for (var j = 0; j < nbColors; ++j) {\n            var endAngle = startAngle + step,\n                endCos = Math.cos(endAngle),\n                endSin = Math.sin(endAngle);\n\n            _p[1].set(_p[2]);\n\n            _p[2].zx = endCos * size;\n            _p[2].zy = endSin * size;\n\n            triangles[j] = $render.triangle(triangles[j], _p[0], _p[1], _p[2], colors[j], 'nodePieCharts', depth);\n\n            startAngle = endAngle;\n          }\n        }\n\n        return $render.composite($component, triangles);\n      }\n    "]
    },
    Eu = {
        properties: {
            hidden: {
                check: ce,
            default:
                !1
            },
            width: {
                check: fe,
            default:
                1
            },
            color: {
                check: function(e) {
                    return "source" === e || "target" === e || ye(e)
                },
            default:
                "grey"
            },
            shape: {
                check: function(e, t) {
                    return e in t
                },
            default:
                "line"
            },
            strokeWidth: {
                check: fe,
            default:
                0
            },
            threshold: {
                check: fe,
            default:
                0
            }
        },
        semanticLayers: {
            edgeShapes: {}
        },
        draw: "\n    var shape = $shapes[A('shape')];\n    var parameters = $constant('{}');\n    var cp = $constant('{x: 0, y: 0}');\n    var color = A('color');\n    var targetSize = T('radius');\n\n    if (color === 'source') {\n      color = S('color');\n    } else if (color === 'target') {\n      color = T('color');\n    }\n\n    if (A('shape') === 'arrow' && $source !== $target) {\n      var dx, dy, badge, multiplier;\n\n      if (A('curvature') === 0) {\n        dx = S('x') - T('x');\n        dy = S('y') - T('y');\n      } else {\n        $utils.getCurveControlPoint(S('x'), S('y'), T('x'), T('y'), A('curvature'), cp);\n        dx = cp.x - T('x');\n        dy = cp.y - T('y');\n      }\n\n      if (dx > 0) {\n        if (dy > 0) {\n          badge = T('badges.bottomRight.text.content') || T('badges.bottomRight.image');\n          multiplier = T('badges.bottomRight.scale') + T('badges.bottomRight.positionScale') - 0.95;\n        } else {\n          badge = T('badges.topRight.text.content') || T('badges.topRight.image');\n          multiplier = T('badges.topRight.scale') + T('badges.topRight.positionScale') - 0.95;\n        }\n      } else {\n        if (dy > 0) {\n          badge = T('badges.bottomLeft.text.content') || T('badges.bottomLeft.image');\n          multiplier = T('badges.bottomLeft.scale') + T('badges.bottomLeft.positionScale') - 0.95;\n        } else {\n          badge = T('badges.topLeft.text.content') || T('badges.topLeft.image');\n          multiplier = T('badges.topLeft.scale') + T('badges.topLeft.positionScale') - 0.95;\n        }\n      }\n\n      if (badge) {\n        var dist = Math.sqrt(dx * dx + dy * dy),\n            sum = Math.abs(dx / dist) + Math.abs(dy / dist),\n            ratio = (sum - 1) / (Math.SQRT2 - 1);\n\n        targetSize *= 1 + (ratio * multiplier);\n      }\n    }\n\n    if (typeof color !== 'string') color = color[0];\n\n    if ($source === $target) {\n      return shape.drawLoop($render, $component, S('x'), S('y'), A('width'), A('strokeWidth'), A('curvature'), S('radius'), color, 'edgeShapes', A('depth'), A('width'), A('threshold'), parameters);\n    } else if (A('curvature') === 0) {\n      return shape.drawStraight($render, $component, S('x'), S('y'), T('x'), T('y'), A('width'), A('strokeWidth'), S('radius'), targetSize, color, 'edgeShapes', A('depth'), A('width'), A('threshold'), parameters);\n    } else {\n      return shape.drawCurved($render, $component, S('x'), S('y'), T('x'), T('y'), A('width'), A('strokeWidth'), A('curvature'), S('radius'), targetSize, color, 'edgeShapes', A('depth'), A('width'), A('threshold'), parameters);\n    }\n  "
    };
    p.extend(function(e) {
        e.modules.graphics._addFeature(!0, "shape", Au),
        e.modules.graphics._addFeature(!1, "shape", Eu)
    });
    var Cu = {
        properties: {
            text: Ie({
                content: {
                    check: ve,
                default:
                    null
                },
                font: {
                    check: ge,
                default:
                    "Arial"
                },
                color: {
                    check: ye,
                default:
                    "black"
                },
                size: {
                    check: fe,
                default:
                    12
                },
                scale: {
                    check: fe,
                default:
                    .2
                },
                backgroundColor: {
                    check: function(e) {
                        return null === e || "inherit" === e || ye(e)
                    },
                default:
                    null
                },
                backgroundMargin: {
                    check: fe,
                default:
                    2
                },
                secondary: {
                    content: {
                        check: ve,
                    default:
                        null
                    },
                    font: {
                        check: ge,
                    default:
                        "Arial"
                    },
                    color: {
                        check: ye,
                    default:
                        "black"
                    },
                    size: {
                        check: fe,
                    default:
                        10
                    },
                    scale: {
                        check: fe,
                    default:
                        .15
                    },
                    style: {
                        check: function(e) {
                            return - 1 !== ["none", "italic", "bold"].indexOf(e)
                        },
                    default:
                        "none"
                    },
                    backgroundColor: {
                        check: function(e) {
                            return null === e || "inherit" === e || ye(e)
                        },
                    default:
                        null
                    },
                    backgroundMargin: {
                        check: fe,
                    default:
                        2
                    },
                    margin: {
                        check: fe,
                    default:
                        2
                    }
                },
                scaling: {
                    check: ce,
                default:
                    !1
                },
                style: {
                    check: function(e) {
                        return - 1 !== ["none", "italic", "bold"].indexOf(e)
                    },
                default:
                    "none"
                },
                position: {
                    check: function(e) {
                        return - 1 !== ["right", "left", "top", "bottom", "center"].indexOf(e)
                    },
                default:
                    "bottom"
                },
                threshold: {
                    check: fe,
                default:
                    12
                },
                maxLineLength: {
                    check: fe,
                default:
                    0
                },
                truncateLength: {
                    check: fe,
                default:
                    0
                },
                backgroundArrowBaseSize: {
                    check: fe,
                default:
                    10
                }
            })
        },
        aliases: {
            text: "text.content",
            "text.secondary": "text.secondary.content"
        },
        settings: {
            preventNodeTextOverlap: {
            default:
                !0,
                type: "boolean"
            },
            nodeTextOverlapNbBuckets: {
            default:
                7,
                type: "positive"
            }
        },
        semanticLayers: {
            nodeTextBackground: {},
            nodeText: {}
        },
        context: function(e, t, n) {
            return {
                textPosition: e.modules.graph.createNodeAttribute({
                    name: "textPosition",
                    storage: "any"
                }),
                textWidth: e.modules.graph.createNodeAttribute({
                    name: "textWidth",
                    storage: "float"
                }),
                textHeight: e.modules.graph.createNodeAttribute({
                    name: "textHeight",
                    storage: "float"
                }),
                secondaryTextPosition: e.modules.graph.createNodeAttribute({
                    name: "secondaryTextPosition",
                    storage: "any"
                }),
                secondaryTextWidth: e.modules.graph.createNodeAttribute({
                    name: "secondaryTextWidth",
                    storage: "float"
                }),
                secondaryTextHeight: e.modules.graph.createNodeAttribute({
                    name: "secondaryTextHeight",
                    storage: "float"
                }),
                getLines: ku
            }
        },
        draw: "\n    if (A('text.content') !== null || A('text.secondary.content') !== null) {\n      var X_MULTIPLIER = $constant('{ left: -1, right: 1,  top: 0, bottom: 0, center: 0 }'),\n          Y_MULTIPLIER = $constant('{ left: 0, right: 0, top: -1, bottom: 1, center: 0 }'),\n          TEXT_WIDTH_MULTIPLIER = $constant('{ left: -1, right: 0, top: -1/2, bottom: -1/2,  center: -1/2 }'),\n          TEXT_HEIGHT_MULTIPLIER = $constant('{ left: -1/2, right: -1/2, top: -1, bottom: 0, center: -1/2 }'),\n          ARROW_BASE_MULTIPLIER = $constant('2/3');\n\n      var textPosition = new Position(),\n          backgroundDimensions = $constant('new Position(\"textBgDimensions\")'),\n          backgroundCenter = $constant('new Position(\"textBgCenter\")'),\n          p1 = $constant('new Position(\"textP1\")'),\n          p2 = $constant('new Position(\"textP2\")'),\n          p3 = $constant('new Position(\"textP3\")');\n\n      var isFontSizeFixed = !A('text.scaling'),\n          primaryFontSize = isFontSizeFixed ? A('text.size') : A('text.scale') * A('radius'),\n          secondaryFontSize = isFontSizeFixed ? A('text.secondary.size') : A('text.scale') * A('radius'),\n          primaryMargin = A('text.backgroundMargin'),\n          textOffset = primaryMargin + A('innerStroke.width') + A('outerStroke.width') + A('text.backgroundArrowBaseSize') * ARROW_BASE_MULTIPLIER,\n          primaryText = A('text.content'),\n          primaryColor = A('text.color'),\n          primaryFontFamily = A('text.font'),\n          primaryFontStyle = A('text.style'),\n          primaryBackgroundColor = A('text.backgroundColor'),\n          secondaryText = A('text.secondary.content'),\n          secondaryColor = A('text.secondary.color'),\n          secondaryFontFamily = A('text.secondary.font'),\n          secondaryFontStyle = A('text.secondary.style'),\n          secondaryBackgroundColor = A('text.secondary.backgroundColor'),\n          secondaryMargin = A('text.secondary.backgroundMargin'),\n          spaceBetweenTexts = A('text.secondary.margin'),\n          primaryLines = $context.getLines(primaryText, A('text.maxLineLength')),\n          primaryNbLines = primaryLines ? primaryLines.length : 0,\n          secondaryLines = $context.getLines(secondaryText, A('text.maxLineLength')),\n          secondaryNbLines = secondaryLines ? secondaryLines.length : 0,\n          totalNbLines = primaryNbLines + secondaryNbLines,\n          backgroundArrowBase = A('text.backgroundArrowBaseSize'),\n          primaryTextHeight = primaryNbLines * primaryFontSize,\n          secondaryTextHeight = secondaryNbLines * secondaryFontSize,\n          textHeight = primaryTextHeight + secondaryTextHeight,\n          primaryTextWidth = 0,\n          secondaryTextWidth = 0,\n          textWidth;\n\n      var c = $render.updateComposite($component, 4);\n\n      if (primaryBackgroundColor === 'inherit') primaryBackgroundColor = A('color');\n      if (secondaryBackgroundColor === 'inherit') secondaryBackgroundColor = A('color');\n      if (primaryColor === 'inherit') primaryColor = A('color');\n      if (secondaryColor === 'inherit') secondaryColor = A('color');\n\n      for (var i = 0; i < primaryNbLines; ++i) {\n        primaryTextWidth = Math.max(primaryTextWidth, $render.textWidth(primaryLines[i], primaryFontFamily, primaryFontSize, primaryFontStyle));\n      }\n\n      for (var i = 0; i < secondaryNbLines; ++i) {\n        secondaryTextWidth = Math.max(secondaryTextWidth, $render.textWidth(secondaryLines[i], secondaryFontFamily, secondaryFontSize, secondaryFontStyle));\n      }\n\n      textWidth = Math.max(primaryTextWidth, secondaryTextWidth);\n\n      var positionToUse = A('text.position');\n      if (positionToUse === 'center' && (A('icon.content') || A('image.url'))) {\n        positionToUse = 'bottom';\n      }\n\n      var xMult = X_MULTIPLIER[positionToUse],\n          yMult = Y_MULTIPLIER[positionToUse];\n\n      textPosition.setXY(A('x'), A('y'));\n      textPosition.setZXY(xMult * A('radius'), yMult * A('radius'));\n      textPosition.setOXY(xMult * (textOffset), yMult * (textOffset));\n\n      if (isFontSizeFixed) {\n        textPosition.ox += TEXT_WIDTH_MULTIPLIER[positionToUse] * textWidth;\n        textPosition.oy += TEXT_HEIGHT_MULTIPLIER[positionToUse] * textHeight;\n      } else {\n        textPosition.zx += TEXT_WIDTH_MULTIPLIER[positionToUse] * textWidth;\n        textPosition.zy += TEXT_HEIGHT_MULTIPLIER[positionToUse] * textHeight;\n      }\n\n      $context.textPosition.set($index, textPosition);\n      $context.textWidth.set($index, primaryTextWidth);\n      $context.textHeight.set($index, primaryTextHeight);\n\n      // BACKGROUND COLOR\n      if (primaryBackgroundColor) {\n        backgroundDimensions.reset();\n\n        if (isFontSizeFixed) {\n          backgroundDimensions.setOXY(primaryTextWidth / 2 + primaryMargin, primaryTextHeight / 2 + primaryMargin);\n        } else {\n          backgroundDimensions.setZXY(primaryTextWidth / 2, primaryTextHeight / 2);\n          backgroundDimensions.setOXY(primaryMargin, primaryMargin);\n        }\n\n        backgroundCenter.set(textPosition);\n        backgroundCenter[isFontSizeFixed ? 'addOXY' : 'addZXY'](textWidth / 2, primaryTextHeight / 2);\n\n        // TEXT INDICATOR ARROW\n        if (backgroundArrowBase && positionToUse !== 'center') {\n          p1.setXY(A('x'), A('y')).setZXY(xMult * A('radius'), yMult * A('radius')).setOXY(xMult * (textOffset - backgroundArrowBase * ARROW_BASE_MULTIPLIER - primaryMargin + 1), yMult * (textOffset - backgroundArrowBase * ARROW_BASE_MULTIPLIER - primaryMargin + 1));\n          p2.set(p1); p3.set(p1);\n\n          // var offset = primaryMargin + (isFontSizeFixed ? primaryFontSize / 2 : backgroundArrowBase / 2);\n          var offset = backgroundArrowBase / 2;\n\n          p2.addOXY(xMult * backgroundArrowBase * ARROW_BASE_MULTIPLIER + yMult * offset, yMult * backgroundArrowBase * ARROW_BASE_MULTIPLIER + xMult * offset);\n          p3.addOXY(xMult * backgroundArrowBase * ARROW_BASE_MULTIPLIER - yMult * offset, yMult * backgroundArrowBase * ARROW_BASE_MULTIPLIER - xMult * offset);\n\n          c[2] = $render.triangle(c[2], p1, p2, p3, primaryBackgroundColor, 'nodeTextBackground', A('depth'), A('radius'), A('text.threshold'));\n        } else {\n          c[2] = $render.delete(c[2]);\n        }\n\n        c[1] = $render.rectangle(c[1], backgroundCenter, backgroundDimensions, primaryBackgroundColor, 'nodeTextBackground', A('depth'), A('radius'), A('text.threshold'));\n      } else {\n        c[1] = $render.delete(c[1]);\n        c[2] = $render.delete(c[2]);\n      }\n\n      // SECONDARY BACKGROUND COLOR\n\n      if (secondaryBackgroundColor) {\n        backgroundDimensions.reset();\n\n        if (isFontSizeFixed) {\n          backgroundDimensions.setOXY(secondaryTextWidth / 2 + secondaryMargin, secondaryTextHeight / 2 + secondaryMargin);\n        } else {\n          backgroundDimensions.setZXY(secondaryTextWidth / 2, secondaryTextHeight / 2);\n          backgroundDimensions.setOXY(secondaryMargin, secondaryMargin);\n        }\n\n        backgroundCenter.set(textPosition);\n        backgroundCenter[isFontSizeFixed ? 'addOXY' : 'addZXY'](textWidth / 2, primaryTextHeight + secondaryTextHeight / 2);\n\n        backgroundCenter.addOXY(xMult * (primaryMargin + secondaryMargin + spaceBetweenTexts), yMult * (primaryMargin + secondaryMargin + spaceBetweenTexts));\n\n        c[3] = $render.rectangle(c[3], backgroundCenter, backgroundDimensions, secondaryBackgroundColor, 'nodeTextBackground', A('depth'), A('radius'), A('text.threshold'));\n      }\n\n      var absoluteMultiplier = +isFontSizeFixed,\n          relativeMultiplier = (1 - isFontSizeFixed),\n          primaryAbsoluteFontSize = absoluteMultiplier * primaryFontSize,\n          primaryRelativeFontSize = relativeMultiplier * primaryFontSize,\n          secondaryAbsoluteFontSize = absoluteMultiplier * secondaryFontSize,\n          secondaryRelativeFontSize = relativeMultiplier * secondaryFontSize,\n          textAlign = 'left',\n          verticalAlign = 'top',\n          semanticLayer = 'nodeText';\n\n      var textElements = $render.updateComposite(c[0], totalNbLines);\n\n      // if (isFontSizeFixed) {\n      //   textPosition.oy -= (primaryTextHeight / 2 - primaryFontSize / 2);\n      //   textPosition.oy -= (secondaryTextHeight / 2 - secondaryFontSize / 2);\n      // } else {\n      //   textPosition.zy -= (primaryTextHeight / 2 - primaryFontSize / 2);\n      // }\n\n      textPosition[isFontSizeFixed ? 'ox' : 'zx'] += (textWidth - primaryTextWidth) / 2;\n\n      for (var i = 0; i < primaryNbLines; ++i) {\n        textElements[i] = $render.text(textElements[i], textPosition, primaryLines[i], primaryFontFamily, primaryRelativeFontSize, primaryAbsoluteFontSize, primaryColor, primaryFontStyle, textAlign, verticalAlign, semanticLayer, A('depth'), A('radius'), A('text.threshold'));\n        textPosition.oy += primaryAbsoluteFontSize;\n        textPosition.zy += primaryRelativeFontSize;\n      }\n\n      textPosition[isFontSizeFixed ? 'ox' : 'zx'] -= (textWidth - primaryTextWidth) / 2;\n      textPosition[isFontSizeFixed ? 'ox' : 'zx'] += (textWidth - secondaryTextWidth) / 2;\n      textPosition.oy += (primaryMargin + secondaryMargin + spaceBetweenTexts);\n\n      $context.secondaryTextPosition.set($index, textPosition.clone());\n      $context.secondaryTextWidth.set($index, secondaryTextWidth);\n      $context.secondaryTextHeight.set($index, secondaryTextHeight);\n\n      for (var i = 0; i < secondaryNbLines; ++i) {\n        textElements[i+primaryNbLines] = $render.text(textElements[i+primaryNbLines], textPosition, secondaryLines[i], secondaryFontFamily, secondaryRelativeFontSize, secondaryAbsoluteFontSize, secondaryColor, secondaryFontStyle, textAlign, verticalAlign, semanticLayer, A('depth'), A('radius'), A('text.threshold'));\n        textPosition.oy += secondaryAbsoluteFontSize;\n        textPosition.zy += secondaryRelativeFontSize;\n      }\n\n      textPosition[isFontSizeFixed ? 'ox' : 'zx'] -= (textWidth - secondaryTextWidth) / 2;\n      textPosition[isFontSizeFixed ? 'ox' : 'zx'] += (textWidth - primaryTextWidth) / 2;\n      textPosition.oy -= primaryAbsoluteFontSize * primaryNbLines;\n      textPosition.zy -= primaryRelativeFontSize * primaryNbLines;\n\n      textPosition.oy -= (primaryMargin + secondaryMargin + spaceBetweenTexts);\n\n      textPosition.oy -= secondaryAbsoluteFontSize * secondaryNbLines;\n      textPosition.zy -= secondaryRelativeFontSize * secondaryNbLines;\n\n      c[0] = $render.composite(c[0], textElements);\n\n      return $render.composite($component, c);\n    } else {\n      $context.textPosition.set($index, undefined);\n\n      return $render.delete($component);\n    }\n  "
    },
    Su = 4;
    function Iu(e) {
        var t = e ? "text.content": "text.secondary.content",
        n = e ? "": ".secondary";
        return "\n    $ensure('" + t + "');\n\n    var PI = $constant('Math.PI');\n\n    var textPosition = $constant('new Position(\"text\")'),\n        backgroundDimensions = $constant('new Position(\"textBgDimensions\")'),\n        backgroundCenter = $constant('new Position(\"textBgCenter\")'),\n        controlPoint = $constant('{x1: 0, y1: 0, x2: 0, y2: 0}'),\n        lineInfo = $constant('{angle: 0, length: 0, size: 0, strokeSize: 0, textWidth: 0, textHeight: 0, ratio: 0}');\n\n    var isFontSizeFixed = !A('text.scaling'),\n        fontSize = isFontSizeFixed ? A('text" + n + ".size') : A('text" + n + ".scale') * A('width'),\n        margin = A('text" + n + ".backgroundMargin'),\n        text = A('" + t + "'),\n        color = A('text" + n + ".color'),\n        fontFamily = A('text" + n + ".font'),\n        fontStyle = A('text" + n + ".style'),\n        backgroundColor = A('text" + n + ".backgroundColor'),\n        lines = $context.getLines(text, A('text.maxLineLength')),\n        nbLines = lines ? lines.length : 1,\n        textHeight = nbLines * fontSize,\n        textWidth;\n\n    var c = $render.updateComposite($component, 2);\n\n    if (backgroundColor === 'inherit') backgroundColor = A('color');\n    if (color === 'inherit') color = A('color');\n\n    textWidth = $render.textWidth(lines[0], fontFamily, fontSize, fontStyle);\n    for (var j = 1; j < lines.length; ++j) {\n      textWidth = Math.max(textWidth, $render.textWidth(lines[j], fontFamily, fontSize, fontStyle));\n    }\n\n    var curvature = A('curvature'),\n        sx = S('x'), sy = S('y'), tx = T('x'), ty = T('y'),\n        ss = S('radius'), ts = T('radius'),\n        angle;\n\n    if ($source === $target) {\n      angle = PI / 4;\n      $utils.getLoopControlPoints(sx, sy, curvature, ss, controlPoint);\n      $utils.getPointOnBezierCurve(0.5, sx, sy, tx, ty, controlPoint.x1, controlPoint.y1, controlPoint.x2, controlPoint.y2, textPosition);\n    } else if (curvature === 0) {\n      angle = $utils.lineAngle(sx, sy, tx, ty);\n      textPosition.x = (sx + tx + Math.cos(angle) * ss + Math.cos(angle + PI) * ts) / 2;\n      textPosition.y = (sy + ty + Math.sin(angle) * ss + Math.sin(angle + PI) * ts) / 2;\n    } else {\n      angle = $utils.lineAngle(sx, sy, tx, ty);\n      $utils.getCurveControlPoint(sx, sy, tx, ty, curvature, controlPoint);\n      $utils.getPointOnQuadraticCurve(0.5, sx, sy, tx, ty, controlPoint.x, controlPoint.y, textPosition);\n      textPosition.x += (Math.cos(angle) * ss + Math.cos(angle + PI) * ts) / 2;\n      textPosition.y += (Math.sin(angle) * ss + Math.sin(angle + PI) * ts) / 2;\n    }\n\n    textPosition.oy = (margin + " + Su + " - A('strokeWidth')) * (" + (e ? "-1": "1") + ");\n\n    var len = $source === $target ? -100000 : $utils.distance(sx, sy, tx, ty) - ss - ts;\n\n    lineInfo.angle = angle;\n    lineInfo.length = len;\n    lineInfo.size = " + (e ? "1": "-1") + " * A('width');\n    lineInfo.strokeSize = A('strokeWidth');\n    lineInfo.textWidth = textWidth;\n    lineInfo.textHeight = textHeight;\n    lineInfo.ratio = isFontSizeFixed ? -1 : A('text.scale');\n\n    // TODO: remember bounding box\n    // textBoundingBoxList[index] = [textPosition, lineInfo];\n\n    // BACKGROUND COLOR\n    if (backgroundColor) {\n      backgroundDimensions.reset();\n\n      if (isFontSizeFixed) {\n        backgroundDimensions.setOXY(textWidth / 2 + margin, textHeight / 2 + margin);\n      } else {\n        backgroundDimensions.setZXY(textWidth / 2, textHeight / 2);\n        backgroundDimensions.setOXY(margin, margin);\n      }\n\n      backgroundCenter.set(textPosition);\n\n      c[1] = $render.rectangle(c[1], backgroundCenter, backgroundDimensions, backgroundColor, 'edgeTextBackground', A('depth'), A('width'), A('text.threshold'), lineInfo);\n    } else {\n      c[1] = $render.delete(c[1]);\n    }\n\n    var absoluteFontSize = +isFontSizeFixed && fontSize,\n        relativeFontSize = (1 - isFontSizeFixed) && fontSize,\n        textAlign = 'center',\n        verticalAlign = 'middle',\n        semanticLayer = 'edgeText';\n\n    if (!lines || lines.length === 1) {\n      c[0] = $render.text(c[0], textPosition, text, fontFamily, relativeFontSize, absoluteFontSize, color, fontStyle, textAlign, verticalAlign, semanticLayer, A('depth'), A('width'), A('text.threshold'), lineInfo);\n    } else {\n      var textElements = $render.updateComposite(c[0], lines.length);\n\n      if (isFontSizeFixed) textPosition.oy -= (textHeight / 2 - absoluteFontSize / 2);\n      else textPosition.zy -= (textHeight / 2 - relativeFontSize / 2);\n\n      for (j = 0; j < lines.length; ++j) {\n        textElements[j] = $render.text(textElements[j], textPosition, lines[j], fontFamily, relativeFontSize, absoluteFontSize, color, fontStyle, textAlign, verticalAlign, semanticLayer, A('depth'), A('width'), A('text.threshold'), lineInfo);\n        textPosition.oy += absoluteFontSize;\n        textPosition.zy += relativeFontSize;\n      }\n\n      textPosition.oy -= absoluteFontSize * lines.length;\n      textPosition.zy -= relativeFontSize * lines.length;\n\n      c[0] = $render.composite(c[0], textElements);\n    }\n\n    return $render.composite($component, c);\n  "
    }
    var Tu = {
        properties: {
            text: {
                content: {
                    check: ve,
                default:
                    null
                },
                font: {
                    check: ge,
                default:
                    "Arial"
                },
                color: {
                    check: ye,
                default:
                    "black"
                },
                size: {
                    check: fe,
                default:
                    12
                },
                scale: {
                    check: fe,
                default:
                    1
                },
                scaling: {
                    check: ce,
                default:
                    !1
                },
                style: {
                    check: function(e) {
                        return - 1 !== ["none", "italic", "bold"].indexOf(e)
                    },
                default:
                    "none"
                },
                backgroundColor: {
                    check: function(e) {
                        return null === e || "inherit" === e || ye(e)
                    },
                default:
                    null
                },
                backgroundMargin: {
                    check: fe,
                default:
                    2
                },
                threshold: {
                    check: fe,
                default:
                    4
                },
                maxLineLength: {
                    check: fe,
                default:
                    0
                }
            }
        },
        aliases: {
            text: "text.content"
        },
        semanticLayers: {
            edgeTextBackground: {},
            edgeText: {}
        },
        context: function(e, t) {
            return {
                getLines: ku
            }
        },
        draw: Iu(!0)
    },
    Nu = {
        properties: {
            text: {
                secondary: {
                    content: {
                        check: ve,
                    default:
                        null
                    },
                    font: {
                        check: ge,
                    default:
                        "Arial"
                    },
                    color: {
                        check: ye,
                    default:
                        "black"
                    },
                    size: {
                        check: fe,
                    default:
                        10
                    },
                    scale: {
                        check: fe,
                    default:
                        .8
                    },
                    style: {
                        check: function(e) {
                            return - 1 !== ["none", "italic", "bold"].indexOf(e)
                        },
                    default:
                        "none"
                    },
                    backgroundColor: {
                        check: function(e) {
                            return null === e || "inherit" === e || ye(e)
                        },
                    default:
                        null
                    },
                    backgroundMargin: {
                        check: fe,
                    default:
                        2
                    }
                }
            }
        },
        aliases: {
            "text.secondary": "text.secondary.content"
        },
        context: function() {
            return {
                getLines: ku
            }
        },
        draw: Iu(!1)
    };
    function ku(e, t) {
        if (null === e) return null;
        for (var n = (e = e.toString()).split("\n"), r = [], i = 0; i < n.length; ++i) {
            var o = n[i];
            if (!t || t <= 1 || o.length < t) r.push(o);
            else for (var s = Lu(n[i], t), a = 0; a < s.length; ++a) r.push(s[a])
        }
        return r
    }
    function Lu(e, t) {
        for (var n = e.split(" "), r = [], i = 0, o = -1, s = [], a = !0, u = 0; u < n.length; ++u) if (a) {
            if (n[u].length > t) {
                for (var l = Ru(n[u], t), d = 0; d < l.length; ++d) r.push([l[d]]),
                ++o;
                i = l[l.length - 1].length
            } else r.push([n[u]]),
            ++o,
            i = n[u].length + 1;
            a = !1
        } else i + n[u].length <= t ? (r[o].push(n[u]), i += n[u].length + 1) : (a = !0, --u);
        for (u = 0; u < r.length; ++u) s.push(r[u].join(" "));
        return s
    }
    function Ru(e, t) {
        for (var n = [], r = 0; r < e.length; r += t - 1) n.push(e.substr(r, t - 1) + "-");
        var i = n[n.length - 1].length;
        return n[n.length - 1] = n[n.length - 1].substr(0, i - 1) + " ",
        n
    }
    p.extend(function(t) {
        t.modules.graphics._addFeature(!0, "text", Cu),
        t.modules.graphics._addFeature(!1, "text", Tu),
        t.modules.graphics._addFeature(!1, "secondaryText", Nu),
        t.styles.setNodeTextsVisibility = function(e) {
            return t.modules.graphics._setFeatureVisibility(!0, "text", !!e)
        },
        t.styles.setEdgeTextsVisibility = function(e) {
            return t.modules.graphics._setFeatureVisibility(!1, "secondaryText", !!e),
            t.modules.graphics._setFeatureVisibility(!1, "text", !!e)
        }
    });
    var zu = new Gt,
    Mu = {
        draw: function(e, t, n, r, i, o, s, a, u, l, d) {
            return e.circle(t, zu.setXY(n, r), i, o, s, a, u, l, d)
        },
        detect: function(e, t, n, r, i) {
            var o = e - r,
            s = t - i;
            return o * o + s * s < n * n
        }
    };
    p.extend(function(e) {
        return e.modules.graphics._addShape(!0, "circle", Mu)
    });
    function Pu(e, t, n) {
        return e.reset(),
        e.x = t,
        e.y = n,
        e
    }
    function Fu(e, t, n, r, i) {
        return e.reset(),
        e.zx = t,
        e.zy = n,
        e.ox = r,
        e.oy = i,
        e
    }
    var Du = {
        RATIO: .31,
        _p: new Gt,
        _d: new Gt,
        draw: function(e, t, n, r, i, o, s, a, u, l, d) {
            var c = e.updateComposite(t, 2);
            return c[0] = e.rectangle(c[0], Pu(this._p, n, r), Fu(this._d, i, i * this.RATIO, o, o), s, a, u, l, d),
            c[1] = e.rectangle(c[1], Pu(this._p, n, r), Fu(this._d, i * this.RATIO, i, o, o), s, a, u, l, d),
            e.composite(t, c)
        },
        detect: function(e, t, n, r, i) {
            var o = n * this.RATIO;
            return Fn(r, i, e - n, t - o, e + n, t + o) || Fn(r, i, e - o, t - n, e + o, t + n)
        }
    };
    p.extend(function(e) {
        return e.modules.graphics._addShape(!0, "cross", Du)
    });
    var Ou = new Gt,
    Bu = new Gt;
    var ju = {
        draw: function(e, t, n, r, i, o, s, a, u, l, d) {
            return e.rectangle(t, (g = n, v = r, Ou.reset(), Ou.x = g, Ou.y = v, Ou), (h = c = i, p = f = o, Bu.reset(), Bu.zx = c, Bu.zy = h, Bu.ox = f, Bu.oy = p, Bu), s, a, u, l, d);
            var c, h, f, p, g, v
        }, detect: function(e, t, n, r, i) {
            return Fn(r, i, e - n, t - n, e + n, t + n)
        }
    };
    p.extend(function(e) {
        return e.modules.graphics._addShape(!0, "square", ju)
    });
    var Uu = new $t(4);
    var Hu = {
        draw: function(e, t, n, r, i, o, s, a, u, l, d) {
            var c, h, f, p;
            return c = n,
            h = r,
            f = i,
            p = o,
            Uu.reset(),
            Uu.x = c,
            Uu.y = h,
            Uu[0].zy = -f,
            Uu[1].zx = f,
            Uu[2].zy = f,
            Uu[3].zx = -f,
            Uu[0].oy = -p,
            Uu[1].ox = p,
            Uu[2].oy = p,
            Uu[3].ox = -p,
            e.quadrilateral(t, Uu[0], Uu[1], Uu[2], Uu[3], s, a, u, l, d)
        },
        detect: function(e, t, n, r, i) {
            return Uu.reset(),
            Uu.setXY(e - n, t).setXY(e, t - n).setXY(e + n, t).setXY(e, t + n),
            Dn(r, i, Uu)
        }
    };
    p.extend(function(e) {
        return e.modules.graphics._addShape(!0, "diamond", Hu)
    });
    for (var Xu = 2 * Math.PI / 10,
    Wu = [], Gu = [], qu = 0; qu < 10; ++qu) Wu[qu] = Math.cos(qu * Xu - Math.PI / 2),
    Gu[qu] = Math.sin(qu * Xu - Math.PI / 2);
    var Yu = new $t(10),
    Vu = {
        draw: function(e, t, n, r, i, o, s, a, u, l, d) {
            Yu.reset(),
            Yu.x = n,
            Yu.y = r;
            for (var c = 0; c < 10; ++c) {
                var h = c % 2 == 1 ? .4 : 1;
                Yu[c].zx = Wu[c] * i * h,
                Yu[c].zy = Gu[c] * i * h,
                Yu[c].ox = Wu[c] * o * h * 2.5,
                Yu[c].oy = Gu[c] * o * h * 2.5
            }
            return e.polygon(t, Yu, s, a, u, l, d)
        },
        detect: function(e, t, n, r, i) {
            Yu.reset();
            for (var o = 0; o < 10; ++o) {
                var s = o % 2 == 1 ? .4 : 1;
                Yu[o].x = e + Wu[o] * n * s,
                Yu[o].y = t + Gu[o] * n * s
            }
            return Dn(r, i, Yu)
        }
    };
    p.extend(function(e) {
        return e.modules.graphics._addShape(!0, "star", Vu)
    });
    for (var $u = [], Zu = 0; Zu < 10; ++Zu) $u.push({
        x: 0,
        y: 0
    });
    var Qu = {
        draw: function(e, t, n, r, i, o, s, a, u, l, d, c) {
            void 0 === c && (c = {});
            var h = c.numPoints || 5,
            f = new $t(h),
            p = -Math.PI / 2 + (c.rotate || 0),
            g = 2 * Math.PI / h;
            f.x = n,
            f.y = r;
            for (var v = 0; v < h; ++v) {
                var y = Math.cos(p),
                m = Math.sin(p);
                f[v].setZXY(y * i, m * i),
                f[v].setOXY(y * o, m * o),
                p += g
            }
            return e.polygon(t, f, s, a, u, l, d)
        },
        detect: function(e, t, n, r, i, o) {
            for (var s = o.numPoints || 5,
            a = -Math.PI / 2 + (o.rotate || 0), u = 2 * Math.PI / s, l = 0; l < s; ++l) $u[l].x = e + Math.cos(a) * n,
            $u[l].y = t + Math.sin(a) * n,
            a += u;
            return Dn(r, i, $u, s)
        }
    };
    p.extend(function(e) {
        return e.modules.graphics._addShape(!0, "equilateral", Qu)
    });
    var Ju = new Gt,
    Ku = new Gt,
    el = {},
    tl = new Gt,
    nl = new Gt,
    rl = new Gt,
    il = new Gt;
    function ol(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
        return Ju.x = n,
        Ju.y = r,
        Ku.x = i,
        Ku.y = o,
        e.line(t, Ju, Ku, s, a, d, c, h, f, p)
    }
    function sl(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g) {
        return tl.reset(),
        rl.reset(),
        il.reset(),
        aa(rl.x = n, rl.y = r, il.x = i, il.y = o, u, tl),
        e.quadraticCurve(t, rl, tl, il, s, a, c, h, f, p, g)
    }
    function al(e, t, n, r, i, o, s, a, u, l, d, c, h) {
        return tl.reset(),
        nl.reset(),
        rl.reset(),
        tl.reset(),
        nl.reset(),
        rl.reset(),
        ua(rl.x = n, rl.y = r, s, a, el),
        tl.x = el.x1,
        tl.y = el.y1,
        nl.x = el.x2,
        nl.y = el.y2,
        e.cubicCurve(t, rl, tl, nl, rl, i, o, u, l, d, c, h)
    }
    var ul = {
        drawStraight: ol,
        drawCurved: sl,
        drawLoop: al,
        detectStraight: function(e, t, n, r, i, o, s, a, u) {
            return Lt(e, t, n, r, i, o, s)
        },
        detectCurved: function(e, t, n, r, i, o, s, a, u, l) {
            return aa(n, r, i, o, a, el),
            Wn(e, t, n, r, i, o, el.x, el.y, s / 2)
        },
        detectLoop: function(e, t, n, r, i, o, s) {
            return ua(n, r, o, s, el),
            $n(e, t, n, r, n, r, el.x1, el.y1, el.x2, el.y2, i / 2)
        },
        haloStraight: ol,
        haloCurved: sl,
        haloLoop: al
    };
    function ll(e, t) {
        return void 0 === t && (t = 3),
        e + Math.log(e + 1) * t
    }
    p.extend(function(e) {
        return e.modules.graphics._addShape(!1, "line", ul)
    });
    var dl, cl = new Gt,
    hl = new Gt,
    fl = new Gt,
    pl = new Gt,
    gl = new $t(3),
    vl = {},
    yl = {
        drawStraight: ml(!1),
        drawCurved: _l(!1),
        drawLoop: bl(!1),
        haloStraight: ml(!0),
        haloCurved: _l(!0),
        haloLoop: bl(!0),
        detectStraight: function(e, t, n, r, i, o, s, a, u) {
            var l = ll(s),
            d = jt(n, r, i, o),
            c = (i - n) / d,
            h = (o - r) / d,
            f = i - c * (l + u),
            p = o - h * (l + u),
            g = i - c * u,
            v = o - h * u,
            y = kt(f, p, i, o, l);
            return Lt(e, t, n, r, f, p, s) || Pn(e, t, y.x1, y.y1, y.x2, y.y2, g, v)
        },
        detectCurved: function(e, t, n, r, i, o, s, a, u, l) {
            return Il(n, r, i, o, s, a, l),
            Wn(e, t, n, r, wl, Al, Sl.x, Sl.y, s / 2) || Pn(e, t, wl + El, Al + Cl, wl + .6 * Cl, Al - .6 * El, wl - .6 * Cl, Al + .6 * El)
        },
        detectLoop: function(e, t, n, r, i, o, s) {
            return Tl(n, r, i, o, s),
            $n(e, t, wl, Al, n, r, Sl.x1, Sl.y1, Sl.x2, Sl.y2, i / 2) || Pn(e, t, wl + El, Al + Cl, wl + .6 * Cl, Al - .6 * El, wl - .6 * Cl, Al + .6 * El)
        }
    };
    function ml(P) {
        return function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g) {
            void 0 === g && (g = {});
            var v = ll(s, g.arrowSizeRatio),
            y = a / 2,
            m = jt(n, r, i, o),
            _ = (i - n) / m,
            b = (o - r) / m,
            x = i - _ * (v + l),
            w = o - b * (v + l),
            A = i - _ * l,
            E = o - b * l,
            C = -b,
            S = x + C * (v / 2),
            I = w + _ * (v / 2),
            T = x - C * (v / 2),
            N = w - _ * (v / 2),
            k = x + C * y,
            L = w + _ * y,
            R = x - C * y,
            z = w - _ * y;
            cl.x = n,
            cl.y = r,
            hl.x = x,
            hl.y = w,
            gl.reset(),
            gl[0].setXY(S, I),
            gl[1].setXY(T, N),
            gl[2].setXY(A, E),
            gl[0].setAXY(k - x, L - w),
            gl[1].setAXY(R - x, z - w),
            P && (gl[2].setAXY(_ * y, b * y), gl[0].ax -= _ * y, gl[0].ay -= b * y, gl[1].ax -= _ * y, gl[1].ay -= b * y);
            var M = e.updateComposite(t, 2);
            return M[0] = e.line(M[0], cl, hl, s, a, d, c, h, f, p),
            M[1] = e.triangle(M[1], gl[0], gl[1], gl[2], d, c, h, f, p),
            e.composite(t, M)
        }
    }
    function _l(m) {
        return function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g, v) {
            void 0 === v && (v = {}),
            Il(n, r, i, o, s, u, d, v.arrowSizeRatio),
            cl.setXY(n, r),
            hl.setXY(wl, Al),
            fl.setXY(Sl.x, Sl.y),
            gl.reset(),
            gl[0].setXY(wl + El, Al + Cl),
            gl[1].setXY(wl + .6 * Cl, Al - .6 * El),
            gl[2].setXY(wl - .6 * Cl, Al + .6 * El),
            Il(n, r, i, o, a, u, d, v.arrowSizeRatio),
            gl[1].setAXY(.3 * Cl, .3 * -El),
            gl[2].setAXY(.3 * -Cl, .3 * El),
            m && (gl[0].setAXY(El, Cl), gl[1].ax -= .3 * (El - Cl), gl[1].ay -= .3 * (Cl + El), gl[2].ax -= .3 * (El + Cl), gl[2].ay -= .3 * (Cl - El));
            var y = e.updateComposite(t, 2);
            return y[0] = e.quadraticCurve(y[0], cl, fl, hl, s, a, c, h, f, p, g),
            y[1] = e.triangle(y[1], gl[0], gl[1], gl[2], c, h, f, p, g),
            e.composite(t, y)
        }
    }
    function bl(g) {
        return function(e, t, n, r, i, o, s, a, u, l, d, c, h, f) {
            Tl(n, r, i, s, a, (f = f || vl).arrowSizeRatio),
            cl.setXY(n, r),
            hl.setXY(wl, Al),
            fl.setXY(Sl.x1, Sl.y1),
            pl.setXY(Sl.x2, Sl.y2),
            gl.reset(),
            gl[0].setXY(wl + El, Al + Cl),
            gl[1].setXY(wl + .6 * Cl, Al - .6 * El),
            gl[2].setXY(wl - .6 * Cl, Al + .6 * El),
            Tl(n, r, o, s, a, f.arrowSizeRatio),
            gl[1].setAXY(.3 * Cl, .3 * -El),
            gl[2].setAXY(.3 * -Cl, .3 * El),
            g && (gl[0].setAXY(El, Cl), gl[1].ax -= .3 * (El - Cl), gl[1].ay -= .3 * (Cl + El), gl[2].ax -= .3 * (El + Cl), gl[2].ay -= .3 * (Cl - El));
            var p = e.updateComposite(t, 2);
            return p[0] = e.cubicCurve(p[0], cl, pl, fl, hl, i, o, u, l, d, c, h),
            p[1] = e.triangle(p[1], gl[0], gl[1], gl[2], u, l, d, c, h),
            e.composite(t, p)
        }
    }
    var xl, wl, Al, El, Cl, Sl = {};
    function Il(e, t, n, r, i, o, s, a) {
        dl = ll(i, a),
        aa(e, t, n, r, o, Sl),
        xl = jt(n, r, Sl.x, Sl.y),
        wl = Sl.x + (n - Sl.x) * (xl - dl - s) / xl,
        Al = Sl.y + (r - Sl.y) * (xl - dl - s) / xl,
        El = (n - Sl.x) * dl / xl,
        Cl = (r - Sl.y) * dl / xl
    }
    function Tl(e, t, n, r, i, o) {
        dl = ll(n, o),
        ua(e, t, r, i, Sl);
        var s = i + (n - r),
        a = s / 2;
        Sl.x1 += s,
        Sl.y1 += s,
        Sl.y2 -= a,
        xl = Math.sqrt(Math.pow(e - Sl.x1, 2) + Math.pow(t - Sl.y1, 2)),
        wl = Sl.x1 + (e - Sl.x1) * (xl - dl - i) / xl,
        Al = Sl.y1 + (t - Sl.y1) * (xl - dl - i) / xl,
        El = (e - Sl.x1) * dl / xl,
        Cl = (t - Sl.y1) * dl / xl
    }
    p.extend(function(e) {
        return e.modules.graphics._addShape(!1, "arrow", yl)
    });
    var Nl = la(3, 3 / 8);
    p.extend(function(e) {
        return e.modules.graphics._addShape(!1, "dashed", Nl)
    });
    var kl = la(1, 1);
    p.extend(function(e) {
        return e.modules.graphics._addShape(!1, "dotted", kl)
    });
    var Ll = {},
    Rl = {},
    zl = new Gt,
    Ml = new Gt,
    Pl = new Gt,
    Fl = new Gt,
    Dl = new Gt,
    Ol = new Gt,
    Bl = new Gt,
    jl = new Gt,
    Ul = new Gt,
    Hl = new Gt,
    Xl = new Gt,
    Wl = 40,
    Gl = new $t(2 * Wl + 1),
    ql = {
        drawStraight: Zl,
        drawCurved: Vl,
        drawLoop: Yl,
        haloStraight: Zl,
        haloCurved: Vl,
        haloLoop: Yl,
        detectStraight: function(e, t, n, r, i, o, s, a, u) {
            return kt(n, r, i, o, 2 * s, Ll),
            Pn(e, t, Ll.x1, Ll.y1, Ll.x2, Ll.y2, i, o)
        },
        detectCurved: function(e, t, n, r, i, o, s, a, u, l) {
            return Ql(n, r, i, o, s, 0, a, u, l),
            Dn(e, t, Gl)
        },
        detectLoop: function(e, t, n, r, i, o, s) {
            return Jl(n, r, i, 0, o, s),
            Dn(e, t, Gl)
        }
    };
    function Yl(e, t, n, r, i, o, s, a, u, l, d, c, h) {
        return Jl(n, r, i, o, s, a),
        e.polygon(t, Gl, u, l, d, c, h)
    }
    function Vl(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g) {
        return Ql(n, r, i, o, s, a, u, l, d),
        e.polygon(t, Gl, c, h, f, p, g)
    }
    var $l = new $t(4);
    function Zl(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p) {
        var g = jt(n, r, i, o);
        Pt(n, r, i, o, 1, Ll);
        var v = (n - i) / g,
        y = (r - o) / g,
        m = -y,
        _ = v,
        b = a / 2;
        return $l.reset().setXY(n + m * s, r + _ * s).setXY(n - m * s, r - _ * s).setXY(i + v * l, o + y * l).setXY(i + v * l, o + y * l),
        $l.setAXY(m * b, _ * b).setAXY( - m * b, -_ * b).setAXY(( - m - v) * b, ( - _ - y) * b).setAXY((m - v) * b, (_ - y) * b),
        e.quadrilateral(t, $l[0], $l[1], $l[2], $l[3], d, c, h, f, p)
    }
    function Ql(e, t, n, r, i, o, s, a, u) {
        aa(e, t, n, r, s, Rl);
        var l = jt(Rl.x, Rl.y, n, r);
        zl.setXY(e, t),
        Ml.setXY(n + (Rl.x - n) / l * u, r + (Rl.y - r) / l * u),
        Pl.setXY(Rl.x, Rl.y),
        td(zl, Pl, Pl, Ml, 2 * i, o, Kl)
    }
    function Jl(e, t, n, r, i, o) {
        ua(e, t, i, o, Rl);
        var s = jt(Rl.x2, Rl.y2, e, t);
        zl.setXY(e, t),
        Ml.setXY(e + (Rl.x1 - e) / s * o, t + (Rl.y1 - t) / s * o),
        Pl.setXY(Rl.x1, Rl.y1),
        Fl.setXY(Rl.x2, Rl.y2),
        td(zl, Fl, Pl, Ml, 2 * n, r, ed)
    }
    function Kl(e, t, n, r, i, o) {
        Xn(e, t.x, t.y, i.x, i.y, n.x, n.y, o)
    }
    function ed(e, t, n, r, i, o) {
        Yn(e, t.x, t.y, i.x, i.y, n.x, n.y, r.x, r.y, o)
    }
    function td(e, t, n, r, i, o, s) {
        s(0, e, t, n, r, Dl),
        s(1 / Wl, e, t, n, r, Ol),
        Vt(Dl, Ol, i, o, jl, Ul, Hl, Xl),
        Gl[0].set(jl),
        Gl[2 * Wl].set(Ul),
        Gl[2 * Wl - 1].set(Hl),
        Gl[1].set(Xl);
        for (var a = 2; a < Wl; ++a) s(a / Wl, e, t, n, r, Bl),
        Vt(Ol, Bl, i * (1 - a / Wl), o, jl, Ul, Hl, Xl),
        jl.set(Hl),
        Ul.set(Xl),
        Gl[2 * Wl - a].set(jl),
        Gl[a].set(Ul),
        Dl.set(Ol),
        Ol.set(Bl);
        Gl[Wl].set(r)
    }
    p.extend(function(e) {
        return e.modules.graphics._addShape(!1, "tapered", ql)
    }),
    p.extend(function(e) {
        e.modules.ruleRefresher = new nd(e)
    });
    var nd = function(e) {
        var n = this;
        this._graph = e.modules.graph,
        this._graphics = e.modules.graphics,
        this._events = e.modules.events,
        this._events.on({
            updateNodeData: function(e) {
                var t = e.nodes;
                return function(e, t, n) {
                    var r = n.styles,
                    i = n.filters,
                    o = t.getAdjacentNodes({
                        includeSources: !0,
                        filter: "all"
                    })._indexes,
                    s = t.getAdjacentEdges({
                        filter: "all"
                    })._indexes;
                    i && (e._graph._refreshFilterRules(!0, o), e._graph._refreshFilterRules(!1, s));
                    r && (e._graphics._computeStyleRules(!0, o), e._graphics._computeStyleRules(!1, s))
                } (n, t, {
                    styles: !0,
                    filters: !0
                })
            },
            updateEdgeData: function(e) {
                var t = e.edges;
                return function(e, t, n) {
                    var r = n.styles,
                    i = n.filters,
                    o = t.getSource().concat(t.getTarget()).dedupe(),
                    s = t._indexes;
                    i && (e._graph._refreshFilterRules(!0, o), e._graph._refreshFilterRules(!1, s));
                    r && (e._graphics._computeStyleRules(!0, o), e._graphics._computeStyleRules(!1, s))
                } (n, t, {
                    styles: !0,
                    filters: !0
                })
            }
        })
    };
    var rd = function(e) {
        var t = e.modules,
        n = t.graph,
        r = t.graphics,
        i = t.camera,
        o = t.settings;
        this._graph = n,
        this._camera = i,
        this._graphics = r,
        this._settings = o
    };
    function id(e) {
        return "object" != typeof e || null === e || Array.isArray(e) ? {
            path: sd(e),
            unwindArrays: !1
        }: {
            path: sd(e.path),
            unwindArrays: !!e.unwindArrays
        }
    }
    rd.prototype.getNodesInScreenByDistance = function(t) {
        var e = t.getPositionOnScreen(),
        i = e.x,
        o = e.y;
        return this._graph.getNodes().filter(function(e) {
            return e.isInScreen() && e !== t
        }).sort(function(e, t) {
            var n = e.getPositionOnScreen(),
            r = t.getPositionOnScreen();
            return jt(n.x, n.y, i, o) - jt(r.x, r.y, i, o)
        })
    },
    rd.prototype.getNearestNodesForNode = function(e, t, n) {
        void 0 === t && (t = 240);
        var r = e.getPosition(),
        i = r.x,
        o = r.y;
        return this.getNearestNodes(i, o, t, n, e)
    },
    rd.prototype.getNearestNodes = function(e, t, n, r, i) {
        if (r) {
            var o = this._camera.screenToGraphVector({
                x: n,
                y: n
            });
            n = jt(0, 0, o.x, o.y)
        }
        return this._getNearestNodes(e, t, n, i)
    },
    rd.prototype._getNearestNodes = function(e, t, n, r) {
        for (var i = [], o = n * n, s = r ? r._index: 0, a = this._graph._getIndexes(!0), u = this._graph.getAttributes(!0, ["excluded", "x", "y"]), l = u[0], d = u[1], c = u[2], h = this._graphics._getAttributeArray(!0, "hidden"), f = 0, p = a.length; f < p; f++) {
            var g = a[f];
            if (g !== s && !h.get(g) && !l.get(g)) {
                var v = e - d._buffer[g],
                y = t - c._buffer[g];
                v * v + y * y <= o && i.push(g)
            }
        }
        return new this._graph.NodeList(i)
    },
    rd.prototype.getPointsForEdge = function(e, t) {
        void 0 === t && (t = !1);
        var n, r = this._graph.getEdgeAttribute("curvature"),
        i = e.getSource(),
        o = e.getTarget(),
        s = i.getPosition(),
        a = o.getPosition(),
        u = r.get(e._index),
        l = s,
        d = a;
        if (t && (l = this._camera.graphToScreenCoordinates(l), d = this._camera.graphToScreenCoordinates(d)), 0 === u && i !== o) n = [l, d];
        else if (n = new Array(10), i !== o) {
            var c = aa(s.x, s.y, a.x, a.y, u);
            t && (c = this._camera.graphToScreenCoordinates(c));
            for (var h = 0; h < 10; ++h) n[h] = Xn(h / 9, l.x, l.y, d.x, d.y, c.x, c.y)
        } else {
            var f = ua(s.x, s.y, u, i.getAttribute("radius")),
            p = {
                x: f.x1,
                y: f.y1
            },
            g = {
                x: f.x2,
                y: f.y2
            };
            t && (p = this._camera.graphToScreenCoordinates(p), g = this._camera.graphToScreenCoordinates(g));
            for (var v = 0; v < 10; ++v) n[v] = Yn(v / 9, l.x, l.y, d.x, d.y, p.x, p.y, g.x, g.y)
        }
        return n
    },
    rd.prototype.getNodesByBoundingBox = function(e, t, n, r, i) {
        var o;
        i && (e = (o = this._camera.screenToGraphVector({
            x: e,
            y: t
        })).x, t = o.y, n = (o = this._camera.screenToGraphVector({
            x: n,
            y: r
        })).x, r = o.y);
        for (var s = this._graph,
        a = s._getIndexes(!0), u = [], l = s.getAttributes(!0, ["excluded", "x", "y"]), d = l[0], c = l[1], h = l[2], f = this._graphics._getAttributeArray(!0, "hidden"), p = 0, g = a.length; p < g; p++) {
            var v = a[p];
            if (!f.get(v) && !d.get(v)) {
                var y = c._buffer[v],
                m = h._buffer[v];
                e <= y && y <= n && t <= m && m <= r && u.push(v)
            }
        }
        return new s.NodeList(u)
    },
    p.extend(function(e) {
        var t = new rd(e);
        e.modules.spatial = t
    }),
    p.extend(function(e) {
        var t = new od(e);
        e.modules.watcher = t,
        e.schema = {
            watchNodeObjectProperty: function(e) {
                return t.watchNodeObjectProperty(e)
            },
            watchEdgeObjectProperty: function(e) {
                return t.watchEdgeObjectProperty(e)
            },
            watchNodeNonObjectProperty: function(e) {
                return t.watchNodeNonObjectProperty(e)
            },
            watchEdgeNonObjectProperty: function(e) {
                return t.watchEdgeNonObjectProperty(e)
            }
        }
    });
    var od = function(e) {
        var _ = this;
        this._data = e.modules.data,
        this._graph = e.modules.graph,
        this._events = e.modules.events,
        this._infoWatchers = [],
        this._propWatchers = [],
        this._toUpdate = [],
        this._ogma = e,
        this._events.on({
            "refreshNodeFilters refreshEdgeFilters": function(e) {
                for (var t = e.isNode,
                n = e.newlyIncluded,
                r = e.newlyExcluded,
                i = 0,
                o = _._infoWatchers.length; i < o; i++) {
                    var s = _._infoWatchers[i];
                    s.isNode === t && (fd(s, n.getData(s.property)), pd(s, r.getData(s.property)), ud(s))
                }
            },
            "updateNodeData updateEdgeData": function(e) {
                for (var t = e.isNode,
                a = e.changes,
                n = 0; n < _._infoWatchers.length; ++n) {
                    var r = _._infoWatchers[n],
                    i = r.property;
                    if (r.isNode === t) for (var o = 0; o < a.length; ++o) {
                        var s = a[o],
                        u = dd(s.property || [], i);
                        if (u) {
                            for (var l = s.nodes || s.edges,
                            d = [], c = [], h = 0; h < l.size; ++h) {
                                l.get(h).isExcluded() || (d.push(ze(s.newValues[h], u)), c.push(ze(s.previousValues[h], u)))
                            }
                            d.length && (fd(r, d), pd(r, c), ud(r))
                        }
                    }
                }
                for (var f = 0,
                p = _._propWatchers.length; f < p; f++) for (var g = _._propWatchers[f], v = g._path, y = function(e) {
                    var t = a[e],
                    n = t.property,
                    r = t.nodes,
                    i = t.edges,
                    o = r || i,
                    s = o.isNode; (!n || n.length <= v.length + 1 && v.map(function(e, t) {
                        return e === n[t]
                    }).reduce(function(e, t) {
                        return e && t
                    },
                    !0)) && md(g, s, o)
                },
                m = 0; m < a.length; ++m) y(m)
            },
            "addNodes addEdges": function(e) {
                for (var t = e.nodes,
                n = e.edges,
                r = t || n,
                i = function(e) {
                    var t = _._infoWatchers[e];
                    t.isNode === r.isNode && setTimeout(function() {
                        var e = ad(r, t.property);
                        e.length && (fd(t, e), ud(t))
                    },
                    0)
                },
                o = 0; o < _._infoWatchers.length; ++o) i(o);
                for (var s = 0,
                a = _._propWatchers.length; s < a; s++) md(_._propWatchers[s], r.isNode, r)
            },
            "beforeRemoveNodes beforeRemoveEdges": function(e) {
                for (var t = e.nodes,
                n = e.edges,
                r = t || n,
                i = function(e) {
                    var t = _._infoWatchers[e];
                    if (t.isNode === r.isNode) {
                        var n = ad(r, t.property);
                        n.length && setTimeout(function() {
                            pd(t, n),
                            ud(t)
                        },
                        0)
                    }
                },
                o = 0; o < _._infoWatchers.length; ++o) i(o)
            },
            kill: function() {
                _._propWatchers.forEach(function(e) {
                    return e.kill()
                }),
                _._infoWatchers = [],
                _._propWatchers = []
            }
        })
    };
    function sd(e) {
        return null == e ? [] : ae(e)
    }
    function ad(e, t) {
        for (var n = new Array(e.size), r = 0, i = 0; i < e.size; ++i) {
            var o = e.get(i);
            o.isExcluded() || (n[r] = o.getData(t), r += 1)
        }
        return n.length = r,
        n
    }
    function ud(e) {
        for (var t = 0; t < e.onChange.length; ++t) e.onChange[t](e.info)
    }
    function ld(e, t) {
        if (e.length !== t.length) return ! 1;
        for (var n = 0; n < e.length; ++n) if (e[n] !== t[n]) return ! 1;
        return ! 0
    }
    function dd(e, t) {
        if (e.length > t.length) return null;
        for (var n = 0; n < e.length; ++n) if (e[n] !== t[n]) return null;
        return t.slice(n)
    }
    function cd(e, t, n) {
        for (var r = 0; r < e._infoWatchers.length; ++r) {
            var i = e._infoWatchers[r];
            if (i.isNode === t && ld(i.property, n)) return i
        }
        return null
    }
    od.prototype._watchPropertyInformation = function(e, t, n, r) {
        var i, o, s, a, u, l = cd(this, e, t);
        return l || (i = this, a = r, (u = {
            isNode: o = e,
            property: s = t,
            nbNumbers: 0,
            nbAny: 0,
            nbTotal: 0,
            values: new It,
            boundaries: null,
            onChange: [],
            unwindArrays: a,
            info: void 0
        }).info = new hd(u), fd(u, i._ogma[o ? "getNodes": "getEdges"]().getData(s)), l = u),
        n && (l.onChange.push(n), this._infoWatchers.push(l)),
        l.info
    },
    od.prototype._unwatchPropertyInformation = function(e, t, n) {
        var r = cd(this, e, t);
        if (r) {
            var i = r.onChange,
            o = i.indexOf(n); - 1 !== o && (i.splice(o, 1), 0 === i.length && this._infoWatchers.splice(this._infoWatchers.indexOf(r, 1)))
        }
    },
    od.prototype._watchObjectProperty = function(e, t) {
        var n = t.path,
        r = t.unwindArrays,
        i = new vd(this, e, n, r);
        return this._propWatchers.push(i),
        md(i, e, this._graph[e ? "getNodes": "getEdges"]()),
        i
    },
    od.prototype._watchNonObjectProperty = function(e, t) {
        var n = t.path,
        r = t.unwindArrays;
        return new yd(this, e, n, r)
    },
    od.prototype.watchNodeObjectProperty = function(e) {
        return this._watchObjectProperty(!0, id(e))
    },
    od.prototype.watchEdgeObjectProperty = function(e) {
        return this._watchObjectProperty(!1, id(e))
    },
    od.prototype.watchNodeNonObjectProperty = function(e) {
        return this._watchNonObjectProperty(!0, id(e))
    },
    od.prototype.watchEdgeNonObjectProperty = function(e) {
        return this._watchNonObjectProperty(!1, id(e))
    };
    var hd = function(e) {
        this._watcher = e
    };
    function fd(e, t, n) {
        for (var r = e.values,
        i = !n && e.unwindArrays,
        o = 0; o < t.length; ++o) {
            var s = t[o];
            if (n || void 0 === s || (e.nbTotal += 1), i && Array.isArray(s)) fd(e, s, !0);
            else {
                var a = r.get(s);
                a ? r.set(s, a + 1) : (r.set(s, 1), gd(s) ? (e.boundaries ? s < e.boundaries.min ? e.boundaries.min = s: s > e.boundaries.max && (e.boundaries.max = s) : e.boundaries = {
                    min: s,
                    max: s
                },
                e.nbNumbers += 1) : void 0 !== s && (e.nbAny += 1))
            }
        }
    }
    function pd(e, t, n) {
        for (var r = e.values,
        i = !n && e.unwindArrays,
        o = e.boundaries,
        s = !1,
        a = 0; a < t.length; ++a) {
            var u = t[a];
            if (n || void 0 === u || (e.nbTotal -= 1), i && Array.isArray(u)) s |= pd(e, u, !0);
            else {
                var l = r.get(u);
                1 < l ? r.set(u, l - 1) : (r.delete(u), gd(u) ? (e.nbNumbers -= 1, !o || o.min !== u && o.max !== u || (s = !0)) : void 0 !== u && (e.nbAny -= 1))
            }
        }
        return ! n && s && (e.boundaries = function(e) {
            for (var t = void 0,
            n = void 0,
            r = 0; r < e.length; ++r) {
                var i = e[r];
                gd(i) && ((void 0 === t || i < t) && (t = i), (void 0 === n || n < i) && (n = i))
            }
            return void 0 === t ? null: {
                min: t,
                max: n
            }
        } (r.keys())),
        s
    }
    function gd(e) {
        return "number" == typeof e && isFinite(e)
    }
    hd.prototype.isNode = function() {
        return this._watcher.isNode
    },
    hd.prototype.getPath = function() {
        return this._watcher.property.slice()
    },
    hd.prototype.getBoundaries = function() {
        var e = this._watcher.boundaries;
        return e ? {
            min: e.min,
            max: e.max
        }: null
    },
    hd.prototype.getValues = function() {
        return this._watcher.values.keys()
    },
    hd.prototype.getValueCount = function(e) {
        return this._watcher.values.get(e) || 0
    },
    hd.prototype.getCount = function() {
        return this._watcher.nbTotal
    },
    hd.prototype.getType = function() {
        return 0 < this._watcher.nbAny ? "any": 0 < this._watcher.nbNumbers ? "number": "undefined"
    };
    var vd = function(e, t, n, r) {
        this._module = e,
        this._isNode = t,
        this._path = n,
        this._unwindArrays = r,
        this._propertyList = [],
        this._properties = {},
        this._onAddHandlers = [],
        this._onRemoveHandlers = [],
        this._onUpdateHandlers = []
    };
    vd.prototype.onPropertyAdded = function(e) {
        return this._onAddHandlers.push(e),
        this
    },
    vd.prototype.onPropertyRemoved = function(e) {
        return this._onRemoveHandlers.push(e),
        this
    },
    vd.prototype.onPropertyUpdated = function(e) {
        return this._onUpdateHandlers.push(e),
        this
    },
    vd.prototype.getPath = function() {
        return this._path.slice()
    },
    vd.prototype.getProperties = function() {
        return this._propertyList.slice()
    },
    vd.prototype.getPropertyInfo = function(e) {
        var t = this._properties[e];
        return t ? t.info: null
    },
    vd.prototype.kill = function() {
        var i;
        Ee((i = this)._properties,
        function(e, t) {
            var n = e.handler,
            r = i._path.concat([t]);
            i._module._unwatchPropertyInformation(i._isNode, r, n)
        }),
        i._propertyList = void 0,
        i._properties = void 0,
        i._onAddHandlers = void 0,
        i._onRemoveHandlers = void 0,
        i._onUpdateHandlers = void 0,
        i._module._propWatchers.splice(i._module._propWatchers.indexOf(i), 1)
    };
    var yd = function(e, t, n, r) {
        var i = this;
        this._module = e,
        this._isNode = t,
        this._path = n || [],
        this._onUpdateHandlers = [],
        this._unwindArrays = r,
        this._triggerUpdate = function(e) {
            for (var t = 0; t < i._onUpdateHandlers.length; ++t) i._onUpdateHandlers[t](e)
        },
        this._info = e._watchPropertyInformation(this._isNode, this._path, this._triggerUpdate, this._unwindArrays)
    };
    function md(e, t, n) {
        if (t === e._isNode) for (var r = n.getData(e._path), i = 0, o = r.length; i < o; i++) {
            var s = r[i];
            if (_e(s)) for (var a = Object.keys(s), u = 0, l = a.length; u < l; u++) _d(e, a[u])
        }
    }
    function _d(t, n) {
        if (!t._properties[n]) {
            var e = t._path.concat([n]),
            r = function(e) {
                return bd(t, n)
            },
            i = t._module._watchPropertyInformation(t._isNode, e, r, t._unwindArrays);
            t._properties[n] = {
                handler: r,
                info: i
            },
            bd(t, n)
        }
    }
    function bd(e, t) {
        var n = e._properties[t].info,
        r = e._propertyList.indexOf(t),
        i = -1 !== r,
        o = "undefined" !== n.getType(); ! i && o ? (e._propertyList.push(t), xd(e, "_onAddHandlers", t, n)) : i && !o ? (e._propertyList.splice(r, 1), xd(e, "_onRemoveHandlers", t, n)) : i && o && xd(e, "_onUpdateHandlers", t, n)
    }
    function xd(e, t, n, r) {
        for (var i = e[t], o = 0, s = i.length; o < s; o++) i[o](n, r)
    }
    yd.prototype.onUpdate = function(e) {
        this._onUpdateHandlers.push(e)
    },
    yd.prototype.getPropertyInfo = function() {
        return this._info
    },
    yd.prototype.getPath = function() {
        return this._path.slice()
    },
    yd.prototype.kill = function() {
        this._module._unwatchPropertyInformation(this._isNode, this._path, this._triggerUpdate)
    },
    p.extend(function(e) {
        var t = new wd(e);
        e.modules.rules = t,
        e.rules = {
            map: function(e) {
                return t.createMapping(e)
            },
            slices: function(e) {
                return t.createSlices(e)
            },
            template: function(e) {
                return t.createTemplate(e)
            }
        }
    });
    var wd = function(e) {
        this._ogma = e,
        this._graph = e.modules.graph,
        this._graphics = e.modules.graphics,
        this._watcher = e.modules.watcher,
        this._data = e.modules.data,
        this._events = e.modules.events
    };
    function Ad(n, r, i) {
        var o = {
            field: r,
            mapping: null
        },
        s = function(e) {
            o.mapping = i(e),
            n._graphics._computeStyleRules(e.isNode()),
            Ed(n)
        },
        e = function(e) {
            var t = e.getData(r),
            n = o.mapping;
            return Re(t) ? t.map(function(e) {
                return n[e]
            }) : n[t]
        };
        return e.onAdd = function(e) {
            var t = n._watcher._watchPropertyInformation(e, r, s, !0);
            o.mapping = i(t),
            Ed(n)
        },
        e.onRemove = function(e) {
            n._watcher._unwatchPropertyInformation(e, r, s),
            Ed(n)
        },
        e.metaData = o,
        e.getMapping = function() {
            return Ie(o.mapping)
        },
        e
    }
    function Ed(e) {
        e._ogma.modules.legend.refresh()
    }
    wd.prototype.createMapping = function(e) {
        void 0 === e && (e = {});
        var t = e.field,
        n = e.values;
        void 0 === n && (n = {});
        var r = e.fallback;
        if (t = ae(t), Re(r) || (r = [r]), 0 === r.length && (r = [void 0]), "object" != typeof n || null === n || Re(n)) throw new Error('"mapping" should be an object');
        return Ad(this, t,
        function(e) {
            return function(e, t, n) {
                e = e.map(function(e) {
                    return "" + e
                }).sort();
                for (var r = 0,
                i = {},
                o = 0; o < e.length; ++o) {
                    var s = e[o];
                    s in t ? i[s] = t[s] : (i[s] = n[r], r = (r + 1) % n.length)
                }
                return i
            } (e.getValues(), n, r)
        })
    },
    wd.prototype.createSlices = function(e) {
        void 0 === e && (e = {});
        var t = e.field,
        n = e.fallback,
        r = e.stops;
        void 0 === r && (r = {});
        var i = e.values;
        void 0 === i && (i = {
            nbSlices: 7
        });
        var o = e.reverse;
        return void 0 === o && (o = !1),
        t = ae(t),
        i.nbSlices || (i.nbSlices = 7),
        Ad(this, t,
        function(e) {
            return function(e, t, n, r, i, o) {
                var s = {};
                if (t) {
                    var a, u, l = Re(i) ? i.length: i.nbSlices;
                    if (Re(r)) a = r.slice();
                    else {
                        var d = r.min,
                        c = r.max;
                        void 0 !== d && void 0 !== c || (d = t.min, c = t.max);
                        var h = (c - d) / l;
                        a = [];
                        for (var f = 1; f < l; ++f) a.push(d + h * f)
                    }
                    if (Re(i)) u = i;
                    else {
                        var p = i.min,
                        g = i.max,
                        v = a.length + 1,
                        y = (g - p) / a.length;
                        u = [];
                        for (var m = 0; m < v; ++m) u.push(p + m * y)
                    }
                    if (o && u.reverse(), a.length !== u.length - 1) throw new Error("there should be exactly one more value that stops");
                    for (var _ = 0; _ < e.length; ++_) {
                        var b = e[_],
                        x = +b;
                        if (isFinite(x)) {
                            for (var w = 0; w < a.length && a[w] <= b; ++w);
                            s[b] = u[w]
                        } else s[b] = n
                    }
                } else for (var A = 0; A < e.length; ++A) s[e[A]] = n;
                return s
            } (e.getValues(), e.getBoundaries(), n, r, i, o)
        })
    },
    wd.prototype.createTemplate = function(e) {
        if ("string" != typeof e) throw new TypeError('"template" should be a string');
        for (var r = [], t = 0;;) {
            var n = -1,
            i = e.indexOf("{{", t);
            if ( - 1 !== i && (n = e.indexOf("}}", i + 2)), -1 === n) {
                r.push(e.slice(t));
                break
            }
            r.push(e.substring(t, i)),
            r.push(e.substring(i + 2, n)),
            t = n + 2
        }
        return function(e) {
            for (var t = r[0], n = 1; n < r.length; n += 2) t += e.getData(r[n]),
            t += r[n + 1];
            return t
        }
    };
    var Cd = 40,
    Sd = "quadraticInOut",
    Id = 100;
    p.atInit(function(e) {
        e.view.locateGraph()
    }),
    p.extend(function(e) {
        var n = new Td(e),
        t = e.Node,
        r = e.Edge,
        i = e.NodeList,
        o = e.EdgeList;
        e.modules.locate = n,
        t.prototype.locate = function(e) {
            return n.locateNodes(this, e)
        },
        i.prototype.locate = function(e) {
            return n.locateNodes(this, e)
        },
        r.prototype.locate = function(e) {
            return n.locateEdges(this, e)
        },
        o.prototype.locate = function(e) {
            return n.locateEdges(this, e)
        },
        t.prototype.getBoundingBox = function() {
            return n.nodesBoundingBox(this)
        },
        i.prototype.getBoundingBox = function() {
            return n.nodesBoundingBox(this)
        },
        r.prototype.getBoundingBox = function() {
            return n.edgesBoundingBox(this)
        },
        o.prototype.getBoundingBox = function() {
            return n.edgesBoundingBox(this)
        },
        e.view.locateGraph = function(e) {
            return n.locateNodes(void 0, e)
        },
        e.view.locateRawGraph = function(e, t) {
            return n.locateRawGraph(e.nodes, t)
        },
        e.view.getGraphBoundingBox = function() {
            return n.graphBoundingBox()
        }
    });
    var Td = function(e) {
        this._ogma = e,
        this._camera = e.modules.camera,
        this._graph = e.modules.graph,
        this._settings = e.modules.settings
    };
    function Nd(e, t, n) {
        void 0 === n && (n = {});
        var r = n.padding;
        void 0 === r && (r = {});
        var i = n.easing;
        void 0 === i && (i = Sd);
        var o = n.duration;
        void 0 === o && (o = 0);
        var s, a, u, l, d, c, h, f = e._camera,
        p = Ld(e, t, r),
        g = p.x,
        v = p.y,
        y = p.zoom,
        m = y / f.zoom;
        return s = f,
        a = g,
        u = v,
        l = y,
        d = o,
        c = i,
        1.01 < (h = m) ? (s.setCenter({
            x: a,
            y: u
        },
        {
            duration: d,
            easing: c
        }), s.setZoom(l, {
            duration: d,
            easing: c,
            startAfter: .5
        })) : h < .99 ? (s.setCenter({
            x: a,
            y: u
        },
        {
            duration: d,
            easing: c,
            startAfter: .5
        }), s.setZoom(l, {
            duration: d,
            easing: c
        })) : s.setCenter({
            x: a,
            y: u
        },
        {
            duration: d,
            easing: c
        })
    }
    function kd(e, t, n, r) {
        return 0 === n.length ? Promise.resolve() : Nd(e, e[t ? "_nodesBoundingBoxes": "_edgesBoundingBox"](n), r)
    }
    function Ld(e, t, n) {
        var r, i, o, s;
        "number" == typeof n ? s = o = i = r = n: (r = Ae(n.left, Cd), i = Ae(n.right, Cd), o = Ae(n.top, Cd), s = Ae(n.bottom, Cd));
        var a = (e._camera.width - r - i) / (t.maxX - t.minX),
        u = (e._camera.height - o - s) / (t.maxY - t.minY),
        l = a < u ? a: u,
        d = e._settings.get("maxZoom"),
        c = e._settings.get("minZoom");
        return Id && t.maxSize * l > Id && (l = Id / t.maxSize),
        d < l ? l = d: l < c && (l = c),
        {
            x: t.cx + (i - r) / (2 * l),
            y: t.cy + (s - o) / (2 * l),
            zoom: l
        }
    }
    Td.prototype.locateNodes = function(e, t) {
        return void 0 === t && (t = {}),
        kd(this, !0, this._graph._getIndexes(!0, e), t)
    },
    Td.prototype.locateEdges = function(e, t) {
        return void 0 === t && (t = {}),
        kd(this, !1, this._graph._getIndexes(!1, e), t)
    },
    Td.prototype.locateRawGraph = function(e, t) {
        return Nd(this,
        function(e) {
            for (var t = 1 / 0,
            n = 1 / 0,
            r = -1 / 0,
            i = -1 / 0,
            o = 0; o < e.length; ++o) {
                var s = e[o],
                a = s.x || 0,
                u = s.y || 0,
                l = +(s.style && s.style.size) || 5;
                t = Math.min(t, a - l),
                n = Math.min(n, u - l),
                r = Math.max(r, a + l),
                i = Math.max(i, u + l)
            }
            return {
                minX: t,
                minY: n,
                maxX: r,
                maxY: i,
                cx: t + (r - t) / 2,
                cy: n + (i - n) / 2,
                width: r - t,
                height: i - n
            }
        } (e), t)
    },
    Td.prototype.graphBoundingBox = function() {
        return this._nodesBoundingBoxes(this._graph._filter(!0, this._graph._getIndexes(!0), "visible"))
    },
    Td.prototype.nodesBoundingBox = function(e) {
        return e ? (Re(e) && (e = this._ogma.getNodes(e)), this._nodesBoundingBoxes(e._indexes)) : this.graphBoundingBox()
    },
    Td.prototype.edgesBoundingBox = function(e) {
        return this._edgesBoundingBox(e._indexes)
    },
    Td.prototype._nodesBoundingBoxes = function(e) {
        for (var t = 1 / 0,
        n = 1 / 0,
        r = -1 / 0,
        i = -1 / 0,
        o = 0,
        s = 1 / 0,
        a = 0,
        u = this._graph.getAttributes(!0, ["radius", "x", "y", "hidden", "excluded"]), l = u[0], d = u[1], c = u[2], h = u[3], f = u[4], p = 0, g = e.length; p < g; ++p) {
            var v = e[p],
            y = h.get(v),
            m = f.get(v);
            if (!y && !m) {
                var _ = l.get(v),
                b = d.get(v),
                x = c.get(v);
                o = Math.max(o, _),
                s = Math.min(s, _),
                t = Math.min(t, b - _),
                n = Math.min(n, x - _),
                r = Math.max(r, b + _),
                i = Math.max(i, x + _),
                a += 1
            }
        }
        return {
            minX: t,
            minY: n,
            maxX: r,
            maxY: i,
            cx: t + (r - t) / 2,
            cy: n + (i - n) / 2,
            width: r - t,
            height: i - n,
            sideSize: Math.max(r - t, i - n),
            maxSize: o,
            minSize: s,
            count: a
        }
    },
    Td.prototype._edgesBoundingBox = function(e) {
        for (var t = 1 / 0,
        n = 1 / 0,
        r = -1 / 0,
        i = -1 / 0,
        o = 0,
        s = this._graph.getAttributes(!1, ["source", "target", "curvature", "excluded", "hidden"]), a = s[0], u = s[1], l = s[2], d = s[3], c = s[4], h = this._graph.getAttributes(!0, ["x", "y", "radius"]), f = h[0], p = h[1], g = h[2], v = 0, y = e.length; v < y; ++v) {
            var m = e[v],
            _ = a.get(m),
            b = u.get(m),
            x = g.get(_),
            w = d.get(m),
            A = c.get(m),
            E = f.get(_),
            C = p.get(_),
            S = g.get(b),
            I = f.get(b),
            T = p.get(b),
            N = l.get(m);
            if (!A && !w) if (o = Math.max(o, Math.max(x, S)), _ === b) {
                var k = x + N;
                t = Math.min(t, E - Gn * k),
                n = Math.min(n, C - x),
                r = Math.max(r, E + x),
                i = Math.max(i, C + Gn * k)
            } else t = Math.min(t, Math.min(E - x, I - S)),
            n = Math.min(n, Math.min(C - x, T - S)),
            r = Math.max(r, Math.max(E + x, I + S)),
            i = Math.max(i, Math.max(C + x, T + S))
        }
        return {
            minX: t,
            minY: n,
            maxX: r,
            maxY: i,
            cx: (r + t) / 2,
            cy: (i + n) / 2,
            width: r - t,
            height: i - n,
            maxSize: o
        }
    },
    Td.prototype._graphInCamera = function() {
        var e = this.nodesBoundingBox(this._graph._allIndexes(!0)),
        t = this._camera,
        n = t.width / t.zoom / 2,
        r = t.height / t.zoom / 2,
        i = t.x - n,
        o = t.y - r,
        s = t.x + n,
        a = t.y + r,
        u = e.minX,
        l = e.minY,
        d = e.maxX,
        c = e.maxY;
        return (i < u && u < s || u < i && i < d) && (o < l && l < a || l < o && o < c)
    },
    Td.prototype.computeCameraConfig = function(e, t) {
        return void 0 === t && (t = {}),
        Ld(this, this.nodesBoundingBox(e), t)
    },
    Td.prototype._computeConfigForBounds = function(e, t) {
        return void 0 === t && (t = {}),
        Ld(this, e, t)
    },
    p.extend(function(e) {
        e.modules.imports = new Rd(e),
        e.fetch = function(e) {
            return vt(e)
        }
    });
    var Rd = function(e) {
        this._ogma = e,
        this._graph = e.modules.graph,
        this._locate = e.modules.locate,
        this._render = e.modules.render,
        this._camera = e.modules.camera,
        this._importers = {}
    };
    Rd.prototype.from = function(e, n) {
        var r = this._importers[e];
        if (!r) throw new Error(e + " is not a valid importer.");
        return new Promise(function(e, t) {
            try {
                e(r.translate(n))
            } catch(e) {
                t(e)
            }
        })
    },
    Rd.prototype.register = function(e, t) {
        "function" == typeof t && (t = {
            translate: t,
            webWorkerCompatible: !1
        }),
        ke(this._importers, e, t, "importer")
    };
    var zd = ec(" "),
    Md = ec("<"),
    Pd = ec(">"),
    Fd = ec('"'),
    Dd = ec("\n"),
    Od = ec("\r"),
    Bd = ec("/"),
    jd = ec("\\"),
    Ud = ec("a"),
    Hd = ec("z"),
    Xd = ec("A"),
    Wd = ec("Z"),
    Gd = ec("0"),
    qd = ec("9"),
    Yd = ec(":"),
    Vd = -1,
    $d = -2,
    Zd = -3,
    Qd = -4;
    function Jd(e, t, n, r) {
        var i = r.length;
        if (n - t !== i) return ! 1;
        for (var o = 0; o < i; ++o) if (e[t + o] !== r[o]) return ! 1;
        return ! 0
    }
    function Kd(e, t, n, r) {
        for (var i = e.length,
        o = 0; o < i; ++o) if (Jd(t, n, r, e[o])) return o;
        return e.push(t.slice(n, r)),
        i
    }
    function ec(e) {
        return e.charCodeAt(0)
    }
    function tc(e, t, n) {
        var r, i, o, s, a, u;
        if ((r = t[n = rc(t, n)]) === Pd || r === Bd) return n;
        for (n = ic(t, i = n), s = t, a = i, u = n, o = Kd(e.attributes, s, a, u); t[n] !== Fd;)++n;
        for (i = ++n; (r = t[n]) !== Fd;) r === jd && ++n,
        ++n;
        return e.tokens.push(Zd, o, i, n),
        n + 1
    }
    function nc(e) {
        return e === zd || e === Dd || e === Od
    }
    function rc(e, t) {
        for (; nc(e[t]);)++t;
        return t
    }
    function ic(e, t) {
        for (; n = e[t], Ud <= n && n <= Hd || Xd <= n && n <= Wd || n === Yd || Gd <= n && n <= qd;)++t;
        var n;
        return t
    }
    function oc(e, t) {
        var n = ["this.id = undefined;", "this.attributes = {", "  text: undefined,", "  color: undefined,", "  " + (e ? "radius": "width") + ": undefined", e ? "  ,x: undefined": "", e ? "  ,y: undefined": "", "};"];
        e || n.push("this.source = undefined;", "this.target = undefined;");
        var r = Object.keys(t);
        r.length && n.push("  this.data = {");
        for (var i = 0; i < r.length; ++i) {
            var o = t[r[i]],
            s = o.title;
            n.push('  "' + s + '": ' + (void 0 !== o.
        default ? JSON.stringify(o.
        default):
            void 0) + (i === r.length - 1 ? "": ","))
        }
        return r.length && n.push("};"),
        new Function(n.join("\n"))
    }
    function sc(e) {
        return - 1 === e.indexOf("\\") ? e: e = e.replace(/\\"/g, '"')
    }
    function ac(e) {
        if ( - 1 === e.indexOf("<gexf")) throw new Error("not a GEXF file");
        var t = function(e, t) {
            var n, r, i, o, s = e.length,
            a = {
                tags: [],
                attributes: [],
                tokens: []
            },
            u = a.tokens;
            for (t = rc(e, t); t < s;) {
                if ((o = e[t]) === Md) {
                    if (e[t = rc(e, ++t)] === Bd) for (u.push($d); e[++t] !== Pd;);
                    else {
                        for (t = ic(e, n = t), i = Kd(a.tags, e, n, t), u.push(Vd, i), o = e[t]; o !== Pd && o !== Bd;) o = e[t = tc(a, e, t)];
                        if (o === Bd) for (u.push($d); e[++t] !== Pd;);
                    }
                    t += 1
                } else {
                    for (n = t; e[++t] !== Md;);
                    for (r = t - 1; nc(e[r]);)--r;
                    u.push(Qd, n, r + 1)
                }
                t = rc(e, t)
            }
            return a
        } (function(e) {
            for (var t = new Int32Array(e.length), n = 0, r = e.length; n < r; ++n) t[n] = e.charCodeAt(n);
            return t
        } (e), e.indexOf("<gexf ")),
        r = {},
        i = [],
        o = {},
        s = [];
        t.tags.forEach(function(e, t) {
            var n = String.fromCharCode.apply(null, e);
            r[n] = t,
            i.push(n)
        }),
        t.attributes.forEach(function(e, t) {
            var n = String.fromCharCode.apply(null, e);
            o[n] = t,
            s.push(n)
        });
        for (var n = r.attributes,
        a = r.attribute,
        u = r.node,
        l = r.edge,
        d = r.
    default,
        c = r["viz:position"], h = r["viz:size"], f = r["viz:color"], p = r.attvalue, g = o.class, v = o.id, y = o.type, m = o.title, _ = o.label, b = o.source, x = o.target, w = o.x, A = o.y, E = o.r, C = o.g, S = o.b, I = o.a, T = o.value, N = o.
        for, k = o.weight, L = {
            float: 1,
            double: 1,
            integer: 2,
            boolean: 3,
            string: 4,
            "list-string": 5
        },
        R = 0, z = t.tokens, M = z.length, P = new Array(16), F = 0, D = 0, O = 0, B = !0, j = {},
        U = {},
        H = null, X = null, W = null, G = void 0, q = null, Y = 0, V = 0, $ = 0, Z = 1, Q = null, J = void 0, K = !1, ee = !0, te = null, ne = null, re = [], ie = [], oe = 0, se = null; R < M;) {
            var ae = z[R];
            if (ae === Vd) D = F,
            F = z[R + 1],
            P[O] = F,
            O += 1,
            F === u ? (te || (te = oc(!0, j)), q = new te, ee = !0, se = j) : F === l && (ne || (ne = oc(!1, U)), q = new ne, ee = !1, se = U),
            R += 2;
            else if (ae === $d) {
                if (H && F === a) {
                    se = B ? j: U;
                    var ue = L[X],
                    le = G;
                    le && (1 === ue ? le = +le: 2 === ue ? le = 0 | +le: 3 === ue ? le = "true" === le: 5 === ue && (le = le.split(" ").filter(function(e) {
                        return e
                    }))),
                    se[H] = {
                        title: W || H,
                        type: ue,
                    default:
                        le
                    },
                    X = W = H = null,
                    G = void 0
                } else if (F === u && 4 === O) K && (q.attributes.color = "rgba(" + Y + ", " + V + ", " + $ + ", " + Z + ")", $ = V = Y = 0, K = !(Z = 1)),
                q.id || (q.id = ++oe),
                re.push(q);
                else if (F === l && 4 === O) q.id || (q.id = ++oe),
                ie.push(q);
                else if (F === p && 6 === O && Q) {
                    var de = (ee ? j: U)[Q];
                    de && (void 0 === J ? J = de.
                default:
                    (ue = de.type) && (J = 1 === ue ? +J: 2 === ue ? 0 | +J: 3 === ue ? "true" === J: 5 === ue ? J.split(" ").filter(function(e) {
                        return e
                    }).map(function(e) {
                        return sc(e)
                    }) : sc(J)), q.data[se[Q].title] = J),
                    J = Q = null
                }
                F = D,
                D = P[(O -= 1) - 2],
                R += 1
            } else if (ae === Zd) {
                var ce = z[R + 1];
                le = e.substring(z[R + 2], z[R + 3]),
                F === n ? ce === g && (B = "edge" !== le && "edges" !== le) : F === a ? ce === v ? H = le: ce === y ? X = le: ce === m && (W = le) : F !== u && F !== l || 4 !== O ? F === c && 5 === O ? ce === w ? q.attributes.x = +le: ce === A && (q.attributes.y = -le) : F === f && 5 === O ? (K = !0, ce === E ? Y = le: ce === C ? V = le: ce === S ? $ = le: ce === I && (Z = le)) : F === h && 5 === O ? ce === T && (ee ? q.attributes.radius = +le: q.attributes.width = +le) : F === p && 6 === O && (ce === N || ce === v ? Q = le: ce === T && (J = le)) : ce === v ? q.id = le: ce === _ ? q.attributes.text = le: ce === b ? q.source = le: ce === x ? q.target = le: ce === k && (q.attributes.width = +le),
                R += 4
            } else {
                if (ae !== Qd) throw new Error("at index " + R + ": token " + ae);
                le = e.substring(z[R + 1], z[R + 2]),
                F === d && (G = le),
                R += 3
            }
        }
        return {
            nodes: re,
            edges: ie
        }
    }
    function uc(e, t, n) {
        n = n || t,
        t in e && (e.attributes || (e.attributes = {}), e.attributes[n] = e[t])
    }
    function lc(e) {
        for (var t = JSON.parse(e), n = t.nodes || [], r = t.edges || [], i = 0, o = n.length; i < o; ++i) {
            var s = n[i];
            "string" == typeof s.size && (s.size = +s.size),
            "string" == typeof s.x && (s.x = +s.x),
            "string" == typeof s.y && (s.y = +s.y),
            uc(s, "x"),
            uc(s, "y"),
            uc(s, "size"),
            uc(s, "color"),
            uc(s, "text")
        }
        for (var a = 0,
        u = r.length; a < u; ++a) {
            var l = r[a];
            "string" == typeof l.size && (l.size = +l.size),
            uc(l, "size", "width"),
            uc(l, "color"),
            uc(l, "text")
        }
        return t
    }
    p.extend(function(t) {
        t.modules.imports.register("gexf", {
            translate: ac,
            webWorkerCompatible: !0
        }),
        t.parse.gexf = function(e) {
            return t.modules.imports.from("gexf", e)
        },
        t.parse.gexfFromUrl = function(e) {
            return vt(e).then(function(e) {
                return t.modules.imports.from("gexf", e)
            })
        }
    }),
    p.extend(function(t) {
        t.modules.imports.register("json", {
            translate: lc,
            webWorkerCompatible: !0
        }),
        t.parse.json = function(e) {
            return t.modules.imports.from("json", e)
        },
        t.parse.jsonFromUrl = function(e) {
            return vt(e).then(function(e) {
                return t.modules.imports.from("json", e)
            })
        }
    }),
    p.extend(function(t) {
        t.modules.imports.register("neo4j", fc),
        t.parse.neo4j = function(e) {
            return t.modules.imports.from("neo4j", e)
        }
    });
    var dc = function(e) {
        return "start" in e && "end" in e && "type" in e
    },
    cc = function(e) {
        return "segments" in e
    };
    function hc(t, e) {
        var n;
        e && (Array.isArray(e) ? e.forEach(function(e) {
            return hc(t, e)
        }) : cc(e) ? (n = t, e.segments.forEach(function(e) {
            hc(n, e.start),
            hc(n, e.end),
            hc(n, e.relationship)
        })) : (!
        function(e) {
            if ("object" != typeof e || null === e) throw new Error("Ogma can only retrieve nodes and relationships from Neo4j. Please make sure that your Cypher query returns nodes and edges, not values.");
            for (var t = Object.keys(e.properties), n = 0; n < t.length; n++) {
                var r = t[n],
                i = e.properties[r];
                "object" == typeof i && "high" in i && "low" in i && (i = i.low)
            }
            "number" != typeof e.identity && (e.identity = e.identity.low, "start" in e && "end" in e && (e.start = e.start.low, e.end = e.end.low))
        } (e), dc(e) ? t.edges.push({
            id: e.identity,
            source: e.start,
            target: e.end,
            data: {
                neo4jType: e.type,
                neo4jProperties: e.properties
            }
        }) : t.nodes.push({
            id: e.identity,
            attributes: {
                x: 100 * Math.random(),
                y: 100 * Math.random()
            },
            data: {
                neo4jLabels: e.labels,
                neo4jProperties: e.properties
            }
        })))
    }
    function fc(e) {
        var t = {
            nodes: [],
            edges: []
        };
        return e.records.forEach(function(e) {
            e.forEach(function(e) {
                hc(t, e)
            })
        }),
        t
    }
    function pc(e) {
        var r = [],
        i = [],
        o = function(t) {
            if (t && "object" == typeof t) if ("vertex" === t.type) {
                var n = {};
                t.properties && Object.keys(t.properties).forEach(function(e) {
                    n[e] = t.properties[e][0].value
                }),
                r.push({
                    id: t.id + "",
                    data: {
                        id: t.id + "",
                        categories: [t.label],
                        properties: n
                    }
                })
            } else "edge" === t.type ? i.push({
                id: t.id + "",
                source: t.inV + "",
                target: t.outV + "",
                data: {
                    id: t.id + "",
                    type: t.label,
                    properties: t.properties || {}
                }
            }) : Array.isArray(t) ? t.forEach(function(e) {
                return o(e)
            }) : Object.keys(t).forEach(function(e) {
                return o(t[e])
            })
        };
        return o(e),
        {
            nodes: r,
            edges: i
        }
    }
    p.extend(function(t) {
        t.modules.imports.register("janus", pc),
        t.parse.janus = function(e) {
            return t.modules.imports.from("janus", e)
        }
    });
    var gc = {
        mouseEventRate: 15,
        wheelDebounceTime: 60,
        doubleClickTimer: 500
    };
    p.extend(function(e) {
        e.modules.mouse = new vc(e)
    });
    var vc = function(e) {
        var t = this;
        this._render = e.modules.render,
        this._settings = e.modules.settings,
        this._events = e.modules.events,
        this._domElt = null,
        this._focus = !1,
        this._wheelEnabled = !0,
        this._preventRightClick = null,
        this._binds = [],
        this._x = 0,
        this._y = 0,
        this._left = !1,
        this._middle = !1,
        this._right = !1,
        this._settings.register("mouse.enabled", !0),
        this._settings.register("mouse.wheelEnabled", !0),
        this._settings.register("mouse.disableWheelUntilMouseDown", !1),
        this._events.register(["mouseDown", "mouseUp", "mouseMove", "mouseWheel", "mouseClick", "mouseDoubleClick", "mouseLeave"]),
        Ue(this, {
            x: function() {
                return t._x
            },
            y: function() {
                return t._y
            },
            left: function() {
                return t._left
            },
            middle: function() {
                return t._middle
            },
            right: function() {
                return t._right
            }
        }),
        this._domElt = this._render.getCanvas(),
        this._domElt &&
        function(r) {
            var n = {
                left: 0,
                middle: 0,
                right: 0
            },
            i = function(e, t) {
                return r._events.fire(e, t)
            },
            o = 0,
            s = 0,
            a = 0,
            u = 0,
            l = {
                left: !1,
                middle: !1,
                right: !1
            },
            d = null;
            r._preventRightClick = function(e) {
                r._focus && e.preventDefault()
            },
            "undefined" != typeof document && document.addEventListener("contextmenu", r._preventRightClick, !1);
            var c = function(e, t) {
                void 0 === t && (t = 0),
                e ? n[e] = t: (n.left = t, n.middle = t, n.right = t)
            },
            h = function(e) {
                a = o,
                u = s;
                var t = r._domElt.getBoundingClientRect();
                o = e.clientX - t.left,
                s = e.clientY - t.top,
                d = yc[e.button],
                r._x = o,
                r._y = s,
                r._left = l.left,
                r._right = l.right,
                r._middle = l.middle
            },
            e = function(e, t, n) {
                r._binds.push(ft(r._domElt, e,
                function(e) {
                    r._settings.get("mouse.enabled") && t(e)
                },
                Ae(n, gc.mouseEventRate)))
            },
            t = ue(function(e) {
                h(e);
                var t = Math.max( - 1, Math.min(1, e.wheelDelta || -e.detail));
                i("mouseWheel", {
                    delta: t,
                    x: o,
                    y: s
                })
            },
            gc.wheelDebounceTime);
            function f(e) { ! r._settings.get("mouse.wheelEnabled") || r._settings.get("mouse.disableWheelUntilMouseDown") && !r._focus || (e.preventDefault ? e.preventDefault() : e.returnValue = !1, e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0, t(e))
            }
            e("mousewheel", f, 0),
            e("DOMMouseScroll", f, 0),
            e("mousemove",
            function(e) {
                h(e);
                var t = o - a,
                n = s - u;
                0 === t && 0 === n || (c("left"), c("right"), c("middle"), i("mouseMove", {
                    x: o,
                    y: s,
                    dx: t,
                    dy: n
                }))
            }),
            e("mouseleave",
            function() {
                l.left && (i("mouseUp", {
                    button: "left",
                    x: o,
                    y: s
                }), l.left = !1),
                l.middle && (i("mouseUp", {
                    button: "middle",
                    x: o,
                    y: s
                }), l.middle = !1),
                l.right && (i("mouseUp", {
                    button: "right",
                    x: o,
                    y: s
                }), l.right = !1),
                c("left"),
                c("right"),
                c("middle"),
                r._focus = !1,
                i("mouseLeave")
            }),
            e("mousedown",
            function(e) {
                h(e),
                r._focus = !0,
                l[d] = !0,
                n[d] += 1,
                setTimeout(c, gc.doubleClickTimer, d, 1),
                i("mouseDown", {
                    button: d,
                    x: o,
                    y: s
                })
            }),
            e("mouseup",
            function(e) {
                h(e),
                l[d] = !1,
                1 === n[d] ? i("mouseClick", {
                    button: d,
                    x: o,
                    y: s
                }) : 1 < n[d] && (i("mouseDoubleClick", {
                    button: d,
                    x: o,
                    y: s
                }), c(d)),
                i("mouseUp", {
                    button: d,
                    x: o,
                    y: s
                })
            })
        } (this),
        this._events.on({
            kill: function() {
                t._domElt &&
                function(e) {
                    "undefined" != typeof document && document.removeEventListener("contextmenu", e._preventRightClick);
                    e._preventRightClick = null,
                    e._binds.forEach(function(e) {
                        return pt(e)
                    }),
                    e._binds = []
                } (t)
            }
        })
    },
    yc = {
        0 : "left",
        1 : "middle",
        2 : "right"
    };
    p.extend(function(e) {
        var t = new mc(e);
        e.modules.virtualMouse = t,
        e.mouse = {
            move: function(e) {
                return t.move(e)
            },
            down: function(e) {
                return t.down(e)
            },
            up: function(e) {
                return t.up(e)
            },
            click: function(e) {
                return t.click(e)
            },
            doubleClick: function(e) {
                return t.doubleClick(e)
            }
        }
    });
    var mc = function(e) {
        this._ogma = e,
        this._events = e.modules.events,
        this._events.register(["virtualDown", "virtualUp", "virtualMove", "virtualClick", "virtualDoubleClick"])
    },
    _c = {
        x: {},
        y: {}
    };
    function bc() {
        return new Promise(function(e) {
            setTimeout(function() {
                return setTimeout(e)
            })
        })
    }
    _c.x.get = function() {
        return this._ogma.modules.captor._x
    },
    _c.y.get = function() {
        return this._ogma.modules.captor._y
    },
    mc.prototype.move = function(e) {
        var t = e.x,
        n = e.y,
        r = t - this.x,
        i = n - this.y;
        return this._events.fire("virtualMove", {
            x: t,
            y: n,
            dx: r,
            dy: i
        }),
        bc()
    },
    mc.prototype.down = function(e) {
        return e && this.move(e),
        this._events.fire("virtualDown", {
            x: this.x,
            y: this.y,
            button: "left"
        }),
        this._events.fire("virtualMove", {
            x: this.x,
            y: this.y,
            dx: 0,
            dy: 0
        }),
        bc()
    },
    mc.prototype.up = function(e) {
        return e && this.move(e),
        this._events.fire("virtualUp", {
            x: this.x,
            y: this.y,
            button: "left"
        }),
        bc()
    },
    mc.prototype.click = function(e) {
        return e && this.move(e),
        this._events.fire("virtualClick", {
            x: this.x,
            y: this.y,
            button: "left"
        }),
        bc()
    },
    mc.prototype.doubleClick = function(e) {
        return e && this.move(e),
        this._events.fire("virtualDoubleClick", {
            x: this.x,
            y: this.y,
            button: "left"
        }),
        bc()
    },
    Object.defineProperties(mc.prototype, _c);
    var xc = {
        doubleTapTimer: 500,
        touchEventRate: 15
    };
    p.extend(function(e) {
        e.modules.touch = new wc(e)
    });
    var wc = function(e) {
        var t = this;
        this._render = e.modules.render,
        this._events = e.modules.events,
        this._settings = e.modules.settings,
        this._dom = null,
        this._binds = [],
        this._x = 0,
        this._y = 0,
        this._pressed = !1,
        Ue(this, {
            x: function() {
                return t._x
            },
            y: function() {
                return t._y
            },
            pressed: function() {
                return t._pressed
            }
        }),
        this._settings.register("touch.enabled", !0),
        this._events.register(["touchDown", "touchUp", "touchTap", "touchDoubleTap", "touchMove", "touchStartGesture", "touchProgressGesture", "touchEndGesture"]),
        this._dom = this._render.getCanvas(),
        this._dom &&
        function(g) {
            var s = function(e, t) {
                return g._events.fire(e, t)
            },
            v = 0,
            y = 0,
            n = 0,
            r = 0,
            i = !1,
            t = 0,
            o = !1,
            a = !1,
            m = 1,
            _ = 0,
            b = function() {
                g._x = v,
                g._y = y,
                g._pressed = i
            },
            u = function(e) {
                var t = g._dom.getBoundingClientRect(),
                n = e.touches[0].clientX - t.left,
                r = e.touches[0].clientY - t.top,
                i = e.touches[1].clientX - t.left,
                o = e.touches[1].clientY - t.top,
                s = (n + i) / 2,
                a = (r + o) / 2,
                u = s - v,
                l = a - y,
                d = jt(n, r, i, o),
                c = d / m,
                h = Mt(n, r, i, o),
                f = h - _,
                p = {
                    dx: u,
                    dy: l,
                    rotation: f,
                    scale: c
                };
                return m = jt,
                _ = h,
                v = s,
                y = a,
                b(),
                p
            },
            l = function(e) {
                return 2 !== e.touches.length && a ? (a = !1, s("touchEndGesture")) : 2 !== e.touches.length || a || (a = !0, u(e), s("touchStartGesture")),
                2 === e.touches.length
            },
            e = function(e, t) {
                g._binds.push(ft(g._dom, e,
                function(e) {
                    g._settings.get("touch.enabled") && t(e)
                },
                xc.touchEventRate))
            },
            d = function(e) {
                if (n = v, r = y, 1 !== e.touches.length) i = !1,
                1 < e.touches.length && s("touchUp", {
                    x: v,
                    y: y
                });
                else {
                    var t = g._dom.getBoundingClientRect();
                    v = e.touches[0].clientX - t.left,
                    y = e.touches[0].clientY - t.top,
                    i = !0
                }
                return b(),
                1 === e.touches.length
            },
            c = function() {
                t = 0
            };
            e("touchstart",
            function(e) {
                l(e),
                d(e) && (s("touchDown", {
                    x: v,
                    y: y
                }), t += 1, setTimeout(c, xc.doubleTapTimer), o = !0)
            });
            var h = function(e) {
                l(e),
                d(e),
                0 === e.touches.length && (1 === t ? s("touchTap", {
                    x: v,
                    y: y
                }) : 1 < t && (s("touchDoubleTap", {
                    x: v,
                    y: y
                }), c()), s("touchUp", {
                    x: v,
                    y: y
                }))
            };
            e("touchend", h),
            e("touchcancel", h),
            e("touchmove",
            function(e) { !
                function(e) {
                    if (2 === e.touches.length && a) {
                        var t = u(e),
                        n = t.dx,
                        r = t.dy,
                        i = t.rotation,
                        o = t.scale;
                        s("touchProgressGesture", {
                            dx: n,
                            dy: r,
                            rotation: i,
                            scale: o,
                            x: v,
                            y: y
                        })
                    }
                } (e),
                o ? o = !1 : (c(), d(e) && s("touchMove", {
                    x: v,
                    y: y,
                    dx: v - n,
                    dy: y - r
                }))
            });
            var f = function(e) {
                return e.preventDefault()
            };
            e("touchstart", f),
            e("touchend", f),
            e("touchcancel", f)
        } (this),
        this._events.on({
            kill: function() {
                return (e = t)._binds.forEach(function(e) {
                    return pt(e)
                }),
                void(e._binds = []);
                var e
            }
        })
    };
    var Ac = {
        65 : "a",
        66 : "b",
        67 : "c",
        68 : "d",
        69 : "e",
        70 : "f",
        71 : "g",
        72 : "h",
        73 : "i",
        74 : "j",
        75 : "k",
        76 : "l",
        77 : "m",
        78 : "n",
        79 : "o",
        80 : "p",
        81 : "q",
        82 : "r",
        83 : "s",
        84 : "t",
        85 : "u",
        86 : "v",
        87 : "w",
        88 : "x",
        89 : "y",
        90 : "z",
        48 : "0",
        49 : "1",
        50 : "2",
        51 : "3",
        52 : "4",
        53 : "5",
        54 : "6",
        55 : "7",
        56 : "8",
        57 : "9",
        13 : "enter",
        16 : "shift",
        17 : "ctrl",
        18 : "alt",
        27 : "esc",
        46 : "del",
        8 : "backspace",
        32 : "space",
        224 : "cmd",
        91 : "cmd",
        92 : "cmd",
        93 : "cmd",
        187 : "+",
        189 : "-"
    },
    Ec = {};
    Object.keys(Ac).forEach(function(e) {
        var t = Ac[e];
        Ec[t] || (Ec[t] = []),
        Ec[t].push(e)
    }),
    p.extend(function(n) {
        var r = new Cc(n);
        n.modules.keyboard = r,
        n.events.onKeyPress = function(e, t) {
            return r.onKeyPress(e, t),
            n.events
        },
        n.keyboard = {
            isKeyPressed: function(e) {
                return r.isPressed(e)
            }
        }
    });
    var Cc = function(e) {
        var d = this;
        this._events = e.modules.events,
        this._events.register(["keyUp", "keyDown"]),
        this._binds = [],
        this._pressed = [],
        this._onKeyDown = function(e) {
            var t = e.keyCode || e.which,
            n = d._binds[t];
            if (d._pressed[t] = !0, n) for (var r = 0; r < n.length; ++r) {
                for (var i = n[r], o = !0, s = 0; s < i.keys.length; ++s) {
                    for (var a = !1,
                    u = i.keys[s], l = 0; l < u.length; ++l) d._pressed[u[l]] && (a = !0);
                    a || (o = !1)
                }
                o && i.handler()
            }
            d._events.fire("keyDown", {
                key: Ac[t],
                code: t
            })
        },
        this._onKeyUp = function(e) {
            var t = e.keyCode || e.which;
            d._pressed[t] = !1,
            d._events.fire("keyUp", {
                key: Ac[t],
                code: t
            })
        },
        "undefined" != typeof window && (window.addEventListener("keydown", this._onKeyDown), window.addEventListener("keyup", this._onKeyUp)),
        this._events.on("kill",
        function() {
            "undefined" != typeof window && (window.removeEventListener("keydown", d._onKeyDown), window.removeEventListener("keyup", d._onKeyUp))
        })
    };
    Cc.prototype.onKeyPress = function(e, t) {
        var n = this;
        if ("number" == typeof e) e = [e];
        else if ("string" == typeof e) e = e.split(" ");
        else {
            if (!Array.isArray(e)) throw new TypeError(e + " is not a number, string or array");
            if (0 === e.length) throw new Error("the array should contain at least one element")
        }
        var r = [];
        e.forEach(function(e) {
            if ("number" == typeof e) r.push([e]);
            else {
                if ("string" != typeof e) throw new TypeError(e + " is not a valid key identifier");
                var t = Ec[e];
                if (!t) throw new Error(e + " is not a valid key identifier");
                r.push(t)
            }
        });
        var i = r.pop(),
        o = {
            keys: r,
            handler: t
        };
        i.forEach(function(e) {
            n._binds[e] || (n._binds[e] = []),
            n._binds[e].push(o)
        })
    },
    Cc.prototype.isPressed = function(e) {
        if ("number" == typeof e) return this._pressed[e];
        if ("string" == typeof e) {
            var t = Ec[e];
            if (t) for (var n = 0; n < t.length; ++n) if (this._pressed[t[n]]) return ! 0
        }
        return ! 1
    },
    p.extend(function(t) {
        var n = new Sc(t),
        r = t.modules.events;
        t.modules.captor = n,
        t.getHoveredElement = function() {
            return n.getPointedElement()
        },
        t.view.getElementAt = function(e) {
            return n.getElementAt(e)
        },
        Me(t.events, {
            onMouseMove: function(e) {
                return r.on("move", e),
                t.events
            },
            onMouseButtonDown: function(e) {
                return r.on("down", e),
                t.events
            },
            onMouseButtonUp: function(e) {
                return r.on("up", e),
                t.events
            },
            onClick: function(e) {
                return r.on("click", e),
                t.events
            },
            onDoubleClick: function(e) {
                return r.on("doubleClick", e),
                t.events
            },
            onMouseWheel: function(e) {
                return r.on("wheel", e),
                t.events
            },
            onHover: function(e) {
                return r.on("hover", e),
                t.events
            },
            onUnhover: function(e) {
                return r.on("unhover", e),
                t.events
            },
            onDragStart: function(e) {
                return r.on("dragStart", e),
                t.events
            },
            onDragProgress: function(e) {
                return r.on("dragProgress", e),
                t.events
            },
            onDragEnd: function(e) {
                return r.on("dragEnd", e),
                t.events
            },
            onGestureStart: function(e) {
                return r.on("gestureStart", e),
                t.events
            },
            onGestureProgress: function(e) {
                return r.on("gestureProgress", e),
                t.events
            },
            onGestureEnd: function(e) {
                return r.on("gestureEnd", e),
                t.events
            },
            onZoomProgress: function(e) {
                return r.on("cameraZoom", e),
                t.events
            },
            onViewChanged: function(e) {
                return r.on("viewChanged", e),
                t.events
            }
        })
    });
    var Sc = function(e) {
        var c = this;
        this._graph = e.modules.graph,
        this._graphics = e.modules.graphics,
        this._camera = e.modules.camera,
        this._mouse = e.modules.mouse,
        this._touch = e.modules.touch,
        this._events = e.modules.events,
        this._settings = e.modules.settings,
        this._elt = null,
        this._hoveredElt = null,
        this._draggedElt = null,
        this._enabled = !0,
        this._init = !1,
        this._hover = !1,
        this._x = void 0,
        this._y = void 0,
        this._timeout = null,
        this._buttons = {
            left: {
                isPressed: !1,
                isDragging: !1
            },
            middle: {
                isPressed: !1,
                isDragging: !1
            },
            right: {
                isPressed: !1,
                isDragging: !1
            }
        },
        this._events.register(["move", "down", "up", "click", "doubleClick", "hover", "unhover", "wheel", "dragStart", "dragProgress", "dragEnd", "gestureStart", "gestureProgress", "gestureEnd"]),
        this._settings.register("detect.nodes", !0),
        this._settings.register("detect.edges", !0),
        this._settings.register("detect.nodeTexts", !0),
        this._settings.register("detect.edgeTexts", !0),
        this._settings.register("detect.nodeErrorMargin", 5),
        this._settings.register("detect.edgeErrorMargin", 7),
        this._events.on({
            "removeNodes removeEdges clear": function() {
                kc(c, c._x, c._y),
                c._timeout || (c._timeout = setTimeout(function() {
                    Nc(c, {
                        x: c._x,
                        y: c._y,
                        dx: 0,
                        dy: 0
                    }),
                    c._timeout = null
                },
                0))
            },
            "mouseMove touchMove virtualMove": function(e, t) {
                var n = e.x,
                r = e.y,
                i = e.dx,
                o = e.dy;
                Nc(c, {
                    x: n,
                    y: r,
                    dx: i,
                    dy: o,
                    source: Ic(t)
                })
            },
            "mouseDown touchDown virtualDown": function(e, t) {
                var n = e.x,
                r = e.y,
                i = e.button;
                void 0 === i && (i = "left"),
                function(e, t) {
                    var n = t.x,
                    r = t.y,
                    i = t.button,
                    o = t.source;
                    Lc(e, n, r),
                    e._elt !== e._hoveredElt && kc(e, n, r);
                    e._hoveredElt = e._elt,
                    e._hoveredEltIsNode = e._elt && e._elt.isNode,
                    e._buttons[i].isPressed = !0,
                    e._events.fire("down", {
                        x: n,
                        y: r,
                        button: i,
                        source: o
                    })
                } (c, {
                    x: n,
                    y: r,
                    button: i,
                    source: Ic(t)
                })
            },
            "mouseUp touchUp virtualUp": function(e, t) {
                var n = e.x,
                r = e.y,
                i = e.button;
                void 0 === i && (i = "left"),
                function(e, t) {
                    var n = t.x,
                    r = t.y,
                    i = t.button,
                    o = t.source,
                    s = e._buttons[i],
                    a = s.isPressed,
                    u = s.isDragging;
                    if (!a) return;
                    e._buttons[i].isPressed = !1,
                    u && (Tc(e, "dragEnd", e._draggedElt, {
                        x: n,
                        y: r,
                        button: i,
                        source: o
                    }), e._buttons[i].isDragging = !1, 0 === Ce(e._buttons,
                    function(e, t) {
                        var n = t.isDragging;
                        return void 0 === n && (n = !1),
                        e + n
                    },
                    0) && (e._draggedElt = null));
                    l = e,
                    Ce(l._buttons,
                    function(e, t) {
                        var n = t.isPressed;
                        return void 0 === n && (n = !1),
                        e + n
                    },
                    0) && !e._hover && "touch" !== o && (Lc(e, n, r), e._hoveredElt = e._elt, e._hoveredEltIsNode = e._isNode, e._hoveredElt && (Tc(e, "hover", e._hoveredElt, {
                        x: n,
                        y: r,
                        source: o
                    }), e._hover = !0));
                    var l;
                    e._events.fire("up", {
                        x: n,
                        y: r,
                        button: i,
                        source: o
                    })
                } (c, {
                    x: n,
                    y: r,
                    button: i,
                    source: Ic(t)
                })
            },
            "mouseClick touchTap virtualClick": function(e, t) {
                var n, r, i, o, s, a, u = e.x,
                l = e.y,
                d = e.button;
                void 0 === d && (d = "left"),
                n = c,
                r = {
                    x: u,
                    y: l,
                    button: d,
                    source: Ic(t)
                },
                i = r.x,
                o = r.y,
                s = r.button,
                a = r.source,
                Tc(n, "click", n._hoveredElt, {
                    x: i,
                    y: o,
                    button: s,
                    source: a
                })
            },
            "mouseDoubleClick touchDoubleTap virtualDoubleClick": function(e, t) {
                var n, r, i, o, s, a, u = e.x,
                l = e.y,
                d = e.button;
                void 0 === d && (d = "left"),
                n = c,
                r = {
                    x: u,
                    y: l,
                    button: d,
                    source: Ic(t)
                },
                i = r.x,
                o = r.y,
                s = r.button,
                a = r.source,
                Tc(n, "doubleClick", n._hoveredElt, {
                    x: i,
                    y: o,
                    button: s,
                    source: a
                })
            },
            mouseWheel: function(e) {
                var t = e.x,
                n = e.y,
                r = e.delta;
                c._x = t,
                c._y = n,
                Tc(c, "wheel", void 0, {
                    x: t,
                    y: n,
                    delta: r,
                    source: "mouse",
                    target: c._hoveredElt
                })
            },
            touchStartGesture: function(e) {
                return c._events.fire("gestureStart", e)
            },
            touchProgressGesture: function(e) {
                return c._events.fire("gestureProgress", e)
            },
            touchEndGesture: function(e) {
                return c._events.fire("gestureEnd", e)
            }
        })
    };
    function Ic(e) {
        return 0 === e.indexOf("mouse") ? "mouse": 0 === e.indexOf("touch") ? "touch": "mouse"
    }
    function Tc(e, t, n, r) {
        return r.target = n || null,
        e._events.fire(t, r),
        r
    }
    function Nc(i, e) {
        var o = e.x,
        s = e.y,
        a = e.dx,
        u = e.dy,
        l = e.source;
        i._events.fire("move", {
            x: o,
            y: s,
            dx: a,
            dy: u,
            source: l
        }),
        i._x = o,
        i._y = s,
        Ee(i._buttons,
        function(e, t) {
            var n = e.isPressed,
            r = e.isDragging;
            n && (r || (i._buttons[t].isDragging = !0, i._hoveredElt && i._hover && (Tc(i, "unhover", i._hoveredElt, {
                x: o,
                y: s,
                source: l
            }), i._hover = !1), i._draggedElt || (i._draggedElt = i._hoveredElt, i._draggedEltIsNode = i._hoveredEltIsNode), Tc(i, "dragStart", i._draggedElt, {
                x: o,
                y: s,
                button: t,
                source: l
            })), Tc(i, "dragProgress", i._draggedElt, {
                x: o,
                y: s,
                dx: a,
                dy: u,
                source: l
            }))
        }),
        Lc(i, o, s),
        i._elt !== i._hoveredElt && (i._hoveredElt && i._hover && (i._hover = !0, Tc(i, "unhover", i._hoveredElt, {
            x: o,
            y: s,
            source: l
        })), i._hoveredElt = i._elt, i._hoveredEltIsNode = i._isNode, i._elt && (i._hover = !0, Tc(i, "hover", i._hoveredElt, {
            x: o,
            y: s,
            source: l
        })))
    }
    function kc(n, r, i) {
        Ee(n._buttons,
        function(e, t) {
            e.isDragging && Tc(n, "dragEnd", n._draggedElt, {
                x: r,
                y: i,
                button: t
            })
        }),
        n._hover && n._hoveredElt && Tc(n, "unhover", n._hoveredElt, {
            x: r,
            y: i
        }),
        Object.keys(n._buttons).forEach(function(e) {
            n._buttons[e].isPressed = !1,
            n._buttons[e].isDragging = !1
        }),
        n._hover = !1,
        n._hoveredElt = null,
        n._draggedElt = null
    }
    function Lc(e, t, n) {
        e._elt = Rc(e, t, n),
        e._isNode = !e._elt || e._elt.isNode
    }
    function Rc(e, t, n) {
        var r = null;
        if (e._enabled && void 0 !== t && void 0 !== n) {
            if (e._settings.get("detect.nodes")) {
                var i = function(e, t, n) {
                    for (var r = e._graph._allIndexes(!0), i = e._camera.zoom, o = e._settings.get("detect.nodeErrorMargin") / i, s = e._camera.screenToGraphCoordinates({
                        x: t,
                        y: n
                    }), a = s.x, u = s.y, l = e._graphics._shapes.nodes, d = {},
                    c = e._graph.getAttributes(!0, ["excluded", "x", "y", "textPosition", "textWidth", "textHeight", "secondaryTextPosition", "secondaryTextWidth", "secondaryTextHeight"]), h = c[0], f = c[1], p = c[2], g = c[3], v = c[4], y = c[5], m = c[6], _ = c[7], b = c[8], x = e._graphics._getAttributeArrays(!0, ["radius", "shape", "hidden", "text.scaling", "text.threshold", "text.backgroundMargin"]), w = x[0], A = x[1], E = x[2], C = x[3], S = x[4], I = x[5], T = e._settings.get("detect.nodeTexts"), N = 0, k = 0, L = 0, R = r.length; L < R; ++L) {
                        var z = r[L];
                        if (!E.get(z) || !h.get(z)) {
                            var M = w.get(z);
                            if (l[A.get(z)].detect(f.get(z), p.get(z), M + o, a, u, d)) N = z;
                            else if (T) {
                                var P = g.get(z);
                                if (!P || M * i < S.get(z)) continue;
                                var F = P,
                                D = v.get(z),
                                O = y.get(z),
                                B = e._camera.graphToScreenCoordinates(F),
                                j = B.x + F.zx * i + F.ox,
                                U = B.y + F.zy * i + F.oy;
                                C.get(z) && (D *= i, O *= i);
                                var H = I.get(z);
                                if (j - H <= t && t <= j + D + H && U - H <= n && n <= U + O + H) k = z;
                                else {
                                    if (! (F = m.get(z))) continue;
                                    D = _.get(z),
                                    O = b.get(z),
                                    B = e._camera.graphToScreenCoordinates(F),
                                    j = B.x + F.zx * i + F.ox,
                                    U = B.y + F.zy * i + F.oy,
                                    C.get(z) && (D *= i, O *= i),
                                    H = I.get(z),
                                    j - H <= t && t <= j + D + H && U - H <= n && n <= U + O + H && (k = z)
                                }
                            }
                        }
                    }
                    return N || k
                } (e, t, n);
                if (i) r = e._graph._getElement(!0, i);
                else if (e._settings.get("detect.edges")) {
                    var o = function(e, t, n) {
                        var r = e._graph._allIndexes(!1),
                        i = e._settings.get("edgeClipping"),
                        o = e._settings.get("detect.edgeErrorMargin") / e._camera.zoom,
                        s = e._camera.screenToGraphCoordinates({
                            x: t,
                            y: n
                        }),
                        a = s.x,
                        u = s.y,
                        l = e._graphics._shapes.edges,
                        d = {},
                        c = e._graph.getAttributes(!0, ["x", "y", "radius", "hidden"]),
                        h = c[0],
                        f = c[1],
                        p = c[2],
                        g = c[3],
                        v = e._graph.getAttributes(!1, ["excluded", "source", "target", "shape", "width", "curvature", "hidden"]),
                        y = v[0],
                        m = v[1],
                        _ = v[2],
                        b = v[3],
                        x = v[4],
                        w = v[5],
                        A = v[6],
                        E = 0;
                        if (i) var C = e._settings.get("edgeClippingPadding") / e._camera.zoom,
                        S = e._camera.screenToGraphCoordinates({
                            x: 0,
                            y: 0
                        }),
                        I = e._camera.screenToGraphCoordinates({
                            x: 0,
                            y: e._camera.height
                        }),
                        T = e._camera.screenToGraphCoordinates({
                            x: e._camera.width,
                            y: 0
                        }),
                        N = e._camera.screenToGraphCoordinates({
                            x: e._camera.width,
                            y: e._camera.height
                        }),
                        k = Math.min(S.x, I.x, T.x, N.x) - C,
                        L = Math.min(S.y, I.y, T.y, N.y) - C,
                        R = Math.max(S.x, I.x, T.x, N.x) + C,
                        z = Math.max(S.y, I.y, T.y, N.y) + C;
                        for (var M = 0,
                        P = r.length; M < P; ++M) {
                            var F = r[M],
                            D = m.get(F),
                            O = _.get(F);
                            if (! (g.get(D) || g.get(O) || A.get(F) || y.get(F))) {
                                var B = l[b.get(F)],
                                j = x.get(F) + o,
                                U = w.get(F),
                                H = h.get(D),
                                X = f.get(D),
                                W = h.get(O),
                                G = f.get(O),
                                q = p.get(D),
                                Y = p.get(D);
                                if (i) {
                                    var V = H - q,
                                    $ = H + q,
                                    Z = X - q,
                                    Q = X + q,
                                    J = W - Y,
                                    K = W + Y,
                                    ee = G - Y,
                                    te = G + Y;
                                    if (! ((k < V && V < R || k < $ && $ < R) && (L < Z && Z < z || L < Q && Q < z) || (k < J && J < R || k < K && K < R) && (L < ee && ee < z || L < te && te < z))) continue
                                } (D === O ? B.detectLoop(a, u, H, X, j, U, q, d) : 0 === U ? B.detectStraight(a, u, H, X, W, G, j, q, Y, d) : B.detectCurved(a, u, H, X, W, G, j, U, q, Y, d)) && (E = F)
                            }
                        }
                        return E
                    } (e, t, n);
                    o && (r = e._graph._getElement(!1, o))
                }
            }
            return r
        }
    }
    Sc.prototype.getElementAt = function(e) {
        return Rc(this, e.x, e.y)
    },
    Sc.prototype.getPointedElement = function() {
        return this._hoveredElt
    },
    Sc.prototype.getDraggedElement = function() {
        return this._draggedElt
    },
    Sc.prototype.isButtonPressed = function(e) {
        return this._buttons[e].isPressed
    },
    Sc.prototype.isLeftPressed = function() {
        return this.isButtonPressed("left")
    },
    Sc.prototype.getCursorPosition = function() {
        return {
            x: this._x,
            y: this._y
        }
    },
    Sc.prototype.getCursorInformation = function() {
        return {
            x: this._x,
            y: this._y,
            target: this._hoveredElt
        }
    },
    Sc.prototype.setDetectionEnabled = function(e) {
        var t = this._enabled;
        return this._enabled = !!e,
        t
    };
    var zc = ["hover", "zoom", "panning", "rotation", "gesture", "drag", "selection", "tooltip", "user", "interactions", "resizing", "rewiring", "connectNodes", "lasso"];
    p.extend(function(e) {
        var t = new Mc(e);
        e.modules.interactions = t
    });
    var Mc = function(e) {
        this._captor = e.modules.captor,
        this._events = e.modules.events,
        this._settings = e.modules.settings,
        this._timeout = null,
        this._current = null,
        this._started = !1,
        this._scheduled = [],
        this._priority = 0,
        this._startFunc = null
    };
    function Pc(e, t, n, r, i) {
        var o = i.check,
        s = i.onStart,
        a = i.onStop,
        u = i.onProgress,
        l = i.priority,
        d = i.disableDetection;
        if (void 0 !== l) {
            var c, h = Oc(e, {
                priority: Le(zc, l, "interaction"),
                disableDetection: d,
                check: o,
                onStart: s,
                onStop: a,
                onProgress: u
            });
            return e._events.on(((c = {})[t] = function(e) {
                return h.start(e)
            },
            c[n] = function(e) {
                return h.progress(e)
            },
            c[r] = function(e) {
                return h.stop(e)
            },
            c)),
            h
        }
        var f = !1;
        e._events.on(t,
        function(e) { (f = !o || o(e)) && s && s(e)
        }),
        u && e._events.on(n,
        function(e) {
            f && u(e)
        }),
        a && e._events.on(r,
        function(e) {
            f && (a && a(e), f = !1)
        })
    }
    function Fc(e, t, n) {
        "function" == typeof n && (n = {
            handler: n
        });
        var r = n.priority,
        i = n.handler,
        o = n.check;
        if (void 0 !== r) {
            var s = Oc(e, {
                priority: Le(zc, r, "interaction"),
                check: o,
                handler: i
            });
            e._events.on(t, s)
        } else i && (o ? e._events.on(t,
        function(e) {
            o(e) && i(e)
        }) : e._events.on(t, i))
    }
    Mc.prototype.onDrag = function(e) {
        return Pc(this, "dragStart", "dragProgress", "dragEnd", e)
    },
    Mc.prototype.onGesture = function(e) {
        return Pc(this, "gestureStart", "gestureProgress", "gestureEnd", e)
    },
    Mc.prototype.onClick = function(e) {
        return Fc(this, "click", e)
    },
    Mc.prototype.onDoubleClick = function(e) {
        return Fc(this, "doubleClick", e)
    },
    Mc.prototype.onHover = function(e) {
        return Fc(this, "hover", e)
    },
    Mc.prototype.onUnhover = function(e) {
        return Fc(this, "unhover", e)
    },
    Mc.prototype.onMouseWheel = function(e) {
        return Fc(this, "wheel", e)
    },
    Mc.prototype.onMouseDown = function(e) {
        return Fc(this, "down", e)
    },
    Mc.prototype.onMouseUp = function(e) {
        return Fc(this, "up", e)
    },
    Mc.prototype.onMouseMove = function(e) {
        return Fc(this, "move", e)
    };
    var Dc = function() {};
    function Oc(n, e) {
        if (void 0 === e && (e = {}), "function" == typeof e) e = {
            onStart: e
        };
        else if (!_e(e)) throw new TypeError("invalid parameters " + e + ": not an object");
        var r = Ae(e.onStart, e.handler),
        t = Ae(e.onProgress, Dc),
        i = Ae(e.onStop, Dc),
        o = Ae(e.check,
        function() {
            return ! 0
        }),
        s = Ae(e.disableDetection, !1),
        a = Ae(e.priority, 0),
        u = null,
        l = null;
        r = Ae(r, Dc);
        var d = function(e) {
            return ! (!o(e) || n._current && !(a >= n._priority)) && (n._current && n._current.stop(), n._current = u, n._priority = a, n._started = !1, n._scheduled = null, n._startFunc = function() {
                s && (l = n._captor.setDetectionEnabled(!1)),
                r(e)
            },
            (t = n)._timeout || (t._timeout = setTimeout(function() {
                t._startFunc && (t._startFunc(), t._startFunc = null, t._started = !0),
                t._scheduled && t._scheduled(),
                t._scheduled = null,
                t._timeout = null
            },
            0)), !0);
            var t
        }, c = function(e) {
            n._current === u && (n._started && (s && n._captor.setDetectionEnabled(l), i(e)), n._timeout && clearTimeout(n._timeout), n._timeout = null, n._current = null, n._priority = 0, n._started = !1, n._scheduled = null)
        };
        return (u = function(e) {
            d(e) && (n._scheduled = c)
        }).start = d,
        u.stop = c,
        u.progress = function(e) {
            n._current === u && n._started && t(e)
        },
        u
    }
    var Bc = 1e3;
    p.extend(function(n) {
        var r = new jc(n),
        e = n.Node,
        t = n.Edge,
        i = n.NodeList,
        o = n.EdgeList;
        n.modules.classes = r,
        n.createClass = function(e, t) {
            return r.create(e, t)
        },
        n.updateClass = function(e, t) {
            return r.update(e, t)
        },
        n.events.onNodesClassAdded = function(e, t) {
            return r.onNodesClassAdded(e, t),
            n.events
        },
        n.events.onNodesClassRemoved = function(e, t) {
            return r.onNodesClassRemoved(e, t),
            n.events
        },
        n.events.onEdgesClassAdded = function(e, t) {
            return r.onEdgesClassAdded(e, t),
            n.events
        },
        n.events.onEdgesClassRemoved = function(e, t) {
            return r.onEdgesClassRemoved(e, t),
            n.events
        },
        n.getNodesByClassName = function(e) {
            return r.getNodesByClass(e)
        },
        e.prototype.addClass = function(e, t) {
            return r.addClassToNodes(e, this, t)
        },
        i.prototype.addClass = function(e, t) {
            return r.addClassToNodes(e, this, t)
        },
        e.prototype.removeClass = function(e, t) {
            return r.removeNodesFromClass(e, this, t)
        },
        i.prototype.removeClass = function(e, t) {
            return r.removeNodesFromClass(e, this, t)
        },
        e.prototype.hasClass = function(e) {
            return r.nodesHaveClass(e, this)[0]
        },
        i.prototype.hasClass = function(e) {
            return r.nodesHaveClass(e, this)
        },
        n.getEdgesByClassName = function(e) {
            return r.getEdgesByClass(e)
        },
        t.prototype.addClass = function(e, t) {
            return r.addClassToEdges(e, this, t)
        },
        o.prototype.addClass = function(e, t) {
            return r.addClassToEdges(e, this, t)
        },
        t.prototype.removeClass = function(e, t) {
            return r.removeEdgesFromClass(e, this, t)
        },
        o.prototype.removeClass = function(e, t) {
            return r.removeEdgesFromClass(e, this, t)
        },
        t.prototype.hasClass = function(e) {
            return r.edgesHaveClass(e, this)[0]
        },
        o.prototype.hasClass = function(e) {
            return r.edgesHaveClass(e, this)
        }
    });
    var jc = function(e) {
        var r = this;
        this._graphics = e.modules.graphics,
        this._graph = e.modules.graph,
        this._events = e.modules.events,
        this._classes = [],
        this._events.on({
            "refreshNodeFilters refreshEdgeFilters": function(e) {
                for (var t = e.newlyExcluded,
                n = 0; n < r._classes.length; ++n) Xc(r, r._classes[n].name, t)
            }
        })
    };
    jc.prototype.create = function(e, t) {
        void 0 === t && (t = {});
        var n, r, i, o = t.nodeAttributes,
        s = t.edgeAttributes,
        a = Gc(this, t.after) + 1,
        u = (n = a, r = this._classes, i = r.length, n === i ? 0 === n ? Bc: 2 * r[n - 1].priority: 0 === n ? r[0].priority / 2 : (r[n - 1].priority + r[n].priority) / 2),
        l = new Uc(e, a, u, this, this._graph);
        this._events.register([l.nodeAddEvtName, l.edgeAddEvtName, l.nodeRemovalEvtName, l.edgeRemovalEvtName]),
        this._classes.splice(a, 0, l),
        this._graphics.addLayer(e, {
            nodeAttributes: o,
            edgeAttributes: s,
            depth: u
        })
    },
    jc.prototype.update = function(e, t) {
        var n = t.nodeAttributes,
        r = t.edgeAttributes;
        this.setNodeAttribute(e, n),
        this.setEdgeAttributes(e, r)
    },
    jc.prototype.setNodeAttribute = function(e, t) {
        null === t ? this._graphics._resetLayerStyle(e, !0) : this._graphics._updateLayerStyle(e, !0, t),
        this._graphics.putOnLayer(e, this.getNodesByClass(e))
    },
    jc.prototype.setEdgeAttributes = function(e, t) {
        null === t ? this._graphics._resetLayerStyle(e, !1) : this._graphics._updateLayerStyle(e, !1, t),
        this._graphics.putOnLayer(e, this.getEdgesByClass(e))
    },
    jc.prototype.getNodesByClass = function(e) {
        return qc(this, e).getNodes()
    },
    jc.prototype.getEdgesByClass = function(e) {
        return qc(this, e).getEdges()
    },
    jc.prototype.onNodesClassAdded = function(e, t) {
        this._events.on(qc(this, e).nodeAddEvtName, t)
    },
    jc.prototype.onEdgesClassAdded = function(e, t) {
        this._events.on(qc(this, e).edgeAddEvtName, t)
    },
    jc.prototype.onNodesClassRemoved = function(e, t) {
        this._events.on(qc(this, e).nodeRemovalEvtName, t)
    },
    jc.prototype.onEdgesClassRemoved = function(e, t) {
        this._events.on(qc(this, e).edgeRemovalEvtName, t)
    },
    jc.prototype.addClassToNodes = function(e, t, n) {
        return Hc(this, e, t, n)
    },
    jc.prototype.addClassToEdges = function(e, t, n) {
        return Hc(this, e, t, n)
    },
    jc.prototype.removeNodesFromClass = function(e, t, n) {
        return Xc(this, e, t, n)
    },
    jc.prototype.removeEdgesFromClass = function(e, t, n) {
        return Xc(this, e, t, n)
    },
    jc.prototype.nodesHaveClass = function(e, t) {
        return qc(this, e).hasNodes(t)
    },
    jc.prototype.edgesHaveClass = function(e, t) {
        return qc(this, e).hasEdges(t)
    },
    jc.prototype.clearNodes = function(e, t) {
        return Wc(this, e, !0, t)
    },
    jc.prototype.clearEdges = function(e, t) {
        return Wc(this, e, !1, t)
    };
    var Uc = function(e, t, n, r, i) {
        this.index = t,
        this.name = e,
        this._classes = r,
        this.priority = n,
        this.set = i.createSet(),
        this.nodeAddEvtName = "nodeClassAdded_" + e,
        this.edgeAddEvtName = "edgeClassAdded_" + e,
        this.nodeRemovalEvtName = "nodeClassRemoved_" + e,
        this.edgeRemovalEvtName = "edgeClassRemoved_" + e
    };
    function Hc(e, t, n, r) {
        if (n.size) {
            var i, o = n.isNode,
            s = qc(e, t),
            a = s.addElements(n);
            e._graphics.animate(function() {
                return e._graphics.putOnLayer(t, a)
            },
            r),
            e._events.fire(s[o ? "nodeAddEvtName": "edgeAddEvtName"], ((i = {
                _className: t
            })[o ? "nodes": "edges"] = a, i))
        }
    }
    function Xc(e, t, n, r) {
        if (n.size) {
            var i, o = n.isNode,
            s = qc(e, t),
            a = s.removeElements(n);
            e._graphics.animate(function() {
                return e._graphics.removeFromLayer(t, a)
            },
            r),
            e._events.fire(s[o ? "nodeRemovalEvtName": "edgeRemovalEvtName"], ((i = {
                _className: t
            })[o ? "nodes": "edges"] = a, i))
        }
    }
    function Wc(e, t, n, r) {
        var i, o = qc(e, t),
        s = o[n ? "clearNodes": "clearEdges"]();
        s.size && (e._graphics.animate(function() {
            return e._graphics.removeFromLayer(t, s)
        },
        r), e._events.fire(o[n ? "nodeRemovalEvtName": "edgeRemovalEvtName"], ((i = {
            _className: t
        })[n ? "nodes": "edges"] = s, i)))
    }
    function Gc(e, t) {
        for (var n = 0; n < e._classes.length; ++n) if (e._classes[n].name === t) return n;
        return - 1
    }
    function qc(e, t) {
        var n = Gc(e, t);
        if ( - 1 === n) throw new Error('class "' + t + '" does not exist');
        return e._classes[n]
    }
    Uc.prototype.update = function(e) {
        return this._classes.update(this.name, e),
        this
    },
    Uc.prototype.getNodes = function() {
        return this.set.getNodes()
    },
    Uc.prototype.getEdges = function() {
        return this.set.getEdges()
    },
    Uc.prototype.hasNodes = function(e) {
        return this.set.hasNodes(e)
    },
    Uc.prototype.hasEdges = function(e) {
        return this.set.hasEdges(e)
    },
    Uc.prototype.addElements = function(e) {
        return this.set.addElements(e)
    },
    Uc.prototype.removeElements = function(e) {
        return this.set.removeElements(e)
    },
    Uc.prototype.clearNodes = function() {
        return this.set.clearNodes()
    },
    Uc.prototype.clearEdges = function() {
        return this.set.clearEdges()
    };
    var Yc = function() {
        return {}
    },
    Vc = function() {},
    $c = function() {
        return ! 1
    },
    Zc = function() {},
    Qc = function() {},
    Jc = function() {},
    Kc = function(n) {
        function e(e, t) {
            n.call(this),
            this._dependencies = t,
            this.configure(e)
        }
        return n && (e.__proto__ = n),
        ((e.prototype = Object.create(n && n.prototype)).constructor = e).prototype.configure = function(e) {
            this._onStart = e.onStart || Qc,
            this._onEnd = e.onEnd || Jc,
            this._update = e.update || Vc,
            this._onUpdate = e.onUpdate || Zc,
            this._createContext = e.context || Yc,
            this._isRunning = e.isRunning || $c
        },
        e.prototype.onStart = function() {
            return this.fire("start", {
                target: this
            }),
            this._onStart.call(this),
            this
        },
        e
    } (k),
    eh = function(i) {
        function e(e, t) {
            var n = this;
            i.call(this, e, t);
            var r = [function(e) {
                if (!e || 0 === e.length) return "";
                for (var t = [], n = Object.keys(e), r = 0, i = n.length; r < i; r++) {
                    var o = n[r],
                    s = e[o];
                    if ("function" != typeof s) throw new Error('Asynchronous task: dependency "' + o + '" is not found');
                    t.push("var " + o + " = " + s.toString() + ";")
                }
                return t.join("\n")
            } (e.imports), "", "", "var __CONTEXT = (" + this._createContext.toString() + ")(),", "    __UPDATE_FUNC = " + this._update.toString() + ",", "    __IS_RUNNING_FUNC = " + this._isRunning.toString() + ";", "", 'self.addEventListener("message", function (evt) {', "  var result    = __UPDATE_FUNC(evt.data, __CONTEXT);", "  var isRunning = __IS_RUNNING_FUNC(__CONTEXT, evt.data);", "  self.postMessage({ result: result, isRunning: isRunning });", "});"].join("\n");
            this._worker = An(r),
            this._sync = function(e) {
                n.sync(e)
            },
            this._worker.addEventListener("message", this._sync)
        }
        return i && (e.__proto__ = i),
        ((e.prototype = Object.create(i && i.prototype)).constructor = e).prototype.sync = function(e) {
            var t = e.data.isRunning,
            n = e.data.result,
            r = this._onUpdate.call(this, n, this._dependencies, t);
            this.fire("update", {
                target: this,
                isRunning: t
            }),
            t ? this.send(r) : this.stop(n)
        },
        e.prototype.stop = function(e) {
            return this._onEnd.call(this, e, this._dependencies),
            this._worker.terminate(),
            this.fire("stop", {
                target: this
            })
        },
        e.prototype.send = function(e) {
            return this._worker.postMessage(e),
            this
        },
        e
    } (Kc);
    var th = function(n) {
        function e(e, t) {
            n.call(this, e, t),
            this._stopped = !1,
            this._context = this._createContext()
        }
        return n && (e.__proto__ = n),
        ((e.prototype = Object.create(n && n.prototype)).constructor = e).prototype.sync = function(e) {
            var t = this._update(e, this._context),
            n = this._isRunning(this._context, e);
            e = this._onUpdate.call(this, t, this._dependencies, n),
            this.fire("update", {
                target: this,
                isRunning: n
            }),
            n ? this.send(e) : this.stop(t)
        },
        e.prototype.send = function(e) {
            var t = this;
            return this._stopped || setTimeout(function() {
                return t.sync(e)
            },
            0),
            this
        },
        e.prototype.stop = function(e) {
            return this._onEnd(e, this._dependencies),
            this._stopped = !0,
            this
        },
        e
    } (Kc);
    p.extend(function(e) {
        return e.modules.tasks = new nh(e)
    });
    var nh = function(e) {
        this._ogma = e
    };
    nh.prototype.run = function(e, t, n, r) {
        var i = Ae(n, !0),
        o = function(e, t, n) {
            var r = e(t, n);
            void 0 === r && (r = t);
            return r
        } (e.configure ||
        function(e) {
            return e
        },
        t, r),
        s = new(i ? eh: th)(e, r);
        return s.onStart(),
        s.send(o),
        s
    },
    p.extend(function(e) {
        e.modules.generators = new rh(e),
        e.generate = {}
    });
    var rh = function(e) {
        this._ogma = e,
        this._graph = e.modules.graph,
        this._tasks = e.modules.tasks,
        this._generators = {}
    };
    function ih(e) {
        void 0 === e && (e = {});
        var t = e.nodes;
        void 0 === t && (t = 10);
        var n = e.edges;
        return void 0 === n && (n = 10),
        {
            nodes: t,
            edges: n
        }
    }
    function oh(e) {
        for (var t = e.nodes,
        n = e.edges,
        r = [], i = [], o = 0; o < t; o++) r.push({
            id: o,
            attributes: {
                x: 200 * Math.random(),
                y: 200 * Math.random()
            }
        });
        for (var s = 0; s < n; s++) i.push({
            id: s,
            source: Math.random() * t | 0,
            target: Math.random() * t | 0
        });
        return {
            nodes: r,
            edges: i
        }
    }
    function sh(e) {
        void 0 === e && (e = {});
        var t = e.rows;
        void 0 === t && (t = 4);
        var n = e.columns;
        return void 0 === n && (n = 4),
        {
            rows: t,
            columns: n
        }
    }
    function ah(e) {
        for (var t = e.rows,
        n = e.columns,
        r = {
            nodes: [],
            edges: []
        },
        i = 0, o = 0; o < t; ++o) for (var s = 0; s < n; ++s) {
            var a = o * n + s;
            r.nodes.push({
                id: a,
                attributes: {
                    x: 15 * s,
                    y: 15 * o
                }
            }),
            s !== n - 1 && (r.edges.push({
                id: i,
                source: a,
                target: o * n + s + 1
            }), i += 1),
            o !== t - 1 && (r.edges.push({
                id: i,
                source: a,
                target: (o + 1) * n + s
            }), i += 1)
        }
        return r
    }
    function uh(e) {
        void 0 === e && (e = {});
        var t = e.length;
        return void 0 === t && (t = 5),
        {
            length: t
        }
    }
    function lh(e) {
        var t = e.length,
        n = {
            nodes: [],
            edges: []
        };
        if (t <= 0) return n;
        n.nodes.push({
            id: 0,
            attributes: {
                x: 100 * Math.random(),
                y: 100 * Math.random()
            }
        });
        for (var r = 1; r < t; ++r) n.nodes.push({
            id: r,
            attributes: {
                x: 100 * Math.random(),
                y: 100 * Math.random()
            }
        }),
        n.edges.push({
            id: r - 1,
            source: r - 1,
            target: r
        });
        return n
    }
    function dh(e) {
        void 0 === e && (e = {});
        var t = e.children;
        void 0 === t && (t = 2);
        var n = e.height;
        if (void 0 === n && (n = 3), !pe(t)) throw new TypeError('Invalid argument: "children" is not a positive number, was ' + t);
        if (!fe(n)) throw new TypeError('Invalid argument: "height" is not a positive number, was ' + n);
        return {
            children: t,
            height: n
        }
    }
    function ch(e) {
        var t = e.children,
        n = e.height;
        n += 1;
        for (var r = Math.pow(t, n), i = [], o = [], s = 1, a = 0, u = 0, l = 0; l < n; ++l) {
            for (var d = r / (s + 1) / 1.5, c = 0; c < s; ++c) {
                var h = a++;
                if (i.push({
                    id: h,
                    attributes: {
                        x: (c + 1) * d * 10,
                        y: 20 * l
                    }
                }), l !== n - 1) for (var f = 0; f < t; ++f) o.push({
                    id: u,
                    source: h,
                    target: h * t + f + 1
                }),
                u += 1
            }
            s *= t
        }
        return {
            nodes: i,
            edges: o
        }
    }
    function hh(e) {
        void 0 === e && (e = {});
        var t = e.nodes;
        void 0 === t && (t = 20);
        var n = e.edges,
        r = e.p;
        if (!he(t) || t < 3) throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was " + t);
        if (void 0 !== n && void 0 !== r) throw new TypeError("Invalid argument: choose between options.edges and options.p");
        return void 0 === n && void 0 === r && (r = .1),
        {
            nodes: t,
            edges: n,
            p: r
        }
    }
    function fh(e) {
        var t, n, r, i = {
            nodes: [],
            edges: []
        },
        o = 0,
        s = e.nodes,
        a = e.p;
        if (0 <= e.p) for (n = 0; n < s; n++) for (i.nodes.push({
            id: n,
            attributes: {
                x: 100 * Math.random(),
                y: 100 * Math.random()
            }
        }), r = 0; r < n; r++) Math.random() < a && i.edges.push({
            id: o++,
            source: n,
            target: r
        });
        else {
            var u = [],
            l = e.edges;
            for (n = 0; n < s; n++) for (i.nodes.push({
                id: n,
                x: 100 * Math.random(),
                y: 100 * Math.random(),
                size: 1
            }), r = n + 1; r < s; r++) u.push({
                source: n,
                target: r
            });
            for (o = u.length - 1, n = 0; n < l; n++)(t = u.splice(Math.floor(Math.random() * o), 1)[0]).id = n,
            i.edges.push(t),
            o--
        }
        return i
    }
    function ph(e) {
        void 0 === e && (e = {});
        var t = e.nodes;
        void 0 === t && (t = 40);
        var n = e.m0;
        void 0 === n && (n = 5);
        var r = e.m;
        if (void 0 === r && (r = 1), !he(t) || t < 3) throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was " + t);
        if (!he(n) || t <= n) throw new TypeError("Invalid argument: options.m0 is not a number < " + t + ", was " + n);
        if (!he(n) || n <= r) throw new TypeError("Invalid argument: options.m is not a number <= " + n + ", was " + r);
        return {
            nodes: t,
            m0: n,
            m: r
        }
    }
    function gh(e) {
        var t, n, r, i, o, s, a, u, l = {
            nodes: [],
            edges: []
        },
        d = {},
        c = [],
        h = 0,
        f = e.nodes,
        p = e.m0,
        g = e.m;
        for (t = 0; t < p; t++) l.nodes.push({
            id: t,
            attributes: {
                x: Math.random(),
                y: Math.random()
            }
        }),
        c[t] = 0;
        for (t = 0; t < p; t++) for (n = t + 1; n < p; n++) d[(r = {
            id: h++,
            source: t,
            target: n
        }).source + "-" + r.target] = r,
        l.edges.push(r),
        c[t]++,
        c[n]++;
        for (t = p; t < f; t++) {
            for (l.nodes.push({
                id: t,
                x: 100 * Math.random(),
                y: 100 * Math.random()
            }), n = i = c[t] = 0; n < t; n++) i += c[n];
            for (s = o = 0; s < g; s++) for (a = Math.random(), n = u = 0; n < t; n++) if (!d[t + "-" + n] && !d[n + "-" + t] && (1 == t ? u = 1 : u += c[n] / i + o / (t - s), a <= u)) {
                o += c[n] / i,
                d[(r = {
                    id: h++,
                    source: t,
                    target: n
                }).source + "-" + r.target] = r,
                l.edges.push(r),
                c[t]++,
                c[n]++;
                break
            }
        }
        return l
    }
    function vh(e) {
        var t = e.toggleTexts({
            nodes: !1,
            edges: !1
        }),
        n = t.nodes,
        r = t.edges;
        this._nodeTextsWereEnabled = n,
        this._edgeTextsWereEnabled = r
    }
    function yh(e) {
        e.toggleTexts({
            nodes: this._nodeTextsWereEnabled,
            edges: this._edgeTextsWereEnabled
        }),
        this._nodeTextsWereEnabled = void 0,
        this._edgeTextsWereEnabled = void 0
    }
    rh.prototype.register = function(e, t) {
        ke(this._generators, e, t, "generator")
    },
    rh.prototype.load = function(e, t) {
        var n = Le(this._generators, e, "generator"),
        r = n.configure(t);
        return Promise.resolve(n.generate(r))
    },
    p.extend(function(t) {
        t.modules.generators.register("random", {
            configure: ih,
            generate: oh
        }),
        t.generate.random = function(e) {
            return t.modules.generators.load("random", e)
        }
    }),
    p.extend(function(t) {
        t.modules.generators.register("grid", {
            configure: sh,
            generate: ah
        }),
        t.generate.grid = function(e) {
            return t.modules.generators.load("grid", e)
        }
    }),
    p.extend(function(t) {
        t.modules.generators.register("path", {
            configure: uh,
            generate: lh
        }),
        t.generate.path = function(e) {
            return t.modules.generators.load("path", e)
        }
    }),
    p.extend(function(t) {
        t.modules.generators.register("balancedTree", {
            configure: dh,
            generate: ch
        }),
        t.generate.balancedTree = function(e) {
            return t.modules.generators.load("balancedTree", e)
        }
    }),
    p.extend(function(t) {
        t.modules.generators.register("erdosRenyi", {
            configure: hh,
            generate: fh
        }),
        t.generate.erdosRenyi = function(e) {
            return t.modules.generators.load("erdosRenyi", e)
        }
    }),
    p.extend(function(t) {
        t.modules.generators.register("barabasiAlbert", {
            configure: ph,
            generate: gh
        }),
        t.generate.barabasiAlbert = function(e) {
            return t.modules.generators.load("barabasiAlbert", e)
        }
    });
    var mh = {
        defaultSyncDuration: 500,
        skipTextDrawing: !0,
        useWebWorker: !0,
        locate: !1
    };
    p.extend(function(t) {
        var e = new _h(t);
        t.modules.layouts = e,
        t.layouts = {
            stop: function() {
                return e.stop()
            }
        },
        t.events.onLayoutStart = function(e) {
            return t.modules.events.on("layoutStart", e),
            t.events
        },
        t.events.onLayoutComplete = function(e) {
            return t.modules.events.on("layoutEnd", e),
            t.events
        },
        t.modules.graphics._addFeature(!0, "layoutable", {
            properties: {
                layoutable: {
                    check: function(e) {
                        return "boolean" == typeof e
                    },
                default:
                    !0
                }
            }
        })
    });
    var _h = function(e) {
        var t = this,
        n = e.modules,
        r = n.graph,
        i = n.graphics,
        o = n.tasks,
        s = n.events,
        a = n.settings,
        u = n.locate;
        this._modules = n,
        this._events = s,
        this._graph = r,
        this._graphics = i,
        this._tasks = o,
        this._settings = a,
        this._locate = u,
        this._layouts = {},
        this._nodeTextsWereEnabled = void 0,
        this._edgeTextsWereEnabled = void 0,
        Object.keys(mh).forEach(function(e) {
            t._settings.register("layouts." + e, mh[e])
        }),
        this._events.register(["layoutStart", "layoutEnd"]),
        this._currentLayout = null,
        this._events.on("clear",
        function() {
            return t.stop()
        })
    };
    function bh(e, t, n) {
        var r = e.length,
        i = t._getIds(!0, e);
        return {
            positions: n.getAttributes(new t.NodeList(e), ["x", "y"]),
            indexes: e,
            ids: i,
            size: r
        }
    }
    _h.prototype.register = function(e, t) {
        ke(this._layouts, e, t, "layout")
    },
    _h.prototype.getAvailableLayouts = function() {
        return Object.keys(this._layouts)
    },
    _h.prototype.start = function(r, i) {
        var d = this;
        void 0 === i && (i = {});
        var c = this._layouts[r],
        h = this._settings,
        f = this;
        return new Promise(function(n) {
            if (!c) throw new Error("layout " + r + " does not exist");
            d._currentLayout && d._currentLayout.stop();
            var o = "number" == typeof i.duration ? i.duration: h.get("layouts.defaultSyncDuration"),
            s = c.onSync,
            a = i.onSync,
            u = 0,
            e = Ae(i.skipTextDrawing, h.get("layouts.skipTextDrawing")),
            l = i.locate || h.get("layouts.locate");
            i.name = r,
            i.skipTextDrawing = e,
            l && ("boolean" == typeof l ? l = {
                duration: o
            }: l.duration = o);
            var t = {
                update: c.update,
                isRunning: c.isRunning,
                configure: c.configure,
                context: c.context,
                imports: c.imports,
                onStart: function() {
                    e && vh.call(f, f._graphics),
                    f.onStart(c, i, this)
                },
                onUpdate: function(e, t, n) {
                    var r = this,
                    i = ee();
                    n && i - u < 40 || (u = i, a && setTimeout(function() {
                        return a(e, t, n)
                    },
                    o), s ? f._graphics.animate(function() {
                        f._graphics.refreshAll(),
                        s(e, t, n),
                        l && f._locate.locateNodes(void 0, l)
                    },
                    o).then(function() {
                        n || r.fire("complete")
                    }) : n || this.fire("complete"))
                },
                onEnd: function(e, t) {
                    this.once("complete",
                    function() {
                        f.onComplete(e, c, i, t, n, i.onEnd)
                    })
                }
            };
            d._currentLayout = d._tasks.run(t, i, Ae(i.useWebWorker, d._settings.get("layouts.useWebWorker")), d._modules)
        })
    },
    _h.prototype.onComplete = function(e, t, n, r, i, o) {
        var s = this;
        t.onEnd && t.onEnd(e, r, null, !1),
        n.skipTextDrawing && setTimeout(function() {
            return yh.call(s, s._graphics)
        },
        200),
        this._graphics.refreshAll(),
        this._currentLayout = null;
        var a = bh(n.nodeData.indexes, this._graph, this._graphics),
        u = n.nodeData;
        this._events.fire("layoutEnd", {
            type: "layoutEnd",
            name: n.name,
            positions: {
                current: a.positions,
                before: u.positions
            },
            ids: a.ids
        }),
        setTimeout(function() {
            o && o(e),
            i()
        })
    },
    _h.prototype.onStart = function(e, t, n) {
        var r = this._graph,
        i = r.nodeIndexList(t.nodes),
        o = bh(i, r, this._graphics);
        i = (t.nodeData = o).ids,
        this._events.fire("layoutStart", {
            type: "layoutStart",
            name: t.name,
            ids: i,
            task: n
        })
    },
    _h.prototype.stop = function() {
        this._currentLayout && (this._currentLayout.stop(), this._currentLayout = null)
    },
    _h.prototype.isRunning = function() {
        return !! this._currentLayout
    };
    var xh = {
        configure: function(e, t) {
            var n = t.graph,
            r = t.camera,
            i = t.graphics;
            e.nodes || (e.nodes = n.getNodes()),
            e.nodes && e.nodes instanceof n.NodeList && (e.nodes = e.nodes.getId());
            var o, s, a, u = n.nodeIndexList(e.nodes),
            l = {},
            d = {},
            c = u.length,
            h = n._nodes,
            f = n._edges;
            e.nodes && delete(e = Oe(e)).nodes;
            var p = i._getAttributeArray(!0, "innerStroke.width"),
            g = i._getAttributeArray(!0, "outerStroke.width"),
            v = n._degrees(u),
            y = n.getNodeAttributesArrays(["x", "y", "radius"], {
                ids: u,
                destArrays: [new Float32Array(c), new Float32Array(c), new Array(c)]
            }),
            m = y[0],
            _ = y[1],
            b = y[2];
            p = p.getMultiple(u),
            g = g.getMultiple(u);
            var x = i.getAttribute(new n.NodeList(u), "layoutable"),
            w = "function" == typeof e.nodeMass ? e.nodeMass: function(e, t, n) {
                return t + 1
            };
            delete e.nodeMass;
            var A = "function" == typeof e.edgeWeight ? e.edgeWeight: function(e) {
                return 1
            };
            delete e.edgeWeight;
            var E = u.reduce(function(e, t, n) {
                return x[n] || (e[t] = !0),
                e
            },
            {}),
            C = 0,
            S = 0,
            I = r.zoom;
            for (a = 0; a < u.length; ++a) {
                var T = u[a],
                N = m[a],
                k = _[a];
                l[T] = {
                    id: T,
                    x: N,
                    y: k,
                    degree: v[a],
                    size: b[a] + (p[a] + g[a]) / I,
                    pinned: !!E[T],
                    mass: w(h.get(T), v[a], a)
                }
            }
            if (1 < c) for (a = 0; a < c; a++) {
                var L = l[u[a]];
                if (!L.pinned) {
                    var R = 1e-6 * Math.random(),
                    z = 1e-6 * Math.random();
                    L.x += R,
                    L.y += z
                }
                C += L.x,
                S += L.y
            }
            var M = {
                x: C /= c,
                y: S /= c
            };
            s = (o = n._getAdjacentElements(!1, u)).length;
            var P = n._getSources(o),
            F = n._getTargets(o);
            for (a = 0; a < s; a++) {
                var D = o[a],
                O = P[a],
                B = F[a];
                l[O] && l[B] && (d[D] = {
                    source: O,
                    target: B
                },
                d[D].weight = A(f.get(D)))
            }
            return {
                nodes: l,
                edges: d,
                config: e,
                barycentre: M
            }
        },
        context: function() {
            return {}
        },
        update: function(e, t) {
            var Z, n, r, i;
            t.W ? Z = t.W: (Z = {
                ppn: 10,
                ppe: 3,
                ppr: 9,
                MAX_SUBDIVISION_RETRIES: 3,
                maxForce: 10,
                iterations: 0,
                converged: !1,
                settings: {
                    linLogMode: !1,
                    outboundAttractionDistribution: !1,
                    adjustSizes: !1,
                    edgeWeightInfluence: 0,
                    scalingRatio: 100,
                    strongGravityMode: !0,
                    gravity: 1,
                    slowDown: 1,
                    barnesHutOptimize: !1,
                    barnesHutTheta: .5,
                    startingIterations: 10,
                    iterationsPerRender: 10,
                    maxIterations: 1e3,
                    avgDistanceThreshold: .01,
                    autoStop: !0,
                    alignNodeSiblings: !0,
                    nodeSiblingsScale: 5,
                    nodeSiblingsAngleMin: 0
                }
            },
            t.W = Z, r = (n = e).config, i = function(e, t) {
                var n, r, i, o = e.nodes,
                s = e.edges,
                a = Object.keys(e.nodes),
                u = Object.keys(e.edges),
                l = a.length * Z.ppn,
                d = u.length * Z.ppe,
                c = {},
                h = new Float32Array(l),
                f = new Float32Array(d);
                for (n = r = 0, i = a.length; n < i; n++) {
                    var p = a[n],
                    g = o[p];
                    c[p] = r,
                    h[r] = y(g.x, t),
                    h[r + 1] = y(g.y, t),
                    h[r + 2] = 0,
                    h[r + 3] = 0,
                    h[r + 4] = 0,
                    h[r + 5] = 0,
                    h[r + 6] = g.mass,
                    h[r + 7] = 1,
                    h[r + 8] = g.size,
                    h[r + 9] = g.pinned || 0,
                    r += Z.ppn
                }
                for (n = r = 0, i = u.length; n < i; n++) {
                    p = u[n];
                    var v = s[p];
                    f[r] = c[v.source],
                    f[r + 1] = c[v.target],
                    f[r + 2] = v.weight || 0,
                    r += Z.ppe
                }
                return {
                    nodes: h,
                    edges: f
                }
            } (n, r), t.NodeMatrix = i.nodes, t.EdgeMatrix = i.edges, Z.nodesLength = t.NodeMatrix.length, Z.edgesLength = t.EdgeMatrix.length, Z.settings = function() {
                var e, t, n = arguments,
                r = {},
                i = arguments.length;
                for (e = i - 1; 0 <= e; e--) for (t in arguments[e]) r[t] = n[e][t];
                return r
            } (e.config, Z.settings), t.nodes = e.nodes, t.edges = e.edges, t.barycentre = e.barycentre);
            var Q, J = t.NodeMatrix,
            K = t.EdgeMatrix;
            var o = {
                x: 0,
                y: 1,
                dx: 2,
                dy: 3,
                old_dx: 4,
                old_dy: 5,
                mass: 6,
                convergence: 7,
                size: 8,
                pinned: 9
            };
            function ee(e, t) {
                if (e % Z.ppn != 0) throw new Error('Invalid argument in np: "i" is not correct (' + e + ").");
                if (e !== parseInt(e)) throw new TypeError('Invalid argument in np: "i" is not an integer.');
                if (t in o) return e + o[t];
                throw new Error("ForceLink.Worker - Inexistant node property given (" + t + ").")
            }
            function y(e, t) {
                switch (t.randomize) {
                case "globally":
                    return Math.random() * (t.randomizeFactor || 1);
                case "locally":
                    return e + Math.random() * (t.randomizeFactor || 1);
                default:
                    return e
                }
            }
            function s() {
                var e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g, v;
                for (n = 0; n < Z.nodesLength; n += Z.ppn) J[n + 4] = J[n + 2],
                J[n + 5] = J[n + 3],
                J[n + 2] = 0,
                J[n + 3] = 0;
                if (Z.settings.outboundAttractionDistribution) {
                    for (n = u = 0; n < Z.nodesLength; n += Z.ppn) u += J[n + 6];
                    u /= Z.nodesLength
                }
                if (Z.settings.barnesHutOptimize) {
                    var y, m, _, b = 1 / 0,
                    x = -1 / 0,
                    w = 1 / 0,
                    A = -1 / 0;
                    for (Q = [], n = 0; n < Z.nodesLength; n += Z.ppn) b = Math.min(b, J[n]),
                    x = Math.max(x, J[n]),
                    w = Math.min(w, J[n + 1]),
                    A = Math.max(A, J[n + 1]);
                    var E = x - b,
                    C = A - w;
                    C < E ? A = (w -= (E - C) / 2) + E: x = (b -= (C - E) / 2) + C,
                    Q[0] = -1,
                    Q[1] = (b + x) / 2,
                    Q[2] = (w + A) / 2,
                    Q[3] = Math.max(x - b, A - w),
                    Q[4] = -1,
                    Q[5] = -1,
                    Q[6] = 0,
                    Q[7] = 0,
                    e = 1;
                    Q[8] = 0;
                    for (n = 0; n < Z.nodesLength; n += Z.ppn) for (t = 0, _ = Z.MAX_SUBDIVISION_RETRIES;;) {
                        if (! (0 <= Q[t + 5])) {
                            if (Q[t] < 0) {
                                Q[t] = n;
                                break
                            }
                            if (Q[t + 5] = e * Z.ppr, s = Q[t + 3] / 2, a = Q[t + 5], Q[a] = -1, Q[a + 1] = Q[t + 1] - s, Q[a + 2] = Q[t + 2] - s, Q[a + 3] = s, Q[a + 4] = a + Z.ppr, Q[a + 5] = -1, Q[a + 6] = 0, Q[a + 7] = 0, Q[a + 8] = 0, a += Z.ppr, Q[a] = -1, Q[a + 1] = Q[t + 1] - s, Q[a + 2] = Q[t + 2] + s, Q[a + 3] = s, Q[a + 4] = a + Z.ppr, Q[a + 5] = -1, Q[a + 6] = 0, Q[a + 7] = 0, Q[a + 8] = 0, a += Z.ppr, Q[a] = -1, Q[a + 1] = Q[t + 1] + s, Q[a + 2] = Q[t + 2] - s, Q[a + 3] = s, Q[a + 4] = a + Z.ppr, Q[a + 5] = -1, Q[a + 6] = 0, Q[a + 7] = 0, Q[a + 8] = 0, a += Z.ppr, Q[a] = -1, Q[a + 1] = Q[t + 1] + s, Q[a + 2] = Q[t + 2] + s, Q[a + 3] = s, Q[a + 4] = Q[t + 4], Q[a + 5] = -1, Q[a + 6] = 0, Q[a + 7] = 0, Q[a + 8] = 0, e += 4, y = J[Q[t]] < Q[t + 1] ? J[Q[t] + 1] < Q[t + 2] ? Q[t + 5] : Q[t + 5] + Z.ppr: J[Q[t] + 1] < Q[t + 2] ? Q[t + 5] + 2 * Z.ppr: Q[t + 5] + 3 * Z.ppr, Q[t + 6] = J[Q[t] + 6], Q[t + 7] = J[Q[t]], Q[t + 8] = J[Q[t] + 1], Q[y] = Q[t], Q[t] = -1, y === (m = J[n] < Q[t + 1] ? J[n + 1] < Q[t + 2] ? Q[t + 5] : Q[t + 5] + Z.ppr: J[n + 1] < Q[t + 2] ? Q[t + 5] + 2 * Z.ppr: Q[t + 5] + 3 * Z.ppr)) {
                                if (_--) {
                                    t = y;
                                    continue
                                }
                                _ = Z.MAX_SUBDIVISION_RETRIES;
                                break
                            }
                            Q[m] = n;
                            break
                        }
                        y = J[n] < Q[t + 1] ? J[n + 1] < Q[t + 2] ? Q[t + 5] : Q[t + 5] + Z.ppr: J[n + 1] < Q[t + 2] ? Q[t + 5] + 2 * Z.ppr: Q[t + 5] + 3 * Z.ppr,
                        Q[t + 7] = (Q[t + 7] * Q[t + 6] + J[n] * J[n + 6]) / (Q[t + 6] + J[n + 6]),
                        Q[t + 8] = (Q[t + 8] * Q[t + 6] + J[n + 1] * J[n + 6]) / (Q[t + 6] + J[n + 6]),
                        Q[t + 6] += J[n + 6],
                        t = y
                    }
                }
                if (Z.settings.barnesHutOptimize) for (l = Z.settings.scalingRatio, n = 0; n < Z.nodesLength; n += Z.ppn) for (t = 0;;) if (0 <= Q[t + 5]) {
                    if (g = Math.sqrt((J[n] - Q[t + 7]) * (J[n] - Q[t + 7]) + (J[n + 1] - Q[t + 8]) * (J[n + 1] - Q[t + 8])), 2 * Q[t + 3] / g < Z.settings.barnesHutTheta) {
                        if (d = J[n] - Q[t + 7], c = J[n + 1] - Q[t + 8], Z.settings.adjustSizes ? 0 < g ? (v = l * J[n + 6] * Q[t + 6] / g / g, J[n + 2] += d * v, J[n + 3] += c * v) : g < 0 && (v = -l * J[n + 6] * Q[t + 6] / g, J[n + 2] += d * v, J[n + 3] += c * v) : 0 < g && (v = l * J[n + 6] * Q[t + 6] / g / g, J[n + 2] += d * v, J[n + 3] += c * v), Q[t + 4] < 0) break;
                        t = Q[t + 4];
                        continue
                    }
                    t = Q[t + 5]
                } else {
                    if (0 <= Q[t] && Q[t] !== n && (d = J[n] - J[Q[t]], c = J[n + 1] - J[Q[t] + 1], g = Math.sqrt(d * d + c * c), Z.settings.adjustSizes ? 0 < g ? (v = l * J[n + 6] * J[Q[t] + 6] / g / g, J[n + 2] += d * v, J[n + 3] += c * v) : g < 0 && (v = -l * J[n + 6] * J[Q[t] + 6] / g, J[n + 2] += d * v, J[n + 3] += c * v) : 0 < g && (v = l * J[n + 6] * J[Q[t] + 6] / g / g, J[n + 2] += d * v, J[n + 3] += c * v)), Q[t + 4] < 0) break;
                    t = Q[t + 4]
                } else for (l = Z.settings.scalingRatio, r = 0; r < Z.nodesLength; r += Z.ppn) for (i = 0; i < r; i += Z.ppn) d = J[r] - J[i],
                c = J[r + 1] - J[i + 1],
                Z.settings.adjustSizes ? 0 < (g = Math.sqrt(d * d + c * c) - J[r + 8] - J[i + 8]) ? (v = l * J[r + 6] * J[i + 6] / g / g, J[r + 2] += d * v, J[r + 3] += c * v, J[i + 2] += d * v, J[i + 3] += c * v) : g < 0 && (v = 100 * l * J[r + 6] * J[i + 6], J[r + 2] += d * v, J[r + 3] += c * v, J[i + 2] -= d * v, J[i + 3] -= c * v) : 0 < (g = Math.sqrt(d * d + c * c)) && (v = l * J[r + 6] * J[i + 6] / g / g, J[r + 2] += d * v, J[r + 3] += c * v, J[i + 2] -= d * v, J[i + 3] -= c * v);
                for (a = Z.settings.gravity / Z.settings.scalingRatio, l = Z.settings.scalingRatio, n = 0; n < Z.nodesLength; n += Z.ppn) v = 0,
                d = J[n],
                c = J[n + 1],
                g = Math.sqrt(d * d + c * c),
                Z.settings.strongGravityMode ? 0 < g && (v = l * J[n + 6] * a) : 0 < g && (v = l * J[n + 6] * a / g),
                J[n + 2] -= d * v,
                J[n + 3] -= c * v;
                for (l = 1 * (Z.settings.outboundAttractionDistribution ? u: 1), o = 0; o < Z.edgesLength; o += Z.ppe) r = K[o],
                i = K[o + 1],
                s = K[o + 2],
                p = Math.pow(s, Z.settings.edgeWeightInfluence),
                d = J[r] - J[i],
                c = J[r + 1] - J[i + 1],
                Z.settings.adjustSizes ? (g = Math.sqrt(d * d + c * c) - J[r + 8] - J[i + 8], Z.settings.linLogMode ? Z.settings.outboundAttractionDistribution ? 0 < g && (v = -l * p * Math.log(1 + g) / g / J[r + 6]) : 0 < g && (v = -l * p * Math.log(1 + g) / g) : Z.settings.outboundAttractionDistribution ? 0 < g && (v = -l * p / J[r + 6]) : 0 < g && (v = -l * p)) : (g = Math.sqrt(d * d + c * c), Z.settings.linLogMode ? Z.settings.outboundAttractionDistribution ? 0 < g && (v = -l * p * Math.log(1 + g) / g / J[r + 6]) : 0 < g && (v = -l * p * Math.log(1 + g) / g) : Z.settings.outboundAttractionDistribution ? (g = 1, v = -l * p / J[r + 6]) : (g = 1, v = -l * p)),
                0 < g && (J[r + 2] += d * v, J[r + 3] += c * v, J[i + 2] -= d * v, J[i + 3] -= c * v);
                var S, I, T, N, k = 0;
                if (Z.settings.adjustSizes) for (n = 0; n < Z.nodesLength; n += Z.ppn) J[ee(n, "pinned")] || ((S = Math.sqrt(J[n + 2] * J[n + 2] + J[n + 3] * J[n + 3])) > Z.maxForce && (J[n + 2] = J[n + 2] * Z.maxForce / S, J[n + 3] = J[n + 3] * Z.maxForce / S), I = J[n + 6] * Math.sqrt((J[n + 4] - J[n + 2]) * (J[n + 4] - J[n + 2]) + (J[n + 5] - J[n + 3]) * (J[n + 5] - J[n + 3])), T = Math.sqrt((J[n + 4] + J[n + 2]) * (J[n + 4] + J[n + 2]) + (J[n + 5] + J[n + 3]) * (J[n + 5] + J[n + 3])) / 2, N = .1 * Math.log(1 + T) / (1 + Math.sqrt(I)), h = J[n], f = J[n + 1], J[n] = J[n] + J[n + 2] * (N / Z.settings.slowDown), J[n + 1] = J[n + 1] + J[n + 3] * (N / Z.settings.slowDown), d = J[n], c = J[n + 1], k += g = Math.sqrt((d - h) * (d - h) + (c - f) * (c - f)));
                else for (n = 0; n < Z.nodesLength; n += Z.ppn) J[ee(n, "pinned")] || (I = J[n + 6] * Math.sqrt((J[n + 4] - J[n + 2]) * (J[n + 4] - J[n + 2]) + (J[n + 5] - J[n + 3]) * (J[n + 5] - J[n + 3])), T = Math.sqrt((J[n + 4] + J[n + 2]) * (J[n + 4] + J[n + 2]) + (J[n + 5] + J[n + 3]) * (J[n + 5] + J[n + 3])) / 2, N = J[n + 7] * Math.log(1 + T) / (1 + Math.sqrt(I)), J[n + 7] = Math.min(1, Math.sqrt(N * (J[n + 2] * J[n + 2] + J[n + 3] * J[n + 3]) / (1 + Math.sqrt(I)))), h = J[n], f = J[n + 1], J[n] = J[n] + J[n + 2] * (N / Z.settings.slowDown), J[n + 1] = J[n + 1] + J[n + 3] * (N / Z.settings.slowDown), d = J[n], c = J[n + 1], k += g = Math.sqrt((d - h) * (d - h) + (c - f) * (c - f)));
                if (Z.iterations++, Z.settings.autoStop && (Z.converged = Z.iterations > Z.settings.maxIterations || k / Z.nodesLength < Z.settings.avgDistanceThreshold, Z.converged && Z.settings.alignNodeSiblings)) {
                    var L, R, z = {},
                    M = {};
                    for (o = 0; o < Z.edgesLength; o += Z.ppe)(r = K[o]) !== (i = K[o + 1]) && (z[r] = z[r] || {},
                    z[i] = z[i] || {},
                    z[r][i] = !0, z[i][r] = !0);
                    Object.keys(z).forEach(function(e) {
                        e = ~~e,
                        2 == (R = Object.keys(z[e])).length && ((L = R[0] + ";" + R[1]) in M || (L = R[1] + ";" + R[0], M[L] || (M[L] = [~~R[1], ~~R[0]])), M[L].push(e))
                    });
                    var P, F, D, O, B, j, U, H, X, W, G, q, Y, V, $ = Z.settings.nodeSiblingsAngleMin;
                    Object.keys(M).forEach(function(e) {
                        if (F = M[e].shift(), D = M[e].shift(), 1 != (P = M[e].filter(function(e) {
                            return ! J[ee(e, "pinned")]
                        })).length) {
                            var t, n, r, i, o, s, a, u, l, d, c, h, f, p;
                            if (j = J[F], U = J[F + 1], H = J[D], X = J[D + 1], O = Object.keys(z[F]).length, B = Object.keys(z[D]).length, G = {
                                x: (r = j) + (H - r) * (o = (.75 - (n = .25)) * (O / (O + B) - (t = 0)) / (1 - t) + n),
                                y: (i = U) + (X - i) * o
                            },
                            q = {
                                xi: -((l = X) - (a = U)),
                                yi: (u = H) - (s = j),
                                xi_prime: l - a,
                                yi_prime: -(u - s)
                            },
                            d = H - j, c = X - U, W = Math.sqrt(d * d + c * c), f = W, Y = {
                                x: ((h = q).xi_prime - h.xi) / f,
                                y: (h.yi_prime - h.yi) / f
                            },
                            p = Y, V = Math.acos(p.x / Math.sqrt(p.x * p.x + p.y * p.y)), 2 * $ > Math.PI) throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");
                            0 < $ && (V < $ || V > Math.PI - $ && V <= Math.PI ? Y = {
                                x: 2 * Math.cos(Math.PI - $),
                                y: 2 * Math.sin(Math.PI - $)
                            }: (V > 2 * Math.PI - $ || V >= Math.PI && V < Math.PI + $) && (Y = {
                                x: 2 * Math.cos($),
                                y: 2 * Math.sin($)
                            }));
                            var g = 0,
                            v = 1,
                            y = 1;
                            P.length % 2 == 1 && (y = 0, g = 1);
                            for (var m = 0; m < P.length; m++) J[P[m]] = G.x + v * Y.x * y * (g || 2 <= m ? Z.settings.nodeSiblingsScale: 2 * Z.settings.nodeSiblingsScale / 3),
                            J[P[m] + 1] = G.y + v * Y.y * y * (g || 2 <= m ? Z.settings.nodeSiblingsScale: 2 * Z.settings.nodeSiblingsScale / 3),
                            v = -v,
                            y += (m + g) % 2
                        }
                    })
                }
            }
            return function() {
                if (Z.settings.autoStop) for (; ! Z.converged;) s();
                else for (var e = 0 === Z.iterations ? Z.settings.startingIterations: Z.iterations + Z.settings.iterationsPerRender; Z.iterations !== e;) s();
                return {
                    nodes: function(e) {
                        for (var t = Object.keys(e), n = {},
                        r = 0; r < J.length; r += Z.ppn) {
                            var i = t[r / Z.ppn];
                            n[i] = {
                                id: i,
                                x: J[r],
                                y: J[r + 1],
                                pinned: J[ee(r, "pinned")]
                            }
                        }
                        return n
                    } (t.nodes),
                    barycentre: t.barycentre
                }
            } ()
        },
        isRunning: function(e) {
            return ! e.W.settings.autoStop
        },
        onSync: function(e, t) {
            var n, r, i, o, s, a, u, l = e.nodes,
            d = e.barycentre,
            c = t.graphics,
            h = t.graph,
            f = Object.keys(l),
            p = f.length,
            g = 0,
            v = 0,
            y = new Array(p),
            m = new Array(p),
            _ = new Array(p);
            for (n = 0; n < p; n++) o = (i = l[r = f[n]]).x,
            s = i.y,
            y[n] = parseInt(r),
            m[n] = {
                x: o,
                y: s
            },
            _[n] = i.pinned,
            g += o,
            v += s;
            for (a = g / p - d.x, u = v / p - d.y, n = 0; n < p; n++) _[n] || (m[n].x -= a, m[n].y -= u);
            c.setAttributes(new h.NodeList(y), m)
        }
    };
    p.extend(function(t) {
        t.layouts.forceLink = function(e) {
            return void 0 === e && (e = {}),
            t.modules.layouts.start("forceLink", e)
        },
        t.modules.layouts.register("forceLink", xh)
    });
    var wh = {
        dependencies: ["locate", "graph", "graphics", "data"],
        configure: function(e, t) {
            var n = t.graph,
            r = t.locate,
            i = (t.data, t.graphics),
            o = e.sortBy,
            s = e.rows,
            a = e.cols;
            function u(e) {
                return void 0 === e || "number" == typeof e && isFinite(e) && 0 < e
            }
            if (e.nodes || (e.nodes = n.getNodes()), !e.nodes || e.nodes instanceof n.NodeList || (e.nodes = n.getNodes(e.nodes)), !u(s)) throw new TypeError('"rows" should be a positive integer');
            if (!u(a)) throw new TypeError('"cols" should be a positive integer');
            var l, d, c, h = e.nodes,
            f = e.nodes._indexes,
            p = f.length;
            s ? a = Math.ceil(p / s) : (a || (a = Math.ceil(Math.sqrt(p))), s = Math.ceil(p / a));
            var g = e.sortFallbackValue;
            if ("string" == typeof o) {
                if ("radius" === o) c = n.getAttribute(!0, "radius").getMultiple(f);
                else if ("random" === o) for (c = new Array(p), l = 0; l < p; l++) c[l] = Math.random();
                else if (c = h.getData(o), void 0 !== g) for (l = 0; l < p; l++) void 0 === c[l] && (c[l] = g)
            } else for (c = new Array(p), l = 0; l < p; l++) c[l] = l;
            var v = [],
            y = i.getAttribute(h, "layoutable");
            for (l = 0; l < p; ++l) d = f[l],
            y[l] && v.push({
                id: d,
                attr: c[l]
            });
            var m = r.nodesBoundingBox(h),
            _ = 1.1 * m.maxSize,
            b = m.minX + _,
            x = m.maxX - _,
            w = m.minY + _,
            A = m.maxY - _;
            return m.width < _ * a * 2 && (b = m.cx - _ * a + _, x = m.cx + _ * a - _),
            m.height < _ * s * 2 && (w = m.cy - _ * s + _, A = m.cy + _ * s - _),
            {
                sort: !!o,
                nodes: v,
                reverse: !!e.reverse,
                cols: a,
                rows: s,
                minX: b,
                maxX: x,
                minY: w,
                maxY: A
            }
        },
        update: function(e) {
            e.sort && e.nodes.sort(function(e, t) {
                var n = e.attr,
                r = t.attr;
                return n < r ? -1 : r < n ? 1 : 0
            }),
            e.reverse && e.nodes.reverse();
            var t = (e.maxX - e.minX) / (e.cols - 1),
            n = (e.maxY - e.minY) / (e.rows - 1),
            r = 0,
            i = 0,
            o = e.minX,
            s = e.minY;
            isFinite(t) || (t = 0),
            isFinite(n) || (n = 0);
            for (var a = 0; a < e.nodes.length; ++a) {
                var u = e.nodes[a];
                u.x = o + r * t,
                u.y = s + i * n,
                (r += 1) === e.cols && (i += 1, r = 0)
            }
            return e.nodes
        },
        onSync: function(e, t) {
            for (var n = t.graphics,
            r = t.graph,
            i = e.length,
            o = new Uint32Array(i), s = new Array(i), a = 0; a < e.length; ++a) {
                var u = e[a];
                o[a] = u.id,
                s[a] = {
                    x: u.x,
                    y: u.y
                }
            }
            n.setAttributes(new r.NodeList(o), s)
        }
    };
    p.extend(function(t) {
        t.layouts.grid = function(e) {
            return void 0 === e && (e = {}),
            t.modules.layouts.start("grid", e)
        },
        t.modules.layouts.register("grid", wh)
    });
    var Ah = {
        configure: function(e, t) {
            var n = t.graph,
            r = t.graphics,
            i = t.data;
            if (void 0 === e.centralNode) throw new Error('concentric layout: missing parameter "centralNode"');
            e.centralNode instanceof n.Node || (e.centralNode = n.getNode(e.centralNode)),
            e.nodes ? e.nodes instanceof n.NodeList || (e.nodes = n.getNodes(e.nodes)) : e.nodes = n.getNodes();
            var o, s, a = n._getIndex(!0, e.centralNode),
            u = e.centralNode.getPosition(),
            l = u.x,
            d = u.y,
            c = null,
            h = n.nodeIndexList(e.nodes),
            f = [],
            p = h.length,
            g = n.getNodeAttributesArrays(["radius"], {
                ids: h,
                destArrays: [new Array(p)]
            })[0],
            v = r.getAttribute(e.nodes, "layoutable");
            for (o = 0; o < p; o++)((s = h[o]) === a || v[o]) && f.push(s); - 1 === f.indexOf(a) && f.push(a),
            p = f.length;
            var y = {},
            m = new Array(p);
            for (o = 0; o < p; o++) y[f[o]] = m[o] = o;
            var _ = new Array(p);
            for (o = 0; o < p; o++) {
                for (var b = n._getAdjacentElements(!0, [f[o]]), x = 0, w = b.length; x < w; x++) b[x] = y[b[x]];
                _[o] = b
            }
            return e.sortBy && (c = "random" === e.sortBy ? "random": "radius" === e.sortBy ? g.slice() : i.getProperty(!0, void 0, e.sortBy)),
            {
                sourceNodeIndex: f.indexOf(a),
                centerX: "number" === e.centerX ? e.centerX: l,
                centerY: "number" === e.centerY ? e.centerY: d,
                list: f,
                indexes: m,
                size: p,
                totalSize: p,
                attributes: {
                    adjacentNodes: _,
                    size: g
                },
                sortAttr: c,
                clockWise: void 0 === e.clockWise || e.clockWise,
                circleHopRatio: e.circleHopRatio || 5,
                allowOverlap: !!e.allowOverlap
            }
        },
        context: function() {
            return {
                dijkstra: function(e, t, n, r, i) {
                    var o, s, a, u = Math.pow(2, 31) - 1,
                    l = new Int32Array(r),
                    d = new Int32Array(r),
                    c = new Int8Array(r);
                    for (a = 0; a < r + 1; ++a) l[a] = u,
                    d[a] = -1;
                    for (a = 0; a < r; ++a) void 0 !== (o = t[a]) && (l[o] = u, d[o] = -1);
                    for (l[i] = 0;;) {
                        var h = u,
                        f = -1;
                        for (a = 0; a < n; ++a) s = l[o = t[a]],
                        !c[o] && s < h && (h = s, c[f = o] = !0);
                        if ( - 1 === f) break;
                        var p = e[f],
                        g = p.length,
                        v = h + 1;
                        for (a = 0; a < g; ++a) v < (s = l[o = p[a]]) && (l[o] = v, d[o] = f)
                    }
                    return l
                },
                determinePropertyType: function(e, t, n) {
                    for (var r = 0; r < n; ++r) if ("number" != typeof e[t[r]]) return "string";
                    return "number"
                }
            }
        },
        update: function(e, t) {
            var n, r = e.attributes.adjacentNodes,
            i = e.attributes.size,
            o = e.indexes,
            s = e.size,
            a = e.sourceNodeIndex,
            u = e.centerX,
            l = e.centerY,
            d = e.sortAttr,
            c = new Array(e.totalSize),
            h = new Array(e.totalSize),
            f = t.dijkstra(r, o, e.size, e.totalSize, a),
            p = 0,
            g = {};
            for (n = 0; n < s; ++n) {
                var v = i[o[n]];
                p < v && (p = v)
            }
            var y = p * e.circleHopRatio,
            m = 0,
            _ = 0,
            b = Math.PI / 9;
            for (n = 0; n < s; ++n) {
                var x = o[n],
                w = f[x],
                A = g[w];
                A || (A = [], g[w] = A),
                A.push(x)
            }
            var E = null,
            C = !0;
            if ("random" === d) E = function() {
                return Math.random() - .5
            };
            else if (d) {
                E = "number" === t.determinePropertyType(d, o, v) ?
                function(e, t) {
                    return d[e] - d[t]
                }: function(e, t) {
                    return d[e] < d[t] ? -1 : 1
                }
            } else C = !1;
            var S = Object.keys(g).sort(function(e, t) {
                return parseInt(e) - parseInt(t)
            });
            for (n = 0; n < S.length; ++n) {
                var I = g[S[n]],
                T = I.length,
                N = _,
                k = 2 * Math.PI / T;
                if (0 !== n && !e.allowOverlap) {
                    var L, R = 2 * Math.PI * m,
                    z = 0;
                    for (M = 0; M < T; ++M) z += i[I[M]];
                    R < (L = 2 * z * Math.SQRT2) && (m += L / (2 * Math.PI) - m)
                }
                C && (I.sort(E), e.clockWise || I.reverse());
                for (var M = 0; M < T; ++M) {
                    c[x = I[M]] = Math.cos(N) * m + u,
                    h[x] = Math.sin(N) * m + l,
                    v = i[x],
                    N += k * (e.allowOverlap ? 1 : v / z * T)
                }
                m += y,
                _ += b
            }
            return {
                x: c,
                y: h,
                indexes: e.list
            }
        },
        isRunning: function() {
            return ! 1
        },
        onSync: function(e, t) {
            var n = e.indexes,
            r = e.x,
            i = e.y,
            o = t.graphics,
            s = t.graph;
            o.setAttributes(new s.NodeList(n), n.map(function(e, t) {
                return {
                    x: r[t],
                    y: i[t]
                }
            }))
        }
    };
    p.extend(function(t) {
        t.layouts.concentric = function(e) {
            return void 0 === e && (e = {}),
            t.modules.layouts.start("concentric", e)
        },
        t.modules.layouts.register("concentric", Ah)
    });
    var Eh = {
        defaultDirected: !0,
        defaultMultigraph: !0,
        defaultCompound: !1,
        defaultRankDir: "TB",
        maxNbEdges: 500,
        maxNbNodes: 500
    };
    p.extend(function(t) {
        t.layouts.hierarchical = function(e) {
            return void 0 === e && (e = {}),
            e.useWebWorker = !1,
            t.modules.layouts.start("hierarchical", e)
        },
        t.modules.layouts.register("hierarchical", Ch)
    });
    var Ch = {
        configure: function(e, t) {
            void 0 === e && (e = {});
            var n = t.graph,
            r = t.graphics,
            i = (t.data, J("dagre", {
                globalVarName: "dagre"
            }));
            if (!i || !i.graphlib) throw new Error("to use the dagre plugin, please include lib/dagre.min.js");
            e.nodes || (e.nodes = n.getNodes()),
            e.nodes && e.nodes instanceof n.NodeList && (e.nodes = e.nodes.getId());
            var o = Ie(Eh),
            s = n.getEdges(),
            a = n.getNodes(e.nodes),
            u = a.size,
            l = s.size,
            d = o.maxNbNodes,
            c = o.maxNbEdges;
            if (d && d < u) throw new Error("Unable to run dagre layout: the graph has " + u + " nodes (maximum allowed: " + d + ")");
            if (c && c < l) throw new Error("Unable to run dagre layout: the graph has " + l + " edges (maximum allowed: " + c + ")");
            if ((e = e || {}).directed = Ae(e.directed, o.defaultDirected), e.multigraph = Ae(e.multigraph, o.defaultMultigraph), e.compound = Ae(e.compound, o.defaultCompound), e.rankdir = Ae(e.rankdir, o.defaultRankDir), -1 === ["TB", "BT", "LR", "RL"].indexOf(e.rankdir)) throw new Error('defaultRankDir should be one of the "TB", "BT", "LR", "RL"');
            var h = a.getId(),
            f = r.getAttribute(a, "layoutable").reduce(function(e, t, n) {
                return e[h[n]] = t,
                e
            },
            {});
            return {
                nodes: h,
                edges: s.map(function(e) {
                    return {
                        id: e.getId(),
                        source: e.getSource().getId(),
                        target: e.getTarget().getId()
                    }
                }),
                options: e,
                layoutable: f
            }
        },
        context: function() {},
        update: function(e, t) {
            var n = e.nodes,
            r = e.edges,
            i = e.options,
            o = e.layoutable,
            s = J("dagre", {
                globalVarName: "dagre"
            }),
            a = new s.graphlib.Graph({
                directed: i.directed,
                multigraph: i.multigraph,
                compound: i.compound
            });
            a.setGraph(i),
            n.forEach(function(e) {
                o[e] && a.setNode(e, {})
            }),
            r.forEach(function(e) {
                var t = e.source,
                n = e.target,
                r = e.id;
                a.node(t) && a.node(n) && a.setEdge(t, n, {
                    id: r
                })
            }),
            s.layout(a);
            var u = a.nodes();
            return {
                ids: u,
                positions: u.map(function(e) {
                    return a.node(e)
                })
            }
        },
        isRunning: function() {
            return ! 1
        },
        onSync: function(e, t) {
            var n = e.ids,
            r = e.positions,
            i = t.graphics,
            o = t.graph;
            i.setAttributes(o.getNodes(n), r)
        }
    };
    function Sh(e, t, n) {
        for (var r, i, o, s, a, u, l, d, c, h, f, p, g = 1 / 0,
        v = 1,
        y = t.length; v < y; v += 2) {
            var m = t[v - 1],
            _ = t[v % y],
            b = (m[0] + _[0]) / 2,
            x = (m[1] + _[1]) / 2,
            w = e[0] - b,
            A = e[1] - x,
            E = w * w + A * A;
            E < g && (g = E, r = m, i = _)
        }
        return o = r[0],
        s = r[1],
        a = i[0],
        u = i[1],
        l = n,
        d = (o + a) / 2,
        c = (s + u) / 2,
        h = -(s - u),
        f = o - a,
        p = Math.sqrt(h * h + f * f),
        [d - l * (h /= p), c - l * (f /= p)]
    }
    function Ih(e, t, n) {
        var r = t.nodes,
        i = t.margin;
        void 0 === i && (i = 5);
        var o = t.duration;
        void 0 === o && (o = 0);
        var s, a, u, l, d, c, h = e.modules.graph,
        f = e.getNodes(),
        p = r._indexes.reduce(function(e, t) {
            return e[t] = !0,
            e
        },
        {}),
        g = new h.NodeList(f._indexes.slice().filter(function(e) {
            return ! p[e]
        })),
        v = g.getPosition().map(function(e) {
            return [e.x, e.y]
        }),
        y = r.getPosition(),
        m = r.getBoundingBox(),
        _ = g.getBoundingBox(),
        b = vr(y.map(function(e) {
            return e.x
        }), y.map(function(e) {
            return e.y
        }), r.getAttribute("radius")),
        x = b[0],
        w = b[1],
        A = b[2] + (m.maxSize + _.maxSize) + i,
        E = 0,
        C = 0;
        if (function(e, t) {
            for (var n = t[0], r = t[1], i = t[2], o = Math.abs, s = 0, a = e.length; s < a; s++) {
                var u = e[s],
                l = u[0],
                d = u[1],
                c = o(l - n),
                h = o(d - r);
                if (c + h <= i) return ! 0;
                if (! (i < c || i < h) && c * c + h * h <= i * i) return ! 0
            }
            return ! 1
        } (v, [b[0], b[1], A])) if (g.size <= 3) {
            if (Mn([x, w, b[2]], _)) {
                var S = function(e, t, n) {
                    for (var r, i, o = Ot(n.cx, n.cy, e, t, n.minX, n.minY, n.maxX, n.maxY), s = 1 / 0, a = 0, u = o.length; a < u; a++) {
                        var l = o[a]; (r = jt(e, t, l.x, l.y)) < s && (s = r, i = l)
                    }
                    return i
                } (x, w, _);
                s = jt(_.cx, _.cy, S.x, S.y);
                var I = (a = _.cx, u = _.cy, l = S.x, d = S.y, {
                    x: a + (c = (s + A) / s) * (l - a),
                    y: u + c * (d - u)
                });
                E = I.x - x,
                C = I.y - w
            }
        } else {
            var T = new dr(v.slice()).triangulate(),
            N = hr(v),
            k = fr(g, 20, A, T, N);
            if (0 < k.length) {
                for (var L = 1 / 0,
                R = 0,
                z = k.length; R < z; R++) {
                    var M = k[R];
                    E = x - M[0],
                    C = w - M[1],
                    (s = Math.sqrt(E * E + C * C)) < L && (L = s, S = M)
                }
                E = S[0] - x,
                C = S[1] - w
            } else S = Sh([x, w], N, A),
            E = S[0] - m.cx,
            C = S[1] - m.cy
        }
        E || C ? r.setAttributes(y.map(function(e) {
            return e.x += E,
            e.y += C,
            e
        }), o).then(n) : setTimeout(n, 0)
    }
    p.extend(function(u) {
        u.layouts.incremental = function(a) {
            return void 0 === a && (a = {}),
            new Promise(function(e) {
                var t, n, r, i, o = a.nodes,
                s = a.centralNode;
                if (!o) throw new Error("Incremental ForceLink layout: no nodes are selected");
                if ("margin" in a && !isFinite(a.margin)) throw new Error("Incremental ForceLink layout: margin has to be a positive number");
                s && !s.getAttribute("layoutable") ?
                function(n, e, r) {
                    var t = e.nodes,
                    i = e.duration,
                    o = e.centralNode,
                    s = t,
                    a = s.reduce(function(e, t) {
                        return e[t._index] = !0,
                        e
                    },
                    {}),
                    u = n.getNodes();
                    if (e.focusOnGroupShape) n.layouts.forceLink({
                        nodes: s,
                        duration: 0
                    }).then(function() {
                        var e = s.concat(o),
                        t = e.getAttribute("layoutable");
                        e.setAttributes({
                            layoutable: !1
                        }),
                        n.layouts.forceLink({
                            nodes: n.getNodes(),
                            duration: i
                        }).then(function() {
                            e.setAttributes(t),
                            r()
                        })
                    });
                    else {
                        var l = Ie(e);
                        delete l.centralNode,
                        l.nodes = u,
                        l.nodeMass = function(e, t) {
                            return (t + 1) * (a[e._index] ? 1 : 2)
                        },
                        n.layouts.forceLink(l).then(r)
                    }
                } (u, a, e) : (t = u, r = e, (i = Ie(n = a)).duration = 0, t.layouts.forceLink(i).then(function() {
                    Ih(t, n, r)
                }))
            })
        }
    });
    var Th = function(e, t) {
        return e - t
    },
    Nh = {
        imports: {
            minHeap: or,
            bellmanFord: sr,
            dijkstra: ar,
            johnson: ur,
            distance: jt,
            circleCircleIntersection: kn,
            circleSortCompare: Ln,
            weightedStress: tr,
            distanceStress: nr,
            constrainedStress: rr,
            stressMinimizationStep: ir,
            removeRadialOverlap: yr
        },
        configure: function(e, t) {
            void 0 === e && (e = {});
            var n, r, i, o = t.graph,
            s = t.graphics,
            a = null,
            u = -1;
            if (void 0 === e.centralNode || null === e.centralNode) throw new Error('concentric layout: missing parameter "centralNode"');
            i = (a = o.getNode(e.centralNode, !0)).getPosition(),
            n = isFinite(e.centerX) ? parseFloat(e.centerX) : i.x,
            r = isFinite(e.centerY) ? parseFloat(e.centerY) : i.y,
            u = a._index,
            e.nodes || (e.nodes = o.getNodes()),
            !e.nodes || e.nodes instanceof o.NodeList || (e.nodes = o.getNodes(e.nodes));
            var l = o._getIndexes(!0, e.nodes),
            d = s.getAttribute(e.nodes, "layoutable"); - 1 === (l = l.filter(function(e, t) {
                return d[t] || e === u
            })).indexOf(u) && l.push(u),
            l.sort(Th);
            var c = l.length,
            h = o.getConnectedComponents(!0, !0),
            f = function(e, t, n) {
                for (var r = e.slice().sort(Th), i = [], o = 0, s = t.length; o < s; o++) {
                    for (var a = [], u = t[o], l = !1, d = 0, c = u.length; d < c; d++) {
                        var h = u[d],
                        f = Lh(r, h); - 1 !== f && (h === n && (l = !0), a.push(h))
                    }
                    0 !== a.length && i[l ? "unshift": "push"](a.sort(Th))
                }
                return i
            } (l, h, u);
            h = f;
            var p = o._degrees(l),
            g = o.getNodeAttributesArrays(["x", "y", "radius"], {
                ids: l,
                destArrays: [new Float32Array(c), new Float32Array(c), new Array(c), new Uint8Array(c)]
            }),
            v = g[0],
            y = g[1],
            m = g[2],
            _ = o.getEdgeAttributesArrays(["source", "target", "width"]),
            b = _[0],
            x = _[1],
            w = o._getAdjacencyTable(!0, !0, 1, l),
            A = isFinite(e.radiusRatio) ? parseFloat(e.radiusRatio) : Math.SQRT2,
            E = isFinite(e.radiusDelta) ? parseFloat(e.radiusDelta) : 0,
            C = isFinite(e.nodeGap) ? parseInt(e.nodeGap) : 10,
            S = c * (isFinite(e.repulsion) ? parseFloat(e.repulsion) : 1),
            I = isFinite(e.maxIterations) ? parseInt(e.maxIterations) : 100;
            if (I < 1) throw new RangeError("maxIterations must be a positive integer");
            var T = isFinite(e.iterationsPerRender) ? parseInt(e.iterationsPerRender) : 20;
            if (T < 1) throw new RangeError("iterationsPerRender must be a positive integer");
            var N = isFinite(e.epsilon) ? parseFloat(e.epsilon) : .001;
            if (N <= 0) throw new RangeError("epsilon has to be a positive number");
            return {
                centerIndex: u,
                centerX: n,
                centerY: r,
                list: l,
                components: f,
                X: v,
                Y: y,
                degree: p,
                size: c,
                currStress: Number.POSITIVE_INFINITY,
                epsilon: N,
                maxSteps: I,
                iterationsPerRender: T,
                attributes: {
                    size: m,
                    adjacency: w,
                    weights: x.map(function(e) {
                        return 1
                    }),
                    sources: b,
                    targets: x
                },
                sortAttr: null,
                allowOverlap: !!e.allowOverlap,
                nodeGap: C,
                radiusRatio: A,
                radiusDelta: E,
                repulsion: S,
                randomize: !("randomize" in e) || !!e.randomize,
                renderSteps: !!e.renderSteps
            }
        },
        context: function() {
            return {
                getHighestNodeSize: function(e, t) {
                    for (var n = 0,
                    r = 0,
                    i = t.length; r < i; r++) {
                        var o = e[t[r]];
                        n < o && (n = o)
                    }
                    return n
                },
                grid: function(e, t) {
                    void 0 === t && (t = 8);
                    var n, r, i = e.size,
                    o = new Float32Array(i),
                    s = new Float32Array(i),
                    a = this.getHighestNodeSize(e.attributes.size, e.list, i) * t,
                    u = Math.ceil(Math.sqrt(i)),
                    l = Math.ceil(i / u),
                    d = -Math.floor((l - 1) * a / 2),
                    c = -Math.floor((u - 1) * a / 2);
                    for (n = 0; n < u; n++) for (r = 0; r < l; r++) o[n * l + r] = d + r * a,
                    s[n * l + r] = c + n * a;
                    return {
                        x: o,
                        y: s
                    }
                },
                connectSubgraphs: function(i, o, s, a, u, l) {
                    var d, c;
                    function h(e, t) {
                        var n = new Uint32Array(e.length + 1);
                        return n.set(e),
                        n[e.length] = t,
                        n
                    }
                    for (var e = function(e) {
                        d = i[e];
                        var n = 0,
                        r = 0;
                        d.forEach(function(e, t) {
                            u[e] > n && (r = t, n = u[e])
                        }),
                        c = d[r];
                        var t = o[l[c]];
                        t.nodes = h(t.nodes, s),
                        t.weights.push(a),
                        (t = o[s]).nodes = h(t.nodes, c),
                        t.weights.push(a)
                    },
                    t = 1; t < i.length; t++) e(t)
                },
                correctSubgraphsDistances: function(e, t, r, i, n) {
                    for (var o = Array.prototype.reduce.call(e[r],
                    function(e, t, n) {
                        return n !== r && t < i && e < t && (e = t),
                        e
                    },
                    0), s = i - o - 1, a = 1; a < t.length; a++) for (var u = t[a], l = 0, d = u.length; l < d; l++) {
                        var c = n[u[l]];
                        e[r][c] -= s,
                        e[c][r] -= s
                    }
                },
                establishRadii: function(e, t, n, r, i, o, s, a) {
                    var u = Object.create(null),
                    l = i[t],
                    d = l,
                    c = 0,
                    h = l;
                    for (var f in r) {
                        for (var p = r[f], g = 0, v = 0, y = void 0, m = 0, _ = p.length; m < _; m++) y = i[p[m]],
                        v = Math.max(v, y),
                        g += 2 * y + o;
                        var b = g / (2 * Math.PI) + v,
                        x = v + d,
                        w = a ? c + Math.max(a, x) : c * s;
                        c = Math.max(c, b, h, w),
                        u[f] = c,
                        d = v
                    }
                    return u[0] = 0,
                    u[Number.POSITIVE_INFINITY] = c,
                    u
                },
                initData: function(r, i) {
                    r.step = 0,
                    r.data = i,
                    r.totalSteps = i.totalSteps,
                    r.currStress = Number.POSITIVE_INFINITY,
                    r.prevStress = 0,
                    r.epsilon = r.data.epsilon;
                    var o = {},
                    s = {};
                    r.normIndexes = i.list.reduce(function(e, t, n) {
                        return e[n] = o[t] = n,
                        s[t] = i.degree[n],
                        t === i.centerIndex && (r.centerIndexPos = n),
                        e
                    },
                    new Uint32Array(i.list.length));
                    var e = r.centerIndexPos,
                    t = i.components[0].length;
                    this.connectSubgraphs(i.components, i.attributes.adjacency, i.centerIndex, t, s, o);
                    var n = ur({
                        sources: i.attributes.sources,
                        targets: i.attributes.targets,
                        weights: i.attributes.weights,
                        indexes: i.list,
                        adjacency: i.attributes.adjacency,
                        undirected: !0
                    });
                    this.correctSubgraphsDistances(n, i.components, e, t, o),
                    r.D = n,
                    r.rings = this.groupRings(n, e, r.normIndexes),
                    r.radii = this.establishRadii(n, e, r.normIndexes, r.rings, i.attributes.size, i.nodeGap, i.radiusRatio, i.radiusDelta)
                },
                groupRings: function(e, t, n) {
                    for (var r = e[t], i = Object.create(null), o = 0, s = n.length; o < s; o++) if (o !== t) {
                        var a = r[o];
                        i[a] = i[a] || [],
                        i[a].push(n[o])
                    }
                    return i
                },
                removeOverlaps: function(e, t) {
                    var n = e.centerIndexPos,
                    r = t.attributes.size,
                    i = e.rings,
                    o = t.X[n],
                    s = t.Y[n];
                    for (var a in i) {
                        var u = i[a],
                        l = jt(o, s, t.X[u[0]], t.Y[u[0]]);
                        yr({
                            X: t.X,
                            Y: t.Y,
                            sizes: r,
                            indexes: u,
                            center: [o, s],
                            R: l,
                            gap: t.nodeGap,
                            inPlace: !0
                        })
                    }
                },
                easingQuadraticInOut: function(e) {
                    return (e *= 2) < 1 ? .5 * e * e: -.5 * (--e * (e - 2) - 1)
                }
            }
        },
        update: function(e, n) {
            var t, r = (e = e || n.data).list,
            i = e.centerIndex,
            o = e.X || new Float32Array(e.size),
            s = e.Y || new Float32Array(e.size),
            a = null;
            void 0 === n.step ? n.initData(n, e) : n.step++;
            var u = e.repulsion,
            l = function(e) {
                return n.radii[e] || 1
            };
            if (0 === n.step) e.randomize && (t = n.grid(e), e.X = t.x, e.Y = t.y),
            e.spent = 0;
            else if (!n.converged) for (var d = e.maxSteps,
            c = e.iterationsPerRender,
            h = n.step,
            f = Math.min(h + c, d + 1); h <= f || !n.converged;) {
                var p = n.easingQuadraticInOut(Math.min(h, d) / d);
                n.step = h++,
                t = ir(n.D, o, s, e.size, n.centerIndexPos, u, p, n.normIndexes, l),
                e.X = t.X,
                e.Y = t.Y,
                n.prevStress = n.currStress,
                n.currStress = rr(n.D, e.X, e.Y, e.size, n.centerIndexPos, u, p, n.normIndexes),
                n.converged = n.converged || Math.abs(n.currStress - n.prevStress) <= n.epsilon
            }
            return n.converged && (n.overlapRemoved || n.data.allowOverlap ? (n.done = !0, a = Object.keys(n.rings).reduce(function(e, t) {
                return e[t] = n.rings[t].map(function(e) {
                    return r[e]
                }),
                e
            },
            {})) : (n.removeOverlaps(n, e, i), n.overlapRemoved = !0)),
            {
                x: e.X,
                y: e.Y,
                indexes: e.list,
                components: n.overlapRemoved ? e.components: void 0,
                rings: a,
                centerIndex: n.centerIndexPos,
                cx: e.centerX,
                cy: e.centerY,
                step: n.step,
                renderSteps: e.renderSteps,
                converged: n.converged,
                overlapRemoved: n.overlapRemoved,
                stress: n.currStress,
                done: n.done
            }
        },
        isRunning: function(e) {
            return ! e.converged || !e.data.allowOverlap && !e.done
        },
        onSync: function(e, t, n) { (e.renderSteps || e.done) && kh(e, t)
        },
        onEnd: function(e, t, n) {
            kh(e, t)
        }
    };
    function kh(e, t) {
        for (var n = t.graph,
        r = t.graphics,
        i = e.x,
        o = e.y,
        s = e.indexes.length,
        a = new Array(s), u = i[e.centerIndex] - e.cx, l = o[e.centerIndex] - e.cy, d = 0; d < s; d++) a[d] = {
            x: i[d] - u,
            y: o[d] - l
        };
        r.setAttributes(new n.NodeList(e.indexes), a)
    }
    function Lh(e, t) {
        for (var n, r, i = 0,
        o = e.length - 1; i <= o;) if ((r = e[n = (i + o) / 2 | 0]) < t) i = n + 1;
        else {
            if (! (t < r)) return n;
            o = n - 1
        }
        return - 1
    }
    p.extend(function(t) {
        t.layouts.radial = function(e) {
            return void 0 === e && (e = {}),
            t.modules.layouts.start("radial", e)
        },
        t.modules.layouts.register("radial", Nh)
    }),
    p.extend(function(e) {
        var r = new Rh(e);
        e.modules.transform = r,
        e.transformations = {
            remove: function(e, t) {
                return r.removeRule(e, t)
            },
            getIndex: function(e) {
                return r.getRuleIndex(e)
            },
            setIndex: function(e, t, n) {
                return r.setRuleIndex(e, t, n)
            },
            clear: function(e) {
                return r.clearRules(e)
            }
        }
    });
    var Rh = function(e) {
        var n = this;
        this._ogma = e,
        this._graph = e.modules.graph,
        this._rules = [],
        this._timeout = null,
        this._idCounter = 1,
        this._updating = !1,
        this._updateFromDataChange = !0,
        this._onRefresh = [],
        this._refreshSync = function() {
            n._updating = !0,
            n._updateFromDataChange = !1,
            function(e) {
                if (e._rules.length) for (var t = e._graph.getRaw(), n = 0; n < e._rules.length; ++n) {
                    var r = e._rules[n];
                    t = r.update(t)
                }
                e._graph._refreshFilters(!0),
                e._graph._refreshFilters(!1)
            } (n),
            n._updating = !1,
            n._timeout = null,
            setTimeout(function() {
                n._updateFromDataChange = !0;
                for (var e = 0,
                t = n._onRefresh.length; e < t; e++) n._onRefresh[e]();
                n._onRefresh.length = 0
            },
            0)
        },
        this._refresh = function(e) {
            e && n._onRefresh.push(e),
            n._timeout || (n._timeout = setTimeout(n._refreshSync, 0))
        },
        this._nodeVirtualList = this._graph.createAttribute(!0, {
            name: "virtual",
            storage: 1
        }),
        this._edgeVirtualList = this._graph.createAttribute(!1, {
            name: "virtual",
            storage: 1
        }),
        e.modules.events.on({
            "addNodes addEdges removeNodes removeEdges": function() { ! n._updating && n._rules.length && n._refresh()
            },
            "updateNodeData updateEdgeData": function() {
                n._updateFromDataChange && n._rules.length && n._refresh()
            }
        })
    };
    function zh(e, t) {
        for (var n = 0; n < e._rules.length; ++n) {
            var r = e._rules[n];
            if (r._id === t) return {
                rule: r,
                index: n
            }
        }
        throw new Error('rule "' + t + '" does not exist')
    }
    Rh.prototype.addRule = function(e, t) {
        if ("function" != typeof e) throw new Error("expected function");
        return this._rules.push(new Mh(this._ogma, e, this._idCounter)),
        this._idCounter += 1,
        this._refresh(t),
        this._idCounter - 1
    },
    Rh.prototype.nextId = function() {
        return this._idCounter
    },
    Rh.prototype.removeRule = function(e, t) {
        var n = zh(this, e),
        r = n.rule,
        i = n.index;
        r.kill(),
        this._rules.splice(i, 1),
        this._refresh(t)
    },
    Rh.prototype.getRuleIndex = function(e) {
        return zh(this, e).index
    },
    Rh.prototype.getRule = function(e) {
        return zh(this, e).rule
    },
    Rh.prototype.setRuleIndex = function(e, t, n) {
        var r = zh(this, e),
        i = r.index,
        o = r.rule;
        this._rules.splice(i, 1),
        t < 0 ? this._rules.unshift(o) : t >= this._rules.length ? this._rules.push(o) : this._rules.splice(t, 0, o),
        this._refresh(n)
    },
    Rh.prototype.clearRules = function(e) {
        for (var t = this._rules.length - 1; 0 <= t; --t) this._rules[t].kill();
        this._rules = [],
        this._refresh(e)
    };
    var Mh = function(e, t, n) {
        this._ogma = e,
        this._id = n,
        this._rule = t,
        this._nodes = new Ph(!0, e),
        this._edges = new Ph(!1, e, this._nodes)
    };
    Mh.prototype.update = function(e) {
        var t = this._rule(e, this._id),
        n = t.virtualNodes;
        void 0 === n && (n = []);
        var r = t.virtualEdges;
        void 0 === r && (r = []);
        var i = t.hiddenNodes;
        void 0 === i && (i = []);
        var o = t.hiddenEdges;
        void 0 === o && (o = []);
        var s = this._nodes.update(n, i),
        a = this._edges.update(r, o),
        u = e.nodes,
        l = e.edges;
        this._ogma.removeEdges(a),
        this._ogma.removeNodes(s);
        for (var d = this._nodes.getVirtualElements(), c = this._edges.getVirtualElements(), h = 0; h < i.length; ++h) Fh(u, i[h]);
        for (var f = 0; f < o.length; ++f) Fh(l, o[f]);
        return u.push.apply(u, d),
        l.push.apply(l, c),
        {
            nodes: u,
            edges: l
        }
    },
    Mh.prototype.kill = function() {
        this._edges.reverse(),
        this._nodes.reverse()
    };
    var Ph = function(e, t, n) {
        this._isNode = e,
        this._ogma = t,
        this._filter = t.modules.graph._addFilter(e),
        this._virtualElements = [],
        this._nodes = n
    };
    function Fh(e, t) {
        var n = e.indexOf(t);
        return - 1 !== n && (e[n] = e[e.length - 1], e.length -= 1, !0)
    }
    Ph.prototype.update = function(e, t) {
        e || (e = []),
        t || (t = []);
        for (var n = this._ogma,
        r = this._isNode,
        i = [], o = this._virtualElements.slice(), s = new Array(e.length), a = new Array(e.length), u = new Array(e.length), l = 0; l < e.length; ++l) {
            var d = e[l],
            c = d.id,
            h = d.attributes,
            f = d.data;
            if (!Fh(o, c)) {
                var p = {
                    id: c
                };
                r || (p.source = d.source, p.target = d.target),
                i.push(p)
            }
            s[l] = c,
            a[l] = h,
            u[l] = f
        }
        this._virtualElements = s,
        this._filter.reset();
        for (var g = 0; g < t.length; ++g) this._filter.set(t[g]._index, 1);
        var v = n.modules.graph[r ? "addNodes": "addEdges"](i);
        n.modules.transform[r ? "_nodeVirtualList": "_edgeVirtualList"].setMultiple(v._indexes, 1);
        var y = n[r ? "getNodes": "getEdges"](s);
        return y.setAttributes(a),
        y.setData(u),
        o
    },
    Ph.prototype.getVirtualElements = function() {
        return this._ogma[this._isNode ? "getNodes": "getEdges"](this._virtualElements).toArray()
    },
    Ph.prototype.reverse = function() {
        this._ogma.modules.graph._removeFilter(this._isNode, this._filter),
        this._ogma[this._isNode ? "removeNodes": "removeEdges"](this._virtualElements)
    },
    p.extend(function(e) {
        var r = new Dh(e);
        e.modules.pathfinding = r,
        e.pathfinding = {
            astar: function(e, t, n) {
                return void 0 === n && (n = {}),
                r.astar(e, t, n)
            },
            dijkstra: function(e, t, n) {
                return void 0 === n && (n = {}),
                r.dijkstra(e, t, n)
            },
            dijkstraBig: function(e, t, n) {
                return void 0 === n && (n = {}),
                r.dijkstraBig(e, t, n)
            }
        }
    });
    var Dh = function(e) {
        this._graph = e.modules.graph,
        this._objectList = this._graph.getAttribute(!0, "object")
    };
    Dh.prototype.astar = function(e, t, n) {
        return Uh(this, e, t, Te(n, Oh))
    },
    Dh.prototype.dijkstra = function(e, t, n) {
        return Uh(this, e, t, Te(n, Bh))
    },
    Dh.prototype.dijkstraBig = function(e, t, n) {
        var r = void 0 !== n.directed && !!n.directed,
        i = ar(this._graph.getAdjacencyTable(!r, !0, 1, this._graph.getNodes()), e._index, t._index, this._graph.getNodes()._indexes, void 0, !1);
        return i.path ? new this._graph.NodeList(i.path) : null
    };
    var Oh = {
        pathLengthFunction: jh,
        heuristicLengthFunction: jh
    },
    Bh = {
        pathLengthFunction: function() {
            return 1
        },
        heuristicLengthFunction: function() {
            return 0
        }
    };
    function jh(e, t) {
        var n = e.getPosition(),
        r = t.getPosition();
        return jt(n.x, n.y, r.x, r.y)
    }
    function Uh(e, t, n, r) {
        void 0 === r && (r = {});
        var i = e._graph._getIndex(!0, t),
        o = e._graph._getIndex(!0, n),
        s = r.pathLengthFunction,
        a = r.heuristicLengthFunction,
        u = r.filter,
        l = r.directed ? "out": "both",
        d = e._objectList,
        c = d.get(i),
        h = d.get(o),
        f = null;
        if (i === o) f = [i];
        else {
            for (var p = e._graph._elts.nodes._nextIndex,
            g = new Tt(Uint32Array), v = new Tt(Uint32Array), y = new Int32Array(p), m = new Float32Array(p), _ = new Float32Array(p), b = 0; b < p; ++b) y[b] = -1,
            m[b] = 1 / 0,
            _[b] = 1 / 0;
            for (v.add(i), m[i] = 0, _[i] = a(c, h); 0 !== v.length;) {
                for (var x = v.length,
                w = v.get(0), A = 0, E = _[w], C = 1; C < x; ++C) {
                    var S = v.get(C),
                    I = _[S];
                    I < E && (E = I, w = S, A = C)
                }
                if (w === o) {
                    f = Hh(y, i, o);
                    break
                }
                var T = d.get(w);
                v.removeByPosition(A),
                g.add(w);
                for (var N = e._graph._getElement(!0, w).getAdjacentNodes({
                    direction: l,
                    filter: u
                })._indexes, k = 0; k < N.length; ++k) {
                    var L = N[k],
                    R = d.get(L);
                    if (!g.has(L)) {
                        var z = m[w] + s(T, R); ! v.add(L) && z >= m[L] || (y[L] = w, m[L] = z, _[L] = z + a(R, h))
                    }
                }
            }
        }
        return f ? e._graph._getElements(!0, f) : null
    }
    function Hh(e, t, n) {
        for (var r = [n], i = n; i !== t;) i = e[i],
        r.push(i);
        return r.reverse(),
        r
    }
    p.extend(function(e) {
        e.modules.cameraInteractions = new Xh(e)
    });
    var Xh = function(e) {
        var u = this;
        this._ogma = e,
        this._locate = e.modules.locate,
        this._camera = e.modules.camera,
        this._settings = e.modules.settings,
        this._interactions = e.modules.interactions,
        this._graphics = e.modules.graphics,
        this._adjusting = !1,
        this._config = {},
        this._settings.register("interactions.zoom.enabled", !0),
        this._settings.register("interactions.zoom.onDoubleClick", !1),
        this._settings.register("interactions.zoom.duration", 150),
        this._settings.register("interactions.zoom.modifier", 1.8),
        this._settings.register("interactions.zoom.hideNodes", !1),
        this._settings.register("interactions.zoom.hideEdges", !1),
        this._settings.register("interactions.zoom.hideNodeTexts", !1),
        this._settings.register("interactions.zoom.hideEdgeTexts", !1),
        this._settings.register("interactions.pan.enabled", !0),
        this._settings.register("interactions.pan.hideNodes", !1),
        this._settings.register("interactions.pan.hideEdges", !1),
        this._settings.register("interactions.pan.hideNodeTexts", !1),
        this._settings.register("interactions.pan.hideEdgeTexts", !1),
        this._settings.register("interactions.pan.viewFixDuration", 500),
        this._settings.register("interactions.rotation.enabled", !0),
        this._settings.register("interactions.rotation.hideNodes", !1),
        this._settings.register("interactions.rotation.hideEdges", !1),
        this._settings.register("interactions.rotation.hideNodeTexts", !1),
        this._settings.register("interactions.rotation.hideEdgeTexts", !1),
        this._settings.register("interactions.gesture.enabled", !0),
        this._settings.register("interactions.gesture.hideNodes", !1),
        this._settings.register("interactions.gesture.hideEdges", !1),
        this._settings.register("interactions.gesture.hideNodeTexts", !1),
        this._settings.register("interactions.gesture.hideEdgeTexts", !1);
        var l = 0,
        d = 0;
        this._interactions.onMouseWheel({
            priority: "zoom",
            disableDetection: !0,
            check: function() {
                return u._settings.get("interactions.zoom.enabled") && !u._adjusting
            },
            handler: function(e) {
                var t = e.x,
                n = e.y,
                r = e.delta;
                return qh(u, r, t, n)
            }
        }),
        this._interactions.onDoubleClick({
            priority: "zoom",
            disableDetection: !0,
            check: function() {
                return u._settings.get("interactions.zoom.enabled") && u._settings.get("interactions.zoom.onDoubleClick") && !u._adjusting
            },
            handler: function(e) {
                var t = e.x,
                n = e.y;
                return qh(u, 1, t, n)
            }
        }),
        this._interactions.onDrag({
            priority: "panning",
            disableDetection: !0,
            check: function(e) {
                return "left" === e.button && u._settings.get("interactions.pan.enabled") && !u._adjusting
            },
            onStart: function(e) {
                e.x,
                e.y;
                Wh(u, "pan")
            },
            onProgress: function(e) {
                e.x,
                e.y;
                var t = e.dx,
                n = e.dy;
                u._camera.move({
                    x: -t,
                    y: -n
                })
            },
            onStop: function() {
                Gh(u, "pan")
            }
        }),
        this._interactions.onDrag({
            priority: "rotation",
            disableDetection: !0,
            check: function(e) {
                return "right" === e.button && u._settings.get("interactions.rotation.enabled") && !u._adjusting
            },
            onStart: function() {
                d = l = 0,
                Wh(u, "rotation")
            },
            onProgress: function(e) {
                var t = e.x,
                n = e.y;
                u._camera.rotate(function(e) {
                    var t = e.x,
                    n = e.y,
                    r = t - u._camera.width / 2,
                    i = n - u._camera.height / 2,
                    o = Math.sqrt(r * r + i * i),
                    s = 0;
                    if (i /= o, 0 != (r /= o) || 0 !== i) {
                        var a = Math.abs(l * r + d * i) / (Math.sqrt(l * l + d * d) * Math.sqrt(r * r + i * i));
                        s = Math.acos(a),
                        isNaN(s) ? s = 0 : r < 0 && 0 < l || 0 < r && d < 0 ? (0 < i && r < l || i < 0 && l < r) && (s *= -1) : (0 < r && d < i || r < 0 && i < d) && (s *= -1)
                    }
                    return l = r,
                    d = i,
                    s
                } ({
                    x: t,
                    y: n
                }))
            },
            onStop: function() {
                Gh(u, "rotation")
            }
        }),
        this._interactions.onGesture({
            priority: "gesture",
            disableDetection: !0,
            check: function() {
                return u._settings.get("interactions.gesture.enabled") && !u._adjusting
            },
            onStart: function() {
                Wh(u, "gesture")
            },
            onProgress: function(e) {
                var t = e.dx,
                n = e.dy,
                r = e.rotation,
                i = e.scale,
                o = e.x,
                s = e.y;
                u._camera.rotate( - r),
                u._camera.zoomIn(i, void 0, {
                    x: o,
                    y: s
                }),
                u._camera.move({
                    x: -t,
                    y: -n
                })
            },
            onStop: function() {
                Gh(u, "gesture")
            }
        })
    };
    function Wh(e, t) {
        var n = e._settings.get("interactions." + t + ".hideNodes"),
        r = e._settings.get("interactions." + t + ".hideEdges"),
        i = e._settings.get("interactions." + t + ".hideNodeTexts"),
        o = e._settings.get("interactions." + t + ".hideEdgeTexts"),
        s = {};
        n && (s.nodesVisible = e._ogma.setNodesVisibility(!1)),
        i && (s.nodeTextsVisible = e._ogma.setNodeTextsVisibility(!1)),
        r && (s.edgesVisible = e._ogma.setEdgesVisibility(!1)),
        o && (s.edgeTextsVisible = e._ogma.setEdgeTextsVisibility(!1)),
        e._config[t] = s
    }
    function Gh(e, t) {
        var n = e._config[t];
        "nodesVisible" in n && e._ogma.setNodesVisibility(n.nodesVisible),
        "nodeTextsVisible" in n && e._ogma.setNodeTextsVisibility(n.nodeTextsVisible),
        "edgesVisible" in n && e._ogma.setEdgesVisibility(n.edgesVisible),
        "edgeTextsVisible" in n && e._ogma.setEdgeTextsVisibility(n.edgeTextsVisible)
    }
    function qh(t, e, n, r) {
        var i = t._settings.get("interactions.zoom.modifier");
        e < 0 && (i = 1 / i);
        var o = {
            duration: t._settings.get("interactions.zoom.duration"),
            callback: function(e) {
                Gh(t, "zoom")
            },
            easing: "quadraticOut"
        };
        t._camera.zoomIn(i, o, {
            refX: n,
            refY: r
        }),
        Wh(t, "zoom")
    }
    var Yh = 100,
    Vh = {
        outline: !0,
        "outerStroke.color": "red",
        "outerStroke.width": 5,
        "text.backgroundColor": "rgb(220, 220, 220)",
        "text.threshold": 0
    },
    $h = {
        outline: !0,
        "text.backgroundColor": "rgb(220, 220, 220)",
        "text.threshold": 0,
        color: "red",
        strokeWidth: 2
    };
    p.extend(function(t) {
        t.modules.hover = new Zh(t),
        t.styles.setHoveredNodeAttributes = function(e) {
            return t.modules.hover.updateNodeAttributes(e)
        },
        t.styles.setHoveredEdgeAttributes = function(e) {
            return t.modules.hover.updateEdgeAttributes(e)
        }
    });
    var Zh = function(e) {
        var n = this;
        this._render = e.modules.render,
        this._graph = e.modules.graph,
        this._graphics = e.modules.graphics,
        this._settings = e.modules.settings,
        this._captor = e.modules.captor,
        this._events = e.modules.events,
        this._classes = e.modules.classes,
        this._settings.register("cursor.node", "pointer",
        function(e, t) {
            n._hovered && n._hovered.isNode && (n._render.removeCursorStyle(t), n._render.addCursorStyle(e))
        }),
        this._settings.register("cursor.edge", "pointer",
        function(e, t) {
            n._hovered && !n._hovered.isNode && (n._render.removeCursorStyle(t), n._render.addCursorStyle(e))
        }),
        this._settings.register("nodeHover", !0,
        function(e) { ! e && n._hovered && n._hovered.isNode && Kh(n, n._hovered)
        }),
        this._settings.register("edgeHover", !0,
        function(e) {
            e || !n._hovered || n._hovered.isNode || Kh(n, n._hovered)
        }),
        this._classes.create("hoverExtremityHighlighted", {
            nodeAttributes: Vh
        }),
        this._classes.create("hovered", {
            nodeAttributes: Vh,
            edgeAttributes: $h
        });
        var t = function() {
            n._classes.clearNodes("hoverExtremityHighlighted"),
            n._classes.getEdgesByClass("hovered").getExtremities().addClass("hoverExtremityHighlighted")
        };
        this._classes.onEdgesClassAdded("hovered", t),
        this._classes.onEdgesClassRemoved("hovered", t),
        this._timeout = null,
        this._hovered = null,
        this._events.on({
            hover: function(e) {
                var t = e.target;
                return function(e, t) {
                    if (!t.isNode && !e._settings.get("edgeHover") || t.isNode && !e._settings.get("nodeHover") || Qh(e) || Jh(e)) return;
                    var n = function() {
                        Jh(e) ? e._timeout = setTimeout(n, Yh) : (ef(e, !0, t), e._hovered = t, e._timeout = null)
                    };
                    e._timeout = setTimeout(n, Yh)
                } (n, t)
            },
            unhover: function(e) {
                var t = e.target;
                return Kh(n, t)
            },
            clear: function() {
                n._hovered = null,
                n._timeout && clearTimeout(n._timeout)
            }
        })
    };
    function Qh(e) {
        e._timeout && (clearTimeout(e._timeout), e._timeout = null)
    }
    function Jh(e) {
        return e._graphics.isAnimating()
    }
    function Kh(e, t) {
        Qh(e),
        e._hovered === t && (ef(e, !1, t), e._hovered = null)
    }
    function ef(e, t, n) {
        var r = e._settings.get(n.isNode ? "cursor.node": "cursor.edge");
        e._render[t ? "addCursorStyle": "removeCursorStyle"](r),
        n[t ? "addClass": "removeClass"]("hovered"),
        n.isNode
    }
    Zh.prototype.updateNodeAttributes = function(e) {
        this._classes.setNodeAttribute("hovered", e),
        this._classes.setNodeAttribute("hoverExtremityHighlighted", e)
    },
    Zh.prototype.updateEdgeAttributes = function(e) {
        this._classes.setEdgeAttributes("hovered", e)
    };
    var tf = {
        number: 1,
        duration: 1e3,
        interval: 800,
        startColor: "rgb(0,0,0,0.6)",
        endColor: "rgb(0,0,0,0.0)",
        width: 50,
        startRatio: 1,
        endRatio: 2
    },
    nf = {
        number: 1,
        duration: 1e3,
        interval: 800,
        startColor: "rgb(0,0,0,0.6)",
        endColor: "rgb(0,0,0,0.0)",
        width: 10,
        startRatio: 1,
        endRatio: 2
    };
    p.extend(function(e) {
        var t = new rf(e);
        e.modules.pulses = t,
        e.Node.prototype.pulse = function(e) {
            t.highlightNodes(this, e)
        },
        e.NodeList.prototype.pulse = function(e) {
            t.highlightNodes(this, e)
        },
        e.Edge.prototype.pulse = function(e) {
            t.highlightEdges(this, e)
        },
        e.EdgeList.prototype.pulse = function(e) {
            t.highlightEdges(this, e)
        }
    });
    var rf = function(e) {
        var i = this;
        this._graph = e.modules.graph,
        this._render = e.modules.render,
        this._graphics = e.modules.graphics,
        this._events = e.modules.events,
        this._classes = e.modules.classes,
        this._nodes = [],
        this._edges = [],
        this._NodeList = e.NodeList,
        this._EdgeList = e.EdgeList,
        this._classes.create("pulsing"),
        this._render.addSemanticLayer("edgePulses", {
            camera: this._graphics._cameraForRender
        }),
        this._render.addSemanticLayer("nodePulses", {
            camera: this._graphics._cameraForRender
        }),
        e.modules.events.on({
            "beforeRemoveNodes beforeRemoveEdges": function(e) {
                var t = e.nodes,
                n = e.edges,
                r = t || n;
                cf(i, r.isNode, r._indexes)
            },
            clear: function() {
                i._nodes.forEach(function(e) {
                    return e.kill()
                }),
                i._edges.forEach(function(e) {
                    return e.kill()
                }),
                i._nodes = [],
                i._edges = []
            }
        })
    };
    function of(e) {
        e.add()
    }
    function sf(e) {
        e.remove()
    }
    rf.prototype.highlightNodes = function(e, t) {
        df(this, !0, this._graph._getIndexes(!0, e), Te(t, tf))
    },
    rf.prototype.highlightEdges = function(e, t) {
        df(this, !1, this._graph._getIndexes(!1, e), Te(t, nf))
    };
    var af = function(e, t, n, r, i) {
        this.index = t,
        this._render = e._render,
        this._params = n,
        this._startColor = r,
        this._endColor = i,
        this._components = [],
        this._timeouts = [];
        for (var o = this._nextToRemove = 0; o < n.nbPulses; ++o) this._timeouts.push(setTimeout(of, o * n.interval, this)),
        this._timeouts.push(setTimeout(sf, o * n.interval + n.duration, this))
    };
    af.prototype.remove = function() {
        this._components[this._nextToRemove] = this._render.delete(this._components[this._nextToRemove]),
        this._nextToRemove += 1
    },
    af.prototype.kill = function() {
        for (var e = 0; e < this._timeouts.length; ++e) clearTimeout(this._timeouts[e]);
        for (var t = 0; t < this._components.length; ++t) this._render.delete(this._components[t])
    };
    var uf = function(u) {
        function e(e, t, n, r, i, o, s, a) {
            u.call(this, e, t, n, r, i),
            this._x = o,
            this._y = s,
            this._size = a
        }
        return u && (e.__proto__ = u),
        ((e.prototype = Object.create(u && u.prototype)).constructor = e).prototype.add = function() {
            var e, t, n, r, i, o, s, a, u, l;
            this._components.push((e = this._render, t = this._x, n = this._y, r = this._size * this._params.startRatio, i = this._size * this._params.endRatio, o = this._params.strokeWidth, s = this._startColor, a = this._endColor, u = this._params.duration, l = cn(e, -1, t, n, r, o, s, "nodePulses"), e.animate(u,
            function() {
                cn(e, l, t, n, i, o, a, "nodePulses")
            }), l))
        },
        e
    } (af),
    lf = function(p) {
        function e(e, t, n, r, i, o, s, a, u, l, d, c, h, f) {
            p.call(this, e, t, n, r, i),
            this._DEPTH = Tr,
            this._s = o,
            this._sx = a,
            this._sy = u,
            this._ss = l,
            this._t = s,
            this._tx = d,
            this._ty = c,
            this._ts = h,
            this._curvature = f
        }
        return p && (e.__proto__ = p),
        ((e.prototype = Object.create(p && p.prototype)).constructor = e).prototype.add = function() {
            this._components.push(function(e, t, n, r, i, o, s, a, u, l, d, c, h, f, p, g, v) {
                var y, m, _, b = ul;
                if (n === r) _ = Ft(i, o, i + 1, o - 1, 1),
                y = b.drawLoop(e, -1, i + _.x * f, o + _.y * f, 0, g, d, s + f / 2, c, "edgePulses", t),
                m = b.drawLoop(e, -1, i - _.x * f, o - _.y * f, 0, g, d, s - f / 2, c, "edgePulses", t),
                e.animate(v,
                function() {
                    b.drawLoop(e, y, i + _.x * p, o + _.y * p, 0, g, d, s + p / 2, h, "edgePulses", t),
                    b.drawLoop(e, m, i - _.x * p, o - _.y * p, 0, g, d, s - p / 2, h, "edgePulses", t)
                });
                else {
                    var x = (_ = Ft(i, o, a, u, 1)).y,
                    w = -_.x;
                    y = sa(e, -1, b, n, r, i + x * f, o + w * f, a + x * f, u + w * f, 0, g, d, s, l, c, "edgePulses", void 0, t),
                    m = sa(e, -1, b, n, r, i - x * f, o - w * f, a - x * f, u - w * f, 0, g, d, s, l, c, "edgePulses", void 0, t),
                    e.animate(v,
                    function() {
                        sa(e, y, b, n, r, i + x * p, o + w * p, a + x * p, u + w * p, 0, g, d, s, l, h, "edgePulses", void 0, t),
                        sa(e, m, b, n, r, i - x * p, o - w * p, a - x * p, u - w * p, 0, g, d, s, l, h, "edgePulses", void 0, t)
                    })
                }
                return e.composite( - 1, [y, m])
            } (this._render, this._DEPTH, this._s, this._t, this._sx, this._sy, this._ss, this._tx, this._ty, this._ts, this._curvature, this._startColor, this._endColor, this._params.startRatio, this._params.endRatio, this._params.strokeWidth, this._params.duration))
        },
        e
    } (af);
    function df(e, t, n, r) {
        var i = r.number,
        o = r.duration,
        s = r.interval,
        a = r.startColor,
        u = r.endColor,
        l = {
            nbPulses: i,
            duration: o,
            interval: s,
            strokeWidth: r.width,
            startRatio: r.startRatio,
            endRatio: r.endRatio
        },
        d = a,
        c = u,
        h = e._graphics._getAttributeArray(t, "color"),
        f = e._graph.getAttributes(!1, ["source", "target", "curvature"]),
        p = f[0],
        g = f[1],
        v = f[2],
        y = e._graph.getAttributes(!0, ["x", "y"]),
        m = y[0],
        _ = y[1],
        b = e._graphics._getAttributeArray(!0, "radius");
        cf(e, t, n),
        new(t ? e._NodeList: e._EdgeList)(n).addClass("pulsing");
        for (var x = 0,
        w = n.length; x < w; ++x) {
            var A = n[x],
            E = "inherit" === d ? h.get(A) : d,
            C = "inherit" === c ? h.get(A) : c;
            if (t) e._nodes.push(new uf(e, A, l, E, C, m.get(A), _.get(A), b.get(A)));
            else {
                var S = p.get(A),
                I = g.get(A),
                T = m.get(S),
                N = _.get(S),
                k = b.get(S),
                L = m.get(I),
                R = _.get(I),
                z = b.get(I),
                M = v.get(A);
                e._edges.push(new lf(e, A, l, E, C, S, I, T, N, k, L, R, z, M))
            }
        }
        setTimeout(cf, (l.nbPulses - 1) * l.interval + l.duration, e, t, n)
    }
    function cf(e, t, n) {
        var r = e[t ? "_nodes": "_edges"];
        if (r.length) {
            for (var i = 0; i < n.length; ++i) hf(r, n[i]);
            new(t ? e._NodeList: e._EdgeList)(n).removeClass("pulsing")
        }
    }
    function hf(e, t) {
        for (var n = 0,
        r = e.length; n < r; ++n) {
            var i = e[n];
            if (i.index === t) {
                e.splice(n, 1),
                i.kill();
                break
            }
        }
    }
    var ff = {
        outline: !0,
        "outerStroke.color": "red",
        "outerStroke.width": 5,
        "text.backgroundColor": "rgb(220, 220, 220)",
        "text.threshold": 0
    },
    pf = {
        outline: !0,
        "text.backgroundColor": "rgb(220, 220, 220)",
        "text.threshold": 0,
        color: "red",
        strokeWidth: 2
    };
    p.extend(function(t) {
        var n = new gf(t),
        r = t.modules.classes,
        e = t.Node,
        i = t.Edge,
        o = t.NodeList,
        s = t.EdgeList;
        t.modules.selection = n,
        t.events.onNodesSelected = function(e) {
            return r.onNodesClassAdded("selected", e),
            t.events
        },
        t.events.onNodesUnselected = function(e) {
            return r.onNodesClassRemoved("selected", e),
            t.events
        },
        t.events.onEdgesSelected = function(e) {
            return r.onEdgesClassAdded("selected", e),
            t.events
        },
        t.events.onEdgesUnselected = function(e) {
            return r.onEdgesClassRemoved("selected", e),
            t.events
        },
        t.styles.setSelectedNodeAttributes = function(e) {
            return n.setNodeAttribute(e)
        },
        t.styles.setSelectedEdgeAttributes = function(e) {
            return n.setEdgeAttributes(e)
        },
        t.clearSelection = function() {
            return n.clear()
        },
        t.getSelectedNodes = function() {
            return n.getSelectedNodes()
        },
        t.getNonSelectedNodes = function() {
            return n.getNonSelectedNodes()
        },
        t.getSelectedEdges = function() {
            return n.getSelectedEdges()
        },
        t.getNonSelectedEdges = function() {
            return n.getNonSelectedEdges()
        },
        e.prototype.setSelected = function(e) {
            n.setActive(this, e)
        },
        e.prototype.isSelected = function() {
            return n.areActive(this)
        },
        o.prototype.setSelected = function(e) {
            n.setActive(this, e)
        },
        o.prototype.isSelected = function() {
            return n.areActive(this)
        },
        i.prototype.setSelected = function(e) {
            n.setActive(this, e)
        },
        i.prototype.isSelected = function() {
            return n.areActive(this)
        },
        s.prototype.setSelected = function(e) {
            n.setActive(this, e)
        },
        s.prototype.isSelected = function() {
            return n.areActive(this)
        }
    });
    var gf = function(e) {
        var i = this;
        this._events = e.modules.events,
        this._settings = e.modules.settings,
        this._graph = e.modules.graph,
        this._keyboard = e.modules.keyboard,
        this._graphics = e.modules.graphics,
        this._interactions = e.modules.interactions,
        this._classes = e.modules.classes,
        this._classes.create("selectionExtremityHighlighted", {
            nodeAttributes: ff
        }),
        this._classes.create("selected", {
            nodeAttributes: ff,
            edgeAttributes: pf
        });
        var t = function() {
            i._classes.clearNodes("selectionExtremityHighlighted"),
            i._classes.getEdgesByClass("selected").getExtremities().addClass("selectionExtremityHighlighted")
        };
        this._classes.onEdgesClassAdded("selected", t),
        this._classes.onEdgesClassRemoved("selected", t),
        this._settings.register("interactions.selection.enabled", !0),
        this._settings.register("interactions.selection.multiSelectionKey", "ctrl"),
        this._interactions.onClick({
            priority: "selection",
            check: function(e) {
                return "left" === e.button && i._settings.get("interactions.selection.enabled")
            },
            handler: function(e) {
                var t = e.target;
                if (t) {
                    var n = i._settings.get("interactions.selection.multiSelectionKey"),
                    r = n && i._keyboard.isPressed(n);
                    i._classes[t.isNode ? "clearEdges": "clearNodes"]("selected"),
                    r ? t.hasClass("selected") ? t.removeClass("selected") : t.addClass("selected") : (i._classes[t.isNode ? "getNodesByClass": "getEdgesByClass"]("selected").filter(function(e) {
                        return e !== t
                    }).removeClass("selected"), t.hasClass("selected") || t.addClass("selected"))
                } else i._classes.clearEdges("selected"),
                i._classes.clearNodes("selected")
            }
        })
    };
    gf.prototype.setNodeAttribute = function(e) {
        this._classes.setNodeAttribute("selected", e),
        this._classes.setNodeAttribute("selectionExtremityHighlighted", e)
    },
    gf.prototype.setEdgeAttributes = function(e) {
        this._classes.setEdgeAttributes("selected", e)
    },
    gf.prototype.setActive = function(e, n) {
        if (Re(n)) {
            var t = function(e, t) {
                return n[t] ? "toSelect": "toUnselect"
            },
            r = t.toSelect,
            i = t.toUnselect;
            r && r.addClass("selected"),
            i && r.removeClass("selected")
        } else e[n ? "addClass": "removeClass"]("selected")
    },
    gf.prototype.areActive = function(e) {
        return e.hasClass("selected")
    },
    gf.prototype.getSelectedNodes = function() {
        return this._classes.getNodesByClass("selected")
    },
    gf.prototype.getSelectedEdges = function() {
        return this._classes.getEdgesByClass("selected")
    },
    gf.prototype.getNonSelectedNodes = function() {
        return this._graph.getNodes().filter(function(e) {
            return ! e.hasClass("selected")
        })
    },
    gf.prototype.getNonSelectedEdges = function() {
        return this._graph.getEdges().filter(function(e) {
            return ! e.hasClass("selected")
        })
    },
    gf.prototype.clear = function() {
        this._classes.clearEdges("selected"),
        this._classes.clearNodes("selected")
    },
    p.extend(function(t) {
        t.modules.drag = new yf(t),
        t.events.onNodeDragStart = function(e) {
            return t.modules.events.on("startMoveNodesByDragging", e),
            t.events
        },
        t.events.onNodeDragProgress = function(e) {
            return t.modules.events.on("progressMoveNodesByDragging", e),
            t.events
        },
        t.events.onNodeDragEnd = function(e) {
            return t.modules.events.on("endMoveNodesByDragging", e),
            t.events
        },
        t.modules.graphics._addFeature(!0, "draggable", {
            properties: {
                draggable: {
                    check: function(e) {
                        return "boolean" == typeof e
                    },
                default:
                    !0
                }
            }
        })
    });
    var vf = "__dragged",
    yf = function(e) {
        var d = this,
        t = e.modules,
        n = t.graph,
        r = t.graphics,
        i = t.camera,
        o = t.selection,
        s = t.events,
        a = t.classes,
        u = t.settings,
        l = t.render;
        this._graph = n,
        this._camera = i,
        this._graphics = r,
        this._selection = o,
        this._events = s,
        this._settings = u,
        this._classes = a,
        this._render = l,
        this._classes.create(vf, {
            after: "selected"
        }),
        this._xList = this._graph.getNodeAttribute("x"),
        this._yList = this._graph.getNodeAttribute("y"),
        this._events.register(["startMoveNodesByDragging", "progressMoveNodesByDragging", "endMoveNodesByDragging"]),
        this._settings.register("interactions.drag.enabled", !0),
        this._settings.register("interactions.drag.cursor", "move"),
        this._settings.register("interactions.drag.onBeforeDrag", null),
        this._dragged = null,
        this._start = null,
        this._end = null,
        this._startDrag = null,
        e.modules.interactions.onDrag({
            priority: "drag",
            disableDetection: !0,
            check: function(e) {
                var t = e.target;
                return d._settings.get("interactions.drag.enabled") && t && t.isNode && t.getAttribute("draggable")
            },
            onStart: function(e) {
                var t = e.target,
                n = e.x,
                r = e.y;
                t.isSelected() ? d._dragged = d._selection.getSelectedNodes().filter(function(e) {
                    return e.getAttribute("draggable")
                }) : d._dragged = d._graph._getElements(!0, [t._index]),
                d._start = d._dragged.getPosition(),
                d._end = Ie(d._start),
                d._onBeforeDrag = d._settings.get("interactions.drag.onBeforeDrag"),
                d._startDrag = mf(d, n, r),
                d._dragged.addClass(vf),
                d._events.fire("startMoveNodesByDragging", {
                    nodes: d._dragged
                }),
                d._render.addCursorStyle(d._settings.get("interactions.drag.cursor"))
            },
            onProgress: function(e) {
                for (var t = e.x,
                n = e.y,
                r = d._dragged._indexes,
                i = mf(d, t, n), o = i.x - d._startDrag.x, s = i.y - d._startDrag.y, a = 0; a < r.length; ++a) {
                    var u = d._start[a],
                    l = d._end[a];
                    l.x = u.x + o,
                    l.y = u.y + s
                }
                d._onBeforeDrag && d._onBeforeDrag(t, n, d._end),
                d._dragged.setAttributes(d._end),
                d._events.fire("progressMoveNodesByDragging", {
                    nodes: d._dragged
                })
            },
            onStop: function() {
                d._dragged.removeClass(vf),
                d._render.removeCursorStyle(d._settings.get("interactions.drag.cursor")),
                d._events.fire("endMoveNodesByDragging", {
                    nodes: d._dragged,
                    start: d._start,
                    end: d._end
                }),
                d._dragged = null,
                d._start = null,
                d._end = null
            }
        })
    };
    function mf(e, t, n) {
        var r = Math.cos(e._camera.angle),
        i = Math.sin(e._camera.angle),
        o = t / e._camera.zoom,
        s = n / e._camera.zoom;
        return {
            x: r * o - i * s,
            y: i * o + r * s
        }
    }
    p.extend(function(e) {
        var r = new _f(e);
        e.modules.grouping = r,
        e.transformations.addNodeGrouping = function(n) {
            return new Promise(function(e) {
                var t = r.addNodeGrouping(n,
                function() {
                    return e(t)
                })
            })
        },
        e.transformations.addEdgeGrouping = function(n) {
            return new Promise(function(e) {
                var t = r.addEdgeGrouping(n,
                function() {
                    return e(t)
                })
            })
        },
        e.transformations.removeNodeGrouping = function(t, n) {
            return void 0 === n && (n = 0),
            new Promise(function(e) {
                r.removeGrouping(t, n, e)
            })
        }
    });
    var _f = function(e) {
        var t = e.modules,
        n = t.graph,
        r = t.transform,
        i = t.graphics;
        this._graph = n,
        this._transform = r,
        this._graphics = i,
        this._nodeToGroup = this._graph.createAttribute(!0, {
            storage: "any"
        }),
        this._edgeToGroup = this._graph.createAttribute(!1, {
            storage: "any"
        })
    };
    function bf(e) {
        var t = e[0];
        return {
            data: Ie(t.getData()),
            attributes: {
                width: t.getAttribute("width"),
                color: t.getAttribute("color")
            }
        }
    }
    function xf(e, t) {
        return "#" + e + "[" + t + "]"
    }
    function wf(e, t, n, r, i, o) {
        return e ? t ? (s = n, a = i, u = r.toString(), l = a.toString(), "#" + s + "[" + (d = u < l ? u: l) + "<->" + (d === u ? l: u) + "]") : "#" + n + "[" + r + "->" + i + "]": xf(n, o);
        var s, a, u, l, d
    }
    _f.prototype.addNodeGrouping = function(e, t) {
        var n = this,
        r = function(n, e) {
            void 0 === e && (e = {});
            var t = e.selector,
            r = e.groupIdFunction,
            i = e.nodeGenerator,
            o = e.edgeGenerator,
            s = e.ignoreEdgeDirection;
            void 0 === s && (s = !1);
            var a = e.groupSelfLoopEdges;
            void 0 === a && (a = !1);
            var u = e.duration;
            void 0 === u && (u = 0);
            r || (r = function() {
                return "default"
            });
            i || (i = function() {
                return {}
            });
            var l = t ?
            function(e) {
                return t(e) ? r(e) : void 0
            }: r;
            return function(e, t) {
                return function(e, t, n, r, i, o, s, a) {
                    for (var u = t.nodes,
                    l = t.edges,
                    d = new It,
                    c = new It,
                    h = e._nodeToGroup,
                    f = [], p = [], g = [], v = [], y = 0; y < u.length; ++y) {
                        var m = u[y],
                        _ = r(m),
                        b = d.get(_);
                        b || (b = [], d.set(_, b)),
                        b.push(m),
                        h.set(m._index, _)
                    }
                    for (var x = 0; x < l.length; ++x) {
                        var w = l[x],
                        A = w.getSource(),
                        E = w.getTarget(),
                        C = h.get(A._index),
                        S = h.get(E._index);
                        if (void 0 !== C || void 0 !== S) if (C !== S || a) {
                            var I = void 0 !== C ? xf(n, C) : A.getId(),
                            T = void 0 !== S ? xf(n, S) : E.getId(),
                            N = wf(o, s, n, I, T, w.getId()),
                            k = c.get(N);
                            k ? k.edges.push(w) : c.set(N, {
                                source: I,
                                target: T,
                                edges: [w]
                            })
                        } else v.push(w)
                    }
                    for (var L = d.keys(), R = c.keys(), z = 0; z < L.length; ++z) {
                        var M = L[z];
                        if (void 0 !== M) {
                            var P = d.get(M),
                            F = i(P, M, n);
                            if (F.id = xf(n, M), F.attributes || (F.attributes = {}), !("x" in F.attributes && "y" in F.attributes)) {
                                var D = P.reduce(function(e, t) {
                                    var n = t.getPosition();
                                    return e.x += n.x,
                                    e.y += n.y,
                                    e
                                },
                                {
                                    x: 0,
                                    y: 0
                                }),
                                O = D.x,
                                B = D.y;
                                F.attributes.x = O / P.length,
                                F.attributes.y = B / P.length
                            }
                            f.push(F),
                            g.push.apply(g, P)
                        }
                    }
                    o || (o = bf);
                    for (var j = 0; j < R.length; ++j) {
                        var U = R[j];
                        if (void 0 !== U) {
                            var H = c.get(U),
                            X = H.source,
                            W = H.target,
                            G = H.edges,
                            q = o(G, U, n);
                            q.id = U,
                            q.source = X,
                            q.target = W,
                            p.push(q),
                            v.push.apply(v, G)
                        }
                    }
                    return {
                        virtualNodes: f,
                        virtualEdges: p,
                        hiddenNodes: g,
                        hiddenEdges: v,
                        groupToNodes: d
                    }
                } (n, e, t, l, i, o, s, a)
            }
        } (this, e);
        return "number" == typeof e.duration && 0 < e.duration ? (this.animateGrouping(r(this._graph.getVisible(), ""), "", e.duration).then(function() {
            return n._transform.addRule(r, t)
        }), this._transform.nextId()) : this._transform.addRule(r, t)
    },
    _f.prototype.animateGrouping = function(e, m, _) {
        var b = this,
        x = e.virtualNodes,
        w = (e.hiddenNodes, e.groupToNodes);
        return new Promise(function(e) {
            for (var t = x.reduce(function(e, t) {
                return e[t.id] = t,
                e
            },
            {}), n = w.keys(), r = [], i = [], o = 0, s = n.length; o < s; o++) {
                var a = n[o];
                if (void 0 !== a) for (var u = t[xf(m, a)], l = w.get(a), d = 0, c = l.length; d < c; d++) i.push(l[d]._index),
                r.push({
                    x: u.attributes.x,
                    y: u.attributes.y
                })
            }
            var h = new b._graph.NodeList(i),
            f = b._graph.getAttributes(!0, ["x", "y"]),
            p = f[0],
            g = f[1],
            v = p.getMultiple(i),
            y = g.getMultiple(i);
            vh.call(b, b._graphics),
            h.setAttributes(r, _).then(function() {
                e(),
                yh.call(b, b._graphics),
                p.setMultiple(i, v),
                g.setMultiple(i, y)
            })
        })
    },
    _f.prototype.addEdgeGrouping = function(e, t) {
        return this._transform.addRule(function(n, e) {
            void 0 === e && (e = {});
            var t = e.selector,
            r = e.groupIdFunction,
            i = e.generator,
            o = e.ignoreEdgeDirection;
            void 0 === o && (o = !1);
            r || (r = function() {
                return "default"
            });
            i || (i = function() {
                return {}
            });
            var s = t ?
            function(e) {
                return t(e) ? r(e) : void 0
            }: r;
            return function(e, t) {
                return function(e, t, n, r, i, o) {
                    for (var s = t.edges,
                    a = new It,
                    u = e._edgeToGroup,
                    l = [], d = [], c = 0; c < s.length; ++c) {
                        var h = s[c],
                        f = h.getSource().getId(),
                        p = h.getTarget().getId(),
                        g = r(h),
                        v = g;
                        if (g) {
                            if (o) {
                                var y = (x = p, void 0, w = f.toString(), A = x.toString(), w < A ? [w, A] : [A, w]),
                                m = y[0],
                                _ = y[1];
                                g = "#" + n + "(" + m + "<->" + _ + ")[" + g + "]"
                            } else g = "#" + n + "(" + f + "->" + p + ")[" + g + "]";
                            var b = a.get(g);
                            b || (b = {
                                source: f,
                                target: p,
                                groupId: v,
                                edges: []
                            },
                            a.set(g, b)),
                            b.edges.push(h)
                        }
                        u.set(h._index, g)
                    }
                    var x, w, A;
                    for (var E = a.keys(), C = 0; C < E.length; ++C) {
                        var S = E[C];
                        if (void 0 !== S) {
                            var I = a.get(S),
                            T = I.source,
                            N = I.target,
                            k = I.edges,
                            L = I.groupId,
                            R = i(k, L, n);
                            R.id = S,
                            R.source = T,
                            R.target = N,
                            l.push(R),
                            d.push.apply(d, k)
                        }
                    }
                    return {
                        virtualEdges: l,
                        hiddenEdges: d
                    }
                } (n, e, t, s, i, o)
            }
        } (this, e), t)
    },
    _f.prototype.removeGrouping = function(e, t, n) {
        var r = this;
        if (void 0 === t && (t = 0), 0 < t) {
            vh.call(this, this._graphics);
            for (var i = this._transform.getRule(e)._nodes.getVirtualElements(), o = new this._graph.NodeList(i.map(function(e) {
                return e._index
            })), s = o.getPosition(), a = o.getId().reduce(function(e, t, n) {
                return e[t] = s[n],
                e
            },
            {}), u = [], l = [], d = [], c = this._nodeToGroup._buffer, h = 1, f = c.length; h < f; h++) {
                var p = c[h];
                if (void 0 !== p && 0 !== p) {
                    var g = xf(e, p);
                    if (a[g]) {
                        var v = a[g];
                        u.push(h),
                        l.push(v.x),
                        d.push(v.y)
                    }
                }
            }
            var y = new this._graph.NodeList(u),
            m = y.getPosition(),
            _ = this._graph.getAttributes(!0, ["x", "y"]),
            b = _[0],
            x = _[1];
            b.setMultiple(u, l),
            x.setMultiple(u, d),
            this._transform.removeRule(e,
            function() {
                y.setAttributes(m, t).then(function() {
                    yh.call(r, r._graphics),
                    n()
                })
            })
        } else this._transform.removeRule(e, n)
    };
    var Af = {
        "top-left": "left",
        "bottom-left": "left",
        "top-right": "right",
        "bottom-right": "right"
    },
    Ef = {
        "top-left": "top",
        "bottom-left": "bottom",
        "top-right": "top",
        "bottom-right": "bottom"
    };
    p.extend(function(e) {
        var n = new Sf(e);
        e.modules.brand = n,
        e.tools.brand = {
            set: function(e, t) {
                return n.set(e, t)
            },
            remove: function() {
                n.remove()
            }
        }
    });
    var Cf = {
        position: "bottom-right",
        horizontalMargin: 0,
        verticalMargin: 0,
        className: null
    },
    Sf = function(e) {
        var t = this;
        this._render = e.modules.render,
        this._brand = null,
        e.modules.events.on({
            kill: function() {
                return t.remove()
            }
        })
    };
    Sf.prototype.set = function(e, t) {
        var n = Te(t, Cf),
        r = n.position,
        i = n.horizontalMargin,
        o = n.verticalMargin,
        s = n.className;
        Af[r] || (r = Cf.position),
        this.remove();
        var a = document.createElement("div");
        return a.innerHTML = e,
        a.style.position = "absolute",
        a.style[Af[r]] = i + "px",
        a.style[Ef[r]] = o + "px",
        a.style.padding = "0px 0px 0px 0px",
        a.style.zIndex = "1000",
        s && a.setAttribute("class", s),
        this._brand = a,
        this._render.addRenderLayer(this._brand, "brand"),
        a
    },
    Sf.prototype.remove = function() {
        this._brand && (this._render.removeRenderLayer(this._brand), this._brand = null)
    },
    p.extend(function(t) {
        var h = new Mf(t),
        f = t.modules.graph;
        t.modules.geo = h,
        t.geo = {
            enable: function(e) {
                return h.enable(e)
            },
            disable: function(e) {
                return h.disable(e)
            },
            setOptions: function(e) {
                return h.setOptions(e)
            },
            enabled: function() {
                return h.isEnabled()
            },
            getCenter: function() {
                return h.getCenter()
            },
            getView: function() {
                return h.getView()
            },
            getZoom: function() {
                return h.getZoom()
            },
            setZoom: function(e) {
                return h.setZoom(e)
            },
            setView: function(e, t, n) {
                return h.setView(e, t, n)
            },
            setCenter: function(e, t) {
                return h.setCenter(e, t)
            },
            toggle: function(e) {
                return h.toggle(e)
            },
            resetCoordinates: function() {
                return h.resetCoordinates()
            },
            updateCoordinates: function() {
                return h.updateCoordinates()
            }
        },
        f.Node.prototype.getGeoCoordinates = function() {
            return {
                latitude: f.getAttribute(!0, "geo.latitude").get(this._index),
                longitude: f.getAttribute(!0, "geo.longitude").get(this._index)
            }
        },
        f.Node.prototype.setGeoCoordinates = function(e, t) {
            var n = e.latitude,
            r = e.longitude;
            return bp(n, r),
            f.getAttribute(!0, "geo.latitude").set(this._index, n),
            f.getAttribute(!0, "geo.longitude").set(this._index, r),
            h._redrawNodes(t, this)
        },
        f.NodeList.prototype.getGeoCoordinates = function() {
            for (var e = new Array(this._indexes.length), t = f.getAttribute(!0, "geo.latitude").getMultiple(this._indexes), n = f.getAttribute(!0, "geo.longitude").getMultiple(this._indexes), r = 0, i = this._indexes.length; r < i; r++) e[r] = {
                latitude: t[r],
                longitude: n[r]
            };
            return e
        },
        f.NodeList.prototype.setGeoCoordinates = function(e, t) {
            var n = this.getId(),
            r = this._indexes,
            i = f.getAttribute(!0, "geo.latitude"),
            o = f.getAttribute(!0, "geo.longitude"),
            s = new Array(r.length),
            a = new Array(r.length);
            if (e.length !== r.length) throw new RangeError("You must provide coordinates for each node in the NodeList");
            for (var u = 0,
            l = r.length; u < l; u++) {
                var d = e[u],
                c = n[u];
                Df(c, d.latitude),
                Ff(c, d.longitude),
                s[u] = d.latitude,
                a[u] = d.longitude
            }
            return i.setMultiple(r, s),
            o.setMultiple(r, a),
            h._redrawNodes(t, this)
        },
        t.events.onGeoModeEnabled = function(e) {
            return t.modules.events.on("geoEnabled", e),
            t.events
        },
        t.events.onGeoModeDisabled = function(e) {
            return t.modules.events.on("geoDisabled", e),
            t.events
        },
        t.events.onGeoModeLoaded = function(e) {
            return t.modules.events.on("geoLoaded", e),
            t.events
        }
    });
    var If = {
        latitudePath: "latitude",
        longitudePath: "longitude",
        maxZoomLevel: 17,
        tileUrlTemplate: "https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",
        tileUrlSubdomains: "abc",
        attribution: null,
        backgroundColor: "silver",
        opacity: 1,
        transitionDuration: 0,
        detectRetina: !1,
        disableNodeDragging: !0,
        tileBuffer: 1
    },
    Tf = 256,
    Nf = 500,
    kf = 100,
    Lf = 0,
    Rf = 10;
    function zf(e) {
        void 0 === e && (e = {});
        var t = e.tileUrlSubdomains,
        n = e.tileUrlTemplate,
        r = e.attribution,
        i = e.latitudePath,
        o = e.longitudePath;
        if (n && "string" != typeof n) throw new TypeError("Geo mode: tileUrlTemplate must be a URL string");
        if (t && "string" != typeof t) throw new TypeError("Geo mode: tileUrlTemplate must be a string");
        if (r && "string" != typeof r) throw new TypeError("Geo mode: Map attribution must be a string");
        if (i && "string" != typeof i) throw new TypeError("Geo mode: Latitude path must be a '.'-separated path");
        if (o && "string" != typeof o) throw new TypeError("Geo mode: Longitude path must be a '.'-separated path")
    }
    var Mf = function(e) {
        var t = this,
        n = e.modules,
        r = n.render,
        i = n.graphics,
        o = n.graph,
        s = n.camera,
        a = n.locate,
        u = n.data,
        l = n.events,
        d = n.settings,
        c = n.brand;
        this._ogma = e,
        this._render = r,
        this._graphics = i,
        this._graph = o,
        this._data = u,
        this._camera = s,
        this._events = l,
        this._settingsModule = d,
        this._locate = a,
        this._brand = c,
        this._settings = Ne({},
        If),
        this._screen = this._render.getDimensions(),
        this._tiles = {},
        this._tileSize = Tf * st(),
        this._enableMapBackground = !1,
        this._init = !1,
        this._enabled = !1,
        this._sIndex = 0,
        this._lat = 0,
        this._lng = 0,
        this._zoom = 1,
        this._zoomOffset = 0,
        this._loadingTiles = 0,
        o.createNodeAttribute({
            name: "geo.prevX",
            storage: "float"
        }),
        o.createNodeAttribute({
            name: "geo.prevY",
            storage: "float"
        }),
        o.createNodeAttribute({
            name: "geo.prevLat",
            storage: "float"
        }),
        o.createNodeAttribute({
            name: "geo.prevLng",
            storage: "float"
        }),
        o.createNodeAttribute({
            name: "geo.prevSize",
            storage: "float"
        }),
        o.createNodeAttribute({
            name: "geo.latitude",
            storage: "float"
        }),
        o.createNodeAttribute({
            name: "geo.longitude",
            storage: "float"
        }),
        this._graph.createEdgeAttribute({
            name: "geo.prevSize",
            storage: "float"
        }),
        l.register(["geoEnabled", "geoDisabled", "geoLoaded", "geoReady"]),
        l.on({
            addNodes: function(e) {
                return t._onNodesAdded(e.nodes)
            },
            addEdges: function(e) {
                return t._onEdgesAdded(e.edges)
            },
            setContainer: function(e) {
                e && t._enabled && ep(t, e)
            },
            cameraMove: function() {
                return Jf(t)
            },
            resize: function() {
                return t._onResize()
            },
            endMoveNodesByDragging: function(e) {
                return op(t, e.nodes)
            }
        })
    };
    function Pf(o, s) {
        var e = o.reduce(function(e, t, n) {
            var r = o[n],
            i = s[n];
            return e.minX = Math.min(r, e.minX),
            e.minY = Math.min(i, e.minY),
            e.maxX = Math.max(r, e.maxX),
            e.maxY = Math.max(i, e.maxY),
            e
        },
        {
            minX: 1 / 0,
            minY: 1 / 0,
            maxX: -1 / 0,
            maxY: -1 / 0
        });
        return e.width = e.maxX - e.minX,
        e.height = e.maxY - e.minY,
        e.cx = e.minX + .5 * e.width,
        e.cy = e.minY + .5 * e.height,
        e
    }
    function Ff(e, t) {
        if (isNaN(t)) throw new TypeError("node " + e + ": " + t + " is not a valid longitude")
    }
    function Df(e, t) {
        if (isNaN(t)) throw new TypeError("node " + e + ": " + t + " is not a valid latitude")
    }
    function Of(e) {
        if (e._init) {
            var t = e._screen = e._render.getDimensions(),
            n = t.width,
            r = t.height;
            e._tileSize = Tf * st(),
            dt(e._canvas, n, r),
            dt(e._rcanvas, n, r)
        }
    }
    function Bf(e) {
        if (e._enabled) {
            var t = e._settings.attribution;
            t ? e._brand.set(t) : e._brand.remove()
        }
    }
    function jf(e, t, n, r, i, o, s, a) {
        t = t || e._ctx;
        var u = Math.ceil(i),
        l = e._settings.tileBuffer,
        d = u - i,
        c = 1 / Math.pow(2, d),
        h = e._tileSize * c,
        f = u,
        p = st();
        n += 2 * l * h,
        r += 2 * l * h,
        e._settings.detectRetina && (h /= p, f += Math.log2(p));
        for (var g, v, y = (g = o, g *= hp, {
            x: (v = 1 << f) * ((s + 180) / 360),
            y: v * (1 - Math.log(Math.tan(g) + 1 / Math.cos(g)) / Math.PI) / 2
        }), m = 0 | y.x, _ = 0 | y.y, b = n / 2 - (y.x - m) * h, x = r / 2 - (y.y - _) * h; 0 < b;) b -= h,
        m -= 1;
        for (; 0 < x;) x -= h,
        _ -= 1;
        var w = !0;
        x -= l * h;
        var A, E, C, S, I, T = [];
        for (A = b -= l * h, E = m; A < n; A += h, ++E) for (C = x, S = _; C < r; C += h, ++S) T.push([E, S, A, C]);
        e._tileBounds = [m - l, _ - l, E + l, S + l];
        var N = m + (E - m) / 2,
        k = _ + (S - _) / 2;
        for (T.sort(function(e, t) {
            return Ut(e[0], e[1], N, k) - Ut(t[0], t[1], N, k)
        }), A = 0, I = T.length; A < I; A++) {
            var L = T[A];
            w &= Gf(e, t, L[2], L[3], f, L[0], L[1], h, a)
        }
        return clearTimeout(e._pruneTimer),
        e._pruneTimer = setTimeout(function() {
            return function(e, t) {
                var n, r, i, o, s, a, u = {},
                l = e._settings.tileBuffer,
                d = e._tileBounds;
                for (var c in e._tiles) {
                    var h = c.split("/");
                    a = parseInt(h[0]),
                    o = parseInt(h[1]),
                    s = parseInt(h[2]),
                    u[a] = u[a] || [],
                    u[a].push([o, s])
                }
                var f = [];
                for (a in u) {
                    var p = parseInt(a),
                    g = Math.pow(2, p - t),
                    v = u[a];
                    for (n = 0, r = v.length; n < r; n++) i = v[n],
                    o = i[0],
                    s = i[1],
                    (o < d[0] * g - l || o > d[2] * g + l || s < d[1] * g - l || s > d[3] * g + l) && f.push(Zf(p, i[0], i[1]))
                }
                return Uf(e, f),
                f.length
            } (e, f)
        },
        Nf),
        w
    }
    function Uf(e, t) {
        for (var n = 0,
        r = t.length; n < r; n++) {
            var i = t[n],
            o = e._tiles[i];
            o && (o.err || o.loaded || Lf--, o.img && $f(o.img)),
            delete e._tiles[i]
        }
    }
    function Hf(e) {
        Uf(e, Object.keys(e._tiles)),
        e._tiles = {}
    }
    function Xf(e, t, n) {
        if (e._enableMapBackground && e._ctx) {
            var r = e._ctx,
            i = e._lat,
            o = e._lng,
            s = e._zoom,
            a = st(),
            u = e._screen.width * a,
            l = e._screen.height * a;
            r.fillStyle = n || e._settings.backgroundColor,
            r.fillRect(0, 0, u, l),
            "number" == typeof t && t !== e._opacity && (e._opacity = t, e._rcanvas.style.opacity = t),
            jf(e, e._ctx, u, l, s, i, o, !0) ? e._events.fire("geoLoaded") : (clearTimeout(e._redrawTimer), e._redrawTimer = setTimeout(function() {
                Xf(e, t, n)
            },
            kf)),
            e._rctx.drawImage(e._canvas, 0, 0)
        }
    }
    function Wf(e) {
        return e instanceof Image
    }
    function Gf(e, t, n, r, i, o, s, a, u) {
        var l = Qf(e, i, o, s, !0);
        if (Wf(l)) return t.drawImage(l, n, r, a, a),
        !0;
        if (l === qf.LOADING) {
            var d;
            if (u) if (Wf(l = Qf(e, i - 1, o / 2 | 0, s / 2 | 0, !1))) {
                d = l.naturalWidth / 2;
                var c = 1 & o ? d: 0,
                h = 1 & s ? d: 0;
                t.drawImage(l, c, h, d, d, n, r, a, a)
            } else {
                var f = Qf(e, i + 1, 2 * o, 2 * s, !1),
                p = Qf(e, i + 1, 2 * o + 1, 2 * s, !1),
                g = Qf(e, i + 1, 2 * o, 2 * s + 1, !1),
                v = Qf(e, i + 1, 2 * o + 1, 2 * s + 1, !1);
                Wf(f) && Wf(p) && Wf(g) && Wf(v) && (d = a / 2, t.drawImage(f, n, r, d, d), t.drawImage(p, n + d, r, d, d), t.drawImage(g, n, r + d, d, d), t.drawImage(v, n + d, r + d, d, d))
            }
            return ! 1
        }
        return ! 0
    }
    Mf.prototype._onNodesDrawn = function(e) {
        this._enabled && !this._transition && op(this, e)
    },
    Mf.prototype._onResize = function() {
        Of(this),
        Jf(this)
    },
    Mf.prototype._readNodesCoordinates = function(e) {
        for (var t, n, r, i, o = this._graph,
        s = this._settings,
        a = s.longitudePath,
        u = s.latitudePath,
        l = o.getAttributes(!0, ["geo.latitude", "geo.longitude"]), d = l[0], c = l[1], h = this._nodeVisibilityFilter, f = e._indexes, p = e.getId(), g = f.length, v = e.getData(u), y = e.getData(a), m = 0; m < g; m++) n = y[m],
        t = v[m],
        i = f[m],
        r = p[m],
        void 0 !== t && void 0 !== n ? (Ff(r, n), Df(r, t), c.set(i, +n), d.set(i, +t), h && h.set(i, 0)) : h && h.set(i, 1)
    },
    Mf.prototype._onNodesAdded = function(e) {
        this._readNodesCoordinates(e),
        this._enabled && (tp(this, e), rp(this, e), ip(this, !0, e), this._graph._refreshFilters(!0), this._graph._refreshFilters(!1))
    },
    Mf.prototype._onEdgesAdded = function(e) {
        this._enabled && (ap(this, e, "width", "geo.prevSize"), ip(this, !1, e))
    },
    Mf.prototype._onSettingsChanged = function(e, t) {
        this._enabled && (e.tileUrlTemplate !== t.tileUrlTemplate && (clearTimeout(this._redrawTimer), Hf(this), Jf(this)), e.sizeZoomReferential !== t.sizeZoomReferential && (ip(this, !0, this._graph.getNodes()), ip(this, !1, this._graph.getEdges()), this._graphics.refreshAll()), e.attribution !== t.attribution && Bf(this), e.maxZoomLevel !== t.maxZoomLevel && this._settingsModule.update({
            minZoom: 1,
            maxZoom: Math.pow(2, t.maxZoomLevel)
        }))
    },
    Mf.prototype._updateVisibility = function(e, t) {
        for (var n = this._graph,
        r = this._settings,
        i = r.latitudePath,
        o = r.longitudePath,
        s = e._indexes,
        a = n._allIndexes(!1), u = e.getData(i), l = e.getData(o), d = s.length, c = new Array(d), h = {},
        f = 0; f < d; f++) {
            var p = void 0 === u[f] || void 0 === l[f];
            c[f] = p,
            h[s[f]] = !p
        }
        for (var g = n.getAttribute(!1, "source").getMultiple(a), v = n.getAttribute(!1, "target").getMultiple(a), y = new Array(a.length), m = 0, _ = a.length; m < _; m++) y[m] = !(h[g[m]] && h[v[m]]);
        this._nodeVisibilityFilter.setMultiple(s, c),
        this._edgeVisibilityFilter.setMultiple(a, y),
        this._graph._refreshFilters(!0),
        this._graph._refreshFilters(!1),
        t && setTimeout(t)
    },
    Mf.prototype._transformToGeoSpace = function(e, t) {
        var n = this,
        r = t.X,
        i = t.Y,
        o = t.indexes,
        s = this._graph.getAttributes(!0, ["x", "y", "radius"]),
        a = s[0],
        u = s[1],
        l = s[2],
        d = a.getMultiple(o),
        c = u.getMultiple(o),
        h = Pf(d, c),
        f = Pf(r, i);
        0 !== d.length && 0 !== c.length || (h.cx = h.cy = 0, h.width = h.height = 0),
        isFinite(f.width) && isFinite(f.height) || (f.cx = f.cy = 0, f.width = f.height = 0);
        var p = f.cx - h.cx,
        g = f.cy - h.cy,
        v = Math.min(f.width / h.width, f.height / h.height) * st(),
        y = this._locate._computeConfigForBounds(f);
        y.zoom = xp(y.zoom);
        var m = this._camera.zoom / y.zoom / st();
        p += (h.cx - this._camera.x) * m,
        g += (h.cy - this._camera.y) * m;
        for (var _ = h.cx + p,
        b = h.cy + g,
        x = 0,
        w = o.length; x < w; x++) {
            var A = d[x],
            E = c[x];
            d[x] = (A + p - _) * m + _,
            c[x] = (E + g - b) * m + b
        }
        this._scaleInfo = {
            ratio: m,
            sizeRatio: v,
            dx: p,
            dy: g,
            zoom: this._camera.zoom,
            x: this._camera.x,
            y: this._camera.y
        };
        var C = this._graph.getAttribute(!1, "width"),
        S = this._graph._allIndexes(!1).filter(function(e) {
            return 0 === n._edgeVisibilityFilter.get(e)
        });
        a.setMultiple(o, d),
        u.setMultiple(o, c),
        l.setMultiple(o, l.getMultiple(o).map(function(e) {
            return e * m
        })),
        C.setMultiple(S, C.getMultiple(S).map(function(e) {
            return e * m
        })),
        this._scaleInfo.cameraConfig = {
            zoom: this._camera.zoom / m,
            x: (this._camera.x + p - _) * m + _,
            y: (this._camera.y + g - b) * m + b
        },
        this._graphics.refreshAll()
    },
    Mf.prototype._show = function(r) {
        var i = this,
        e = this._render.getContainer(),
        o = this._settings.transitionDuration;
        e && (this._init || ep(this, e), this._render.addRenderLayer(this._rcanvas, "geo")),
        this._enableTime = ee(),
        this._enableMapBackground = !1;
        var s = this._graph.getNodes(),
        a = this._graph.getEdges();
        this._nodeVisibilityFilter = this._graph._addFilter(!0),
        this._edgeVisibilityFilter = this._graph._addFilter(!1),
        this._updateVisibility(s,
        function() {
            i._readNodesCoordinates(s),
            i._graphics.refreshAll(),
            tp(i, s),
            ap(i, a, "width", "geo.prevSize");
            var e = i._graphics._setFeatureVisibility(!0, "text", !1),
            t = i._graphics._setFeatureVisibility(!1, "text", !1),
            n = np(i, s);
            i._transformToGeoSpace(s, n),
            i._edgeSizeRatio = i._scaleInfo.sizeRatio,
            i._nodeSizeRatio = i._scaleInfo.sizeRatio,
            i._graphics.animate(function() {
                i._graphics.refreshAll(),
                rp(i, s, n),
                ip(i, !0, s),
                ip(i, !1, a),
                i._camera.setView(i._scaleInfo.cameraConfig)
            },
            o).then(function() {
                i._graphics._setFeatureVisibility(!0, "text", e),
                i._graphics._setFeatureVisibility(!1, "text", t),
                i._prevSettings = i._settingsModule.update({
                    backgroundColor: null,
                    minZoom: 1,
                    maxZoom: Math.pow(2, i._settings.maxZoomLevel),
                    "interactions.rotation.enabled": !1
                }),
                i._enableMapBackground = !0,
                Bf(i),
                0 === i._graph.getNodes().size && i.setCenter(0, 0),
                Xf(i, i._settings.opacity, i._settings.backgroundColor),
                r()
            }).
            catch(function(e) {
                var t;
                t = e.stack,
                console.log(be() + " " + t)
            })
        })
    },
    Mf.prototype._transformToGraphSpace = function(e) {
        var t = this,
        n = this._graph.getAttributes(!0, ["x", "y", "geo.prevX", "geo.prevY", "radius"]),
        r = n[0],
        i = n[1],
        o = n[2],
        s = n[3],
        a = n[4],
        u = e._indexes.filter(function(e) {
            return 0 === t._nodeVisibilityFilter.get(e)
        }),
        l = r.getMultiple(u),
        d = i.getMultiple(u),
        c = a.getMultiple(u),
        h = Pf(l, d),
        f = this._graph._allIndexes(!0),
        p = Pf(o.getMultiple(f), s.getMultiple(f));
        this._settingsModule.update({
            minZoom: this._prevSettings.minZoom
        });
        var g = this._locate._computeConfigForBounds(p);
        g.zoom = xp(g.zoom),
        this._scaleInfo.cameraConfig = g;
        var v = p.cx - h.cx,
        y = p.cy - h.cy,
        m = this._camera.zoom / g.zoom;
        v += (h.cx - this._camera.x) * m,
        y += (h.cy - this._camera.y) * m;
        for (var _ = h.cx + v,
        b = h.cy + y,
        x = 0,
        w = u.length; x < w; x++) {
            var A = l[x],
            E = d[x];
            l[x] = (A + v - _) * m + _,
            d[x] = (E + y - b) * m + b,
            c[x] *= m
        }
        r.setMultiple(u, l),
        i.setMultiple(u, d),
        a.setMultiple(u, c);
        var C = this._graph._allIndexes(!1).filter(function(e) {
            return 0 === t._edgeVisibilityFilter.get(e)
        }),
        S = this._graph.getAttribute(!1, "width");
        S.setMultiple(C, S.getMultiple(C).map(function(e) {
            return e / m
        })),
        this._graphics.refreshAll()
    },
    Mf.prototype._hide = function(e) {
        var n = this,
        t = this._render.getContainer(),
        r = this._settings.transitionDuration,
        i = r / 2,
        o = ee(),
        s = function() {
            var e = (ee() - o) / i;
            e < 1 && 0 <= e && (Xf(n, 1 - e, n._prevBgColor), n._fadeTimer = M(s))
        };
        clearTimeout(this._redrawTimer),
        0 !== i ? this._fadeTimer = M(s) : s();
        var a = this._graph.getNodes();
        this._transformToGraphSpace(a);
        var u = this._graphics._setFeatureVisibility(!0, "text", !1),
        l = this._graphics._setFeatureVisibility(!1, "text", !1);
        this._graphics.animate(function() {
            var e, t;
            n._graphics.refreshAll(),
            sp(e = n, t = a, "geo.prevX", "x"),
            sp(e, t, "geo.prevY", "y"),
            sp(n, a, "geo.prevSize", "radius"),
            ap(n, n._graph.getEdges(), "geo.prevSize", "width"),
            n._camera.setView(n._scaleInfo.cameraConfig)
        },
        r).then(function() {
            n._brand.remove(),
            n._graphics._setFeatureVisibility(!0, "text", u),
            n._graphics._setFeatureVisibility(!1, "text", l),
            n._graph._removeFilter(!0, n._nodeVisibilityFilter),
            n._graph._removeFilter(!1, n._edgeVisibilityFilter),
            n._nodeVisibilityFilter = n._edgeVisibilityFilter = null,
            n._graph._refreshFilters(!0),
            n._graph._refreshFilters(!1),
            n._graphics.refreshAll(),
            t && n._render.removeRenderLayer(n._rcanvas),
            setTimeout(function() {
                n._settingsModule.update(n._prevSettings),
                Hf(n),
                e()
            })
        })
    },
    Mf.prototype.enable = function(e) {
        return this.setEnabled(!0, e)
    },
    Mf.prototype.disable = function(e) {
        return this.setEnabled(!1, e)
    },
    Mf.prototype.isEnabled = function() {
        return this._enabled
    },
    Mf.prototype.toggle = function(e) {
        return this.setEnabled(!this._enabled, e)
    },
    Mf.prototype.setOptions = function(e) {
        void 0 === e && (e = {}),
        zf(e);
        var t = this._settings;
        this._settings = Ne({},
        this._settings, If, e),
        this._enabled && this._onSettingsChanged(t, this._settings)
    },
    Mf.prototype.setEnabled = function(t, e) {
        var n = this;
        return void 0 === e && (e = {}),
        zf(e),
        t === this._enabled || this._transition || (this._enabled = t, this._transition = !0, this._settings = Ne({},
        this._settings, If, e), t ? (this._settings.disableNodeDragging && (this._nodeDraggingSetting = this._settingsModule.get("interactions.drag.enabled"), this._settingsModule.update({
            interactions: {
                drag: {
                    enabled: !1
                }
            }
        })), this._show(function() {
            n._transition = !1,
            n._events.fire("geoEnabled"),
            n._events.fire("geoReady")
        })) : this._hide(function() {
            n._transition = !1,
            n._events.fire("geoDisabled"),
            n._settings.disableNodeDragging && n._settingsModule.update({
                interactions: {
                    drag: {
                        enabled: n._nodeDraggingSetting
                    }
                }
            })
        })),
        new Promise(function(e) {
            n._transition ? n._events.once(t ? "geoEnabled": "geoDisabled", e) : e()
        })
    },
    Mf.prototype.resetCoordinates = function() {
        if (this._enabled) {
            var e, t, n = this._graph.getNodes();
            sp(e = this, t = n, "geo.prevLat", "geo.latitude"),
            sp(e, t, "geo.prevLng", "geo.longitude"),
            rp(e, t),
            rp(this, n),
            this._graphics.refreshAll()
        }
    },
    Mf.prototype.updateCoordinates = function() {
        op(this, this._graph.getNodes()),
        this._enabled && this._graphics.refreshAll()
    },
    Mf.prototype._redrawNodes = function(n, r) {
        var i = this;
        return new Promise(function(e, t) {
            i._enabled ? (rp(i, i._graph.getNodes(), void 0, n,
            function() {
                return e(r)
            }), i._graphics.refreshAll()) : e(r)
        })
    },
    Mf.prototype.setView = function(e, t, n) {
        if (!this._enabled) throw new Error("Geo mode is not enabled");
        var r, i, o; !
        function(e, t) {
            var n = e._settings.maxZoomLevel;
            if ("number" != typeof t || !(0 <= t && t <= n)) throw new Error("invalid zoom value " + t + ": expected value between 0 and " + n)
        } (this, n),
        bp(e, t),
        Kf(this, e, t, n),
        i = mp((r = this)._lat, r._lng),
        o = Math.pow(2, r._zoom),
        r._camera.setView({
            x: i[0],
            y: i[1],
            zoom: o
        })
    },
    Mf.prototype.setCenter = function(e, t) {
        this.setView(e, t, this._zoom)
    },
    Mf.prototype.setZoom = function(e) {
        this.setView(this._lat, this._lng, e)
    },
    Mf.prototype.getView = function() {
        return {
            latitude: this._lat,
            longitude: this._lng,
            zoom: this._zoom
        }
    },
    Mf.prototype.getCenter = function() {
        return {
            latitude: this._lat,
            longitude: this._lng
        }
    },
    Mf.prototype.getZoom = function() {
        return this._zoom
    },
    Mf.prototype.exportBackground = function(s, a) {
        var u = this;
        return a = a || this._camera.getView(),
        new Promise(function(e, t) {
            var n = Math.log2(a.zoom),
            r = _p(a.x, a.y),
            i = r[0],
            o = r[1];
            jf(u, s.getContext("2d"), s.width, s.height, n, i, o, !1) ? e() : setTimeout(function() {
                u.exportBackground(s, a).then(e)
            },
            100)
        })
    },
    Mf.prototype.whenReady = function(e) {
        var t = this;
        if ("function" != typeof e) throw new Error("Callback has to be a function");
        var n, r, i = function() {
            return t.whenReady(e)
        };
        return this.isEnabled() ? this._transition ? this._events.once("geoReady", i) : (n = this, r = 0, Object.keys(n._tiles).forEach(function(e) {
            var t = n._tiles[e]; ! t || t.loaded || t.err || r++
        }), 0 !== r ? setTimeout(i, 50) : e()) : this._events.once("geoEnabled", i),
        this
    };
    var qf = {
        INVALID: 1,
        LOADING: 2,
        MISSING: 3
    };
    function Yf() {
        this._tile && (Lf--, this._tile.err = !0, $f(this))
    }
    function Vf() {
        this._tile && (Lf--, this._tile.loaded = !0, $f(this))
    }
    function $f(e) {
        e.onLoad = e.onError = null,
        e._tile = null
    }
    function Zf(e, t, n) {
        return e + "/" + t + "/" + n
    }
    function Qf(e, t, n, r, i) {
        var o = Math.pow(2, t) - 1;
        if (t < 0 || n < 0 || o < n || r < 0 || o < r) return qf.INVALID;
        var s, a, u, l, d, c, h, f, p, g = Zf(t, n, r),
        v = e._tiles[g];
        if (v) return v.err ? qf.MISSING: v.loaded ? v.img: qf.LOADING;
        if (i) {
            if (!e._camera.animationInProgress() && Lf < Rf) {
                var y = new Image;
                v = {
                    img: y,
                    err: !1,
                    loaded: !1
                },
                y._tile = v,
                y.setAttribute("crossOrigin", "anonymous"),
                y.onError = Yf,
                y.onload = Vf,
                y.src = (a = n, u = r, l = t, f = (s = e)._settings.tileUrlSubdomains, c = f, h = (d = s)._sIndex, p = 0 < c.length ? (h = (h + 1) % c.length, d._sIndex = h) : 0, s._settings.tileUrlTemplate.replace("{z}", l).replace("{x}", a).replace("{y}", u).replace("{s}", f.charAt(p))),
                Lf++
            }
            return e._tiles[g] = v,
            qf.LOADING
        }
        return qf.MISSING
    }
    function Jf(e) {
        if (e._enabled) {
            var t = e._camera,
            n = Math.max(0, Math.log2(t.zoom)),
            r = _p(t.x, t.y);
            Kf(e, r[0], r[1], n)
        }
    }
    function Kf(e, t, n, r) {
        e._enabled && (e._lat = t, e._lng = n, e._zoom = r, Xf(e))
    }
    function ep(e, t) {
        e._rcanvas = document.createElement("canvas"),
        e._rctx = e._rcanvas.getContext("2d"),
        e._canvas = document.createElement("canvas"),
        e._ctx = e._canvas.getContext("2d"),
        e._rcanvas.style.position = "absolute",
        e._rcanvas.style.zIndex = +(t.style.zIndex || 0) - 1,
        e._rcanvas.className = "ogma-geo-container",
        e._init = !0,
        Of(e)
    }
    function tp(e, t) {
        sp(e, t, "x", "geo.prevX"),
        sp(e, t, "y", "geo.prevY"),
        sp(e, t, "radius", "geo.prevSize"),
        sp(e, t, "geo.latitude", "geo.prevLat"),
        sp(e, t, "geo.longitude", "geo.prevLng")
    }
    function np(e, t) {
        for (var n, r, i, o = e._nodeVisibilityFilter,
        s = e._graph.getAttributes(!0, ["geo.latitude", "geo.longitude"]), a = s[0], u = s[1], l = new Array(2), d = t._indexes, c = a.getMultiple(d), h = u.getMultiple(d), f = [], p = [], g = [], v = 0, y = d.length; v < y; ++v) i = d[v],
        n = c[v],
        r = h[v],
        0 === o.get(i) && (mp(n, r, l), p.push(l[0]), g.push(l[1]), f.push(i));
        return {
            X: p,
            Y: g,
            indexes: f
        }
    }
    function rp(e, t, n, r, i) {
        void 0 === r && (r = 0),
        void 0 === i && (i = function() {}),
        n || (n = np(e, t));
        var o = n.X,
        s = n.Y,
        a = n.indexes,
        u = e._graph.getAttributes(!0, ["x", "y"]),
        l = u[0],
        d = u[1];
        if (0 !== r) return t.setAttributes(a.map(function(e, t) {
            return {
                x: o[t],
                y: s[t]
            }
        }), r).then(i);
        l.setMultiple(a, o),
        d.setMultiple(a, s),
        i()
    }
    function ip(e, t, n) {
        var r = e._graph.getAttributes(t, [t ? "radius": "width", "geo.prevSize"]),
        i = r[0],
        o = r[1],
        s = t ? e._nodeSizeRatio: e._edgeSizeRatio;
        e._settings.sizeZoomReferential && (s = Math.pow(2, -e._settings.sizeZoomReferential));
        for (var a = n._indexes,
        u = (t ? e._nodeVisibilityFilter: e._edgeVisibilityFilter).getMultiple(a), l = o.getMultiple(a), d = 0, c = a.length; d < c; d++) 0 === u[d] && (l[d] *= s);
        i.setMultiple(a, l)
    }
    function op(e, t) {
        for (var n, r, i = e._graph.getAttributes(!0, ["x", "y", "geo.latitude", "geo.longitude"]), o = i[0], s = i[1], a = i[2], u = i[3], l = new Array(2), d = t._indexes, c = [], h = [], f = [], p = 0, g = d.length; p < g; p++) r = d[p],
        n = a.get(r),
        void 0 !== u.get(r) && void 0 !== n && (_p(o.get(r), s.get(r), l), f.push(r), c.push(l[0]), h.push(l[1]));
        a.setMultiple(f, c),
        u.setMultiple(f, h)
    }
    function sp(e, t, n, r) {
        up(e, !0, t, n, r)
    }
    function ap(e, t, n, r) {
        up(e, !1, t, n, r)
    }
    function up(e, t, n, r, i) {
        var o = e._graph,
        s = o.getAttribute(t, r),
        a = o.getAttribute(t, i),
        u = n._indexes;
        a.setMultiple(u, s.getMultiple(u))
    }
    var lp = 6378137,
    dp = 85.0511287798,
    cp = 256,
    hp = Math.PI / 180,
    fp = 180 / Math.PI,
    pp = .5 / (Math.PI * lp),
    gp = .5,
    vp = -pp,
    yp = .5;
    function mp(e, t, n) {
        void 0 === n && (n = []);
        var r = Math.max(Math.min(dp, e), -dp),
        i = Math.sin(r * hp);
        return n[0] = cp * (pp * (lp * t * hp) + gp),
        n[1] = cp * (vp * (lp * Math.log((1 + i) / (1 - i)) / 2) + yp),
        n
    }
    function _p(e, t, n) {
        return void 0 === n && (n = []),
        e = (e / cp - gp) / pp,
        t = (t / cp - yp) / vp,
        n[0] = (2 * Math.atan(Math.exp(t / lp)) - Math.PI / 2) * fp,
        n[1] = e * fp / lp,
        n
    }
    function bp(e, t) {
        if ("number" != typeof e) throw new Error("invalid latitude " + e + ": expected number");
        if ("number" != typeof t) throw new Error("invalid longitude " + t + ": expected number")
    }
    function xp(e) {
        return Math.pow(2, Math.floor(Math.log2(e)))
    }
    var wp = function() {},
    Ap = {
        strokeColor: "black",
        strokeWidth: 2,
        dashLength: 8,
        cursorStyle: "cell",
        createNodes: !0,
        condition: null,
        onNodeCreated: wp,
        onEdgeCreated: wp,
        onComplete: wp
    };
    p.extend(function(t) {
        var n = new Ep(t);
        t.modules.connectNodes = n,
        t.tools.connectNodes = {
            enable: function(e) {
                return n.enable(e),
                this
            },
            disable: function() {
                return n.disable(),
                this
            },
            enabled: function() {
                return n.enabled()
            }
        },
        t.events.onNodesConnected = function(e) {
            return t.modules.events.on("connectedNodes", e),
            t.events
        }
    });
    var Ep = function(e) {
        var n = this,
        t = e.modules;
        this._render = t.render,
        this._camera = t.camera,
        this._captor = t.captor,
        this._graph = t.graph,
        this._graphics = t.graphics,
        this._interactions = t.interactions,
        this._events = t.events,
        this._settings = t.settings,
        this._connectCondition = null,
        this._enabled = !1,
        this._options = Ie(Ap),
        this._canvas = tt(),
        this._ctx = this._canvas.getContext("2d"),
        this._render.addRenderLayer(this._canvas, "connectNodes", !0),
        this._events.register(["connectedNodes"]),
        this._events.on("clear",
        function() {
            return n.disable()
        }),
        this._line = null,
        this._interaction = this._interactions.onDrag({
            priority: "connectNodes",
            check: function(e) {
                var t = e.target;
                return "left" === e.button && n._enabled && t && t.isNode
            },
            onStart: function(e) {
                return n._onStart(e)
            },
            onProgress: function(e) {
                return n._onProgress(e)
            },
            onStop: function(e) {
                return n._onStop(e)
            }
        })
    };
    Ep.prototype.enable = function(e) {
        return this.disable(),
        this._options = Te(e, Ap),
        this._enabled = !0,
        this._prevSettings = this._settings.update({
            cursorOnNodeHover: this._options.cursorStyle,
            "detect.edges": !1
        }),
        this._captor.isLeftPressed() && this._interaction.start(Me(this._captor.getCursorInformation(), {
            button: "left"
        })),
        this
    },
    Ep.prototype.disable = function() {
        this._enabled && (this._enabled = !1, this._settings.update(this._prevSettings))
    },
    Ep.prototype.enabled = function() {
        return this._enabled
    },
    Ep.prototype._onStart = function(e) {
        var t = e.target;
        this._startNode = t,
        this._render.addCursorStyle(this._options.cursorStyle)
    },
    Ep.prototype._onProgress = function(e) {
        var t = e.x,
        n = e.y;
        this._line = this._render.delete(this._line),
        this._line = function(e, t, n, r, i, o) {
            var s = [],
            a = new Gt,
            u = new Gt,
            l = e._startNode.getPosition(),
            d = e._camera.graphToScreenCoordinates(l),
            c = Xt(d.x, d.y, t, n, o),
            h = e._camera.screenToGraphVector(c),
            f = jt(d.x, d.y, t, n),
            p = 0;
            a.setXY(l.x, l.y),
            u.set(a).addXY(h.x, h.y);
            for (; p < f;) s.push(e._render.line( - 1, a, u, 0, i, r, "edgeShapes", Tr)),
            a.addOXY(2 * c.x, 2 * c.y),
            u.addOXY(2 * c.x, 2 * c.y),
            p += 2 * o;
            return e._render.composite( - 1, s)
        } (this, t, n, this._options.strokeColor, this._options.strokeWidth, this._options.dashLength)
    },
    Ep.prototype._onStop = function(e) {
        var t = e.x,
        n = e.y;
        this._graphics.refreshAll(),
        this._render.removeCursorStyle(this._options.cursorStyle),
        this._line = this._render.delete(this._line);
        var r, i = this._captor.getPointedElement(),
        o = !1,
        s = this._startNode;
        if (!i && this._options.createNodes) {
            var a = this._camera.screenToGraphCoordinates({
                x: t,
                y: n
            });
            i = this._graph.addNode({
                id: this._graph.generateUnusedNodeId(),
                attributes: {
                    x: a.x,
                    y: a.y
                }
            }),
            o = !0
        }
        var u = this._options,
        l = u.onEdgeCreated,
        d = u.onNodeCreated,
        c = u.onComplete;
        if (i && i.isNode) if (!this._connectCondition || this._connectCondition(s, i)) {
            var h = this._graph.addEdge({
                id: this._graph.generateUnusedEdgeId(),
                source: s.getId(),
                target: i.getId()
            });
            o && "function" == typeof d && d(i),
            "function" == typeof l && l(h),
            r = {
                source: s,
                target: i,
                edge: h
            }
        } else o && (r = {
            source: s,
            target: null,
            edge: null
        },
        this._graph.removeNodes(i));
        else r = {
            source: s,
            target: null,
            edge: null
        };
        this.disable(),
        "function" == typeof c && c(r)
    };
    var Cp = ["color", "shape", "radius", "icon.content", "image.url"],
    Sp = ["color", "shape", "width"],
    Ip = Math.PI,
    Tp = 2 * Math.PI,
    Np = 1.6,
    kp = 3,
    Lp = .9,
    Rp = {
        position: "bottom",
        widgetWidth: 130,
        fontFamily: "Arial",
        fontSize: 10,
        fontColor: "black",
        titleFontSize: 12,
        titleFontColor: "black",
        titleMaxLength: 20,
        titleTextAlign: "left",
        shapeColor: "grey",
        backgroundColor: "white",
        borderColor: "black",
        borderRadius: 0,
        borderWidth: 1,
        innerMargin: 10,
        outerMargin: 5,
        circleStrokeWidth: 3,
        titleFunction: function(e) {
            return e[e.length - 1]
        }
    };
    p.extend(function(e) {
        var t = new zp(e);
        e.modules.legend = t,
        e.tools.legend = {
            enable: function(e) {
                t.enable(e)
            },
            disable: function() {
                t.disable()
            },
            enabled: function() {
                return t.enabled()
            }
        }
    });
    var zp = function(e) {
        var t = this;
        this._graphics = e.modules.graphics,
        this._render = e.modules.render,
        this._settings = Ie(Rp),
        this._enabled = !1,
        this._canvas = tt(),
        this._timeout = null,
        this._widgets = null,
        this._refreshSync = function() {
            t._enabled && (Mp(t), Pp(t, t._canvas)),
            t._timeout = null
        },
        this._refresh = function() {
            t._timeout || (t._timeout = setTimeout(t._refreshSync, 0))
        },
        e.modules.events.on({
            "resize reloadFonts": this._refresh,
            reset: function() {
                return t.disable()
            },
            resize: function() {
                t._enabled && Pp(t, t._canvas)
            }
        })
    };
    function Mp(t) {
        t._widgets = [],
        Cp.forEach(function(e) {
            return Wp(t, !0, e)
        }),
        Sp.forEach(function(e) {
            return Wp(t, !1, e)
        })
    }
    function Pp(e, t) {
        e._setSettings();
        var n = {
            width: t.width,
            height: t.height
        },
        r = !1,
        i = e._settings;
        return !! (n.width && n.height && e._widgets) && (t.getContext("2d").clearRect(0, 0, t.width, t.height), (r = "top" === i.position || "bottom" === i.position ?
        function(e, t, n, r) {
            n = n.slice();
            for (var i = t.widgetWidth + t.outerMargin,
            o = Math.floor((e.width - t.outerMargin) / i), s = e.height - t.outerMargin, a = new Array(Math.min(o, n.length)), u = n.length, l = 0, d = 0, c = 0, h = 0, f = 0; f < u; ++f) {
                var p = n[f];
                p.isNode ? (l += 1, d += p.height) : (c += 1, h += p.height)
            }
            var g = d + h,
            v = d / g,
            y = h / g,
            m = Math.round(v * o),
            _ = Math.round(y * o);
            l < m ? m = l: c < _ && (m = o - c);
            if (0 === o) return ! 1;
            for (var b = 0; b < a.length; ++b) a[b] = {
                content: [],
                height: 0,
                isNode: b < m
            };
            for (b = 0; b < u; ++b) {
                var x = Xp(n);
                Hp(n[x], a, t),
                n.splice(x, 1)
            }
            a.every(function(e) {
                var t = e.content;
                return 1 === t.length
            }) ? a.sort(Yp) : a.sort(qp);
            var w = t.outerMargin;
            for (b = 0; b < a.length; ++b) {
                var A = a[b];
                if (A.height > s) return ! 1;
                A.content.sort(Gp);
                for (var E = 0,
                C = 0; C < A.content.length; ++C) {
                    var S = A.content[C];
                    S.x = w,
                    S.y = r ? e.height - E - S.height - t.outerMargin: E + t.outerMargin,
                    E += S.height + t.outerMargin
                }
                w += i
            }
            return ! 0
        } (n, i, e._widgets, "bottom" === i.position) : function(e, t, n, r) {
            var i = t.widgetWidth + t.outerMargin,
            o = Math.floor((e.width - t.outerMargin) / i),
            s = e.height,
            a = t.outerMargin,
            u = r ? t.outerMargin: e.width - i,
            l = 1;
            n = n.slice().sort(Up);
            for (var d = 0; d < n.length; ++d) {
                var c = n[d];
                if (a + c.height > s) {
                    if (a === t.outerMargin) return ! 1;
                    a = t.outerMargin,
                    l += 1,
                    r ? u += i: u -= i
                }
                c.x = u,
                c.y = a,
                a += c.height
            }
            return l <= o
        } (n, i, e._widgets, "left" === i.position)) && e._widgets.forEach(function(e) {
            return function(C, e, t) {
                var S = e.getContext("2d"),
                n = t.x,
                r = t.y,
                i = t.height,
                I = t.isNode,
                T = t.styleProperty,
                o = t.title,
                N = t.mapping,
                k = t.iconFont;
                s = S,
                a = C,
                u = n,
                l = r,
                d = i,
                c = s,
                h = u,
                f = l,
                p = a.widgetWidth,
                g = d,
                v = a.borderRadius,
                y = a.backgroundColor,
                m = a.borderColor,
                _ = a.borderWidth,
                c.setLineDash([]),
                c.beginPath(),
                c.moveTo(h + v, f),
                c.lineTo(h + p - v, f),
                c.quadraticCurveTo(h + p, f, h + p, f + v),
                c.lineTo(h + p, f + g - v),
                c.quadraticCurveTo(h + p, f + g, h + p - v, f + g),
                c.lineTo(h + v, f + g),
                c.quadraticCurveTo(h, f + g, h, f + g - v),
                c.lineTo(h, f + v),
                c.quadraticCurveTo(h, f, h + v, f),
                c.closePath(),
                c.fillStyle = y,
                c.fill(),
                c.strokeStyle = m,
                c.lineWidth = _,
                c.stroke(),
                function(e, t, n, r, i) {
                    Dp(e, t.fontFamily, t.titleFontSize, t.titleFontColor, t.titleTextAlign);
                    var o = "center" === t.titleTextAlign,
                    s = t.widgetWidth - 2 * t.innerMargin,
                    a = e.measureText(n).width,
                    u = r + (o ? t.widgetWidth / 2 : t.innerMargin),
                    l = i + t.titleFontSize / 2 + t.innerMargin;
                    if (s < a) {
                        var d = s / a,
                        c = (n.length * d | 0) - 2;
                        n = n.substr(0, c) + ""
                    }
                    e.fillText(n, u, l)
                } (S, C, o, n, r);
                var s, a, u, l, d, c, h, f, p, g, v, y, m, _;
                var L = C.fontSize * Np,
                R = C.fontSize / 2 * Np * Lp,
                z = C.fontSize * kp,
                M = C.fontSize,
                b = (E = C, U = I, U ? E.fontSize: E.fontSize * kp),
                P = r + Vp(C),
                F = n + C.innerMargin + b / 2,
                D = n + 2 * C.innerMargin + b,
                x = function(e) {
                    for (var t = Object.keys(e), n = new Array(t.length), r = 0; r < t.length; ++r) n[r] = e[t[r]];
                    return n
                } (N),
                O = function n(e) {
                    return Re(e) ? e.reduce(function(e, t) {
                        return e && n(t)
                    },
                    !0) : "undefined" === e || !isNaN( + e)
                } (x),
                B = C.fontColor,
                j = C.shapeColor,
                w = (A = N, Object.keys(A));
                var A;
                var E, U;
                O && w.sort(function(e, t) {
                    return Math.min.apply(null, N[t]) - Math.min.apply(null, N[e])
                });
                if ("radius" !== T && "width" !== T) w.forEach(function(e) {
                    var t, n, r, i, o, s, a, u, l, d, c, h, f, p, g, v, y, m, _, b, x, w, A, E = N[e];
                    "color" === T ? I ? Op(S, F, P, R, e) : (_ = F, b = P, x = z, w = M, A = e, (m = S).fillStyle = A, m.fillRect(_ - x / 2, b - w / 2, x, w)) : "shape" === T ? I ? (f = F, p = P, g = R, v = e, y = j, (h = S).fillStyle = y, "circle" === v ? Op(h, f, p, g, y) : "square" === v ? h.fillRect(f - g, p - g, 2 * g, 2 * g) : "cross" === v ? (h.fillRect(f - g, p - g * Bp, 2 * g, 2 * g * Bp), h.fillRect(f - g * Bp, p - g, 2 * g * Bp, 2 * g)) : "diamond" === v ? (h.beginPath(), h.moveTo(f - g, p), h.lineTo(f, p - g), h.lineTo(f + g, p), h.lineTo(f, p + g), h.fill()) : "equilateral" === v ? (h.beginPath(), h.moveTo(f, p - g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5) * g, p + Math.sin( - Ip / 2 + Tp / 5) * g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5 * 2) * g, p + Math.sin( - Ip / 2 + Tp / 5 * 2) * g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5 * 3) * g, p + Math.sin( - Ip / 2 + Tp / 5 * 3) * g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5 * 4) * g, p + Math.sin( - Ip / 2 + Tp / 5 * 4) * g), h.fill()) : "star" === v && (h.beginPath(), h.moveTo(f, p - g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5 * 2) * g, p + Math.sin( - Ip / 2 + Tp / 5 * 2) * g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5 * 4) * g, p + Math.sin( - Ip / 2 + Tp / 5 * 4) * g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5) * g, p + Math.sin( - Ip / 2 + Tp / 5) * g), h.lineTo(f + Math.cos(Ip / 2 - Tp / 5 * 3) * g, p + Math.sin( - Ip / 2 + Tp / 5 * 3) * g), h.fill())) : (s = F, a = P, u = z, l = M, d = e, c = j, (o = S).fillStyle = c, "line" === d ? o.fillRect(s - u / 2, a - l / 4, u, l / 2) : "arrow" === d ? (o.fillRect(s - u / 2, a - l / 4, u * (1 - jp), l / 2), o.beginPath(), o.moveTo(s + u * (1 - jp - .5), a - l / 2), o.lineTo(s + u * (1 - jp - .5), a + l / 2), o.lineTo(s + u / 2, a), o.fill()) : "dashed" === d || "dotted" === d ? (o.beginPath(), o.moveTo(s - u / 2, a), o.lineTo(s + u / 2, a), o.strokeStyle = c, o.lineWidth = l / 2, o.setLineDash("dashed" === d ? [8, 3] : [3, 3]), o.stroke()) : "tapered" === d && (o.beginPath(), o.moveTo(s - u / 2, a - l / 2), o.lineTo(s - u / 2, a + l / 2), o.lineTo(s + u / 2, a), o.fill())) : "icon.content" === T ? (n = F, r = P, i = e, Dp(t = S, k, 2 * R, B, "center"), t.fillText(i, n, r)) : "image.url" === T &&
                    function(e, t, n, r, i) {
                        e._imgStore || (e._imgStore = {});
                        var o = e._imgStore[i];
                        o ? e.drawImage(o, t - r, n - r, 2 * r, 2 * r) : ((o = new Image).src = i, o.onload = function() {
                            e.drawImage(o, t - r, n - r, 2 * r, 2 * r)
                        },
                        e._imgStore[i] = o)
                    } (S, F, P, R, e),
                    function(e, t, n, r, i, o) {
                        var s;
                        if (o) if (1 === i.length) s = $p(i[0]);
                        else {
                            var a = Math.min.apply(Math, i),
                            u = Math.max.apply(Math, i);
                            s = $p(a) + " - " + $p(u)
                        } else s = i.join();
                        Dp(e, t.fontFamily, t.fontSize, t.fontColor),
                        e.fillText(s, n, r)
                    } (S, C, D, P, E, O),
                    P += L
                });
                else if (O) {
                    var H = function n(e) {
                        return Re(e) ? e.reduce(function(e, t) {
                            return Math.min(e, n(t))
                        },
                        1 / 0) : isNaN(e) ? 1 / 0 : +e
                    } (x),
                    X = function n(e) {
                        return Re(e) ? e.reduce(function(e, t) {
                            return Math.max(e, n(t))
                        },
                        -1 / 0) : isNaN(e) ? -1 / 0 : +e
                    } (x),
                    W = (H + X) / 2;
                    if (H % 2 != 0 && X % 2 != 0 || (W = Math.round(W)), I) {
                        var G = .7 * C.fontSize,
                        q = 3 * G,
                        Y = (G + q) / 2,
                        V = n + C.innerMargin + q,
                        $ = V + q + C.innerMargin,
                        Z = P + 2 * q - .5 * C.innerMargin,
                        Q = C.circleStrokeWidth;
                        Fp(S, V, Z - G, G, j, Q),
                        Fp(S, V, Z - Y, Y, j, Q),
                        Fp(S, V, Z - q, q, j, Q),
                        Dp(S, C.fontFamily, C.fontSize, C.fontColor, "left"),
                        S.fillText($p(H), $, Z + G - 2 * G),
                        S.fillText($p(W), $, Z + G - 2 * Y),
                        S.fillText($p(X), $, Z + G - 2 * q)
                    } else {
                        var J = (C.widgetWidth - 2 * C.innerMargin) / 3,
                        K = C.fontSize,
                        ee = P - C.innerMargin / 2,
                        te = ee + 2 * K,
                        ne = n + C.innerMargin;
                        S.fillStyle = j,
                        S.fillRect(ne, ee - K / 2, J + 1, K),
                        S.fillRect(ne + J, ee - K / 3, J + 1, K / 1.5),
                        S.fillRect(ne + 2 * J, ee - K / 6, J, K / 3),
                        Dp(S, C.fontFamily, C.fontSize, C.fontColor, "center"),
                        S.fillText($p(X), ne + .5 * J, te),
                        S.fillText($p(W), ne + 1.5 * J, te),
                        S.fillText($p(H), ne + 2.5 * J, te)
                    }
                }
            } (i, t, e)
        }), r)
    }
    function Fp(e, t, n, r, i, o) {
        e.beginPath(),
        e.arc(t, n, r, 0, Tp),
        e.strokeStyle = i,
        e.lineWidth = o,
        e.stroke()
    }
    function Dp(e, t, n, r, i, o) {
        void 0 === i && (i = "left"),
        void 0 === o && (o = "middle"),
        e.textAlign = i,
        e.textBaseline = o,
        e.fillStyle = r,
        e.font = n + "px " + t
    }
    function Op(e, t, n, r, i) {
        e.beginPath(),
        e.arc(t, n, r, 0, 2 * Ip),
        e.fillStyle = i,
        e.fill()
    }
    zp.prototype.enable = function(e) {
        this._enabled = !0,
        this._userSettings = Te(e, Rp),
        this._setSettings(),
        this._render.addRenderLayer(this._canvas, "legend", !0),
        this._refresh()
    },
    zp.prototype._setSettings = function() {
        var t = this,
        n = st();
        this._settings = {},
        Object.keys(Rp).forEach(function(e) {
            return t._settings[e] = t._userSettings[e]
        }),
        ["widgetWidth", "fontSize", "titleFontSize", "borderRadius", "borderWidth", "innerMargin", "outerMargin", "circleStrokeWidth"].forEach(function(e) {
            return t._settings[e] *= n
        })
    },
    zp.prototype.disable = function() {
        this._enabled && (this._timeout && (clearTimeout(this._timeout), this._timeout = null), this._enabled = !1, this._render.removeRenderLayer(this._canvas))
    },
    zp.prototype.enabled = function() {
        return this._enabled
    },
    zp.prototype.refresh = function() {
        this._refresh()
    },
    zp.prototype.drawOnCanvas = function(e) {
        Mp(this),
        Pp(this, e)
    };
    var Bp = .31;
    var jp = 1 / 3;
    function Up(e, t) {
        return e.isNode !== t.isNode ? e.isNode ? e: t: e.title <= t.title ? -1 : 1
    }
    function Hp(e, t, n) {
        for (var r = null,
        i = 0; i < t.length; ++i) {
            var o = t[i];
            o.isNode !== e.isNode && 1 !== t.length || !(null === r || o.height < t[r].height) || (r = i)
        } (o = t[r]).content.push(e),
        o.height += e.height + n.outerMargin
    }
    function Xp(e) {
        for (var t = 0,
        n = 1; n < e.length; ++n) e[n].height > e[t].height && (t = n);
        return t
    }
    function Wp(e, t, n) {
        var r = function(e, t, n) {
            var r = e._graphics._getAttributeRuleList(t, n),
            i = r[0] && r[0].metaData;
            r[0] && !i && we('legend (property "' + n + '"): it seems you are using a rule that was not generated by `ogma.rules.map()` or `ogma.rules.slices()`; no information can be extracted from that rule.'); {
                if (i && i.mapping && i.field) {
                    var o = {};
                    return Ee(i.mapping,
                    function(e, t) {
                        void 0 !== e && (e in o ? o[e].push(t) : o[e] = [t])
                    }),
                    0 === Object.keys(o).length ? null: {
                        isNode: t,
                        title: e._settings.titleFunction(i.field),
                        styleProperty: n,
                        dataProperty: i.field,
                        mapping: o,
                        height: function(e, t, n, r) {
                            var i = e._settings,
                            o = i.outerMargin + Vp(i),
                            s = i.fontSize * Np,
                            a = o - .8 * i.innerMargin;
                            a += "radius" !== n && "width" !== n ? Object.keys(t).length * s: s * (r ? 3 : 2);
                            return a
                        } (e, o, n, t)
                    }
                }
                return null
            }
        } (e, t, n);
        if (r) if ("icon.content" === n) {
            var i = e._graphics._getAttributeRuleList(t, "icon.font"),
            o = null;
            if (i.length) {
                var s = i[0].metaData;
                s && (o = s.constant)
            } else o = "Arial";
            o && (r.iconFont = o, e._widgets.push(r))
        } else e._widgets.push(r)
    }
    function Gp(e, t) {
        return e.height - t.height
    }
    function qp(e, t) {
        return e.isNode !== t.isNode ? e.isNode ? e: t: t.height - e.height
    }
    function Yp(e, t) {
        return e.isNode !== t.isNode ? e.isNode ? e: t: e.content[0].title <= t.content[0].title ? -1 : 1
    }
    function Vp(e) {
        return e.innerMargin + (e.titleFontSize + e.fontSize) * Np
    }
    function $p(e, t) {
        var n = ["K", "M", "G", "T", "P", "E", "Z", "Y"];
        if (9999 < (e = +e)) {
            for (var r = 0; r < n.length && 999 < e;) e /= 1e3,
            ++r;
            return function(e) {
                {
                    if (e < 10) return Math.round(100 * e) / 100;
                    if (e < 100) return Math.round(10 * e) / 10;
                    if (e < 1e3) return Math.round(e)
                }
            } (e) + n[r - 1]
        }
        return t ? Math.round(e).toString() : e < 10 ? (Math.round(1e3 * e) / 1e3).toString() : e < 100 ? (Math.round(100 * e) / 100).toString() : e < 1e3 ? (Math.round(10 * e) / 10).toString() : Math.round(e).toString()
    }
    var Zp = {
        strokeColor: "#00C3FF",
        fillColor: "rgba(0,195,255,0.1)",
        strokeWidth: 1,
        cursorStyle: "cell",
        callback: function(e) {
            e.nodes.setSelected(!0)
        }
    };
    p.extend(function(e) {
        var t = new Qp(e);
        e.modules.lasso = t,
        e.tools.lasso = {
            enable: function(e) {
                return t.enable(e)
            },
            disable: function() {
                return t.disable()
            },
            enabled: function() {
                return t.enabled()
            }
        }
    });
    var Qp = function(e) {
        var r = this;
        this._ogma = e,
        this._graph = e.modules.graph,
        this._selection = e.modules.selection,
        this._captor = e.modules.captor,
        this._keyboard = e.modules.keyboard,
        this._graphics = e.modules.graphics,
        this._camera = e.modules.camera,
        this._render = e.modules.render,
        this._interactions = e.modules.interactions,
        this._options = Ie(Zp),
        this._enabled = !1,
        this._active = !1,
        this._points = [],
        this._addToSelection = !1,
        this._canvas = this._render.addCanvasLayer("lasso"),
        this._ctx = this._canvas.getContext("2d"),
        this._interaction = this._interactions.onDrag({
            priority: "lasso",
            check: function() {
                return r._enabled
            },
            onStart: function(e) {
                var t = e.x,
                n = e.y;
                return Jp(r, t, n, !1)
            },
            onProgress: function(e) {
                var t = e.x,
                n = e.y;
                return Jp(r, t, n, !0)
            },
            onStop: function() {
                var e = r._ogma.getNodes().filter(function(e) {
                    return t = e.getPositionOnScreen(),
                    n = r._points,
                    Dn(t.x, t.y, n);
                    var t, n
                });
                r._ctx.clearRect(0, 0, r._canvas.width, r._canvas.height),
                r._points = [],
                r.disable(),
                r._options.callback({
                    nodes: e
                })
            }
        })
    };
    function Jp(e, t, n, r) {
        var i = st();
        if (e._ctx.clearRect(0, 0, e._canvas.width, e._canvas.height), e._points.push({
            x: t,
            y: n
        }), r) {
            var o = e._points[0];
            e._ctx.lineWidth = e._options.strokeWidth,
            e._ctx.lineJoin = "round",
            e._ctx.strokeStyle = e._options.strokeColor,
            e._ctx.fillStyle = e._options.fillColor,
            e._ctx.beginPath(),
            e._ctx.moveTo(o.x * i, o.y * i);
            for (var s = 1; s < e._points.length; ++s) {
                var a = e._points[s];
                e._ctx.lineTo(a.x * i, a.y * i)
            }
            e._ctx.stroke(),
            e._options.fillColor && e._ctx.fill()
        }
    }
    Qp.prototype.enable = function(e) {
        this._enabled && this.disable(),
        this._enabled = !0,
        this._prevDetect = this._captor.setDetectionEnabled(!1),
        this._options = Te(e, Zp),
        this._render.addCursorStyle(this._options.cursorStyle),
        this._captor.isLeftPressed() && this._interaction.start(this._captor.getCursorPosition())
    },
    Qp.prototype.disable = function() {
        this._enabled && (this._enabled = !1, this._captor.setDetectionEnabled(this._prevDetect), this._render.removeCursorStyle(this._options.cursorStyle))
    },
    Qp.prototype.enabled = function() {
        return this._enabled
    };
    var Kp = {
        strokeColor: "#00C3FF",
        fillColor: "rgba(0,195,255,0.1)",
        strokeWidth: 1,
        cursorStyle: "cell",
        callback: function(e) {
            var t = e.nodes,
            n = e.edges;
            t.setSelected(!0),
            n.setSelected(!0)
        }
    };
    p.extend(function(e) {
        var t = new eg(e);
        e.modules.rectangleSelect = t,
        e.tools.rectangleSelect = {
            enable: function(e) {
                return t.enable(e)
            },
            disable: function() {
                return t.disable()
            },
            enabled: function() {
                return t.enabled()
            }
        }
    });
    var eg = function(s) {
        var d = this;
        this._ogma = s,
        this._graph = s.modules.graph,
        this._selection = s.modules.selection,
        this._camera = s.modules.camera,
        this._render = s.modules.render,
        this._interactions = s.modules.interactions,
        this._keyboard = s.modules.keyboard,
        this._spatial = s.modules.spatial,
        this._captor = s.modules.captor,
        this._options = Ie(Kp),
        this._canvas = tt(),
        this._ctx = this._canvas.getContext("2d"),
        this._render.addRenderLayer(this._canvas, "lasso", !0),
        this._enabled = !1,
        this._start = null,
        this._interaction = this._interactions.onDrag({
            priority: "lasso",
            disableDetection: !0,
            check: function() {
                return d._enabled
            },
            onStart: function(e) {
                var t = e.x,
                n = e.y;
                d._start = {
                    x: t,
                    y: n
                },
                d._ctx.fillStyle = d._options.fillColor,
                d._ctx.strokeStyle = d._options.strokeColor,
                d._ctx.lineWidth = d._options.strokeWidth
            },
            onProgress: function(e) {
                var t, n, r, i, o, s, a, u = e.x,
                l = e.y;
                return n = rg(t = d, {
                    x: u,
                    y: l
                }),
                r = n.x1,
                i = n.y1,
                o = n.width,
                s = n.height,
                a = st(),
                ng(t),
                t._ctx.strokeRect(r * a, i * a, o * a, s * a),
                void(t._options.fillColor && t._ctx.fillRect(r * a, i * a, o * a, s * a))
            },
            onStop: function(e) {
                var t = e.x,
                n = e.y,
                r = rg(d, {
                    x: t,
                    y: n
                }),
                i = d._ogma.getNodes().filter(function(e) {
                    return t = e.getPositionOnScreen(),
                    n = r,
                    t.x >= n.x1 && t.x <= n.x2 && t.y >= n.y1 && t.y <= n.y2;
                    var t, n
                }), o = i.size ? new s.EdgeList: s.getEdges().filter(function(e) {
                    return function(e, t, n) {
                        for (var r = e._spatial.getPointsForEdge(t, !0), i = 0; i < r.length - 1; ++i) if (tg(r[i], r[i + 1], n)) return ! 0;
                        return ! 1
                    } (d, e, r)
                });
                ng(d),
                d.disable(),
                d._options.callback({
                    nodes: i,
                    edges: o
                })
            }
        })
    };
    function tg(e, t, n) {
        var r = e.x < n.x1,
        i = e.x > n.x2,
        o = e.y < n.y1,
        s = e.y > n.y2,
        a = t.x < n.x1,
        u = t.x > n.x2,
        l = t.y < n.y1,
        d = t.y > n.y2;
        return ! (r && a || i && u || s && d || o && l) && (!(r || i || o || s) || !(a || u || l || d) || (Rt(e, t, {
            x: n.x1,
            y: n.y1
        },
        {
            x: n.x1,
            y: n.y2
        }) || Rt(e, t, {
            x: n.x2,
            y: n.y2
        },
        {
            x: n.x1,
            y: n.y2
        }) || Rt(e, t, {
            x: n.x1,
            y: n.y1
        },
        {
            x: n.x2,
            y: n.y1
        }) || Rt(e, t, {
            x: n.x2,
            y: n.y2
        },
        {
            x: n.x2,
            y: n.y1
        })))
    }
    function ng(e) {
        e._ctx.clearRect(0, 0, e._canvas.width, e._canvas.height)
    }
    function rg(e, t) {
        var n = e._start.x,
        r = e._start.y,
        i = t.x,
        o = t.y,
        s = Math.abs(n - i),
        a = Math.abs(r - o),
        u = n < i ? n: i,
        l = r < o ? r: o;
        return {
            x1: u,
            y1: l,
            x2: u + s,
            y2: l + a,
            p1: {
                x: u,
                y: l
            },
            p2: {
                x: u + s,
                y: l + a
            },
            width: s,
            height: a
        }
    }
    eg.prototype.enable = function(e) {
        this._enabled && this.disable(),
        this._enabled = !0,
        this._options = Te(e, Kp),
        this._render.addCursorStyle(this._options.cursorStyle),
        this._captor.isLeftPressed() && this._interaction.start(this._captor.getCursorPosition())
    },
    eg.prototype.disable = function() {
        this._enabled && (this._enabled = !1, this._render.removeCursorStyle(this._options.cursorStyle))
    },
    eg.prototype.enabled = function() {
        return this._enabled
    };
    var ig = {
        cursor: "nesw-resize",
        color: "#00C3FF",
        lineWidth: 1,
        handleSize: 6,
        detectionMargin: 5,
        snappingRatio: 1.25,
        nbNodesToSnapTo: 5,
        previewColor: "rgba(0, 0, 0, 0.2)",
        sizeIndicatorColor: "black",
        sizeIndicatorOffset: 5,
        sizeIndicatorWidth: 3,
        sizeIndicatorThickness: 1
    };
    p.extend(function(e) {
        var t = new og(e);
        e.modules.resizing = t,
        e.tools.resize = {
            enable: function(e) {
                return t.enable(e)
            },
            disable: function() {
                return t.disable()
            },
            enabled: function() {
                return t.enabled()
            }
        }
    });
    var og = function(e) {
        var r = this;
        this._render = e.modules.render,
        this._interactions = e.modules.interactions,
        this._events = e.modules.events,
        this._camera = e.modules.camera,
        this._render = e.modules.render,
        this._spatial = e.modules.spatial,
        this._graphics = e.modules.graphics,
        this._init(),
        this._interactions.onDrag({
            priority: "resizing",
            disableDetection: !0,
            check: function() {
                return r._enabled && r._pointedNode
            },
            onStart: function(e) {
                var t = e.x,
                n = e.y;
                r._x = t,
                r._y = n,
                r._nodeBeingResized = r._pointedNode
            },
            onProgress: function(e) {
                var t = e.x,
                n = e.y;
                r._x = t,
                r._y = n,
                r._displayHandles()
            },
            onStop: function() {
                r._nodesToHighlight.forEach(function(e, t) {
                    var n = r._additionalRadiuses[t] / r._camera.zoom;
                    e.setAttributes({
                        radius: e.getAttribute("radius") + n,
                        x: e.getPosition().x + n,
                        y: e.getPosition().y - n
                    })
                }),
                r._pointedNode = null,
                r._nodeBeingResized = null,
                r._displayHandles()
            }
        }),
        this._onSelectionChange = function() {
            r._enabled && (r._nodesToHighlight = e.getSelectedNodes(), r._displayHandles())
        },
        this._events.on({
            "cameraMove progressMoveNodesByDragging": function() {
                return r._displayHandles()
            },
            "move down": function(e) {
                var t = e.x,
                n = e.y;
                return r._detectBoundingBoxes(t, n)
            }
        }),
        e.events.onNodesSelected(this._onSelectionChange),
        e.events.onNodesUnselected(this._onSelectionChange)
    };
    og.prototype._init = function() {
        this._enabled = !1,
        this._canvas = null,
        this._nodesToHighlight = null,
        this._options = null,
        this._nodeBeingResized = null,
        this._pointedNode = null,
        this._cursorEnabled = !1,
        this._x = 0,
        this._y = 0,
        this._additionalRadiuses = [],
        this._previewComponent = []
    },
    og.prototype._enableCursor = function() {
        this._cursorEnabled || (this._render.addCursorStyle(this._options.cursor), this._cursorEnabled = !0)
    },
    og.prototype._disableCursor = function() {
        this._cursorEnabled && (this._render.removeCursorStyle(this._options.cursor), this._cursorEnabled = !1)
    },
    og.prototype._detectBoundingBoxes = function(a, u) {
        var l = this;
        if (this._enabled && !this._nodeBeingResized && this._nodesToHighlight) {
            var d = this._options.handleSize,
            c = this._options.detectionMargin;
            this._pointedNode = null,
            this._forEachNodeToHighlight(function(e, t, n) {
                var r = t.x + n - d / 2 - c,
                i = t.x + n + d / 2 + c,
                o = t.y - n - d / 2 - c,
                s = t.y - n + d / 2 + c;
                r <= a && a <= i && o <= u && u <= s && (l._pointedNode = e)
            }),
            this._pointedNode ? this._enableCursor() : this._disableCursor()
        }
    },
    og.prototype._forEachNodeToHighlight = function(r) {
        var i = this;
        this._nodesToHighlight.forEach(function(e) {
            var t = e.getPositionOnScreen(),
            n = i._getTotalOnScreenRadius(e);
            r(e, t, n)
        })
    },
    og.prototype._displayHandles = function() {
        var c = this;
        if (this._enabled && this._nodesToHighlight) {
            var e = this._canvas,
            h = e.getContext("2d"),
            t = e.width,
            n = e.height,
            f = st(),
            p = this._camera.zoom,
            r = this._options,
            i = r.color,
            g = r.lineWidth,
            v = r.handleSize,
            y = 0;
            if (h.clearRect(0, 0, t, n), h.strokeStyle = i, h.fillStyle = i, h.lineWidth = g, this._previewComponent.forEach(function(e) {
                return c._render.delete(e)
            }), this._previewComponent = [], this._nodeBeingResized) {
                var o = this._getTotalOnScreenRadius(this._nodeBeingResized),
                s = this._nodeBeingResized.getPositionOnScreen();
                y = Math.max(this._x - (s.x + o), -(this._y - (s.y - o))) / 2
            }
            this._additionalRadiuses = [],
            this._forEachNodeToHighlight(function(e, t, n) {
                var r = 0;
                if (c._nodeBeingResized) {
                    r = y;
                    var i = -n + e.getAttribute("innerStroke.width") + e.getAttribute("outerStroke.width") + g / 2 + 1;
                    r = r < i ? i: c._snap(e, r),
                    c._additionalRadiuses.push(r);
                    var o = c._graphics.getNodeShape(e.getAttribute("shape")),
                    s = t.x + r,
                    a = t.y - r,
                    u = (n + r) / p,
                    l = c._options.previewColor,
                    d = c._camera.screenToGraphCoordinates({
                        x: s,
                        y: a
                    });
                    c._previewComponent.push(o.draw(c._render, -1, d.x, d.y, u, 0, l, "nodeShapes"))
                }
                h.strokeRect((t.x - n) * f, (t.y - n - 2 * r) * f, 2 * (r + n) * f, 2 * (r + n) * f),
                h.fillRect((t.x + n + 2 * r - v / 2) * f, (t.y - n - 2 * r - v / 2) * f, v * f, v * f)
            })
        }
    },
    og.prototype._getTotalOnScreenRadius = function(e) {
        return e.getAttribute("radius") * this._camera.zoom + e.getAttribute("innerStroke.width") + e.getAttribute("outerStroke.width") + this._options.lineWidth / 2
    },
    og.prototype._snap = function(e, t) {
        var n, r, i = this,
        o = this._spatial.getNodesInScreenByDistance(e).filter(function(e) {
            return ! e.isSelected()
        }).slice(0, this._options.nbNodesToSnapTo),
        s = this._canvas.getContext("2d"),
        a = this._getTotalOnScreenRadius(e),
        u = a + t,
        l = this._options.snappingRatio,
        d = u / a,
        c = Math.round((n = d, r = l, Math.log(n) / Math.log(r))),
        h = a * Math.pow(l, c),
        f = null;
        if (o.forEach(function(e) {
            var t = i._getTotalOnScreenRadius(e);
            Math.abs(t - u) <= Math.abs(h - u) && (h = t, f = e)
        }), f) {
            s.save(),
            s.strokeStyle = this._options.sizeIndicatorColor,
            s.lineWidth = this._options.sizeIndicatorThickness;
            var p = f.getAttribute("radius");
            this._displaySizeIndicator(e, h),
            o.filter(function(e) {
                return e.getAttribute("radius") === p
            }).forEach(function(e) {
                return i._displaySizeIndicator(e)
            }),
            s.restore()
        }
        return h - a
    },
    og.prototype._displaySizeIndicator = function(e, t) {
        var n = this._canvas.getContext("2d"),
        r = st(),
        i = e.getPositionOnScreen(),
        o = this._getTotalOnScreenRadius(e),
        s = t || o,
        a = t ? t - o: 0,
        u = a - this._options.sizeIndicatorOffset - (t ? e.getAttribute("innerStroke.width") + e.getAttribute("outerStroke.width") : 0),
        l = i.x - s + u | 0,
        d = i.y - s - a | 0,
        c = i.y + s - a | 0,
        h = this._options.sizeIndicatorWidth;
        n.beginPath(),
        n.moveTo((l - h) * r, d * r),
        n.lineTo((l + h) * r, d * r),
        n.moveTo(l * r, d * r),
        n.lineTo(l * r, c * r),
        n.moveTo((l - h) * r, c * r),
        n.lineTo((l + h) * r, c * r),
        n.stroke()
    },
    og.prototype.enable = function(e) {
        this._enabled && this.disable(),
        this._options = Te(e, ig),
        this._canvas = this._render.addCanvasLayer("resizing"),
        this._enabled = !0
    },
    og.prototype.disable = function() {
        this._enabled && (this._render.removeRenderLayer(this._canvas), this._disableCursor(), this._init())
    },
    og.prototype.enabled = function() {
        return this._enabled
    },
    p.extend(function(e) {
        var t = new ag(e);
        e.modules.rewiring = t,
        e.tools.rewire = {
            enable: function(e) {
                return t.enable(e)
            },
            disable: function() {
                return t.disable()
            },
            enabled: function() {
                return t.enabled()
            }
        }
    });
    var sg = {
        color: "#00C3FF",
        radius: 7,
        cursorOnHover: "grab",
        cursorOnDrag: "grabbing"
    },
    ag = function(e) {
        var d = this;
        this._ogma = e,
        this._render = e.modules.render,
        this._captor = e.modules.captor,
        this._mouse = e.modules.mouse,
        this._graph = e.modules.graph,
        this._camera = e.modules.camera,
        this._graphics = e.modules.graphics,
        this._selection = e.modules.selection,
        this._events = e.modules.events,
        this._settings = e.modules.settings,
        this._interactions = e.modules.interactions,
        this._classes = e.modules.classes,
        this._classes.create("__rewirable", {
            after: "hoverExtremityHighlighted"
        }),
        this._enabled = !1,
        this._filter = this._graph._addFilter(!1),
        this._canvas = null,
        this._nodesToHighlight = null,
        this._movedEdges = null,
        this._startNode = null,
        this._components = null,
        this._cursorActive = !1,
        this._prevSettings = null,
        this._curvatureList = this._graph.getEdgeAttribute("curvature"),
        this._nodeDepthList = this._graph.getNodeAttribute("depth"),
        this._interactions.onDrag({
            priority: "rewiring",
            check: function(e) {
                var t, n, r, i, o, s = e.x,
                a = e.y,
                u = e.target;
                if (! (d._enabled && u && u.isNode && (n = u, r = s, i = a, o = (t = d)._camera.graphToScreenCoordinates(n.getPosition()), n.getAttribute("radius") * t._camera.zoom > t._options.radius && jt(o.x, o.y, r, i) < t._options.radius))) return ! 1;
                var l = u.getAdjacentEdges().filter(function(e) {
                    return e.isSelected()
                });
                return !! l.size && (d._movedEdges = l, d._startNode = u, !0)
            },
            onStart: function() {
                d._nodesToHighlight = d._nodesToHighlight.filter(function(e) {
                    return e !== d._startNode
                }),
                d._edgeColors = d._movedEdges.getAttribute("color"),
                cg(d, !0);
                var e = d._options.cursorOnDrag;
                d._prevSettings = d._settings.update({
                    edgeHover: !1,
                    cursor: {
                    default:
                        e,
                        node: e,
                        edge: e
                    }
                })
            },
            onProgress: function(e) {
                var x, t, n, w, r, A, i = e.x,
                o = e.y;
                t = i,
                n = o,
                w = (x = d)._camera.screenToGraphCoordinates({
                    x: t,
                    y: n
                }),
                r = x._movedEdges,
                A = x._render.updateComposite(x._components, r.size),
                r.forEach(function(e, t) {
                    var n, r, i, o, s, a, u = x._graphics.getEdgeShape(e.getAttribute("shape")),
                    l = x._edgeColors[t],
                    d = e.getAttribute("width"),
                    c = e.getSource(),
                    h = e.getTarget(),
                    f = dg(x),
                    p = h === x._startNode ? h: c,
                    g = h === x._startNode ? c: h,
                    v = g.getPosition(),
                    y = f ? f.getPosition() : w,
                    m = f ? f.getAttribute("radius") : 0,
                    _ = g.getAttribute("radius"),
                    b = x._curvatureList.get(e._index);
                    g.addClass("selectionExtremityHighlighted"),
                    p === h ? (n = v.x, r = v.y, i = y.x, o = y.y, s = _, a = m) : (n = y.x, r = y.y, i = v.x, o = v.y, s = m, a = _),
                    A[t] = sa(x._render, A[t], u, !0, !1, n, r, i, o, d, 0, b, s, a, l, "edgeShapes", 0, 1)
                }),
                x._components = x._render.composite(x._components, A)
            },
            onStop: function() {
                ug(d);
                var e, t = dg(d); (e = d)._components = e._render.delete(e._components),
                t && d._movedEdges.forEach(function(e) {
                    e.getTarget() === d._startNode ? e.setTarget(t) : e.setSource(t)
                }),
                cg(d, !1),
                d._movedEdges.setSelected(!0),
                d._movedEdges = !1,
                d._refreshHandles(d)
            }
        }),
        this._refreshHandles = function() {
            if (d._enabled && !d._movedEdges) {
                var e = d._ogma.getSelectedEdges();
                d._nodesToHighlight = e.getExtremities().dedupe(),
                d._classes.clearEdges("__rewirable"),
                e.addClass("__rewirable"),
                hg(d)
            }
        },
        this._displayHandles = function() {
            return hg(d)
        },
        this._events.on({
            cameraMove: this._displayHandles,
            mouseMove: this._displayHandles,
            progressMoveNodesByDragging: this._displayHandles
        }),
        e.events.onEdgesSelected(this._refreshHandles),
        e.events.onEdgesUnselected(this._refreshHandles)
    };
    function ug(e) {
        e._prevSettings && (e._settings.update(e._prevSettings), e._prevSettings = null)
    }
    function lg(e) {
        e._cursorActive && (e._cursorActive = !1, e._render.removeCursorStyle(e._options.cursorOnHover))
    }
    function dg(e) {
        var t = e._captor.getPointedElement();
        return t && t.isNode ? t: null
    }
    function cg(e, t) {
        for (var n = e._movedEdges._indexes,
        r = 0; r < n.length; ++r) e._filter.set(n[r], t);
        e._graph._refreshFilters(!1, n)
    }
    function hg(t) {
        if (t._enabled && t._nodesToHighlight) {
            var e, i = {
                x: t._mouse.x,
                y: t._mouse.y
            },
            n = dg(t),
            o = t._camera.zoom,
            s = t._canvas.getContext("2d"),
            a = st(),
            u = t._nodesToHighlight,
            r = t._options,
            l = r.color,
            d = r.radius,
            c = u.getPosition().map(function(e) {
                return t._camera.graphToScreenCoordinates(e)
            }); (e = t)._canvas.getContext("2d").clearRect(0, 0, e._canvas.width, e._canvas.height),
            s.fillStyle = l,
            s.strokeStyle = l;
            var h, f = !1;
            if (c.forEach(function(e, t) {
                var n = e.x,
                r = e.y;
                u.get(t).getAttribute("radius") * o > d && (s.fillRect((n - d) * a, (r - d) * a, d * a * 2, d * a * 2), jt(n, r, i.x, i.y) < d && (f = !0))
            }), t._movedEdges) {
                var p = i;
                n && (p = t._camera.graphToScreenCoordinates(n.getPosition())),
                s.fillRect((p.x - d) * a, (p.y - d) * a, d * a * 2, d * a * 2)
            }
            f ? (h = t)._cursorActive || (h._cursorActive = !0, h._render.addCursorStyle(h._options.cursorOnHover)) : lg(t)
        }
    }
    ag.prototype.enable = function(e) {
        this._enabled && this.disable(),
        this._options = Te(e, sg),
        this._canvas = this._render.addCanvasLayer("rewiring"),
        this._enabled = !0,
        this._refreshHandles()
    },
    ag.prototype.disable = function() {
        this._enabled && (this._enabled = !1, lg(this), ug(this), this._render.removeCursorStyle(this._options.cursorOnDrag), this._render.removeRenderLayer(this._canvas), this._canvas = null, this._classes.clearEdges("__rewirable"))
    },
    ag.prototype.enabled = function() {
        return this._enabled
    };
    var fg = {
        tolerance: 5,
        centerSnapDistance: 240,
        sideSnapDistanceFactor: 3,
        guidelineWidth: 1,
        guidelineColor: "#ff0000",
        preferredDistance: {
            enabled: !0,
            ratio: 1.13,
            tolerance: 10,
            lineColor: "#00C3FF",
            lineWidth: 1
        },
        neighbours: {
            enabled: !0,
            offset: 5,
            tolerance: 3,
            lineColor: "#00C3FF",
            lineWidth: 1
        }
    },
    pg = 0,
    gg = 1,
    vg = 2,
    yg = 3,
    mg = 4,
    _g = 5,
    bg = function(e) {
        var t = e.modules,
        n = t.graph,
        r = t.graphics,
        i = t.render,
        o = t.settings,
        s = t.spatial,
        a = t.events,
        u = t.camera;
        this._graph = n,
        this._graphics = r,
        this._spatial = s,
        this._render = i,
        this._settings = o,
        this._events = a,
        this._camera = u,
        this._options = Ie(fg),
        this._enabled = !1,
        this._ysnap = this._xsnap = pg,
        this._node = null,
        this._r = 0,
        this._viewport = null,
        this._horizontalGuideLine = null,
        this._verticalGuideLine = null,
        this._vguideline = {
            start: new Gt,
            end: new Gt
        },
        this._hguideline = {
            start: new Gt,
            end: new Gt
        },
        this._distanceGuidelines = [ - 1, -1],
        this._neighbourGuidelines = [],
        this._render.addSemanticLayer("guidelines", {
            camera: this._graphics._cameraForRender
        })
    };
    function xg(e, t, n, r) {
        for (var i, o, s = 0,
        a = e.length - 1,
        u = Math.abs; s < a;) o = u(t[e[i = (s + a) / 2 | 0]] - n),
        u(t[e[i + 1]] - n) <= o ? s = i + 1 : a = i;
        return r ? a: e[a]
    }
    function wg(e, t) {
        for (var n = 1,
        r = e.length; n < r; n++) {
            for (var i = e[n], o = n; t[e[o - 1]] > t[i];) e[o] = e[o - 1],
            --o;
            e[o] = i
        }
        return e
    }
    bg.prototype.enable = function(e) {
        var r = this,
        t = this._events;
        this._options = Te(e, fg),
        this._enabled || (this._enabled = !0, this._dragStartListener = t.on("startMoveNodesByDragging",
        function(e) {
            return r._onNodeDragStart(e)
        }), this._dragEndListener = t.on("endMoveNodesByDragging",
        function(e) {
            return r._onNodeDragEnd(e)
        }), this._settings.update({
            "interactions.drag.onBeforeDrag": function(e, t, n) {
                return r._onBeforeDrag(e, t, n)
            }
        }))
    },
    bg.prototype.disable = function() {
        if (this._enabled) {
            var e = this._events;
            e.removeListener(this._dragStartListener),
            e.removeListener(this._dragEndListener),
            this._settings.update({
                "interactions.drag.onBeforeDrag": null
            }),
            this._enabled = !1
        }
    },
    bg.prototype.enabled = function() {
        return this._enabled
    },
    bg.prototype._onNodeDragStart = function(e) {
        var t = e.nodes;
        1 === t.size && (this._node = t.get(0), this._cacheViewport(), this._r = this._node.getAttribute("radius"))
    },
    bg.prototype._onBeforeDrag = function(e, t, n) {
        if (this._node) {
            var r = n[0];
            this._scan(r),
            this._node.setAttributes(r)
        }
    },
    bg.prototype._onNodeDragEnd = function(e) {
        if (this._node) {
            var t = this._render;
            this._verticalGuideLine = t.delete(this._verticalGuideLine),
            this._horizontalGuideLine = t.delete(this._horizontalGuideLine),
            this._distanceGuidelines[0] = t.delete(this._distanceGuidelines[0]),
            this._distanceGuidelines[1] = t.delete(this._distanceGuidelines[1]),
            this._neighbourGuidelines.forEach(function(e) {
                return t.delete(e)
            }),
            this._neighbourGuidelines = []
        }
        this._node = null
    },
    bg.prototype._cacheViewport = function() {
        var e = this._camera,
        t = e.screenToGraphCoordinates({
            x: 0,
            y: 0
        }),
        n = e.screenToGraphCoordinates({
            x: e.width,
            y: e.height
        });
        this._viewport = {
            xmin: t.x,
            ymin: t.y,
            xmax: n.x,
            ymax: n.y
        },
        this._nodes = this._spatial.getNodesByBoundingBox(t.x, t.y, n.x, n.y);
        var r = this._node._index,
        i = this._nodes._indexes.slice();
        i.splice(i.indexOf(r), 1);
        for (var o = this._graphics._getAttributeArray(!0, "radius"), s = this._graph.getAttribute(!0, "x")._buffer, a = this._graph.getAttribute(!0, "y")._buffer, u = wg(i.slice(), s), l = wg(i.slice(), a), d = {},
        c = {},
        h = {},
        f = {},
        p = this._gridResolution = this._node.getAttribute("radius"), g = 0, v = i.length; g < v; g++) {
            var y = u[g],
            m = l[g],
            _ = s[y] / p | 0,
            b = a[m] / p | 0;
            d[_] || (d[_] = []),
            c[b] || (c[b] = []),
            d[_].push(y),
            c[b].push(m),
            h[y] = f[m] = g
        }
        this._nodesByX = u,
        this._nodesByY = l,
        this._nodesByXIndex = h,
        this._nodesByYIndex = f,
        this._xGrid = d,
        this._yGrid = c,
        this._X = s,
        this._Y = a,
        this._R = o
    },
    bg.prototype._scan = function(e) {
        var t, n, r = this._node._index,
        i = e.x,
        o = e.y,
        s = this._r,
        a = this._render,
        u = this._options,
        l = this._R,
        d = this._X,
        c = this._Y,
        h = this._camera.zoom,
        f = Math.min(s, this._options.tolerance / h),
        p = 2 * s * u.sideSnapDistanceFactor,
        g = u.guidelineWidth,
        v = u.guidelineColor;
        this._verticalGuideLine = a.delete(this._verticalGuideLine),
        this._horizontalGuideLine = a.delete(this._horizontalGuideLine),
        this._distanceGuidelines[0] = a.delete(this._distanceGuidelines[0]),
        this._distanceGuidelines[1] = a.delete(this._distanceGuidelines[1]);
        var y, m, _, b, x, w, A, E = r,
        C = r,
        S = !1,
        I = !1;
        if (E = xg(this._nodesByX, d, i), C = xg(this._nodesByY, c, o), Math.abs(d[E] - i) > u.centerSnapDistance && (E = r), Math.abs(c[C] - o) > u.centerSnapDistance && (C = r), this._xsnap = pg, E !== r) {
            t = this._vguideline.start,
            n = this._vguideline.end,
            y = d[A = E],
            m = c[A],
            _ = l.get(A),
            w = Math.abs(i - y);
            var T = Math.abs(i - s - (y - _)),
            N = Math.abs(i + s - (y + _));
            if (w < Math.max(s, _)) {
                m < o ? (t.y = m - _, n.y = o + s) : (t.y = m + _, n.y = o - s);
                var k = Math.min(T, w, N);
                k === w ? (t.x = n.x = y, n.y = o, t.y = m, this._xsnap = gg) : Math.abs(o - m) < _ + s + p && (k === T ? (t.x = n.x = y - _, this._xsnap = vg) : (t.x = n.x = y + _, this._xsnap = yg)),
                k < f && (S = !0)
            }
            this._xsnap !== pg && (this._verticalGuideLine = a.line( - 1, t, n, 0, g, v, "guidelines", 1))
        }
        if (this._ysnap = pg, C !== r) {
            t = this._hguideline.start,
            n = this._hguideline.end,
            y = d[A = C],
            m = c[A],
            _ = l.get(A),
            w = Math.abs(o - m);
            var L = Math.abs(o - s - (m - _)),
            R = Math.abs(o + s - (m + _));
            if (w < Math.max(s, _)) {
                y < i ? (t.x = y - _, n.x = i + s) : (t.x = y + _, n.x = i - s);
                var z = Math.min(L, w, R);
                z === w ? (t.y = n.y = m, n.x = i, t.x = y, this._ysnap = gg) : Math.abs(i - y) < _ + s + p && (z === L ? (t.y = n.y = m - _, this._ysnap = mg) : (t.y = n.y = m + _, this._ysnap = _g)),
                z < f && (I = !0)
            }
            this._ysnap !== pg && (this._horizontalGuideLine = a.line( - 1, t, n, 0, g, v, "guidelines", 1))
        }
        if (u.preferredDistance.enabled) {
            var M = u.preferredDistance.ratio,
            P = Math.min(u.preferredDistance.tolerance / h, s),
            F = Math.max(s, _);
            if (E === r || this._xsnap !== pg && S) {
                if (C !== r && (this._ysnap === pg || !I) && (y = d[A = C], m = c[A], _ = l.get(A), (x = Math.abs(o - m) - (s + _) * (1 + M)) <= P && -P <= x)) {
                    var D = o < m ? -1 : 1;
                    t = this._hguideline.start,
                    n = this._hguideline.end,
                    t.x = y - F,
                    n.x = y + F,
                    t.y = n.y = m,
                    this._distanceGuidelines[0] = a.line( - 1, t, n, 0, g, v, "guidelines", 1),
                    t.x = i - F,
                    n.x = i + F,
                    t.y = n.y = m + D * (1 + M) * (s + _),
                    this._distanceGuidelines[1] = a.line( - 1, t, n, 0, g, v, "guidelines", 1),
                    this._ysnap = gg,
                    I = !0
                }
            } else if (y = d[A = E], m = c[A], _ = l.get(A), (b = Math.abs(i - y) - (s + _) * (1 + M)) <= P && -P <= b) {
                var O = i < y ? -1 : 1;
                t = this._vguideline.start,
                n = this._vguideline.end,
                t.x = n.x = y + O * (1 + M) * (s + _),
                t.y = m - F,
                n.y = m + F,
                t.x = n.x = y,
                this._distanceGuidelines[0] = a.line( - 1, t, n, 0, g, v, "guidelines", 1),
                t.y = o - F,
                n.y = o + F,
                t.x = n.x = y + O * (1 + M) * (s + _),
                this._distanceGuidelines[1] = a.line( - 1, t, n, 0, g, v, "guidelines", 1),
                this._xsnap = gg,
                S = !0
            }
        }
        if (u.neighbours.enabled) {
            for (var B = this._neighbourGuidelines,
            j = 0,
            U = B.length; j < U; j++) a.delete(B[j]);
            var H, X = this._gridResolution,
            W = i / X | 0,
            G = o / X | 0,
            q = this._xGrid,
            Y = this._yGrid,
            V = [],
            $ = [].concat(Y[G - 1] || V, Y[G] || V, Y[G + 1] || V),
            Z = [].concat(q[W - 1] || V, q[W] || V, q[W + 1] || V);
            1 < $.length && (wg($, d), (H = this.findNeighboursToAlign($, d, r, i, s, l, f)) && (this.drawNeighbourGuidelines(H, e), S = !1)),
            1 < Z.length && !H && (wg(Z, c), (H = this.findNeighboursToAlign(Z, c, r, o, s, l, f)) && (this.drawNeighbourGuidelines(H, e, !0), I = !1))
        } (S || I) && this._snap(e, !S, !I)
    },
    bg.prototype.findNeighboursToAlign = function(e, t, n, r, i, o, s) {
        for (var a, u, l, d, c, h, f = !1,
        p = Math.abs,
        g = 0,
        v = e.length; ! f && g < v; g++) for (var y = 0; ! f && y < v; y++) if (g !== y) {
            var m = e[g],
            _ = e[y];
            y < g && (d = _, _ = m, m = d);
            var b = t[m],
            x = t[_],
            w = o.get(m),
            A = o.get(_);
            b + w < r - i && r + i < x - A && p(p(b + w - (r - i)) - p(x - A - (r + i))) <= s ? (a = m, u = n, l = _, c = [b + w, (h = b + w + Math.abs(x - A - (b + w)) / 2) - i, h + i, x - A], f = !0) : b + w < r - i && x + A < r - i && p(p(b + w - (x - A)) - p(Math.max(b + w, x + A) - (r - i))) <= s ? (a = m, u = _, l = n, c = [b + w, x - A, x + A, (h = x + w + p(p(b + w - (x - A))) + i) - i], f = !0) : r + i < b - w && r + i < x - A && p(p(b + w - (x - A)) - p(Math.min(b - w, x - A) - (r + i))) <= s && (a = n, u = m, l = _, c = [(h = b - w - p(p(b + w - (x - A))) - i) + i, b - w, b + w, x - A], f = !0)
        }
        return f ? {
            a: a,
            b: u,
            c: l,
            current: n,
            target: h,
            points: c
        }: null
    },
    bg.prototype.drawNeighbourGuidelines = function(e, t, n) {
        var r, i, o = e.a,
        s = e.b,
        a = e.c,
        u = e.points,
        l = e.target,
        d = this._neighbourGuidelines,
        c = new Gt,
        h = new Gt,
        f = this._R,
        p = this._X,
        g = this._Y,
        v = f.getMultiple([o, s, a]),
        y = v[0],
        m = v[1],
        _ = v[2],
        b = this._render,
        x = this._options.neighbours,
        w = x.offset,
        A = x.lineWidth,
        E = x.lineColor;
        n ? (t.y = l, y = -y, m = -m, _ = -_, r = h.x = c.x = Math.min(p[o] + y, p[s] + m, p[a] + _) - w, i = p) : (t.x = l, r = h.y = c.y = Math.max(g[o] + y, g[s] + m, g[a] + _) + w, i = g);
        var C = n ? "y": "x",
        S = n ? "x": "y";
        c[C] = u[0],
        h[C] = u[1],
        d.push(b.line( - 1, c, h, 0, A, E, "guidelines", 1)),
        c[C] = u[2],
        h[C] = u[3],
        d.push(b.line( - 1, c, h, 0, A, E, "guidelines", 1)),
        c[C] = u[0],
        c[S] = r - w / 2,
        h[C] = u[0],
        c[S] = i[o] + y,
        d.push(b.line( - 1, c, h, 0, A, E, "guidelines", 1)),
        c[C] = u[1],
        c[S] = r - w / 2,
        h[C] = u[1],
        c[S] = i[s] + m,
        d.push(b.line( - 1, c, h, 0, A, E, "guidelines", 1)),
        c[C] = u[2],
        c[S] = r - w / 2,
        h[C] = u[2],
        c[S] = i[s] + m,
        d.push(b.line( - 1, c, h, 0, A, E, "guidelines", 1)),
        c[C] = u[3],
        c[S] = r - w / 2,
        h[C] = u[3],
        c[S] = i[a] + _,
        d.push(b.line( - 1, c, h, 0, A, E, "guidelines", 1))
    },
    bg.prototype._snap = function(e, t, n) {
        var r, i = this._xsnap,
        o = this._ysnap;
        t || i === pg || (r = this._vguideline.end, e.x = i === vg ? r.x + this._r: i === yg ? r.x - this._r: r.x),
        n || o === pg || (r = this._hguideline.end, e.y = o === mg ? r.y + this._r: o === _g ? r.y - this._r: r.y)
    },
    p.extend(function(e) {
        var t = new bg(e);
        e.modules.snapping = t,
        e.tools.snapping = {
            enable: function(e) {
                return t.enable(e)
            },
            disable: function() {
                return t.disable()
            }
        }
    }),
    p.extend(function(e) {
        var n = new Eg(e);
        e.modules.tooltip = n,
        e.tools.tooltip = {},
        e.tools.tooltip.onNodeHover = function(e, t) {
            kg(n, "hover.node", e, t)
        },
        e.tools.tooltip.onNodeClick = function(e, t) {
            kg(n, "click.left.node", e, t)
        },
        e.tools.tooltip.onNodeRightClick = function(e, t) {
            kg(n, "click.right.node", e, t)
        },
        e.tools.tooltip.onNodeDoubleClick = function(e, t) {
            kg(n, "doubleClick.left.node", e, t)
        },
        e.tools.tooltip.onEdgeHover = function(e, t) {
            kg(n, "hover.edge", e, t)
        },
        e.tools.tooltip.onEdgeClick = function(e, t) {
            kg(n, "click.left.edge", e, t)
        },
        e.tools.tooltip.onEdgeRightClick = function(e, t) {
            kg(n, "click.right.edge", e, t)
        },
        e.tools.tooltip.onEdgeDoubleClick = function(e, t) {
            kg(n, "doubleClick.left.edge", e, t)
        },
        e.tools.tooltip.onBackgroundClick = function(e, t) {
            kg(n, "click.left.background", e, t)
        },
        e.tools.tooltip.onBackgroundRightClick = function(e, t) {
            kg(n, "click.right.background", e, t)
        },
        e.tools.tooltip.onBackgroundDoubleClick = function(e, t) {
            kg(n, "doubleClick.left.background", e, t)
        },
        e.tools.tooltip.refresh = function() {
            n.refresh()
        }
    });
    var Ag = ["top", "bottom", "left", "right", "cssDefined"],
    Eg = function(e) {
        var t = this;
        this._render = e.modules.render,
        this._interactions = e.modules.interactions,
        this._camera = e.modules.camera,
        this._events = e.modules.events,
        this._handlers = {},
        this._currentHandlerName = null,
        this._tooltip = null,
        this._isHover = !1,
        this._events.on({
            "up dragStart": function() {
                t._isHover || Lg(t)
            },
            unhover: function() {
                t._isHover && Lg(t)
            },
            clear: function() {
                Lg(t)
            }
        }),
        this._interactions.onHover(Cg(this, "hover", !0)),
        this._interactions.onClick(Cg(this, "click")),
        this._interactions.onDoubleClick(Cg(this, "doubleClick"))
    };
    function Cg(s, a, i) {
        return void 0 === i && (i = !1),
        {
            priority: "tooltip",
            check: function(e) {
                var t = e.button,
                n = e.target,
                r = [];
                r.push(a),
                t && r.push(t),
                r.push(n ? n.isNode ? "node": "edge": "background");
                var i = r.join("."),
                o = s._handlers[i];
                return ! (!o || !o.condition(e)) && (s._currentHandlerName = i, !0)
            },
            handler: function(e) {
                var t = e.target,
                n = e.x,
                r = e.y;
                s._isHover = i,
                s._elt = t,
                s._x = n,
                s._y = r,
                Sg(s)
            }
        }
    }
    function Sg(i) {
        if (i._currentHandlerName) {
            var e = i._handlers[i._currentHandlerName],
            o = e.settings,
            t = (0, e.handler)(i._elt); (t instanceof Promise ? t: Promise.resolve(t)).then(function(e) {
                var t, n, r;
                t = i,
                n = function() { !
                    function(e, t, n) {
                        Lg(e, !1);
                        var r = e._x,
                        i = e._y,
                        o = e._elt,
                        s = e._render.getDimensions(),
                        a = n.className,
                        u = n.autoAdjust,
                        l = n.position,
                        d = 0,
                        c = 0;
                        if ("string" == typeof t) e._tooltip = (f = "div", "object" == typeof document ? document.createElement(f) : {
                            style: {},
                            offsetWidth: 10,
                            offsetHeight: 10
                        }),
                        e._tooltip.innerHTML = t;
                        else {
                            if (h = t, !("undefined" != typeof HTMLElement && h instanceof HTMLElement)) throw new Error("invalid tooltip " + t + ", expected HTML string or HTML element");
                            e._tooltip = t
                        }
                        var h;
                        var f;
                        e._tooltip.__isOgmaTooltip = !0,
                        a && (e._tooltip.className += e._tooltip.className ? " " + a: a);
                        "cssDefined" !== l && (e._tooltip.style.position = "absolute");
                        if (e._render.addRenderLayer(e._tooltip, "tooltip"), o && o.isNode) {
                            var p = e._camera.graphToScreenCoordinates(o.getPosition()),
                            g = o.getAttribute("radius") * e._camera.zoom + o.getAttribute("innerStroke.width") + +o.getAttribute("outerStroke.width") + 1;
                            r = p.x,
                            i = p.y,
                            c = d = g
                        }
                        var v = e._tooltip.offsetWidth,
                        y = e._tooltip.offsetHeight,
                        m = v / 2,
                        _ = y / 2;
                        if (d += m, c += _, "cssDefined" !== l) {
                            var b = Ig[l],
                            x = b.x,
                            w = b.y;
                            if (u) {
                                var A = r + d * b.x,
                                E = i + c * b.y; (A - m < 0 || A + m >= s.width) && ("left" === l || "right" === l ? x *= -1 : x = A - m < 0 ? (m - A + 1) / d: (s.width - (A + m) - 1) / d),
                                (E - _ < 0 || E + _ >= s.height) && ("top" === l || "bottom" === l ? w *= -1 : w = E - _ < 0 ? (_ - E + 1) / c: (s.height - (E + _) - 1) / c)
                            }
                            e._tooltip.style.left = r + d * x - m + "px",
                            e._tooltip.style.top = i + c * w - _ + "px"
                        }
                    } (i, e, o)
                },
                r = o.delay,
                t._timeout && clearTimeout(t._timeout),
                t._timeout = setTimeout(function() {
                    t._timeout = null,
                    n()
                },
                r)
            })
        }
    }
    Eg.prototype.hide = function() {
        Lg(this, !0)
    },
    Eg.prototype.refresh = function() {
        Sg(this)
    };
    var Ig = {
        top: {
            x: 0,
            y: -1
        },
        bottom: {
            x: 0,
            y: 1
        },
        left: {
            x: -1,
            y: 0
        },
        right: {
            x: 1,
            y: 0
        }
    },
    Tg = {
        position: "top",
        autoAdjust: !0,
        hoverDelay: 100,
        className: null
    },
    Ng = {
        hover: {
            node: function(e) {
                var t = e.target;
                return t && t.isNode
            },
            edge: function(e) {
                var t = e.target;
                return t && !t.isNode
            }
        },
        click: {
            left: {
                node: function(e) {
                    var t = e.target;
                    return "left" === e.button && t && t.isNode
                },
                edge: function(e) {
                    var t = e.target;
                    return "left" === e.button && t && !t.isNode
                },
                background: function(e) {
                    var t = e.target;
                    return "left" === e.button && !t
                }
            },
            right: {
                node: function(e) {
                    var t = e.target;
                    return "right" === e.button && t && t.isNode
                },
                edge: function(e) {
                    var t = e.target;
                    return "right" === e.button && t && !t.isNode
                },
                background: function(e) {
                    var t = e.target;
                    return "right" === e.button && !t
                }
            }
        },
        doubleClick: {
            left: {
                node: function(e) {
                    var t = e.target;
                    return "left" === e.button && t && t.isNode
                },
                edge: function(e) {
                    var t = e.target;
                    return "left" === e.button && t && !t.isNode
                },
                background: function(e) {
                    var t = e.target;
                    return "left" === e.button && !t
                }
            },
            right: {
                node: function(e) {
                    var t = e.target;
                    return "right" === e.button && t && t.isNode
                },
                edge: function(e) {
                    var t = e.target;
                    return "right" === e.button && t && !t.isNode
                },
                background: function(e) {
                    var t = e.target;
                    return "right" === e.button && !t
                }
            }
        }
    };
    function kg(e, t, n, r) {
        var i = Te(r, Tg, "position"); - 1 === Ag.indexOf(i.position) && (i.position = "top"),
        e._handlers[t] = {
            handler: n,
            condition: ze(Ng, t),
            settings: i
        }
    }
    function Lg(e, t) {
        e._timeout && (clearTimeout(e._timeout), e._timeout = null),
        e._tooltip && (e._render.removeRenderLayer(e._tooltip), e._tooltip = null),
        t && (e._currentHandlerName = null)
    }
    function Rg(e, t) {
        var n = t.styles,
        r = t.nodes,
        i = t.edges,
        o = t.filter;
        return {
            nodes: Mg(!0, e, n, r, o),
            edges: Mg(!1, e, n, i, o)
        }
    }
    var zg = {
        get: function() {}
    };
    function Mg(e, t, n, r, i) {
        var o = t.modules.graph,
        s = o._filter(e, o._getIndexes(e, r), i),
        a = o.getAttributes(e, ["source", "target", "data", "x", "y", "text.content", "color", "shape", e ? "radius": "width"]).map(function(e) {
            return e || zg
        }),
        u = a[0],
        l = a[1],
        d = a[2],
        c = a[3],
        h = a[4],
        f = a[5],
        p = a[6],
        g = a[7],
        v = a[8],
        y = new Array(s.length);
        if ("none" === n) v = g = p = f = zg;
        else if ("original" === n) {
            var m = t.modules.graphics._elts.fetch(e)._originalStyles;
            f = m["text.content"] || zg,
            p = m.color || zg,
            g = m.shape || zg,
            v = m.size || zg
        }
        for (var _ = 0; _ < s.length; ++_) {
            var b = s[_],
            x = {
                id: o._getId(e, b),
                data: d.get(b),
                x: c.get(b),
                y: h.get(b),
                color: p.get(b),
                size: v.get(b),
                shape: g.get(b),
                text: f.get(b)
            };
            e || (x.source = o._getId(!0, u.get(b)), x.target = o._getId(!0, l.get(b))),
            Array.isArray(x.color) && (x.color = x.color[0]),
            y[_] = x
        }
        return y
    }
    function Pg(d, c, h) {
        for (var f = new sn,
        p = c ? 1 : 3, g = [], e = function(e) {
            var t = d[e],
            n = new Array(p),
            r = t.data;
            if (h) {
                var i = {};
                h.forEach(function(e) {
                    var t = ae(e),
                    n = function(e, t) {
                        for (var n = 0; n < t.length; ++n) {
                            if (null == e) return;
                            e = e[t[n]]
                        }
                        return e
                    } (r, t); !
                    function(e, t, n) {
                        for (var r = 0; r < t.length - 1; ++r) {
                            var i = t[r],
                            o = e[i];
                            void 0 === o && (o = {},
                            e[i] = o),
                            e = o
                        }
                        e[t[t.length - 1]] = n
                    } (i, t, n)
                }),
                r = i
            }
            var o = on(r);
            n[0] = t.id,
            c || (n[1] = t.source, n[2] = t.target);
            for (var s = 0; s < o.length; ++s) {
                var a = o[s],
                u = a.path,
                l = a.value;
                u.length && (f.has(u) ? n[f.get(u)] = l: (f.set(u, p), n[p] = l, p++))
            }
            g.push(n)
        },
        t = 0; t < d.length; ++t) e(t);
        var n = [];
        return n.push("id"),
        c || (n.push("source"), n.push("target")),
        f.keys().forEach(function(e) {
            return n.push(e[e.length - 1])
        }),
        g.unshift(n),
        g.forEach(function(e) {
            return e.length = p
        }),
        g
    }
    var Fg = {
        what: void 0,
        dataProperties: void 0,
        separator: ",",
        textSeparator: '"',
        download: !0,
        filename: "graph.csv",
        filter: "visible",
        nodes: void 0,
        edges: void 0
    };
    p.extend(function(h) {
        h.export.csv = function(e) {
            var t = Te(e, Fg, "what"),
            n = t.what,
            r = t.dataProperties,
            i = t.nodes,
            o = t.edges,
            s = t.separator,
            a = t.textSeparator,
            u = t.download,
            l = t.filename,
            d = t.filter,
            c = function(e, t) {
                var n = t.what,
                r = t.separator,
                i = t.textSeparator,
                o = t.dataProperties,
                s = new RegExp("" + i, "g");
                function a(e) {
                    var t;
                    return e = (t = e) instanceof Date ? t.toISOString() : "" + t,
                    e = i + e.replace(s, "\\$&") + i
                }
                if (i && '"' !== i && "'" !== i) throw new TypeError('Invalid argument :"textSeparator" is not single-quote or double-quote, was ' + i);
                if ("nodes" !== n && "edges" !== n) throw new TypeError('missing argument: "what": should have value "nodes" or "edges"');
                var u = "nodes" === n;
                return Pg(u ? e.nodes: e.edges, u, o).map(function(e) {
                    return e.map(function(e) {
                        return a(e)
                    })
                }).map(function(e) {
                    return e.join(r)
                }).join("\n")
            } (Rg(h, {
                styles: "none",
                nodes: i,
                edges: o,
                filter: d
            }), {
                what: n,
                separator: s,
                textSeparator: a,
                dataProperties: r
            });
            return u && lt(c, l, "text"),
            Promise.resolve(c)
        }
    });
    var Dg = {
        creator: void 0,
        description: void 0,
        styles: "all",
        download: !0,
        filename: "graph.gexf",
        nodes: void 0,
        edges: void 0,
        filter: "visible"
    };
    function Og(e, t) {
        return "integer" === t && "number" == typeof e ? e % 1 != 0 && (t = "float") : "number" != typeof e && (t = "string", "boolean" == typeof e && (t = "boolean")),
        t
    }
    p.extend(function(c) {
        c.export.gexf = function(e) {
            void 0 === e && (e = {});
            var t = Te(e, Dg),
            n = t.styles,
            r = t.nodes,
            i = t.edges,
            o = t.download,
            s = t.filename,
            a = t.creator,
            u = t.description,
            l = t.filter,
            d = function(e, t) {
                var n, r, i, o, s, a, u, l, d, c, h, f, p, g, v, y, m, _, b, x = rt(),
                w = {},
                A = 0,
                E = {},
                C = 0; (y = x.createElement("gexf")).setAttribute("xmlns", "http://www.gexf.net/1.2draft"),
                y.setAttribute("xmlns:viz", "http://www.gexf.net/1.2draft/viz"),
                y.setAttribute("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance"),
                y.setAttribute("xsi:schemaLocation", "http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),
                y.setAttribute("version", "1.2"),
                (p = x.createElement("meta")).setAttribute("lastmodifieddate", te()),
                t.creator && (l = x.createElement("creator"), b = x.createTextNode("" + t.creator), l.appendChild(b), p.appendChild(l));
                t.description && (d = x.createElement("description"), b = x.createTextNode("" + t.description), d.appendChild(b), p.appendChild(d)); (f = x.createElement("graph")).setAttribute("mode", "static"),
                g = x.createElement("nodes"),
                e.nodes.forEach(function(e) {
                    if ((v = x.createElement("node")).setAttribute("id", e.id), e.text && v.setAttribute("label", e.text), (n = e.data) && (i = x.createElement("attvalues"), Object.keys(n).forEach(function(e) {
                        e in w || (w[e] = {
                            id: A,
                            type: "integer"
                        },
                        A++);
                        var t = n[e];
                        w[e].type = Og(t, w[e].type),
                        (o = x.createElement("attvalue")).setAttribute("for", w[e].id),
                        o.setAttribute("value", t),
                        i.appendChild(o)
                    }), v.appendChild(i)), e.color) {
                        var t = G(e.color); (u = x.createElement("viz:color")).setAttribute("r", t[0]),
                        u.setAttribute("g", t[1]),
                        u.setAttribute("b", t[2]),
                        u.setAttribute("a", t[3]),
                        v.appendChild(u)
                    } (m = x.createElement("viz:position")).setAttribute("x", e.x),
                    m.setAttribute("y", -parseInt(e.y, 10)),
                    v.appendChild(m),
                    e.size && ((_ = x.createElement("viz:size")).setAttribute("value", e.size), v.appendChild(_)),
                    g.appendChild(v)
                }),
                (s = x.createElement("attributes")).setAttribute("class", "node"),
                Object.keys(w).forEach(function(e) { (r = x.createElement("attribute")).setAttribute("id", w[e].id),
                    r.setAttribute("title", e),
                    r.setAttribute("type", w[e].type),
                    s.appendChild(r)
                }),
                c = x.createElement("edges"),
                e.edges.forEach(function(e) {
                    if ((h = x.createElement("edge")).setAttribute("id", e.id), h.setAttribute("source", e.source), h.setAttribute("target", e.target), e.size && h.setAttribute("weight", e.size), e.text && h.setAttribute("label", e.text), (n = e.data) && (i = x.createElement("attvalues"), Object.keys(n).forEach(function(e) {
                        e in E || (E[e] = {
                            id: C,
                            type: "integer"
                        },
                        C++);
                        var t = n[e];
                        E[e].type = Og(t, E[e].type),
                        (o = x.createElement("attvalue")).setAttribute("for", E[e].id),
                        o.setAttribute("value", t),
                        i.appendChild(o)
                    }), h.appendChild(i)), e.color) {
                        var t = G(e.color); (u = x.createElement("viz:color")).setAttribute("r", t[0]),
                        u.setAttribute("g", t[1]),
                        u.setAttribute("b", t[2]),
                        h.appendChild(u)
                    }
                    e.size && ((_ = x.createElement("viz:size")).setAttribute("value", e.size), h.appendChild(_)),
                    c.appendChild(h)
                }),
                (a = x.createElement("attributes")).setAttribute("class", "edge"),
                Object.keys(E).forEach(function(e) { (r = x.createElement("attribute")).setAttribute("id", E[e].id),
                    r.setAttribute("title", e),
                    r.setAttribute("type", E[e].type),
                    a.appendChild(r)
                }),
                f.appendChild(s),
                f.appendChild(a),
                f.appendChild(g),
                f.appendChild(c),
                y.appendChild(p),
                y.appendChild(f),
                x.appendChild(y);
                var S = it(x);
                r && r.parentNode.removeChild(r);
                i && i.parentNode.removeChild(i);
                o && o.parentNode.removeChild(o);
                u && u.parentNode.removeChild(u);
                l && l.parentNode.removeChild(l);
                d && d.parentNode.removeChild(d);
                b && b.parentNode.removeChild(b);
                m && m.parentNode.removeChild(m);
                _ && _.parentNode.removeChild(_);
                v && v.parentNode.removeChild(v);
                h && h.parentNode.removeChild(h);
                s && s.parentNode.removeChild(s);
                a && a.parentNode.removeChild(a);
                g && g.parentNode.removeChild(g);
                c && c.parentNode.removeChild(c);
                f && f.parentNode.removeChild(f);
                p && p.parentNode.removeChild(p);
                y && y.parentNode.removeChild(y);
                return x = null,
                S
            } (Rg(c, {
                styles: n,
                nodes: r,
                edges: i,
                filter: l
            }), {
                creator: a,
                description: u
            });
            return o && lt(d, s, "text"),
            Promise.resolve(d)
        }
    });
    var Bg = {
        graphId: "G",
        directedEdges: !0,
        styles: "all",
        download: !0,
        filename: "graph.graphml",
        nodes: void 0,
        edges: void 0,
        filter: "visible"
    };
    p.extend(function(c) {
        c.export.graphml = function(e) {
            void 0 === e && (e = {});
            var t = Te(e, Bg),
            n = t.styles,
            r = t.nodes,
            i = t.edges,
            o = t.download,
            s = t.filename,
            a = t.graphId,
            u = t.directedEdges,
            l = t.filter,
            d = function(e, t) {
                var l = rt();
                function i(e, t, n, r, i) {
                    n = n || {};
                    var o = l.createElement(t);
                    for (var s in n) if (n.hasOwnProperty(s)) {
                        var a = n[s];
                        void 0 !== a && o.setAttribute(s, a)
                    }
                    if (void 0 !== r || i) {
                        "[object Object]" === Object.prototype.toString.call(r) && (r = JSON.stringify(r));
                        var u = l.createTextNode(r);
                        o.appendChild(u)
                    }
                    return e.appendChild(o),
                    o
                }
                var a = ["id", "source", "target"],
                n = ["size", "x", "y", "shape", "color", "text"],
                r = {
                    size: {
                        for: "all",
                        type: "double"
                    },
                    x: {
                        for: "node",
                        type: "double"
                    },
                    y: {
                        for: "node",
                        type: "double"
                    },
                    shape: {
                        for: "all",
                        type: "string"
                    },
                    color: {
                        for: "all",
                        type: "string"
                    },
                    r: {
                        for: "all",
                        type: "int"
                    },
                    g: {
                        for: "all",
                        type: "int"
                    },
                    b: {
                        for: "all",
                        type: "int"
                    },
                    a: {
                        for: "all",
                        type: "double"
                    },
                    text: {
                        for: "all",
                        type: "string"
                    }
                },
                u = [],
                d = [];
                function o(i, o) {
                    var s = {
                        id: i.id
                    };
                    n.forEach(function(e) {
                        var t, n, r = i[e];
                        "y" === e && r && (r = -parseFloat(r)),
                        void 0 !== r && (s[("edge" === o ? "edge_": "") + e] = r, "color" === e && (t = s, n = G(r), t.r = n[0], t.g = n[1], t.b = n[2]))
                    });
                    var e = i.data || {};
                    Fe(e,
                    function(e, t) { - 1 === n.indexOf(t) && -1 === a.indexOf(t) && (r[t] ? r[t].
                        for !== o && (r[t].
                        for = "all") : r[t] = {
                            for: o,
                            type: "string"
                        },
                        s[t] = e)
                    }),
                    "edge" === o ? (s.source = i.source, s.target = i.target, d.push(s)) : u.push(s)
                }
                e.nodes.forEach(function(e) {
                    o(e, "node")
                }),
                e.edges.forEach(function(e) {
                    o(e, "edge")
                });
                var s = i(l, "graphml", {
                    xmlns: "http://graphml.graphdrawing.org/xmlns",
                    "xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
                    "xsi:schemaLocation": "http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd",
                    "xmlns:y": "http://www.yworks.com/xml/graphml",
                    "xmlns:java": "http://www.yworks.com/xml/yfiles-common/1.0/java",
                    "xmlns:sys": "http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0",
                    "xmlns:x": "http://ww.yworks.com/xml/yfiles-common/markup/2.0"
                });
                Fe(r,
                function(e, t) {
                    "node" !== e.
                    for && "all" !== e.
                    for || i(s, "key", {
                        "attr.name": t,
                        "attr.type": e.type,
                        for: "node",
                        id: t
                    }),
                    "edge" !== e.
                    for && "all" !== e.
                    for || i(s, "key", {
                        "attr.name": t,
                        "attr.type": e.type,
                        for: "edge",
                        id: "edge_" + t
                    })
                }),
                i(s, "key", {
                    id: "nodegraphics",
                    for: "node",
                    "yfiles.type": "nodegraphics",
                    "attr.type": "string"
                }),
                i(s, "key", {
                    id: "edgegraphics",
                    for: "edge",
                    "yfiles.type": "edgegraphics",
                    "attr.type": "string"
                });
                var c = i(s, "graph", {
                    edgedefault: t.directedEdges || void 0 === t.directedEdges ? "directed": "undirected",
                    id: t.graphId ? t.graphId: "G",
                    "parse.nodes": e.nodes.length,
                    "parse.edges": e.edges.length,
                    "parse.order": "nodesfirst"
                });
                return u.forEach(function(e) {
                    var t, n, r = i(c, "node", {
                        id: e.id
                    });
                    t = e,
                    i(n = i(i(r, "data", {
                        key: "nodegraphics"
                    }), "y:ShapeNode"), "y:Geometry", {
                        x: t.x,
                        y: t.y,
                        width: t.size,
                        height: t.size
                    }),
                    i(n, "y:Fill", {
                        color: V(t.color),
                        transparent: !1
                    }),
                    i(n, "y:NodeLabel", null, t.text || ""),
                    i(n, "y:Shape", {
                        type: t.shape
                    }),
                    Fe(e,
                    function(e, t) { - 1 === a.indexOf(t) && i(r, "data", {
                            key: t
                        },
                        e, !0)
                    })
                }),
                d.forEach(function(e) {
                    var t, n, r = i(c, "edge", {
                        id: e.id,
                        source: e.source,
                        target: e.target
                    });
                    t = e,
                    i(n = i(i(r, "data", {
                        key: "edgegraphics"
                    }), "y:PolyLineEdge"), "y:LineStyle", {
                        type: t.edge_type,
                        color: V(t.edge_color),
                        width: t.edge_size
                    }),
                    i(n, "y:EdgeLabel", null, t.edge_label),
                    Fe(e,
                    function(e, t) { - 1 === a.indexOf(t) && i(r, "data", {
                            key: t
                        },
                        e, !0)
                    })
                }),
                '<?xml version="1.0" encoding="UTF-8"?>\n' + it(l)
            } (Rg(c, {
                styles: n,
                nodes: r,
                edges: i,
                filter: l
            }), {
                graphId: a,
                directedEdges: u
            });
            return o && lt(d, s, "text"),
            Promise.resolve(d)
        }
    });
    var jg = {
        pretty: !1,
        styles: "all",
        download: !0,
        filename: "graph.json",
        nodes: void 0,
        edges: void 0,
        filter: "visible"
    };
    function Ug(t, n, e, r) {
        void 0 === r && (r = !1);
        var i, o, s, a, u = t.modules,
        l = u.render,
        d = u.graphics,
        c = u.camera,
        h = u.locate,
        f = c.zoom,
        p = l.getDimensions(),
        g = p.width,
        v = p.height,
        y = "number" == typeof n.margin ? n.margin: 10; ! 1 === n.texts && (i = t.styles.setNodeTextsVisibility(!1), o = t.styles.setEdgeTextsVisibility(!1)),
        n.width && n.height ? (s = n.width, a = n.height) : (s = g, a = v);
        var m = h.nodesBoundingBox(),
        _ = {
            zoom: n.clip ? Math.min(s / (s + y), a / (a + y)) * f: Math.min(s / (m.width + y), a / (m.height + y)),
            x: m.cx,
            y: m.cy
        },
        b = l.export(e, s, a, n.background,
        function() {
            c.reloadDimensions(),
            d.drawAllSynchronously()
        });
        return new Promise(function(e) {
            b.whenImagesLoaded(function() {
                r && b.setImagesEnabled(!1),
                c.reloadDimensions(),
                c.setView(_),
                b.render(),
                !1 === n.texts && (t.styles.setNodeTextsVisibility(i), t.styles.setEdgeTextsVisibility(o)),
                e({
                    renderer: b,
                    view: _
                })
            })
        })
    }
    function Hg(e) {
        return {
            download: !0,
            filename: "graph." + e,
            clip: !1,
            margin: 10,
            width: void 0,
            height: void 0,
            background: null,
            legend: !0,
            texts: !0,
            map: !0,
            textWatermark: {
                content: null,
                fontFamily: "Arial",
                fontSize: 48,
                fontStyle: null,
                fontColor: "red",
                repeat: !1,
                angle: 0,
                alpha: .65,
                space: 50,
                x: void 0,
                y: void 0
            },
            imageWatermark: {
                url: null,
                width: void 0,
                height: void 0,
                repeat: !1,
                angle: 0,
                alpha: .65,
                space: 50,
                x: void 0,
                y: void 0
            }
        }
    }
    p.extend(function(c) {
        c.export.json = function(e) {
            void 0 === e && (e = {});
            var t = Te(e, jg),
            n = t.pretty,
            r = t.styles,
            i = t.nodes,
            o = t.edges,
            s = t.download,
            a = t.filename,
            u = t.filter,
            l = Rg(c, {
                styles: r,
                nodes: i,
                edges: o,
                filter: u
            }),
            d = n ? JSON.stringify(l, null, " ") : JSON.stringify(l);
            return s && lt(d, a, "text"),
            Promise.resolve(d)
        }
    }),
    p.extend(function(t) {
        t.export.png = function(e) {
            return Wg(t, e, "png")
        },
        t.export.jpg = function(e) {
            return Wg(t, e, "jpg")
        },
        t.export.tiff = function(e) {
            return Wg(t, e, "tiff")
        },
        t.export.gif = function(e) {
            return Wg(t, e, "gif")
        }
    });
    var Xg = {
        png: Hg("png"),
        jpg: Hg("jpg"),
        tiff: Hg("tiff"),
        gif: Hg("gif")
    };
    function Wg(f, p, g, i) {
        void 0 === i && (i = !1),
        f.geo.enabled() && delete p.background,
        p = Te(p, Xg[g]);
        var o = f.modules.camera.getView();
        return new Promise(function(l, d) {
            function e(e) {
                var n = e.renderer,
                r = e.view;
                return p.textWatermark.content && $g(n.canvas, p.textWatermark, Gg, qg),
                p.imageWatermark.url ? new Promise(function(t) {
                    gt(p.imageWatermark.url,
                    function(e) {
                        e && (p.imageWatermark.content = e, $g(n.canvas, p.imageWatermark, Vg, Yg)),
                        t({
                            renderer: n,
                            view: r
                        })
                    })
                }) : Promise.resolve({
                    renderer: n,
                    view: r
                })
            }
            function c(e) {
                var t = e.width,
                n = e.height,
                r = st();
                return tt(t / r, n / r)
            }
            function t(e) {
                var s = e.renderer,
                a = e.view;
                return new Promise(function(e, t) {
                    if (p.legend && f.modules.legend.enabled()) {
                        var n = s.canvas,
                        r = n.width,
                        i = n.height,
                        o = c(n);
                        f.modules.legend.drawOnCanvas(o),
                        n.getContext("2d").drawImage(o, 0, 0, r, i)
                    }
                    e({
                        renderer: s,
                        view: a
                    })
                })
            }
            function h(e) {
                var t = e.toDataURL("image/" + g);
                p.download && lt(t, p.filename, "dataURL"),
                l(t)
            }
            function n(e) {
                var t, n, r, i, o, s = e.renderer,
                a = e.view;
                try {
                    var u = s.canvas;
                    f.geo.enabled() ? (n = a, r = c(t = u), i = t.width, o = t.height, f.modules.geo.exportBackground(r, n).then(function() {
                        r.getContext("2d").drawImage(t, 0, 0, i, o),
                        h(r)
                    })) : h(u)
                } catch(e) {
                    we(e),
                    Wg(f, p, g, !0).then(l).
                    catch(d)
                }
            }
            var r = function() {
                Ug(f, p, Hr, i).then(e).then(t).then(n).then(function() {
                    return f.modules.camera.setView(o)
                })
            };
            f.geo.enabled() ? f.modules.geo.whenReady(r) : r()
        })
    }
    function Gg(e, t, n, r) {
        e.textAlign = "center",
        e.textBaseline = "middle",
        e.fillText(t, n, r)
    }
    function qg(e, t, n) {
        return {
            width: e.measureText(t).width,
            height: n
        }
    }
    function Yg(e, t, n, r, i) {
        return {
            width: void 0 === r ? t.width: r,
            height: void 0 === i ? t.height: i
        }
    }
    function Vg(e, t, n, r, i, o) {
        e.drawImage(t, n - i / 2, r - o / 2, i, o)
    }
    function $g(e, t, n, r) {
        if (t) {
            if ("object" != typeof t) t = {
                content: t
            };
            else if (!t.content) return;
            var i = e.getContext("2d"),
            o = t.fontFamily,
            s = t.fontSize,
            a = t.fontStyle,
            u = t.fontColor,
            l = t.repeat,
            d = t.angle,
            c = t.alpha,
            h = t.space,
            f = t.content,
            p = e.width,
            g = e.height,
            v = void 0 === t.x ? p / 2 : t.x,
            y = void 0 === t.y ? g / 2 : t.y,
            m = t.height,
            _ = t.width;
            d = d / 180 * Math.PI,
            i.font = a ? a + " " + s + "px " + o: s + "px " + o,
            i.fillStyle = u,
            i.globalAlpha = c;
            var b = r(i, f, s, _, m);
            if (l) {
                var x = b.width + h,
                w = b.height + h,
                A = Math.sqrt(p * p + g * g);
                i.save(),
                i.translate(0, 0),
                i.rotate(d);
                for (var E = 0; E < A; E += x) for (var C = 0; C < A; C += w) n(i, f, E, C, b.width, b.height),
                0 !== C && n(i, f, E, -C, b.width, b.height);
                i.restore()
            } else i.save(),
            i.translate(v, y),
            i.rotate(d),
            n(i, f, 0, 0, b.width, b.height),
            i.restore()
        }
    }
    p.extend(function(t) {
        t.export.svg = function(e) {
            return s = t,
            a = Te(a = e, Zg),
            new Promise(function(i, e) {
                var o = s.modules.camera.getView();
                Ug(s, a, mi).then(function(e) {
                    var t = e.renderer,
                    n = (e.view, t.svg);
                    n.setAttribute("version", "1.1"),
                    n.setAttribute("xmlns", "http://www.w3.org/2000/svg"),
                    n.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink");
                    var r = '<?xml version="1.0" encoding="utf-8"?>' + it(n);
                    a.download && lt(r, a.filename),
                    i(r),
                    s.modules.camera.setView(o)
                })
            });
            var s, a
        }
    });
    var Zg = {
        download: !0,
        filename: "graph.svg",
        width: void 0,
        height: void 0,
        background: null,
        texts: !0
    };
    var Qg = {
        what: void 0,
        dataProperties: void 0,
        download: !0,
        filename: "graph.xlsx",
        nodes: void 0,
        edges: void 0,
        filter: "visible"
    };
    function Jg(e, t) {
        for (var n, r = {},
        i = {
            s: {
                c: 1e7,
                r: 1e7
            },
            e: {
                c: 0,
                r: 0
            }
        },
        o = 0; o !== t.length; ++o) for (var s = t[o], a = 0; a !== s.length; ++a) {
            var u = s[a];
            i.s.r > o && (i.s.r = o),
            i.s.c > a && (i.s.c = a),
            i.e.r < o && (i.e.r = o),
            i.e.c < a && (i.e.c = a);
            var l = {
                v: (n = u, void 0 === n ? "": n instanceof Date ? n.toISOString() : "" + n)
            };
            r[e.utils.encode_cell({
                c: a,
                r: o
            })] = l
        }
        return i.s.c < 1e7 && (r["!ref"] = e.utils.encode_range(i)),
        r
    }
    function Kg() {
        if (! (this instanceof Kg)) return new Kg;
        this.SheetNames = [],
        this.Sheets = {}
    }
    return p.extend(function(d) {
        d.export.xlsx = function(e) {
            var t = Te(e, Qg, "what"),
            n = t.what,
            r = t.nodes,
            i = t.edges,
            o = t.download,
            s = t.filename,
            a = t.dataProperties,
            u = t.filter,
            l = function(e, t) {
                var n, r, i = t.what,
                o = t.dataProperties,
                s = J("xlsx", {
                    globalVarName: "XLSX"
                }),
                a = new Kg;
                if (i) if ("nodes" === i) n = Jg(s, Pg(e.nodes, !0, o));
                else {
                    if ("edges" !== i) throw new TypeError('Invalid argument: "what" is not "nodes" or "edges", was ' + i);
                    r = Jg(s, Pg(e.edges, !1, o))
                } else n = Jg(s, Pg(e.nodes, !0, o)),
                r = Jg(s, Pg(e.edges, !1, o));
                n && (a.SheetNames.push("Nodes"), a.Sheets.Nodes = n);
                r && (a.SheetNames.push("Edges"), a.Sheets.Edges = r);
                return ut([function(e) {
                    for (var t = new ArrayBuffer(e.length), n = new Uint8Array(t), r = 0; r !== e.length; ++r) n[r] = 255 & e.charCodeAt(r);
                    return t
                } (s.write(a, {
                    bookType: "xlsx",
                    bookSST: !1,
                    type: "binary"
                }))])
            } (Rg(d, {
                styles: "none",
                nodes: r,
                edges: i,
                filter: u
            }), {
                what: n,
                dataProperties: a
            });
            return o && lt(l, s, "blob"),
            Promise.resolve(l)
        }
    }),
    (p.
default = p).geometry = er,
    p.algorithms = _r,
    p.utils = Nn,
    p
}),
function(e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
    else if ("function" == typeof define && define.amd) define([], e);
    else {
        var t;
        "undefined" != typeof window ? t = window: "undefined" != typeof global ? t = global: "undefined" != typeof self && (t = self),
        t.dagre = e()
    }
} (function() {
    return function o(s, a, u) {
        function l(n, e) {
            if (!a[n]) {
                if (!s[n]) {
                    var t = "function" == typeof require && require;
                    if (!e && t) return t(n, !0);
                    if (d) return d(n, !0);
                    var r = new Error("Cannot find module '" + n + "'");
                    throw r.code = "MODULE_NOT_FOUND",
                    r
                }
                var i = a[n] = {
                    exports: {}
                };
                s[n][0].call(i.exports,
                function(e) {
                    var t = s[n][1][e];
                    return l(t || e)
                },
                i, i.exports, o, s, a, u)
            }
            return a[n].exports
        }
        for (var d = "function" == typeof require && require,
        e = 0; e < u.length; e++) l(u[e]);
        return l
    } ({
        1 : [function(e, t, n) {
            t.exports = {
                graphlib: e("./lib/graphlib"),
                layout: e("./lib/layout"),
                debug: e("./lib/debug"),
                util: {
                    time: e("./lib/util").time,
                    notime: e("./lib/util").notime
                },
                version: e("./lib/version")
            }
        },
        {
            "./lib/debug": 6,
            "./lib/graphlib": 7,
            "./lib/layout": 9,
            "./lib/util": 29,
            "./lib/version": 30
        }],
        2 : [function(e, t, n) {
            "use strict";
            var a = e("./lodash"),
            u = e("./greedy-fas");
            t.exports = {
                run: function(n) {
                    var e = "greedy" === n.graph().acyclicer ? u(n, (t = n,
                    function(e) {
                        return t.edge(e).weight
                    })) : (r = n, i = [], o = {},
                    s = {},
                    a.each(r.nodes(),
                    function t(e) {
                        a.has(s, e) || (s[e] = !0, o[e] = !0, a.each(r.outEdges(e),
                        function(e) {
                            a.has(o, e.w) ? i.push(e) : t(e.w)
                        }), delete o[e])
                    }), i);
                    var r, i, o, s;
                    var t;
                    a.each(e,
                    function(e) {
                        var t = n.edge(e);
                        n.removeEdge(e),
                        t.forwardName = e.name,
                        t.reversed = !0,
                        n.setEdge(e.w, e.v, t, a.uniqueId("rev"))
                    })
                },
                undo: function(r) {
                    a.each(r.edges(),
                    function(e) {
                        var t = r.edge(e);
                        if (t.reversed) {
                            r.removeEdge(e);
                            var n = t.forwardName;
                            delete t.reversed,
                            delete t.forwardName,
                            r.setEdge(e.w, e.v, t, n)
                        }
                    })
                }
            }
        },
        {
            "./greedy-fas": 8,
            "./lodash": 10
        }],
        3 : [function(e, t, n) {
            var a = e("./lodash"),
            l = e("./util");
            function u(e, t, n, r, i, o) {
                var s = {
                    width: 0,
                    height: 0,
                    rank: o,
                    borderType: t
                },
                a = i[t][o - 1],
                u = l.addDummyNode(e, "border", s, n);
                i[t][o] = u,
                e.setParent(u, r),
                a && e.setEdge(a, u, {
                    weight: 1
                })
            }
            t.exports = function(s) {
                a.each(s.children(),
                function e(t) {
                    var n = s.children(t),
                    r = s.node(t);
                    n.length && a.each(n, e);
                    if (a.has(r, "minRank")) {
                        r.borderLeft = [],
                        r.borderRight = [];
                        for (var i = r.minRank,
                        o = r.maxRank + 1; i < o; ++i) u(s, "borderLeft", "_bl", t, r, i),
                        u(s, "borderRight", "_br", t, r, i)
                    }
                })
            }
        },
        {
            "./lodash": 10,
            "./util": 29
        }],
        4 : [function(e, t, n) {
            "use strict";
            var i = e("./lodash");
            function o(t) {
                i.each(t.nodes(),
                function(e) {
                    r(t.node(e))
                }),
                i.each(t.edges(),
                function(e) {
                    r(t.edge(e))
                })
            }
            function r(e) {
                var t = e.width;
                e.width = e.height,
                e.height = t
            }
            function s(e) {
                e.y = -e.y
            }
            function a(e) {
                var t = e.x;
                e.x = e.y,
                e.y = t
            }
            t.exports = {
                adjust: function(e) {
                    var t = e.graph().rankdir.toLowerCase();
                    "lr" !== t && "rl" !== t || o(e)
                },
                undo: function(e) {
                    var t = e.graph().rankdir.toLowerCase();
                    "bt" !== t && "rl" !== t || (n = e, i.each(n.nodes(),
                    function(e) {
                        s(n.node(e))
                    }), i.each(n.edges(),
                    function(e) {
                        var t = n.edge(e);
                        i.each(t.points, s),
                        i.has(t, "y") && s(t)
                    }));
                    var n;
                    "lr" !== t && "rl" !== t || (r = e, i.each(r.nodes(),
                    function(e) {
                        a(r.node(e))
                    }), i.each(r.edges(),
                    function(e) {
                        var t = r.edge(e);
                        i.each(t.points, a),
                        i.has(t, "x") && a(t)
                    }), o(e));
                    var r
                }
            }
        }, {
            "./lodash": 10
        }],
        5 : [function(e, t, n) {
            function r() {
                var e = {};
                e._next = e._prev = e,
                this._sentinel = e
            }
            function i(e) {
                e._prev._next = e._next,
                e._next._prev = e._prev,
                delete e._next,
                delete e._prev
            }
            function o(e, t) {
                if ("_next" !== e && "_prev" !== e) return t
            } (t.exports = r).prototype.dequeue = function() {
                var e = this._sentinel,
                t = e._prev;
                if (t !== e) return i(t),
                t
            },
            r.prototype.enqueue = function(e) {
                var t = this._sentinel;
                e._prev && e._next && i(e),
                e._next = t._next,
                t._next._prev = e,
                (t._next = e)._prev = t
            },
            r.prototype.toString = function() {
                for (var e = [], t = this._sentinel, n = t._prev; n !== t;) e.push(JSON.stringify(n, o)),
                n = n._prev;
                return "[" + e.join(", ") + "]"
            }
        },
        {}],
        6 : [function(e, t, n) {
            var i = e("./lodash"),
            o = e("./util"),
            s = e("./graphlib").Graph;
            t.exports = {
                debugOrdering: function(t) {
                    var e = o.buildLayerMatrix(t),
                    r = new s({
                        compound: !0,
                        multigraph: !0
                    }).setGraph({});
                    return i.each(t.nodes(),
                    function(e) {
                        r.setNode(e, {
                            label: e
                        }),
                        r.setParent(e, "layer" + t.node(e).rank)
                    }),
                    i.each(t.edges(),
                    function(e) {
                        r.setEdge(e.v, e.w, {},
                        e.name)
                    }),
                    i.each(e,
                    function(e, t) {
                        var n = "layer" + t;
                        r.setNode(n, {
                            rank: "same"
                        }),
                        i.reduce(e,
                        function(e, t) {
                            return r.setEdge(e, t, {
                                style: "invis"
                            }),
                            t
                        })
                    }),
                    r
                }
            }
        },
        {
            "./graphlib": 7,
            "./lodash": 10,
            "./util": 29
        }],
        7 : [function(e, t, n) {
            var r;
            if (e) try {
                r = e("graphlib")
            } catch(e) {}
            r || (r = window.graphlib),
            t.exports = r
        },
        {
            graphlib: 31
        }],
        8 : [function(e, t, n) {
            var u = e("./lodash"),
            l = e("./graphlib").Graph,
            d = e("./data/list");
            t.exports = function(t, e) {
                if (t.nodeCount() <= 1) return [];
                var n = function(e, i) {
                    var o = new l,
                    s = 0,
                    a = 0;
                    u.each(e.nodes(),
                    function(e) {
                        o.setNode(e, {
                            v: e,
                            in:0,
                            out: 0
                        })
                    }),
                    u.each(e.edges(),
                    function(e) {
                        var t = o.edge(e.v, e.w) || 0,
                        n = i(e),
                        r = t + n;
                        o.setEdge(e.v, e.w, r),
                        a = Math.max(a, o.node(e.v).out += n),
                        s = Math.max(s, o.node(e.w). in +=n)
                    });
                    var t = u.range(a + s + 3).map(function() {
                        return new d
                    }),
                    n = s + 1;
                    return u.each(o.nodes(),
                    function(e) {
                        h(t, n, o.node(e))
                    }),
                    {
                        graph: o,
                        buckets: t,
                        zeroIdx: n
                    }
                } (t, e || i),
                r = function(e, t, n) {
                    var r, i = [],
                    o = t[t.length - 1],
                    s = t[0];
                    for (; e.nodeCount();) {
                        for (; r = s.dequeue();) c(e, t, n, r);
                        for (; r = o.dequeue();) c(e, t, n, r);
                        if (e.nodeCount()) for (var a = t.length - 2; 0 < a; --a) if (r = t[a].dequeue()) {
                            i = i.concat(c(e, t, n, r, !0));
                            break
                        }
                    }
                    return i
                } (n.graph, n.buckets, n.zeroIdx);
                return u.flatten(u.map(r,
                function(e) {
                    return t.outEdges(e.v, e.w)
                }), !0)
            };
            var i = u.constant(1);
            function c(i, o, s, e, r) {
                var a = r ? [] : void 0;
                return u.each(i.inEdges(e.v),
                function(e) {
                    var t = i.edge(e),
                    n = i.node(e.v);
                    r && a.push({
                        v: e.v,
                        w: e.w
                    }),
                    n.out -= t,
                    h(o, s, n)
                }),
                u.each(i.outEdges(e.v),
                function(e) {
                    var t = i.edge(e),
                    n = e.w,
                    r = i.node(n);
                    r. in -=t,
                    h(o, s, r)
                }),
                i.removeNode(e.v),
                a
            }
            function h(e, t, n) {
                n.out ? n. in ?e[n.out - n. in +t].enqueue(n) : e[e.length - 1].enqueue(n) : e[0].enqueue(n)
            }
        },
        {
            "./data/list": 5,
            "./graphlib": 7,
            "./lodash": 10
        }],
        9 : [function(e, t, n) {
            "use strict";
            var l = e("./lodash"),
            i = e("./acyclic"),
            o = e("./normalize"),
            s = e("./rank"),
            a = e("./util").normalizeRanks,
            u = e("./parent-dummy-chains"),
            d = e("./util").removeEmptyRanks,
            c = e("./nesting-graph"),
            h = e("./add-border-segments"),
            f = e("./coordinate-system"),
            p = e("./order"),
            g = e("./position"),
            v = e("./util"),
            y = e("./graphlib").Graph;
            t.exports = function(t, e) {
                var r = e && e.debugTiming ? v.time: v.notime;
                r("layout",
                function() {
                    var n = r("  buildLayoutGraph",
                    function() {
                        return n = t,
                        r = new y({
                            multigraph: !0,
                            compound: !0
                        }),
                        e = I(n.graph()),
                        r.setGraph(l.merge({},
                        _, S(e, m), l.pick(e, b))),
                        l.each(n.nodes(),
                        function(e) {
                            var t = I(n.node(e));
                            r.setNode(e, l.defaults(S(t, x), w)),
                            r.setParent(e, n.parent(e))
                        }),
                        l.each(n.edges(),
                        function(e) {
                            var t = I(n.edge(e));
                            r.setEdge(e, l.merge({},
                            E, S(t, A), l.pick(t, C)))
                        }),
                        r;
                        var n, r, e
                    });
                    r("  runLayout",
                    function() {
                        var t, e;
                        t = n,
                        (e = r)("    makeSpaceForEdgeLabels",
                        function() {
                            var n, r; (r = (n = t).graph()).ranksep /= 2,
                            l.each(n.edges(),
                            function(e) {
                                var t = n.edge(e);
                                t.minlen *= 2,
                                "c" !== t.labelpos.toLowerCase() && ("TB" === r.rankdir || "BT" === r.rankdir ? t.width += t.labeloffset: t.height += t.labeloffset)
                            })
                        }),
                        e("    removeSelfEdges",
                        function() {
                            var n;
                            n = t,
                            l.each(n.edges(),
                            function(e) {
                                if (e.v === e.w) {
                                    var t = n.node(e.v);
                                    t.selfEdges || (t.selfEdges = []),
                                    t.selfEdges.push({
                                        e: e,
                                        label: n.edge(e)
                                    }),
                                    n.removeEdge(e)
                                }
                            })
                        }),
                        e("    acyclic",
                        function() {
                            i.run(t)
                        }),
                        e("    nestingGraph.run",
                        function() {
                            c.run(t)
                        }),
                        e("    rank",
                        function() {
                            s(v.asNonCompoundGraph(t))
                        }),
                        e("    injectEdgeLabelProxies",
                        function() {
                            var o;
                            o = t,
                            l.each(o.edges(),
                            function(e) {
                                var t = o.edge(e);
                                if (t.width && t.height) {
                                    var n = o.node(e.v),
                                    r = o.node(e.w),
                                    i = {
                                        rank: (r.rank - n.rank) / 2 + n.rank,
                                        e: e
                                    };
                                    v.addDummyNode(o, "edge-proxy", i, "_ep")
                                }
                            })
                        }),
                        e("    removeEmptyRanks",
                        function() {
                            d(t)
                        }),
                        e("    nestingGraph.cleanup",
                        function() {
                            c.cleanup(t)
                        }),
                        e("    normalizeRanks",
                        function() {
                            a(t)
                        }),
                        e("    assignRankMinMax",
                        function() {
                            var n, r;
                            n = t,
                            r = 0,
                            l.each(n.nodes(),
                            function(e) {
                                var t = n.node(e);
                                t.borderTop && (t.minRank = n.node(t.borderTop).rank, t.maxRank = n.node(t.borderBottom).rank, r = l.max(r, t.maxRank))
                            }),
                            n.graph().maxRank = r
                        }),
                        e("    removeEdgeLabelProxies",
                        function() {
                            var n;
                            n = t,
                            l.each(n.nodes(),
                            function(e) {
                                var t = n.node(e);
                                "edge-proxy" === t.dummy && (n.edge(t.e).labelRank = t.rank, n.removeNode(e))
                            })
                        }),
                        e("    normalize.run",
                        function() {
                            o.run(t)
                        }),
                        e("    parentDummyChains",
                        function() {
                            u(t)
                        }),
                        e("    addBorderSegments",
                        function() {
                            h(t)
                        }),
                        e("    order",
                        function() {
                            p(t)
                        }),
                        e("    insertSelfEdges",
                        function() {
                            var i, e;
                            i = t,
                            e = v.buildLayerMatrix(i),
                            l.each(e,
                            function(e) {
                                var r = 0;
                                l.each(e,
                                function(e, t) {
                                    var n = i.node(e);
                                    n.order = t + r,
                                    l.each(n.selfEdges,
                                    function(e) {
                                        v.addDummyNode(i, "selfedge", {
                                            width: e.label.width,
                                            height: e.label.height,
                                            rank: n.rank,
                                            order: t + ++r,
                                            e: e.e,
                                            label: e.label
                                        },
                                        "_se")
                                    }),
                                    delete n.selfEdges
                                })
                            })
                        }),
                        e("    adjustCoordinateSystem",
                        function() {
                            f.adjust(t)
                        }),
                        e("    position",
                        function() {
                            g(t)
                        }),
                        e("    positionSelfEdges",
                        function() {
                            var a;
                            a = t,
                            l.each(a.nodes(),
                            function(e) {
                                var t = a.node(e);
                                if ("selfedge" === t.dummy) {
                                    var n = a.node(t.e.v),
                                    r = n.x + n.width / 2,
                                    i = n.y,
                                    o = t.x - r,
                                    s = n.height / 2;
                                    a.setEdge(t.e, t.label),
                                    a.removeNode(e),
                                    t.label.points = [{
                                        x: r + 2 * o / 3,
                                        y: i - s
                                    },
                                    {
                                        x: r + 5 * o / 6,
                                        y: i - s
                                    },
                                    {
                                        x: r + o,
                                        y: i
                                    },
                                    {
                                        x: r + 5 * o / 6,
                                        y: i + s
                                    },
                                    {
                                        x: r + 2 * o / 3,
                                        y: i + s
                                    }],
                                    t.label.x = t.x,
                                    t.label.y = t.y
                                }
                            })
                        }),
                        e("    removeBorderNodes",
                        function() {
                            var s;
                            s = t,
                            l.each(s.nodes(),
                            function(e) {
                                if (s.children(e).length) {
                                    var t = s.node(e),
                                    n = s.node(t.borderTop),
                                    r = s.node(t.borderBottom),
                                    i = s.node(l.last(t.borderLeft)),
                                    o = s.node(l.last(t.borderRight));
                                    t.width = Math.abs(o.x - i.x),
                                    t.height = Math.abs(r.y - n.y),
                                    t.x = i.x + t.width / 2,
                                    t.y = n.y + t.height / 2
                                }
                            }),
                            l.each(s.nodes(),
                            function(e) {
                                "border" === s.node(e).dummy && s.removeNode(e)
                            })
                        }),
                        e("    normalize.undo",
                        function() {
                            o.undo(t)
                        }),
                        e("    fixupEdgeLabelCoords",
                        function() {
                            var n;
                            n = t,
                            l.each(n.edges(),
                            function(e) {
                                var t = n.edge(e);
                                if (l.has(t, "x")) switch ("l" !== t.labelpos && "r" !== t.labelpos || (t.width -= t.labeloffset), t.labelpos) {
                                case "l":
                                    t.x -= t.width / 2 + t.labeloffset;
                                    break;
                                case "r":
                                    t.x += t.width / 2 + t.labeloffset
                                }
                            })
                        }),
                        e("    undoCoordinateSystem",
                        function() {
                            f.undo(t)
                        }),
                        e("    translateGraph",
                        function() { !
                            function(n) {
                                var o = Number.POSITIVE_INFINITY,
                                s = 0,
                                a = Number.POSITIVE_INFINITY,
                                u = 0,
                                e = n.graph(),
                                t = e.marginx || 0,
                                r = e.marginy || 0;
                                function i(e) {
                                    var t = e.x,
                                    n = e.y,
                                    r = e.width,
                                    i = e.height;
                                    o = Math.min(o, t - r / 2),
                                    s = Math.max(s, t + r / 2),
                                    a = Math.min(a, n - i / 2),
                                    u = Math.max(u, n + i / 2)
                                }
                                l.each(n.nodes(),
                                function(e) {
                                    i(n.node(e))
                                }),
                                l.each(n.edges(),
                                function(e) {
                                    var t = n.edge(e);
                                    l.has(t, "x") && i(t)
                                }),
                                o -= t,
                                a -= r,
                                l.each(n.nodes(),
                                function(e) {
                                    var t = n.node(e);
                                    t.x -= o,
                                    t.y -= a
                                }),
                                l.each(n.edges(),
                                function(e) {
                                    var t = n.edge(e);
                                    l.each(t.points,
                                    function(e) {
                                        e.x -= o,
                                        e.y -= a
                                    }),
                                    l.has(t, "x") && (t.x -= o),
                                    l.has(t, "y") && (t.y -= a)
                                }),
                                e.width = s - o + t,
                                e.height = u - a + r
                            } (t)
                        }),
                        e("    assignNodeIntersects",
                        function() {
                            var s;
                            s = t,
                            l.each(s.edges(),
                            function(e) {
                                var t, n, r = s.edge(e),
                                i = s.node(e.v),
                                o = s.node(e.w);
                                r.points ? (t = r.points[0], n = r.points[r.points.length - 1]) : (r.points = [], t = o, n = i),
                                r.points.unshift(v.intersectRect(i, t)),
                                r.points.push(v.intersectRect(o, n))
                            })
                        }),
                        e("    reversePoints",
                        function() {
                            var n;
                            n = t,
                            l.each(n.edges(),
                            function(e) {
                                var t = n.edge(e);
                                t.reversed && t.points.reverse()
                            })
                        }),
                        e("    acyclic.undo",
                        function() {
                            i.undo(t)
                        })
                    }),
                    r("  updateInputGraph",
                    function() {
                        var r, i;
                        r = t,
                        i = n,
                        l.each(r.nodes(),
                        function(e) {
                            var t = r.node(e),
                            n = i.node(e);
                            t && (t.x = n.x, t.y = n.y, i.children(e).length && (t.width = n.width, t.height = n.height))
                        }),
                        l.each(r.edges(),
                        function(e) {
                            var t = r.edge(e),
                            n = i.edge(e);
                            t.points = n.points,
                            l.has(n, "x") && (t.x = n.x, t.y = n.y)
                        }),
                        r.graph().width = i.graph().width,
                        r.graph().height = i.graph().height
                    })
                })
            };
            var m = ["nodesep", "edgesep", "ranksep", "marginx", "marginy"],
            _ = {
                ranksep: 50,
                edgesep: 20,
                nodesep: 50,
                rankdir: "tb"
            },
            b = ["acyclicer", "ranker", "rankdir", "align"],
            x = ["width", "height"],
            w = {
                width: 0,
                height: 0
            },
            A = ["minlen", "weight", "width", "height", "labeloffset"],
            E = {
                minlen: 1,
                weight: 1,
                width: 0,
                height: 0,
                labeloffset: 10,
                labelpos: "r"
            },
            C = ["labelpos"];
            function S(e, t) {
                return l.mapValues(l.pick(e, t), Number)
            }
            function I(e) {
                var n = {};
                return l.each(e,
                function(e, t) {
                    n[t.toLowerCase()] = e
                }),
                n
            }
        },
        {
            "./acyclic": 2,
            "./add-border-segments": 3,
            "./coordinate-system": 4,
            "./graphlib": 7,
            "./lodash": 10,
            "./nesting-graph": 11,
            "./normalize": 12,
            "./order": 17,
            "./parent-dummy-chains": 22,
            "./position": 24,
            "./rank": 26,
            "./util": 29
        }],
        10 : [function(e, t, n) {
            var r;
            if (e) try {
                r = e("lodash")
            } catch(e) {}
            r || (r = window._),
            t.exports = r
        },
        {
            lodash: 51
        }],
        11 : [function(e, t, n) {
            var v = e("./lodash"),
            y = e("./util");
            t.exports = {
                run: function(t) {
                    var n = y.addDummyNode(t, "root", {},
                    "_root"),
                    r = (s = t, a = {},
                    v.each(s.children(),
                    function(e) { !
                        function t(e, n) {
                            var r = s.children(e);
                            r && r.length && v.each(r,
                            function(e) {
                                t(e, n + 1)
                            }),
                            a[e] = n
                        } (e, 1)
                    }), a),
                    i = v.max(r) - 1,
                    o = 2 * i + 1;
                    var s, a;
                    t.graph().nestingRoot = n,
                    v.each(t.edges(),
                    function(e) {
                        t.edge(e).minlen *= o
                    });
                    var u = (l = t, v.reduce(l.edges(),
                    function(e, t) {
                        return e + l.edge(t).weight
                    },
                    0) + 1);
                    var l;
                    v.each(t.children(),
                    function(e) { !
                        function s(a, u, l, d, c, h, f) {
                            var e = a.children(f);
                            if (!e.length) return void(f !== u && a.setEdge(u, f, {
                                weight: 0,
                                minlen: l
                            }));
                            var p = y.addBorderNode(a, "_bt"),
                            g = y.addBorderNode(a, "_bb"),
                            t = a.node(f);
                            a.setParent(p, f);
                            t.borderTop = p;
                            a.setParent(g, f);
                            t.borderBottom = g;
                            v.each(e,
                            function(e) {
                                s(a, u, l, d, c, h, e);
                                var t = a.node(e),
                                n = t.borderTop ? t.borderTop: e,
                                r = t.borderBottom ? t.borderBottom: e,
                                i = t.borderTop ? d: 2 * d,
                                o = n !== r ? 1 : c - h[f] + 1;
                                a.setEdge(p, n, {
                                    weight: i,
                                    minlen: o,
                                    nestingEdge: !0
                                }),
                                a.setEdge(r, g, {
                                    weight: i,
                                    minlen: o,
                                    nestingEdge: !0
                                })
                            });
                            a.parent(f) || a.setEdge(u, p, {
                                weight: 0,
                                minlen: c + h[f]
                            })
                        } (t, n, o, u, i, r, e)
                    }),
                    t.graph().nodeRankFactor = o
                },
                cleanup: function(n) {
                    var e = n.graph();
                    n.removeNode(e.nestingRoot),
                    delete e.nestingRoot,
                    v.each(n.edges(),
                    function(e) {
                        var t = n.edge(e);
                        t.nestingEdge && n.removeEdge(e)
                    })
                }
            }
        },
        {
            "./lodash": 10,
            "./util": 29
        }],
        12 : [function(e, t, n) {
            "use strict";
            var r = e("./lodash"),
            h = e("./util");
            t.exports = {
                run: function(t) {
                    t.graph().dummyChains = [],
                    r.each(t.edges(),
                    function(e) { !
                        function(e, t) {
                            var n, r, i, o = t.v,
                            s = e.node(o).rank,
                            a = t.w,
                            u = e.node(a).rank,
                            l = t.name,
                            d = e.edge(t),
                            c = d.labelRank;
                            if (u === s + 1) return;
                            for (e.removeEdge(t), i = 0, ++s; s < u; ++i, ++s) d.points = [],
                            r = {
                                width: 0,
                                height: 0,
                                edgeLabel: d,
                                edgeObj: t,
                                rank: s
                            },
                            n = h.addDummyNode(e, "edge", r, "_d"),
                            s === c && (r.width = d.width, r.height = d.height, r.dummy = "edge-label", r.labelpos = d.labelpos),
                            e.setEdge(o, n, {
                                weight: d.weight
                            },
                            l),
                            0 === i && e.graph().dummyChains.push(n),
                            o = n;
                            e.setEdge(o, a, {
                                weight: d.weight
                            },
                            l)
                        } (t, e)
                    })
                },
                undo: function(i) {
                    r.each(i.graph().dummyChains,
                    function(e) {
                        var t, n = i.node(e),
                        r = n.edgeLabel;
                        for (i.setEdge(n.edgeObj, r); n.dummy;) t = i.successors(e)[0],
                        i.removeNode(e),
                        r.points.push({
                            x: n.x,
                            y: n.y
                        }),
                        "edge-label" === n.dummy && (r.x = n.x, r.y = n.y, r.width = n.width, r.height = n.height),
                        e = t,
                        n = i.node(e)
                    })
                }
            }
        },
        {
            "./lodash": 10,
            "./util": 29
        }],
        13 : [function(e, t, n) {
            var r = e("../lodash");
            t.exports = function(i, o, e) {
                var s, a = {};
                r.each(e,
                function(e) {
                    for (var t, n, r = i.parent(e); r;) {
                        if ((t = i.parent(r)) ? (n = a[t], a[t] = r) : (n = s, s = r), n && n !== r) return void o.setEdge(n, r);
                        r = t
                    }
                })
            }
        },
        {
            "../lodash": 10
        }],
        14 : [function(e, t, n) {
            var r = e("../lodash");
            t.exports = function(i, e) {
                return r.map(e,
                function(e) {
                    var t = i.inEdges(e);
                    if (t.length) {
                        var n = r.reduce(t,
                        function(e, t) {
                            var n = i.edge(t),
                            r = i.node(t.v);
                            return {
                                sum: e.sum + n.weight * r.order,
                                weight: e.weight + n.weight
                            }
                        },
                        {
                            sum: 0,
                            weight: 0
                        });
                        return {
                            v: e,
                            barycenter: n.sum / n.weight,
                            weight: n.weight
                        }
                    }
                    return {
                        v: e
                    }
                })
            }
        },
        {
            "../lodash": 10
        }],
        15 : [function(e, t, n) {
            var u = e("../lodash"),
            i = e("../graphlib").Graph;
            t.exports = function(o, n, r) {
                var s = function(e) {
                    var t;
                    for (; e.hasNode(t = u.uniqueId("_root")););
                    return t
                } (o),
                a = new i({
                    compound: !0
                }).setGraph({
                    root: s
                }).setDefaultNodeLabel(function(e) {
                    return o.node(e)
                });
                return u.each(o.nodes(),
                function(i) {
                    var e = o.node(i),
                    t = o.parent(i); (e.rank === n || e.minRank <= n && n <= e.maxRank) && (a.setNode(i), a.setParent(i, t || s), u.each(o[r](i),
                    function(e) {
                        var t = e.v === i ? e.w: e.v,
                        n = a.edge(t, i),
                        r = u.isUndefined(n) ? 0 : n.weight;
                        a.setEdge(t, i, {
                            weight: o.edge(e).weight + r
                        })
                    }), u.has(e, "minRank") && a.setNode(i, {
                        borderLeft: e.borderLeft[n],
                        borderRight: e.borderRight[n]
                    }))
                }),
                a
            }
        },
        {
            "../graphlib": 7,
            "../lodash": 10
        }],
        16 : [function(e, t, n) {
            "use strict";
            var l = e("../lodash");
            function i(t, e, n) {
                for (var r = l.zipObject(n, l.map(n,
                function(e, t) {
                    return t
                })), i = l.flatten(l.map(e,
                function(e) {
                    return l.chain(t.outEdges(e)).map(function(e) {
                        return {
                            pos: r[e.w],
                            weight: t.edge(e).weight
                        }
                    }).sortBy("pos").value()
                }), !0), o = 1; o < n.length;) o <<= 1;
                var s = 2 * o - 1;
                o -= 1;
                var a = l.map(new Array(s),
                function() {
                    return 0
                }),
                u = 0;
                return l.each(i.forEach(function(e) {
                    var t = e.pos + o;
                    a[t] += e.weight;
                    for (var n = 0; 0 < t;) t % 2 && (n += a[t + 1]),
                    a[t = t - 1 >> 1] += e.weight;
                    u += e.weight * n
                })),
                u
            }
            t.exports = function(e, t) {
                for (var n = 0,
                r = 1; r < t.length; ++r) n += i(e, t[r - 1], t[r]);
                return n
            }
        },
        {
            "../lodash": 10
        }],
        17 : [function(e, t, n) {
            "use strict";
            var d = e("../lodash"),
            c = e("./init-order"),
            h = e("./cross-count"),
            o = e("./sort-subgraph"),
            r = e("./build-layer-graph"),
            s = e("./add-subgraph-constraints"),
            a = e("../graphlib").Graph,
            f = e("../util");
            function p(t, e, n) {
                return d.map(e,
                function(e) {
                    return r(t, e, n)
                })
            }
            function g(e, r) {
                var i = new a;
                d.each(e,
                function(n) {
                    var e = n.graph().root,
                    t = o(n, e, i, r);
                    d.each(t.vs,
                    function(e, t) {
                        n.node(e).order = t
                    }),
                    s(n, i, t.vs)
                })
            }
            function v(n, e) {
                d.each(e,
                function(e) {
                    d.each(e,
                    function(e, t) {
                        n.node(e).order = t
                    })
                })
            }
            t.exports = function(e) {
                var t = f.maxRank(e),
                n = p(e, d.range(1, t + 1), "inEdges"),
                r = p(e, d.range(t - 1, -1, -1), "outEdges"),
                i = c(e);
                v(e, i);
                for (var o, s = Number.POSITIVE_INFINITY,
                a = 0,
                u = 0; u < 4; ++a, ++u) {
                    g(a % 2 ? n: r, 2 <= a % 4),
                    i = f.buildLayerMatrix(e);
                    var l = h(e, i);
                    l < s && (u = 0, o = d.cloneDeep(i), s = l)
                }
                v(e, o)
            }
        },
        {
            "../graphlib": 7,
            "../lodash": 10,
            "../util": 29,
            "./add-subgraph-constraints": 13,
            "./build-layer-graph": 15,
            "./cross-count": 16,
            "./init-order": 18,
            "./sort-subgraph": 20
        }],
        18 : [function(e, t, n) {
            "use strict";
            var s = e("../lodash");
            t.exports = function(r) {
                var i = {},
                e = s.filter(r.nodes(),
                function(e) {
                    return ! r.children(e).length
                }),
                t = s.max(s.map(e,
                function(e) {
                    return r.node(e).rank
                })),
                o = s.map(s.range(t + 1),
                function() {
                    return []
                });
                var n = s.sortBy(e,
                function(e) {
                    return r.node(e).rank
                });
                return s.each(n,
                function e(t) {
                    if (!s.has(i, t)) {
                        i[t] = !0;
                        var n = r.node(t);
                        o[n.rank].push(t),
                        s.each(r.successors(t), e)
                    }
                }),
                o
            }
        },
        {
            "../lodash": 10
        }],
        19 : [function(e, t, n) {
            "use strict";
            var s = e("../lodash");
            t.exports = function(e, t) {
                var r = {};
                return s.each(e,
                function(e, t) {
                    var n = r[e.v] = {
                        indegree: 0,
                        in:[],
                        out: [],
                        vs: [e.v],
                        i: t
                    };
                    s.isUndefined(e.barycenter) || (n.barycenter = e.barycenter, n.weight = e.weight)
                }),
                s.each(t.edges(),
                function(e) {
                    var t = r[e.v],
                    n = r[e.w];
                    s.isUndefined(t) || s.isUndefined(n) || (n.indegree++, t.out.push(r[e.w]))
                }),
                function(n) {
                    var e = [];
                    function t(o) {
                        return function(e) {
                            var t, n, r, i;
                            e.merged || (s.isUndefined(e.barycenter) || s.isUndefined(o.barycenter) || e.barycenter >= o.barycenter) && (n = e, i = r = 0, (t = o).weight && (r += t.barycenter * t.weight, i += t.weight), n.weight && (r += n.barycenter * n.weight, i += n.weight), t.vs = n.vs.concat(t.vs), t.barycenter = r / i, t.weight = i, t.i = Math.min(n.i, t.i), n.merged = !0)
                        }
                    }
                    function r(t) {
                        return function(e) {
                            e. in .push(t),
                            0 == --e.indegree && n.push(e)
                        }
                    }
                    for (; n.length;) {
                        var i = n.pop();
                        e.push(i),
                        s.each(i. in .reverse(), t(i)),
                        s.each(i.out, r(i))
                    }
                    return s.chain(e).filter(function(e) {
                        return ! e.merged
                    }).map(function(e) {
                        return s.pick(e, ["vs", "i", "barycenter", "weight"])
                    }).value()
                } (s.filter(r,
                function(e) {
                    return ! e.indegree
                }))
            }
        },
        {
            "../lodash": 10
        }],
        20 : [function(e, t, n) {
            var y = e("../lodash"),
            m = e("./barycenter"),
            _ = e("./resolve-conflicts"),
            b = e("./sort");
            t.exports = function i(o, e, s, a) {
                var t = o.children(e),
                n = o.node(e),
                r = n ? n.borderLeft: void 0,
                u = n ? n.borderRight: void 0,
                l = {};
                r && (t = y.filter(t,
                function(e) {
                    return e !== r && e !== u
                }));
                var d = m(o, t);
                y.each(d,
                function(e) {
                    if (o.children(e.v).length) {
                        var t = i(o, e.v, s, a);
                        l[e.v] = t,
                        y.has(t, "barycenter") && (n = e, r = t, y.isUndefined(n.barycenter) ? (n.barycenter = r.barycenter, n.weight = r.weight) : (n.barycenter = (n.barycenter * n.weight + r.barycenter * r.weight) / (n.weight + r.weight), n.weight += r.weight))
                    }
                    var n, r
                });
                var c = _(d, s);
                h = c,
                f = l,
                y.each(h,
                function(e) {
                    e.vs = y.flatten(e.vs.map(function(e) {
                        return f[e] ? f[e].vs: e
                    }), !0)
                });
                var h, f;
                var p = b(c, a);
                if (r && (p.vs = y.flatten([r, p.vs, u], !0), o.predecessors(r).length)) {
                    var g = o.node(o.predecessors(r)[0]),
                    v = o.node(o.predecessors(u)[0]);
                    y.has(p, "barycenter") || (p.barycenter = 0, p.weight = 0),
                    p.barycenter = (p.barycenter * p.weight + g.order + v.order) / (p.weight + 2),
                    p.weight += 2
                }
                return p
            }
        },
        {
            "../lodash": 10,
            "./barycenter": 14,
            "./resolve-conflicts": 19,
            "./sort": 21
        }],
        21 : [function(e, t, n) {
            var c = e("../lodash"),
            h = e("../util");
            function f(e, t, n) {
                for (var r; t.length && (r = c.last(t)).i <= n;) t.pop(),
                e.push(r.vs),
                n++;
                return n
            }
            t.exports = function(e, t) {
                var n = h.partition(e,
                function(e) {
                    return c.has(e, "barycenter")
                }),
                r = n.lhs,
                i = c.sortBy(n.rhs,
                function(e) {
                    return - e.i
                }),
                o = [],
                s = 0,
                a = 0,
                u = 0;
                r.sort((l = !!t,
                function(e, t) {
                    return e.barycenter < t.barycenter ? -1 : e.barycenter > t.barycenter ? 1 : l ? t.i - e.i: e.i - t.i
                })),
                u = f(o, i, u),
                c.each(r,
                function(e) {
                    u += e.vs.length,
                    o.push(e.vs),
                    s += e.barycenter * e.weight,
                    a += e.weight,
                    u = f(o, i, u)
                });
                var l;
                var d = {
                    vs: c.flatten(o, !0)
                };
                a && (d.barycenter = s / a, d.weight = a);
                return d
            }
        },
        {
            "../lodash": 10,
            "../util": 29
        }],
        22 : [function(e, t, n) {
            var s = e("./lodash");
            t.exports = function(l) {
                var d = (r = l, i = {},
                o = 0, s.each(r.children(),
                function e(t) {
                    var n = o;
                    s.each(r.children(t), e),
                    i[t] = {
                        low: n,
                        lim: o++
                    }
                }), i);
                var r, i, o;
                s.each(l.graph().dummyChains,
                function(e) {
                    for (var t = l.node(e), n = t.edgeObj, r = function(e, t, n, r) {
                        var i, o, s = [],
                        a = [],
                        u = Math.min(t[n].low, t[r].low),
                        l = Math.max(t[n].lim, t[r].lim);
                        i = n;
                        for (; i = e.parent(i), s.push(i), i && (t[i].low > u || l > t[i].lim););
                        o = i,
                        i = r;
                        for (; (i = e.parent(i)) !== o;) a.push(i);
                        return {
                            path: s.concat(a.reverse()),
                            lca: o
                        }
                    } (l, d, n.v, n.w), i = r.path, o = r.lca, s = 0, a = i[s], u = !0; e !== n.w;) {
                        if (t = l.node(e), u) {
                            for (; (a = i[s]) !== o && l.node(a).maxRank < t.rank;) s++;
                            a === o && (u = !1)
                        }
                        if (!u) {
                            for (; s < i.length - 1 && l.node(a = i[s + 1]).minRank <= t.rank;) s++;
                            a = i[s]
                        }
                        l.setParent(e, a),
                        e = l.successors(e)[0]
                    }
                })
            }
        },
        {
            "./lodash": 10
        }],
        23 : [function(e, t, n) {
            "use strict";
            var _ = e("../lodash"),
            b = e("../graphlib").Graph,
            r = e("../util");
            function i(l, e) {
                var d = {};
                return _.reduce(e,
                function(e, r) {
                    var o = 0,
                    s = 0,
                    a = e.length,
                    u = _.last(r);
                    return _.each(r,
                    function(e, t) {
                        var n = function(t, e) {
                            if (t.node(e).dummy) return _.find(t.predecessors(e),
                            function(e) {
                                return t.node(e).dummy
                            })
                        } (l, e),
                        i = n ? l.node(n).order: a; (n || e === u) && (_.each(r.slice(s, t + 1),
                        function(r) {
                            _.each(l.predecessors(r),
                            function(e) {
                                var t = l.node(e),
                                n = t.order; ! (n < o || i < n) || t.dummy && l.node(r).dummy || c(d, e, r)
                            })
                        }), s = t + 1, o = i)
                    }),
                    r
                }),
                d
            }
            function l(u, e) {
                var s = {};
                function l(t, e, n, r, i) {
                    var o;
                    _.each(_.range(e, n),
                    function(e) {
                        o = t[e],
                        u.node(o).dummy && _.each(u.predecessors(o),
                        function(e) {
                            var t = u.node(e);
                            t.dummy && (t.order < r || t.order > i) && c(s, e, o)
                        })
                    })
                }
                return _.reduce(e,
                function(r, i) {
                    var o, s = -1,
                    a = 0;
                    return _.each(i,
                    function(e, t) {
                        if ("border" === u.node(e).dummy) {
                            var n = u.predecessors(e);
                            n.length && (o = u.node(n[0]).order, l(i, a, t, s, o), a = t, s = o)
                        }
                        l(i, a, i.length, o, r.length)
                    }),
                    i
                }),
                s
            }
            function c(e, t, n) {
                if (n < t) {
                    var r = t;
                    t = n,
                    n = r
                }
                var i = e[t];
                i || (e[t] = i = {}),
                i[n] = !0
            }
            function h(e, t, n) {
                if (n < t) {
                    var r = t;
                    t = n,
                    n = r
                }
                return _.has(e[t], n)
            }
            function d(e, t, a, u) {
                var l = {},
                d = {},
                c = {};
                return _.each(t,
                function(e) {
                    _.each(e,
                    function(e, t) {
                        l[e] = e,
                        d[e] = e,
                        c[e] = t
                    })
                }),
                _.each(t,
                function(e) {
                    var s = -1;
                    _.each(e,
                    function(e) {
                        var t = u(e);
                        if (t.length) for (var n = ((t = _.sortBy(t,
                        function(e) {
                            return c[e]
                        })).length - 1) / 2, r = Math.floor(n), i = Math.ceil(n); r <= i; ++r) {
                            var o = t[r];
                            d[e] === e && s < c[o] && !h(a, e, o) && (d[o] = e, d[e] = l[e] = l[o], s = c[o])
                        }
                    })
                }),
                {
                    root: l,
                    align: d
                }
            }
            function f(i, e, t, n, r) {
                var o, s, a, u, l, d, c, h, f, p, g = {},
                v = (o = i, s = e, a = t, u = r, l = new b, d = o.graph(), h = d.nodesep, f = d.edgesep, p = u, c = function(e, t, n) {
                    var r, i = e.node(t),
                    o = e.node(n),
                    s = 0;
                    if (s += i.width / 2, _.has(i, "labelpos")) switch (i.labelpos.toLowerCase()) {
                    case "l":
                        r = -i.width / 2;
                        break;
                    case "r":
                        r = i.width / 2
                    }
                    if (r && (s += p ? r: -r), r = 0, s += (i.dummy ? f: h) / 2, s += (o.dummy ? f: h) / 2, s += o.width / 2, _.has(o, "labelpos")) switch (o.labelpos.toLowerCase()) {
                    case "l":
                        r = o.width / 2;
                        break;
                    case "r":
                        r = -o.width / 2
                    }
                    return r && (s += p ? r: -r),
                    r = 0,
                    s
                },
                _.each(s,
                function(e) {
                    var i;
                    _.each(e,
                    function(e) {
                        var t = a[e];
                        if (l.setNode(t), i) {
                            var n = a[i],
                            r = l.edge(n, t);
                            l.setEdge(n, t, Math.max(c(o, e, i), r || 0))
                        }
                        i = e
                    })
                }), l),
                y = {};
                _.each(v.nodes(),
                function n(e) {
                    _.has(y, e) || (y[e] = !0, g[e] = _.reduce(v.inEdges(e),
                    function(e, t) {
                        return n(t.v),
                        Math.max(e, g[t.v] + v.edge(t))
                    },
                    0))
                });
                var m = r ? "borderLeft": "borderRight";
                return _.each(v.nodes(),
                function n(e) {
                    if (2 !== y[e]) {
                        y[e]++;
                        var t = i.node(e),
                        r = _.reduce(v.outEdges(e),
                        function(e, t) {
                            return n(t.w),
                            Math.min(e, g[t.w] - v.edge(t))
                        },
                        Number.POSITIVE_INFINITY);
                        r !== Number.POSITIVE_INFINITY && t.borderType !== m && (g[e] = Math.max(g[e], r))
                    }
                }),
                _.each(n,
                function(e) {
                    g[e] = g[t[e]]
                }),
                g
            }
            function p(n, e) {
                return _.min(e,
                function(e) {
                    var t = _.min(e,
                    function(e, t) {
                        return e - o(n, t) / 2
                    });
                    return _.max(e,
                    function(e, t) {
                        return e + o(n, t) / 2
                    }) - t
                })
            }
            function g(o, s) {
                var a = _.min(s),
                u = _.max(s);
                _.each(["u", "d"],
                function(i) {
                    _.each(["l", "r"],
                    function(e) {
                        var t, n = i + e,
                        r = o[n];
                        r !== s && (t = "l" === e ? a - _.min(r) : u - _.max(r)) && (o[n] = _.mapValues(r,
                        function(e) {
                            return e + t
                        }))
                    })
                })
            }
            function v(r, i) {
                return _.mapValues(r.ul,
                function(e, t) {
                    if (i) return r[i.toLowerCase()][t];
                    var n = _.sortBy(_.pluck(r, t));
                    return (n[1] + n[2]) / 2
                })
            }
            function o(e, t) {
                return e.node(t).width
            }
            t.exports = {
                positionX: function(o) {
                    var s, e = r.buildLayerMatrix(o),
                    a = _.merge(i(o, e), l(o, e)),
                    u = {};
                    _.each(["u", "d"],
                    function(i) {
                        s = "u" === i ? e: _.values(e).reverse(),
                        _.each(["l", "r"],
                        function(e) {
                            "r" === e && (s = _.map(s,
                            function(e) {
                                return _.values(e).reverse()
                            }));
                            var t = _.bind("u" === i ? o.predecessors: o.successors, o),
                            n = d(o, s, a, t),
                            r = f(o, s, n.root, n.align, "r" === e);
                            "r" === e && (r = _.mapValues(r,
                            function(e) {
                                return - e
                            })),
                            u[i + e] = r
                        })
                    });
                    var t = p(o, u);
                    return g(u, t),
                    v(u, o.graph().align)
                },
                findType1Conflicts: i,
                findType2Conflicts: l,
                addConflict: c,
                hasConflict: h,
                verticalAlignment: d,
                horizontalCompaction: f,
                alignCoordinates: g,
                findSmallestWidthAlignment: p,
                balance: v
            }
        },
        {
            "../graphlib": 7,
            "../lodash": 10,
            "../util": 29
        }],
        24 : [function(e, t, n) {
            "use strict";
            var s = e("../lodash"),
            a = e("../util"),
            u = e("./bk").positionX;
            t.exports = function(n) {
                r = n = a.asNonCompoundGraph(n),
                e = a.buildLayerMatrix(r),
                i = r.graph().ranksep,
                o = 0,
                s.each(e,
                function(e) {
                    var t = s.max(s.map(e,
                    function(e) {
                        return r.node(e).height
                    }));
                    s.each(e,
                    function(e) {
                        r.node(e).y = o + t / 2
                    }),
                    o += t + i
                }),
                s.each(u(n),
                function(e, t) {
                    n.node(t).x = e
                });
                var r, e, i, o
            }
        }, {
            "../lodash": 10,
            "../util": 29,
            "./bk": 23
        }],
        25 : [function(e, t, n) {
            "use strict";
            var a = e("../lodash"),
            s = e("../graphlib").Graph,
            u = e("./util").slack;
            function l(o, s) {
                return a.each(o.nodes(),
                function r(i) {
                    a.each(s.nodeEdges(i),
                    function(e) {
                        var t = e.v,
                        n = i === t ? e.w: t;
                        o.hasNode(n) || u(s, e) || (o.setNode(n, {}), o.setEdge(i, n, {}), r(n))
                    })
                }),
                o.nodeCount()
            }
            function d(t, n) {
                return a.min(n.edges(),
                function(e) {
                    if (t.hasNode(e.v) !== t.hasNode(e.w)) return u(n, e)
                })
            }
            function c(e, t, n) {
                a.each(e.nodes(),
                function(e) {
                    t.node(e).rank += n
                })
            }
            t.exports = function(e) {
                var t, n, r = new s({
                    directed: !1
                }),
                i = e.nodes()[0],
                o = e.nodeCount();
                r.setNode(i, {});
                for (; l(r, e) < o;) t = d(r, e),
                n = r.hasNode(t.v) ? u(e, t) : -u(e, t),
                c(r, e, n);
                return r
            }
        },
        {
            "../graphlib": 7,
            "../lodash": 10,
            "./util": 28
        }],
        26 : [function(e, t, n) {
            "use strict";
            var r = e("./util").longestPath,
            i = e("./feasible-tree"),
            o = e("./network-simplex");
            t.exports = function(e) {
                switch (e.graph().ranker) {
                case "network-simplex":
                    a(e);
                    break;
                case "tight-tree":
                    r(t = e),
                    i(t);
                    break;
                case "longest-path":
                    s(e);
                    break;
                default:
                    a(e)
                }
                var t
            };
            var s = r;
            function a(e) {
                o(e)
            }
        },
        {
            "./feasible-tree": 25,
            "./network-simplex": 27,
            "./util": 28
        }],
        27 : [function(e, t, n) {
            "use strict";
            var p = e("../lodash"),
            r = e("./feasible-tree"),
            d = e("./util").slack,
            i = e("./util").longestPath,
            c = e("../graphlib").alg.preorder,
            a = e("../graphlib").alg.postorder,
            o = e("../util").simplify;
            function s(e) {
                e = o(e),
                i(e);
                var t, n = r(e);
                for (f(n), h(n, e); t = l(n);) v(n, e, t, g(n, e, t))
            }
            function h(o, s) {
                var e = a(o, o.nodes());
                e = e.slice(0, e.length - 1),
                p.each(e,
                function(e) {
                    var t, n, r, i;
                    n = s,
                    r = e,
                    i = (t = o).node(r).parent,
                    t.edge(r, i).cutvalue = u(t, n, r)
                })
            }
            function u(u, l, d) {
                var c = u.node(d).parent,
                h = !0,
                e = l.edge(d, c),
                f = 0;
                return e || (h = !1, e = l.edge(c, d)),
                f = e.weight,
                p.each(l.nodeEdges(d),
                function(e) {
                    var t, n, r = e.v === d,
                    i = r ? e.w: e.v;
                    if (i !== c) {
                        var o = r === h,
                        s = l.edge(e).weight;
                        if (f += o ? s: -s, t = d, n = i, u.hasEdge(t, n)) {
                            var a = u.edge(d, i).cutvalue;
                            f += o ? -a: a
                        }
                    }
                }),
                f
            }
            function f(e, t) {
                arguments.length < 2 && (t = e.nodes()[0]),
                function t(n, r, i, o, e) {
                    var s = i,
                    a = n.node(o);
                    r[o] = !0;
                    p.each(n.neighbors(o),
                    function(e) {
                        p.has(r, e) || (i = t(n, r, i, e, o))
                    });
                    a.low = s;
                    a.lim = i++;
                    e ? a.parent = e: delete a.parent;
                    return i
                } (e, {},
                1, t)
            }
            function l(t) {
                return p.find(t.edges(),
                function(e) {
                    return t.edge(e).cutvalue < 0
                })
            }
            function g(t, n, e) {
                var r = e.v,
                i = e.w;
                n.hasEdge(r, i) || (r = e.w, i = e.v);
                var o = t.node(r),
                s = t.node(i),
                a = o,
                u = !1;
                o.lim > s.lim && (a = s, u = !0);
                var l = p.filter(n.edges(),
                function(e) {
                    return u === y(t, t.node(e.v), a) && u !== y(t, t.node(e.w), a)
                });
                return p.min(l,
                function(e) {
                    return d(n, e)
                })
            }
            function v(e, t, n, r) {
                var i, o, s, a, u = n.v,
                l = n.w;
                e.removeEdge(u, l),
                e.setEdge(r.v, r.w, {}),
                f(e),
                h(e, t),
                i = e,
                o = t,
                s = p.find(i.nodes(),
                function(e) {
                    return ! o.node(e).parent
                }),
                a = (a = c(i, s)).slice(1),
                p.each(a,
                function(e) {
                    var t = i.node(e).parent,
                    n = o.edge(e, t),
                    r = !1;
                    n || (n = o.edge(t, e), r = !0),
                    o.node(e).rank = o.node(t).rank + (r ? n.minlen: -n.minlen)
                })
            }
            function y(e, t, n) {
                return n.low <= t.lim && t.lim <= n.lim
            } (t.exports = s).initLowLimValues = f,
            s.initCutValues = h,
            s.calcCutValue = u,
            s.leaveEdge = l,
            s.enterEdge = g,
            s.exchangeEdges = v
        },
        {
            "../graphlib": 7,
            "../lodash": 10,
            "../util": 29,
            "./feasible-tree": 25,
            "./util": 28
        }],
        28 : [function(e, t, n) {
            "use strict";
            var s = e("../lodash");
            t.exports = {
                longestPath: function(i) {
                    var o = {};
                    s.each(i.sources(),
                    function t(e) {
                        var n = i.node(e);
                        if (s.has(o, e)) return n.rank;
                        o[e] = !0;
                        var r = s.min(s.map(i.outEdges(e),
                        function(e) {
                            return t(e.w) - i.edge(e).minlen
                        }));
                        r === Number.POSITIVE_INFINITY && (r = 0);
                        return n.rank = r
                    })
                },
                slack: function(e, t) {
                    return e.node(t.w).rank - e.node(t.v).rank - e.edge(t).minlen
                }
            }
        },
        {
            "../lodash": 10
        }],
        29 : [function(e, t, n) {
            "use strict";
            var a = e("./lodash"),
            o = e("./graphlib").Graph;
            function s(e, t, n, r) {
                for (var i; i = a.uniqueId(r), e.hasNode(i););
                return n.dummy = t,
                e.setNode(i, n),
                i
            }
            function u(n) {
                return a.max(a.map(n.nodes(),
                function(e) {
                    var t = n.node(e).rank;
                    if (!a.isUndefined(t)) return t
                }))
            }
            t.exports = {
                addDummyNode: s,
                simplify: function(r) {
                    var i = (new o).setGraph(r.graph());
                    return a.each(r.nodes(),
                    function(e) {
                        i.setNode(e, r.node(e))
                    }),
                    a.each(r.edges(),
                    function(e) {
                        var t = i.edge(e.v, e.w) || {
                            weight: 0,
                            minlen: 1
                        },
                        n = r.edge(e);
                        i.setEdge(e.v, e.w, {
                            weight: t.weight + n.weight,
                            minlen: Math.max(t.minlen, n.minlen)
                        })
                    }),
                    i
                },
                asNonCompoundGraph: function(t) {
                    var n = new o({
                        multigraph: t.isMultigraph()
                    }).setGraph(t.graph());
                    return a.each(t.nodes(),
                    function(e) {
                        t.children(e).length || n.setNode(e, t.node(e))
                    }),
                    a.each(t.edges(),
                    function(e) {
                        n.setEdge(e, t.edge(e))
                    }),
                    n
                },
                successorWeights: function(n) {
                    var e = a.map(n.nodes(),
                    function(e) {
                        var t = {};
                        return a.each(n.outEdges(e),
                        function(e) {
                            t[e.w] = (t[e.w] || 0) + n.edge(e).weight
                        }),
                        t
                    });
                    return a.zipObject(n.nodes(), e)
                },
                predecessorWeights: function(n) {
                    var e = a.map(n.nodes(),
                    function(e) {
                        var t = {};
                        return a.each(n.inEdges(e),
                        function(e) {
                            t[e.v] = (t[e.v] || 0) + n.edge(e).weight
                        }),
                        t
                    });
                    return a.zipObject(n.nodes(), e)
                },
                intersectRect: function(e, t) {
                    var n, r, i = e.x,
                    o = e.y,
                    s = t.x - i,
                    a = t.y - o,
                    u = e.width / 2,
                    l = e.height / 2;
                    if (!s && !a) throw new Error("Not possible to find intersection inside of the rectangle");
                    Math.abs(a) * u > Math.abs(s) * l ? (a < 0 && (l = -l), n = l * s / a, r = l) : (s < 0 && (u = -u), r = (n = u) * a / s);
                    return {
                        x: i + n,
                        y: o + r
                    }
                },
                buildLayerMatrix: function(r) {
                    var i = a.map(a.range(u(r) + 1),
                    function() {
                        return []
                    });
                    return a.each(r.nodes(),
                    function(e) {
                        var t = r.node(e),
                        n = t.rank;
                        a.isUndefined(n) || (i[n][t.order] = e)
                    }),
                    i
                },
                normalizeRanks: function(n) {
                    var r = a.min(a.map(n.nodes(),
                    function(e) {
                        return n.node(e).rank
                    }));
                    a.each(n.nodes(),
                    function(e) {
                        var t = n.node(e);
                        a.has(t, "rank") && (t.rank -= r)
                    })
                },
                removeEmptyRanks: function(n) {
                    var r = a.min(a.map(n.nodes(),
                    function(e) {
                        return n.node(e).rank
                    })),
                    i = [];
                    a.each(n.nodes(),
                    function(e) {
                        var t = n.node(e).rank - r;
                        a.has(i, t) || (i[t] = []),
                        i[t].push(e)
                    });
                    var o = 0,
                    s = n.graph().nodeRankFactor;
                    a.each(i,
                    function(e, t) {
                        a.isUndefined(e) && t % s != 0 ? --o: o && a.each(e,
                        function(e) {
                            n.node(e).rank += o
                        })
                    })
                },
                addBorderNode: function(e, t, n, r) {
                    var i = {
                        width: 0,
                        height: 0
                    };
                    4 <= arguments.length && (i.rank = n, i.order = r);
                    return s(e, "border", i, t)
                },
                maxRank: u,
                partition: function(e, t) {
                    var n = {
                        lhs: [],
                        rhs: []
                    };
                    return a.each(e,
                    function(e) {
                        t(e) ? n.lhs.push(e) : n.rhs.push(e)
                    }),
                    n
                },
                time: function(e, t) {
                    var n = a.now();
                    try {
                        return t()
                    } finally {
                        console.log(e + " time: " + (a.now() - n) + "ms")
                    }
                },
                notime: function(e, t) {
                    return t()
                }
            }
        },
        {
            "./graphlib": 7,
            "./lodash": 10
        }],
        30 : [function(e, t, n) {
            t.exports = "0.7.2"
        },
        {}],
        31 : [function(e, t, n) {
            var r = e("./lib");
            t.exports = {
                Graph: r.Graph,
                json: e("./lib/json"),
                alg: e("./lib/alg"),
                version: r.version
            }
        },
        {
            "./lib": 47,
            "./lib/alg": 38,
            "./lib/json": 48
        }],
        32 : [function(e, t, n) {
            var s = e("../lodash");
            t.exports = function(t) {
                var n, r = {},
                i = [];
                function o(e) {
                    s.has(r, e) || (r[e] = !0, n.push(e), s.each(t.successors(e), o), s.each(t.predecessors(e), o))
                }
                return s.each(t.nodes(),
                function(e) {
                    n = [],
                    o(e),
                    n.length && i.push(n)
                }),
                i
            }
        },
        {
            "../lodash": 49
        }],
        33 : [function(e, t, n) {
            var s = e("../lodash");
            t.exports = function(t, e, n) {
                s.isArray(e) || (e = [e]);
                var r = [],
                i = {};
                return s.each(e,
                function(e) {
                    if (!t.hasNode(e)) throw new Error("Graph does not have node: " + e); !
                    function t(n, e, r, i, o) {
                        s.has(i, e) || (i[e] = !0, r || o.push(e), s.each(n.neighbors(e),
                        function(e) {
                            t(n, e, r, i, o)
                        }), r && o.push(e))
                    } (t, e, "post" === n, i, r)
                }),
                r
            }
        },
        {
            "../lodash": 49
        }],
        34 : [function(e, t, n) {
            var o = e("./dijkstra"),
            s = e("../lodash");
            t.exports = function(n, r, i) {
                return s.transform(n.nodes(),
                function(e, t) {
                    e[t] = o(n, t, r, i)
                },
                {})
            }
        },
        {
            "../lodash": 49,
            "./dijkstra": 35
        }],
        35 : [function(e, t, n) {
            var r = e("../lodash"),
            i = e("../data/priority-queue");
            t.exports = function(t, e, n, r) {
                return function(e, n, o, t) {
                    var s, a, u = {},
                    l = new i,
                    r = function(e) {
                        var t = e.v !== s ? e.v: e.w,
                        n = u[t],
                        r = o(e),
                        i = a.distance + r;
                        if (r < 0) throw new Error("dijkstra does not allow negative edge weights. Bad edge: " + e + " Weight: " + r);
                        i < n.distance && (n.distance = i, n.predecessor = s, l.decrease(t, i))
                    };
                    e.nodes().forEach(function(e) {
                        var t = e === n ? 0 : Number.POSITIVE_INFINITY;
                        u[e] = {
                            distance: t
                        },
                        l.add(e, t)
                    });
                    for (; 0 < l.size() && (s = l.removeMin(), (a = u[s]).distance !== Number.POSITIVE_INFINITY);) t(s).forEach(r);
                    return u
                } (t, String(e), n || o, r ||
                function(e) {
                    return t.outEdges(e)
                })
            };
            var o = r.constant(1)
        },
        {
            "../data/priority-queue": 45,
            "../lodash": 49
        }],
        36 : [function(e, t, n) {
            var r = e("../lodash"),
            i = e("./tarjan");
            t.exports = function(e) {
                return r.filter(i(e),
                function(e) {
                    return 1 < e.length
                })
            }
        },
        {
            "../lodash": 49,
            "./tarjan": 43
        }],
        37 : [function(e, t, n) {
            var r = e("../lodash");
            t.exports = function(t, e, n) {
                return r = t,
                i = e || s,
                o = n ||
                function(e) {
                    return t.outEdges(e)
                },
                u = {},
                l = r.nodes(),
                l.forEach(function(r) {
                    u[r] = {},
                    u[r][r] = {
                        distance: 0
                    },
                    l.forEach(function(e) {
                        r !== e && (u[r][e] = {
                            distance: Number.POSITIVE_INFINITY
                        })
                    }),
                    o(r).forEach(function(e) {
                        var t = e.v === r ? e.w: e.v,
                        n = i(e);
                        u[r][t] = {
                            distance: n,
                            predecessor: r
                        }
                    })
                }),
                l.forEach(function(s) {
                    var a = u[s];
                    l.forEach(function(e) {
                        var o = u[e];
                        l.forEach(function(e) {
                            var t = o[s],
                            n = a[e],
                            r = o[e],
                            i = t.distance + n.distance;
                            i < r.distance && (r.distance = i, r.predecessor = n.predecessor)
                        })
                    })
                }),
                u;
                var r, i, o, u, l
            };
            var s = r.constant(1)
        },
        {
            "../lodash": 49
        }],
        38 : [function(e, t, n) {
            t.exports = {
                components: e("./components"),
                dijkstra: e("./dijkstra"),
                dijkstraAll: e("./dijkstra-all"),
                findCycles: e("./find-cycles"),
                floydWarshall: e("./floyd-warshall"),
                isAcyclic: e("./is-acyclic"),
                postorder: e("./postorder"),
                preorder: e("./preorder"),
                prim: e("./prim"),
                tarjan: e("./tarjan"),
                topsort: e("./topsort")
            }
        },
        {
            "./components": 32,
            "./dijkstra": 35,
            "./dijkstra-all": 34,
            "./find-cycles": 36,
            "./floyd-warshall": 37,
            "./is-acyclic": 39,
            "./postorder": 40,
            "./preorder": 41,
            "./prim": 42,
            "./tarjan": 43,
            "./topsort": 44
        }],
        39 : [function(e, t, n) {
            var r = e("./topsort");
            t.exports = function(e) {
                try {
                    r(e)
                } catch(e) {
                    if (e instanceof r.CycleException) return ! 1;
                    throw e
                }
                return ! 0
            }
        },
        {
            "./topsort": 44
        }],
        40 : [function(e, t, n) {
            var r = e("./dfs");
            t.exports = function(e, t) {
                return r(e, t, "post")
            }
        },
        {
            "./dfs": 33
        }],
        41 : [function(e, t, n) {
            var r = e("./dfs");
            t.exports = function(e, t) {
                return r(e, t, "pre")
            }
        },
        {
            "./dfs": 33
        }],
        42 : [function(e, t, n) {
            var u = e("../lodash"),
            l = e("../graph"),
            d = e("../data/priority-queue");
            t.exports = function(e, i) {
                var o, t = new l,
                s = {},
                a = new d;
                function n(e) {
                    var t = e.v === o ? e.w: e.v,
                    n = a.priority(t);
                    if (void 0 !== n) {
                        var r = i(e);
                        r < n && (s[t] = o, a.decrease(t, r))
                    }
                }
                if (0 === e.nodeCount()) return t;
                u.each(e.nodes(),
                function(e) {
                    a.add(e, Number.POSITIVE_INFINITY),
                    t.setNode(e)
                }),
                a.decrease(e.nodes()[0], 0);
                var r = !1;
                for (; 0 < a.size();) {
                    if (o = a.removeMin(), u.has(s, o)) t.setEdge(o, s[o]);
                    else {
                        if (r) throw new Error("Input graph is not connected: " + e);
                        r = !0
                    }
                    e.nodeEdges(o).forEach(n)
                }
                return t
            }
        },
        {
            "../data/priority-queue": 45,
            "../graph": 46,
            "../lodash": 49
        }],
        43 : [function(e, t, n) {
            var d = e("../lodash");
            t.exports = function(o) {
                var s = 0,
                a = [],
                u = {},
                l = [];
                return o.nodes().forEach(function(e) {
                    d.has(u, e) ||
                    function t(e) {
                        var n = u[e] = {
                            onStack: !0,
                            lowlink: s,
                            index: s++
                        };
                        if (a.push(e), o.successors(e).forEach(function(e) {
                            d.has(u, e) ? u[e].onStack && (n.lowlink = Math.min(n.lowlink, u[e].index)) : (t(e), n.lowlink = Math.min(n.lowlink, u[e].lowlink))
                        }), n.lowlink === n.index) {
                            for (var r, i = []; r = a.pop(), u[r].onStack = !1, i.push(r), e !== r;);
                            l.push(i)
                        }
                    } (e)
                }),
                l
            }
        },
        {
            "../lodash": 49
        }],
        44 : [function(e, t, n) {
            var s = e("../lodash");
            function r(n) {
                var r = {},
                i = {},
                o = [];
                if (s.each(n.sinks(),
                function e(t) {
                    if (s.has(i, t)) throw new a;
                    s.has(r, t) || (i[t] = !0, r[t] = !0, s.each(n.predecessors(t), e), delete i[t], o.push(t))
                }), s.size(r) !== n.nodeCount()) throw new a;
                return o
            }
            function a() {} (t.exports = r).CycleException = a
        },
        {
            "../lodash": 49
        }],
        45 : [function(e, t, n) {
            var o = e("../lodash");
            function r() {
                this._arr = [],
                this._keyIndices = {}
            } (t.exports = r).prototype.size = function() {
                return this._arr.length
            },
            r.prototype.keys = function() {
                return this._arr.map(function(e) {
                    return e.key
                })
            },
            r.prototype.has = function(e) {
                return o.has(this._keyIndices, e)
            },
            r.prototype.priority = function(e) {
                var t = this._keyIndices[e];
                if (void 0 !== t) return this._arr[t].priority
            },
            r.prototype.min = function() {
                if (0 === this.size()) throw new Error("Queue underflow");
                return this._arr[0].key
            },
            r.prototype.add = function(e, t) {
                var n = this._keyIndices;
                if (e = String(e), !o.has(n, e)) {
                    var r = this._arr,
                    i = r.length;
                    return n[e] = i,
                    r.push({
                        key: e,
                        priority: t
                    }),
                    this._decrease(i),
                    !0
                }
                return ! 1
            },
            r.prototype.removeMin = function() {
                this._swap(0, this._arr.length - 1);
                var e = this._arr.pop();
                return delete this._keyIndices[e.key],
                this._heapify(0),
                e.key
            },
            r.prototype.decrease = function(e, t) {
                var n = this._keyIndices[e];
                if (t > this._arr[n].priority) throw new Error("New priority is greater than current priority. Key: " + e + " Old: " + this._arr[n].priority + " New: " + t);
                this._arr[n].priority = t,
                this._decrease(n)
            },
            r.prototype._heapify = function(e) {
                var t = this._arr,
                n = 2 * e,
                r = n + 1,
                i = e;
                n < t.length && (i = t[n].priority < t[i].priority ? n: i, r < t.length && (i = t[r].priority < t[i].priority ? r: i), i !== e && (this._swap(e, i), this._heapify(i)))
            },
            r.prototype._decrease = function(e) {
                for (var t, n = this._arr,
                r = n[e].priority; 0 !== e && !(n[t = e >> 1].priority < r);) this._swap(e, t),
                e = t
            },
            r.prototype._swap = function(e, t) {
                var n = this._arr,
                r = this._keyIndices,
                i = n[e],
                o = n[t];
                n[e] = o,
                n[t] = i,
                r[o.key] = e,
                r[i.key] = t
            }
        },
        {
            "../lodash": 49
        }],
        46 : [function(e, t, n) {
            "use strict";
            var a = e("./lodash");
            t.exports = i;
            var o = "\0",
            r = "\0",
            s = "";
            function i(e) {
                this._isDirected = !a.has(e, "directed") || e.directed,
                this._isMultigraph = !!a.has(e, "multigraph") && e.multigraph,
                this._isCompound = !!a.has(e, "compound") && e.compound,
                this._label = void 0,
                this._defaultNodeLabelFn = a.constant(void 0),
                this._defaultEdgeLabelFn = a.constant(void 0),
                this._nodes = {},
                this._isCompound && (this._parent = {},
                this._children = {},
                this._children[r] = {}),
                this._in = {},
                this._preds = {},
                this._out = {},
                this._sucs = {},
                this._edgeObjs = {},
                this._edgeLabels = {}
            }
            function u(e, t) {
                a.has(e, t) ? e[t]++:e[t] = 1
            }
            function l(e, t) {--e[t] || delete e[t]
            }
            function d(e, t, n, r) {
                if (!e && n < t) {
                    var i = t;
                    t = n,
                    n = i
                }
                return t + s + n + s + (a.isUndefined(r) ? o: r)
            }
            function c(e, t) {
                return d(e, t.v, t.w, t.name)
            }
            i.prototype._nodeCount = 0,
            i.prototype._edgeCount = 0,
            i.prototype.isDirected = function() {
                return this._isDirected
            },
            i.prototype.isMultigraph = function() {
                return this._isMultigraph
            },
            i.prototype.isCompound = function() {
                return this._isCompound
            },
            i.prototype.setGraph = function(e) {
                return this._label = e,
                this
            },
            i.prototype.graph = function() {
                return this._label
            },
            i.prototype.setDefaultNodeLabel = function(e) {
                return a.isFunction(e) || (e = a.constant(e)),
                this._defaultNodeLabelFn = e,
                this
            },
            i.prototype.nodeCount = function() {
                return this._nodeCount
            },
            i.prototype.nodes = function() {
                return a.keys(this._nodes)
            },
            i.prototype.sources = function() {
                return a.filter(this.nodes(),
                function(e) {
                    return a.isEmpty(this._in[e])
                },
                this)
            },
            i.prototype.sinks = function() {
                return a.filter(this.nodes(),
                function(e) {
                    return a.isEmpty(this._out[e])
                },
                this)
            },
            i.prototype.setNodes = function(e, t) {
                var n = arguments;
                return a.each(e,
                function(e) {
                    1 < n.length ? this.setNode(e, t) : this.setNode(e)
                },
                this),
                this
            },
            i.prototype.setNode = function(e, t) {
                return a.has(this._nodes, e) ? 1 < arguments.length && (this._nodes[e] = t) : (this._nodes[e] = 1 < arguments.length ? t: this._defaultNodeLabelFn(e), this._isCompound && (this._parent[e] = r, this._children[e] = {},
                this._children[r][e] = !0), this._in[e] = {},
                this._preds[e] = {},
                this._out[e] = {},
                this._sucs[e] = {},
                ++this._nodeCount),
                this
            },
            i.prototype.node = function(e) {
                return this._nodes[e]
            },
            i.prototype.hasNode = function(e) {
                return a.has(this._nodes, e)
            },
            i.prototype.removeNode = function(e) {
                var t = this;
                if (a.has(this._nodes, e)) {
                    var n = function(e) {
                        t.removeEdge(t._edgeObjs[e])
                    };
                    delete this._nodes[e],
                    this._isCompound && (this._removeFromParentsChildList(e), delete this._parent[e], a.each(this.children(e),
                    function(e) {
                        this.setParent(e)
                    },
                    this), delete this._children[e]),
                    a.each(a.keys(this._in[e]), n),
                    delete this._in[e],
                    delete this._preds[e],
                    a.each(a.keys(this._out[e]), n),
                    delete this._out[e],
                    delete this._sucs[e],
                    --this._nodeCount
                }
                return this
            },
            i.prototype.setParent = function(e, t) {
                if (!this._isCompound) throw new Error("Cannot set parent in a non-compound graph");
                if (a.isUndefined(t)) t = r;
                else {
                    for (var n = t += ""; ! a.isUndefined(n); n = this.parent(n)) if (n === e) throw new Error("Setting " + t + " as parent of " + e + " would create create a cycle");
                    this.setNode(t)
                }
                return this.setNode(e),
                this._removeFromParentsChildList(e),
                this._parent[e] = t,
                this._children[t][e] = !0,
                this
            },
            i.prototype._removeFromParentsChildList = function(e) {
                delete this._children[this._parent[e]][e]
            },
            i.prototype.parent = function(e) {
                if (this._isCompound) {
                    var t = this._parent[e];
                    if (t !== r) return t
                }
            },
            i.prototype.children = function(e) {
                if (a.isUndefined(e) && (e = r), this._isCompound) {
                    var t = this._children[e];
                    if (t) return a.keys(t)
                } else {
                    if (e === r) return this.nodes();
                    if (this.hasNode(e)) return []
                }
            },
            i.prototype.predecessors = function(e) {
                var t = this._preds[e];
                if (t) return a.keys(t)
            },
            i.prototype.successors = function(e) {
                var t = this._sucs[e];
                if (t) return a.keys(t)
            },
            i.prototype.neighbors = function(e) {
                var t = this.predecessors(e);
                if (t) return a.union(t, this.successors(e))
            },
            i.prototype.setDefaultEdgeLabel = function(e) {
                return a.isFunction(e) || (e = a.constant(e)),
                this._defaultEdgeLabelFn = e,
                this
            },
            i.prototype.edgeCount = function() {
                return this._edgeCount
            },
            i.prototype.edges = function() {
                return a.values(this._edgeObjs)
            },
            i.prototype.setPath = function(e, n) {
                var r = this,
                i = arguments;
                return a.reduce(e,
                function(e, t) {
                    return 1 < i.length ? r.setEdge(e, t, n) : r.setEdge(e, t),
                    t
                }),
                this
            },
            i.prototype.setEdge = function() {
                var e, t, n, r, i = !1;
                a.isPlainObject(arguments[0]) ? (e = arguments[0].v, t = arguments[0].w, n = arguments[0].name, 2 === arguments.length && (r = arguments[1], i = !0)) : (e = arguments[0], t = arguments[1], n = arguments[3], 2 < arguments.length && (r = arguments[2], i = !0)),
                e = "" + e,
                t = "" + t,
                a.isUndefined(n) || (n = "" + n);
                var o = d(this._isDirected, e, t, n);
                if (a.has(this._edgeLabels, o)) return i && (this._edgeLabels[o] = r),
                this;
                if (!a.isUndefined(n) && !this._isMultigraph) throw new Error("Cannot set a named edge when isMultigraph = false");
                this.setNode(e),
                this.setNode(t),
                this._edgeLabels[o] = i ? r: this._defaultEdgeLabelFn(e, t, n);
                var s = function(e, t, n, r) {
                    if (!e && n < t) {
                        var i = t;
                        t = n,
                        n = i
                    }
                    var o = {
                        v: t,
                        w: n
                    };
                    r && (o.name = r);
                    return o
                } (this._isDirected, e, t, n);
                return e = s.v,
                t = s.w,
                Object.freeze(s),
                this._edgeObjs[o] = s,
                u(this._preds[t], e),
                u(this._sucs[e], t),
                this._in[t][o] = s,
                this._out[e][o] = s,
                this._edgeCount++,
                this
            },
            i.prototype.edge = function(e, t, n) {
                var r = 1 === arguments.length ? c(this._isDirected, e) : d(this._isDirected, e, t, n);
                return this._edgeLabels[r]
            },
            i.prototype.hasEdge = function(e, t, n) {
                var r = 1 === arguments.length ? c(this._isDirected, e) : d(this._isDirected, e, t, n);
                return a.has(this._edgeLabels, r)
            },
            i.prototype.removeEdge = function(e, t, n) {
                var r = 1 === arguments.length ? c(this._isDirected, e) : d(this._isDirected, e, t, n),
                i = this._edgeObjs[r];
                return i && (e = i.v, t = i.w, delete this._edgeLabels[r], delete this._edgeObjs[r], l(this._preds[t], e), l(this._sucs[e], t), delete this._in[t][r], delete this._out[e][r], this._edgeCount--),
                this
            },
            i.prototype.inEdges = function(e, t) {
                var n = this._in[e];
                if (n) {
                    var r = a.values(n);
                    return t ? a.filter(r,
                    function(e) {
                        return e.v === t
                    }) : r
                }
            },
            i.prototype.outEdges = function(e, t) {
                var n = this._out[e];
                if (n) {
                    var r = a.values(n);
                    return t ? a.filter(r,
                    function(e) {
                        return e.w === t
                    }) : r
                }
            },
            i.prototype.nodeEdges = function(e, t) {
                var n = this.inEdges(e, t);
                if (n) return n.concat(this.outEdges(e, t))
            }
        },
        {
            "./lodash": 49
        }],
        47 : [function(e, t, n) {
            t.exports = {
                Graph: e("./graph"),
                version: e("./version")
            }
        },
        {
            "./graph": 46,
            "./version": 50
        }],
        48 : [function(e, t, n) {
            var o = e("./lodash"),
            r = e("./graph");
            t.exports = {
                write: function(e) {
                    var t = {
                        options: {
                            directed: e.isDirected(),
                            multigraph: e.isMultigraph(),
                            compound: e.isCompound()
                        },
                        nodes: (i = e, o.map(i.nodes(),
                        function(e) {
                            var t = i.node(e),
                            n = i.parent(e),
                            r = {
                                v: e
                            };
                            return o.isUndefined(t) || (r.value = t),
                            o.isUndefined(n) || (r.parent = n),
                            r
                        })),
                        edges: (r = e, o.map(r.edges(),
                        function(e) {
                            var t = r.edge(e),
                            n = {
                                v: e.v,
                                w: e.w
                            };
                            return o.isUndefined(e.name) || (n.name = e.name),
                            o.isUndefined(t) || (n.value = t),
                            n
                        }))
                    };
                    var r;
                    var i;
                    o.isUndefined(e.graph()) || (t.value = o.clone(e.graph()));
                    return t
                },
                read: function(e) {
                    var t = new r(e.options).setGraph(e.value);
                    return o.each(e.nodes,
                    function(e) {
                        t.setNode(e.v, e.value),
                        e.parent && t.setParent(e.v, e.parent)
                    }),
                    o.each(e.edges,
                    function(e) {
                        t.setEdge({
                            v: e.v,
                            w: e.w,
                            name: e.name
                        },
                        e.value)
                    }),
                    t
                }
            }
        },
        {
            "./graph": 46,
            "./lodash": 49
        }],
        49 : [function(e, t, n) {
            var r;
            if ("function" == typeof e) try {
                r = e("lodash")
            } catch(e) {}
            r || (r = window._),
            t.exports = r
        },
        {
            lodash: 51
        }],
        50 : [function(e, t, n) {
            t.exports = "1.0.3"
        },
        {}],
        51 : [function(e, d, c) { (function(l) { (function() {
                    var st, t = [],
                    n = [],
                    at = 0,
                    ut = +new Date + "",
                    lt = 75,
                    r = 40,
                    dt = " \t\v\f\ufeff\n\r\u2028\u2029",
                    ct = /\b__p \+= '';/g,
                    ht = /\b(__p \+=) '' \+/g,
                    ft = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
                    pt = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
                    gt = /\w*$/,
                    vt = /^\s*function[ \n\r\t]+\w/,
                    yt = /<%=([\s\S]+?)%>/g,
                    mt = RegExp("^[" + dt + "]*0+(?=.$)"),
                    _t = /($^)/,
                    bt = /\bthis\b/,
                    xt = /['\n\r\t\u2028\u2029\\]/g,
                    wt = ["Array", "Boolean", "Date", "Function", "Math", "Number", "Object", "RegExp", "String", "_", "attachEvent", "clearTimeout", "isFinite", "isNaN", "parseInt", "setTimeout"],
                    At = 0,
                    Et = "[object Arguments]",
                    Ct = "[object Array]",
                    St = "[object Boolean]",
                    It = "[object Date]",
                    Tt = "[object Function]",
                    Nt = "[object Number]",
                    kt = "[object Object]",
                    Lt = "[object RegExp]",
                    Rt = "[object String]",
                    zt = {};
                    zt[Tt] = !1,
                    zt[Et] = zt[Ct] = zt[St] = zt[It] = zt[Nt] = zt[kt] = zt[Lt] = zt[Rt] = !0;
                    var Mt = {
                        leading: !1,
                        maxWait: 0,
                        trailing: !1
                    },
                    Pt = {
                        configurable: !1,
                        enumerable: !1,
                        value: null,
                        writable: !1
                    },
                    Ft = {
                        boolean: !1,
                        function: !0,
                        object: !0,
                        number: !1,
                        string: !1,
                        undefined: !1
                    },
                    i = {
                        "\\": "\\",
                        "'": "'",
                        "\n": "n",
                        "\r": "r",
                        "\t": "t",
                        "\u2028": "u2028",
                        "\u2029": "u2029"
                    },
                    Dt = Ft[typeof window] && window || this,
                    e = Ft[typeof c] && c && !c.nodeType && c,
                    o = Ft[typeof d] && d && !d.nodeType && d,
                    s = o && o.exports === e && e,
                    a = Ft[typeof l] && l;
                    function Ot(e, t, n) {
                        for (var r = (n || 0) - 1, i = e ? e.length: 0; ++r < i;) if (e[r] === t) return r;
                        return - 1
                    }
                    function Bt(e, t) {
                        var n = typeof t;
                        if (e = e.cache, "boolean" == n || null == t) return e[t] ? 0 : -1;
                        "number" != n && "string" != n && (n = "object");
                        var r = "number" == n ? t: ut + t;
                        return e = (e = e[n]) && e[r],
                        "object" == n ? e && -1 < Ot(e, t) ? 0 : -1 : e ? 0 : -1
                    }
                    function u(e) {
                        var t = this.cache,
                        n = typeof e;
                        if ("boolean" == n || null == e) t[e] = !0;
                        else {
                            "number" != n && "string" != n && (n = "object");
                            var r = "number" == n ? e: ut + e,
                            i = t[n] || (t[n] = {});
                            "object" == n ? (i[r] || (i[r] = [])).push(e) : i[r] = !0
                        }
                    }
                    function jt(e) {
                        return e.charCodeAt(0)
                    }
                    function Ut(e, t) {
                        for (var n = e.criteria,
                        r = t.criteria,
                        i = -1,
                        o = n.length; ++i < o;) {
                            var s = n[i],
                            a = r[i];
                            if (s !== a) {
                                if (a < s || void 0 === s) return 1;
                                if (s < a || void 0 === a) return - 1
                            }
                        }
                        return e.index - t.index
                    }
                    function Ht(e) {
                        var t = -1,
                        n = e.length,
                        r = e[0],
                        i = e[n / 2 | 0],
                        o = e[n - 1];
                        if (r && "object" == typeof r && i && "object" == typeof i && o && "object" == typeof o) return ! 1;
                        var s = Gt();
                        s.false = s.null = s.true = s[void 0] = !1;
                        var a = Gt();
                        for (a.array = e, a.cache = s, a.push = u; ++t < n;) a.push(e[t]);
                        return a
                    }
                    function Xt(e) {
                        return "\\" + i[e]
                    }
                    function Wt() {
                        return t.pop() || []
                    }
                    function Gt() {
                        return n.pop() || {
                            array: null,
                            cache: null,
                            criteria: null,
                            false: !1,
                            index: 0,
                            null: !1,
                            number: null,
                            object: null,
                            push: null,
                            string: null,
                            true: !1,
                            undefined: !1,
                            value: null
                        }
                    }
                    function qt(e) {
                        e.length = 0,
                        t.length < r && t.push(e)
                    }
                    function Yt(e) {
                        var t = e.cache;
                        t && Yt(t),
                        e.array = e.cache = e.criteria = e.object = e.number = e.string = e.value = null,
                        n.length < r && n.push(e)
                    }
                    function Vt(e, t, n) {
                        t || (t = 0),
                        void 0 === n && (n = e ? e.length: 0);
                        for (var r = -1,
                        i = n - t || 0,
                        o = Array(i < 0 ? 0 : i); ++r < i;) o[r] = e[t + r];
                        return o
                    } ! a || a.global !== a && a.window !== a || (Dt = a);
                    var $t = function e(r) {
                        var u = (r = r ? $t.defaults(Dt.Object(), r, $t.pick(Dt, wt)) : Dt).Array,
                        t = r.Boolean,
                        n = r.Date,
                        v = r.Function,
                        i = r.Math,
                        o = r.Number,
                        s = r.Object,
                        y = r.RegExp,
                        b = r.String,
                        m = r.TypeError,
                        a = [],
                        l = s.prototype,
                        d = r._,
                        x = l.toString,
                        c = y("^" + b(x).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$"),
                        h = i.ceil,
                        _ = r.clearTimeout,
                        f = i.floor,
                        p = v.prototype.toString,
                        g = ne(g = s.getPrototypeOf) && g,
                        w = l.hasOwnProperty,
                        A = a.push,
                        E = r.setTimeout,
                        C = a.splice,
                        S = a.unshift,
                        I = function() {
                            try {
                                var e = {},
                                t = ne(t = s.defineProperty) && t,
                                n = t(e, e, e) && t
                            } catch(e) {}
                            return n
                        } (),
                        T = ne(T = s.create) && T,
                        N = ne(N = u.isArray) && N,
                        k = r.isFinite,
                        L = r.isNaN,
                        R = ne(R = s.keys) && R,
                        z = i.max,
                        M = i.min,
                        P = r.parseInt,
                        F = i.random,
                        D = {};
                        function O(e) {
                            return e && "object" == typeof e && !ae(e) && w.call(e, "__wrapped__") ? e: new B(e)
                        }
                        function B(e, t) {
                            this.__chain__ = !!t,
                            this.__wrapped__ = e
                        }
                        D[Ct] = u,
                        D[St] = t,
                        D[It] = n,
                        D[Tt] = v,
                        D[kt] = s,
                        D[Nt] = o,
                        D[Lt] = y,
                        D[Rt] = b,
                        B.prototype = O.prototype;
                        var j = O.support = {};
                        function U(e) {
                            var r = e[0],
                            i = e[2],
                            o = e[4];
                            function s() {
                                if (i) {
                                    var e = Vt(i);
                                    A.apply(e, arguments)
                                }
                                if (this instanceof s) {
                                    var t = X(r.prototype),
                                    n = r.apply(t, e || arguments);
                                    return xe(n) ? n: t
                                }
                                return r.apply(o, e || arguments)
                            }
                            return re(s, e),
                            s
                        }
                        function H(e, n, r, i, o) {
                            if (r) {
                                var s = r(e);
                                if (void 0 !== s) return s
                            }
                            if (!xe(e)) return e;
                            var t = x.call(e);
                            if (!zt[t]) return e;
                            var a = D[t];
                            switch (t) {
                            case St:
                            case It:
                                return new a( + e);
                            case Nt:
                            case Rt:
                                return new a(e);
                            case Lt:
                                return (s = a(e.source, gt.exec(e))).lastIndex = e.lastIndex,
                                s
                            }
                            var u = ae(e);
                            if (n) {
                                var l = !i;
                                i || (i = Wt()),
                                o || (o = Wt());
                                for (var d = i.length; d--;) if (i[d] == e) return o[d];
                                s = u ? a(e.length) : {}
                            } else s = u ? Vt(e) : fe({},
                            e);
                            return u && (w.call(e, "index") && (s.index = e.index), w.call(e, "input") && (s.input = e.input)),
                            n && (i.push(e), o.push(s), (u ? Le: ve)(e,
                            function(e, t) {
                                s[t] = H(e, n, r, i, o)
                            }), l && (qt(i), qt(o))),
                            s
                        }
                        function X(e, t) {
                            return xe(e) ? T(e) : {}
                        }
                        function W(i, o, e) {
                            if ("function" != typeof i) return Je;
                            if (void 0 === o || !("prototype" in i)) return i;
                            var t = i.__bindData__;
                            if (void 0 === t && (j.funcNames && (t = !i.name), !(t = t || !j.funcDecomp))) {
                                var n = p.call(i);
                                j.funcNames || (t = !vt.test(n)),
                                t || (t = bt.test(n), re(i, t))
                            }
                            if (!1 === t || !0 !== t && 1 & t[1]) return i;
                            switch (e) {
                            case 1:
                                return function(e) {
                                    return i.call(o, e)
                                };
                            case 2:
                                return function(e, t) {
                                    return i.call(o, e, t)
                                };
                            case 3:
                                return function(e, t, n) {
                                    return i.call(o, e, t, n)
                                };
                            case 4:
                                return function(e, t, n, r) {
                                    return i.call(o, e, t, n, r)
                                }
                            }
                            return Ze(i, o)
                        }
                        function G(e) {
                            var r = e[0],
                            i = e[1],
                            o = e[2],
                            s = e[3],
                            a = e[4],
                            u = e[5],
                            l = 1 & i,
                            d = 2 & i,
                            c = 4 & i,
                            h = 8 & i,
                            f = r;
                            function p() {
                                var e = l ? a: this;
                                if (o) {
                                    var t = Vt(o);
                                    A.apply(t, arguments)
                                }
                                if ((s || c) && (t || (t = Vt(arguments)), s && A.apply(t, s), c && t.length < u)) return i |= 16,
                                G([r, h ? i: -4 & i, t, null, a, u]);
                                if (t || (t = arguments), d && (r = e[f]), this instanceof p) {
                                    e = X(r.prototype);
                                    var n = r.apply(e, t);
                                    return xe(n) ? n: e
                                }
                                return r.apply(e, t)
                            }
                            return re(p, e),
                            p
                        }
                        function q(e, t) {
                            var n = -1,
                            r = te(),
                            i = e ? e.length: 0,
                            o = lt <= i && r === Ot,
                            s = [];
                            if (o) {
                                var a = Ht(t);
                                a ? (r = Bt, t = a) : o = !1
                            }
                            for (; ++n < i;) {
                                var u = e[n];
                                r(t, u) < 0 && s.push(u)
                            }
                            return o && Yt(t),
                            s
                        }
                        function Y(e, t, n, r) {
                            for (var i = (r || 0) - 1, o = e ? e.length: 0, s = []; ++i < o;) {
                                var a = e[i];
                                if (a && "object" == typeof a && "number" == typeof a.length && (ae(a) || se(a))) {
                                    t || (a = Y(a, t, n));
                                    var u = -1,
                                    l = a.length,
                                    d = s.length;
                                    for (s.length += l; ++u < l;) s[d++] = a[u]
                                } else n || s.push(a)
                            }
                            return s
                        }
                        function V(r, e, i, o, s, a) {
                            if (i) {
                                var u = i(r, e);
                                if (void 0 !== u) return !! u
                            }
                            if (r === e) return 0 !== r || 1 / r == 1 / e;
                            var t = typeof e;
                            if (! (r != r || r && Ft[typeof r] || e && Ft[t])) return ! 1;
                            if (null == r || null == e) return r === e;
                            var n = x.call(r),
                            l = x.call(e);
                            if (n == Et && (n = kt), l == Et && (l = kt), n != l) return ! 1;
                            switch (n) {
                            case St:
                            case It:
                                return + r == +e;
                            case Nt:
                                return r != +r ? e != +e: 0 == r ? 1 / r == 1 / e: r == +e;
                            case Lt:
                            case Rt:
                                return r == b(e)
                            }
                            var d = n == Ct;
                            if (!d) {
                                var c = w.call(r, "__wrapped__"),
                                h = w.call(e, "__wrapped__");
                                if (c || h) return V(c ? r.__wrapped__: r, h ? e.__wrapped__: e, i, o, s, a);
                                if (n != kt) return ! 1;
                                var f = r.constructor,
                                p = e.constructor;
                                if (f != p && !(be(f) && f instanceof f && be(p) && p instanceof p) && "constructor" in r && "constructor" in e) return ! 1
                            }
                            var g = !s;
                            s || (s = Wt()),
                            a || (a = Wt());
                            for (var v = s.length; v--;) if (s[v] == r) return a[v] == e;
                            var y = 0;
                            if (u = !0, s.push(r), a.push(e), d) {
                                if (v = r.length, y = e.length, (u = y == v) || o) for (; y--;) {
                                    var m = v,
                                    _ = e[y];
                                    if (o) for (; m--&&!(u = V(r[m], _, i, o, s, a)););
                                    else if (! (u = V(r[y], _, i, o, s, a))) break
                                }
                            } else ge(e,
                            function(e, t, n) {
                                if (w.call(n, t)) return y++,
                                u = w.call(r, t) && V(r[t], e, i, o, s, a)
                            }),
                            u && !o && ge(r,
                            function(e, t, n) {
                                if (w.call(n, t)) return u = -1 < --y
                            });
                            return s.pop(),
                            a.pop(),
                            g && (qt(s), qt(a)),
                            u
                        }
                        function $(u, e, l, d, c) { (ae(e) ? Le: ve)(e,
                            function(e, t) {
                                var n, r, i = e,
                                o = u[t];
                                if (e && ((r = ae(e)) || Ae(e))) {
                                    for (var s, a = d.length; a--;) if (n = d[a] == e) {
                                        o = c[a];
                                        break
                                    }
                                    n || (l && (s = void 0 !== (i = l(o, e))) && (o = i), s || (o = r ? ae(o) ? o: [] : Ae(o) ? o: {}), d.push(e), c.push(o), s || $(o, e, l, d, c))
                                } else l && void 0 === (i = l(o, e)) && (i = e),
                                void 0 !== i && (o = i);
                                u[t] = o
                            })
                        }
                        function Z(e, t) {
                            return e + f(F() * (t - e + 1))
                        }
                        function Q(e, t, n) {
                            var r = -1,
                            i = te(),
                            o = e ? e.length: 0,
                            s = [],
                            a = !t && lt <= o && i === Ot,
                            u = n || a ? Wt() : s;
                            for (a && (i = Bt, u = Ht(u)); ++r < o;) {
                                var l = e[r],
                                d = n ? n(l, r, e) : l; (t ? !r || u[u.length - 1] !== d: i(u, d) < 0) && ((n || a) && u.push(d), s.push(l))
                            }
                            return a ? (qt(u.array), Yt(u)) : n && qt(u),
                            s
                        }
                        function J(a) {
                            return function(e, r, t) {
                                var i = {};
                                r = O.createCallback(r, t, 3);
                                var n = -1,
                                o = e ? e.length: 0;
                                if ("number" == typeof o) for (; ++n < o;) {
                                    var s = e[n];
                                    a(i, s, r(s, n, e), e)
                                } else ve(e,
                                function(e, t, n) {
                                    a(i, e, r(e, t, n), n)
                                });
                                return i
                            }
                        }
                        function K(e, t, n, r, i, o) {
                            var s = 1 & t,
                            a = 4 & t,
                            u = 16 & t,
                            l = 32 & t;
                            if (! (2 & t || be(e))) throw new m;
                            u && !n.length && (t &= -17, u = n = !1),
                            l && !r.length && (t &= -33, l = r = !1);
                            var d = e && e.__bindData__;
                            return d && !0 !== d ? ((d = Vt(d))[2] && (d[2] = Vt(d[2])), d[3] && (d[3] = Vt(d[3])), !s || 1 & d[1] || (d[4] = i), !s && 1 & d[1] && (t |= 8), !a || 4 & d[1] || (d[5] = o), u && A.apply(d[2] || (d[2] = []), n), l && S.apply(d[3] || (d[3] = []), r), d[1] |= t, K.apply(null, d)) : (1 == t || 17 === t ? U: G)([e, t, n, r, i, o])
                        }
                        function ee(e) {
                            return le[e]
                        }
                        function te() {
                            var e = (e = O.indexOf) === We ? Ot: e;
                            return e
                        }
                        function ne(e) {
                            return "function" == typeof e && c.test(e)
                        }
                        j.funcDecomp = !ne(r.WinRTError) && bt.test(e),
                        j.funcNames = "string" == typeof v.name,
                        O.templateSettings = {
                            escape: /<%-([\s\S]+?)%>/g,
                            evaluate: /<%([\s\S]+?)%>/g,
                            interpolate: yt,
                            variable: "",
                            imports: {
                                _: O
                            }
                        },
                        T || (X = function() {
                            function n() {}
                            return function(e) {
                                if (xe(e)) {
                                    n.prototype = e;
                                    var t = new n;
                                    n.prototype = null
                                }
                                return t || r.Object()
                            }
                        } ());
                        var re = I ?
                        function(e, t) {
                            Pt.value = t,
                            I(e, "__bindData__", Pt)
                        }: et;
                        function ie(e) {
                            var t, n;
                            return ! (!e || x.call(e) != kt || be(t = e.constructor) && !(t instanceof t)) && (ge(e,
                            function(e, t) {
                                n = t
                            }), void 0 === n || w.call(e, n))
                        }
                        function oe(e) {
                            return de[e]
                        }
                        function se(e) {
                            return e && "object" == typeof e && "number" == typeof e.length && x.call(e) == Et || !1
                        }
                        var ae = N ||
                        function(e) {
                            return e && "object" == typeof e && "number" == typeof e.length && x.call(e) == Ct || !1
                        },
                        ue = R ?
                        function(e) {
                            return xe(e) ? R(e) : []
                        }: function(e) {
                            var t, n = e,
                            r = [];
                            if (!n) return r;
                            if (!Ft[typeof e]) return r;
                            for (t in n) w.call(n, t) && r.push(t);
                            return r
                        },
                        le = {
                            "&": "&amp;",
                            "<": "&lt;",
                            ">": "&gt;",
                            '"': "&quot;",
                            "'": "&#39;"
                        },
                        de = _e(le),
                        ce = y("(" + ue(de).join("|") + ")", "g"),
                        he = y("[" + ue(le).join("") + "]", "g"),
                        fe = function(e, t, n) {
                            var r, i = e,
                            o = i;
                            if (!i) return o;
                            var s = arguments,
                            a = 0,
                            u = "number" == typeof n ? 2 : s.length;
                            if (3 < u && "function" == typeof s[u - 2]) var l = W(s[--u - 1], s[u--], 2);
                            else 2 < u && "function" == typeof s[u - 1] && (l = s[--u]);
                            for (; ++a < u;) if ((i = s[a]) && Ft[typeof i]) for (var d = -1,
                            c = Ft[typeof i] && ue(i), h = c ? c.length: 0; ++d < h;) o[r = c[d]] = l ? l(o[r], i[r]) : i[r];
                            return o
                        };
                        var pe = function(e, t, n) {
                            var r, i = e,
                            o = i;
                            if (!i) return o;
                            for (var s = arguments,
                            a = 0,
                            u = "number" == typeof n ? 2 : s.length; ++a < u;) if ((i = s[a]) && Ft[typeof i]) for (var l = -1,
                            d = Ft[typeof i] && ue(i), c = d ? d.length: 0; ++l < c;) void 0 === o[r = d[l]] && (o[r] = i[r]);
                            return o
                        };
                        var ge = function(e, t, n) {
                            var r, i = e,
                            o = i;
                            if (!i) return o;
                            if (!Ft[typeof i]) return o;
                            for (r in t = t && void 0 === n ? t: W(t, n, 3), i) if (!1 === t(i[r], r, e)) return o;
                            return o
                        };
                        var ve = function(e, t, n) {
                            var r, i = e,
                            o = i;
                            if (!i) return o;
                            if (!Ft[typeof i]) return o;
                            t = t && void 0 === n ? t: W(t, n, 3);
                            for (var s = -1,
                            a = Ft[typeof i] && ue(i), u = a ? a.length: 0; ++s < u;) if (!1 === t(i[r = a[s]], r, e)) return o;
                            return o
                        };
                        function ye(e, t, n) {
                            var r = ue(e),
                            i = r.length;
                            for (t = W(t, n, 3); i--;) {
                                var o = r[i];
                                if (!1 === t(e[o], o, e)) break
                            }
                            return e
                        }
                        function me(e) {
                            var n = [];
                            return ge(e,
                            function(e, t) {
                                be(e) && n.push(t)
                            }),
                            n.sort()
                        }
                        function _e(e) {
                            for (var t = -1,
                            n = ue(e), r = n.length, i = {}; ++t < r;) {
                                var o = n[t];
                                i[e[o]] = o
                            }
                            return i
                        }
                        function be(e) {
                            return "function" == typeof e
                        }
                        function xe(e) {
                            return ! (!e || !Ft[typeof e])
                        }
                        function we(e) {
                            return "number" == typeof e || e && "object" == typeof e && x.call(e) == Nt || !1
                        }
                        var Ae = g ?
                        function(e) {
                            if (!e || x.call(e) != kt) return ! 1;
                            var t = e.valueOf,
                            n = ne(t) && (n = g(t)) && g(n);
                            return n ? e == n || g(e) == n: ie(e)
                        }: ie;
                        function Ee(e) {
                            return "string" == typeof e || e && "object" == typeof e && x.call(e) == Rt || !1
                        }
                        function Ce(e) {
                            for (var t = -1,
                            n = ue(e), r = n.length, i = u(r); ++t < r;) i[t] = e[n[t]];
                            return i
                        }
                        function Se(e, t, n) {
                            var r = -1,
                            i = te(),
                            o = e ? e.length: 0,
                            s = !1;
                            return n = (n < 0 ? z(0, o + n) : n) || 0,
                            ae(e) ? s = -1 < i(e, t, n) : "number" == typeof o ? s = -1 < (Ee(e) ? e.indexOf(t, n) : i(e, t, n)) : ve(e,
                            function(e) {
                                if (++r >= n) return ! (s = e === t)
                            }),
                            s
                        }
                        var Ie = J(function(e, t, n) {
                            w.call(e, n) ? e[n]++:e[n] = 1
                        });
                        function Te(e, r, t) {
                            var i = !0;
                            r = O.createCallback(r, t, 3);
                            var n = -1,
                            o = e ? e.length: 0;
                            if ("number" == typeof o) for (; ++n < o && (i = !!r(e[n], n, e)););
                            else ve(e,
                            function(e, t, n) {
                                return i = !!r(e, t, n)
                            });
                            return i
                        }
                        function Ne(e, r, t) {
                            var i = [];
                            r = O.createCallback(r, t, 3);
                            var n = -1,
                            o = e ? e.length: 0;
                            if ("number" == typeof o) for (; ++n < o;) {
                                var s = e[n];
                                r(s, n, e) && i.push(s)
                            } else ve(e,
                            function(e, t, n) {
                                r(e, t, n) && i.push(e)
                            });
                            return i
                        }
                        function ke(e, r, t) {
                            r = O.createCallback(r, t, 3);
                            var i, n = -1,
                            o = e ? e.length: 0;
                            if ("number" != typeof o) return ve(e,
                            function(e, t, n) {
                                if (r(e, t, n)) return i = e,
                                !1
                            }),
                            i;
                            for (; ++n < o;) {
                                var s = e[n];
                                if (r(s, n, e)) return s
                            }
                        }
                        function Le(e, t, n) {
                            var r = -1,
                            i = e ? e.length: 0;
                            if (t = t && void 0 === n ? t: W(t, n, 3), "number" == typeof i) for (; ++r < i && !1 !== t(e[r], r, e););
                            else ve(e, t);
                            return e
                        }
                        function Re(e, r, t) {
                            var i = e ? e.length: 0;
                            if (r = r && void 0 === t ? r: W(r, t, 3), "number" == typeof i) for (; i--&&!1 !== r(e[i], i, e););
                            else {
                                var o = ue(e);
                                i = o.length,
                                ve(e,
                                function(e, t, n) {
                                    return t = o ? o[--i] : --i,
                                    r(n[t], t, n)
                                })
                            }
                            return e
                        }
                        var ze = J(function(e, t, n) { (w.call(e, n) ? e[n] : e[n] = []).push(t)
                        }),
                        Me = J(function(e, t, n) {
                            e[n] = t
                        });
                        function Pe(e, r, t) {
                            var i = -1,
                            n = e ? e.length: 0;
                            if (r = O.createCallback(r, t, 3), "number" == typeof n) for (var o = u(n); ++i < n;) o[i] = r(e[i], i, e);
                            else o = [],
                            ve(e,
                            function(e, t, n) {
                                o[++i] = r(e, t, n)
                            });
                            return o
                        }
                        function Fe(e, i, t) {
                            var o = -1 / 0,
                            s = o;
                            if ("function" != typeof i && t && t[i] === e && (i = null), null == i && ae(e)) for (var n = -1,
                            r = e.length; ++n < r;) {
                                var a = e[n];
                                s < a && (s = a)
                            } else i = null == i && Ee(e) ? jt: O.createCallback(i, t, 3),
                            Le(e,
                            function(e, t, n) {
                                var r = i(e, t, n);
                                o < r && (o = r, s = e)
                            });
                            return s
                        }
                        var De = Pe;
                        function Oe(e, r, i, t) {
                            if (!e) return i;
                            var o = arguments.length < 3;
                            r = O.createCallback(r, t, 4);
                            var n = -1,
                            s = e.length;
                            if ("number" == typeof s) for (o && (i = e[++n]); ++n < s;) i = r(i, e[n], n, e);
                            else ve(e,
                            function(e, t, n) {
                                i = o ? (o = !1, e) : r(i, e, t, n)
                            });
                            return i
                        }
                        function Be(e, r, i, t) {
                            var o = arguments.length < 3;
                            return r = O.createCallback(r, t, 4),
                            Re(e,
                            function(e, t, n) {
                                i = o ? (o = !1, e) : r(i, e, t, n)
                            }),
                            i
                        }
                        function je(e) {
                            var n = -1,
                            t = e ? e.length: 0,
                            r = u("number" == typeof t ? t: 0);
                            return Le(e,
                            function(e) {
                                var t = Z(0, ++n);
                                r[n] = r[t],
                                r[t] = e
                            }),
                            r
                        }
                        function Ue(e, r, t) {
                            var i;
                            r = O.createCallback(r, t, 3);
                            var n = -1,
                            o = e ? e.length: 0;
                            if ("number" == typeof o) for (; ++n < o && !(i = r(e[n], n, e)););
                            else ve(e,
                            function(e, t, n) {
                                return ! (i = r(e, t, n))
                            });
                            return !! i
                        }
                        var He = Ne;
                        function Xe(e, t, n) {
                            var r = 0,
                            i = e ? e.length: 0;
                            if ("number" != typeof t && null != t) {
                                var o = -1;
                                for (t = O.createCallback(t, n, 3); ++o < i && t(e[o], o, e);) r++
                            } else if (null == (r = t) || n) return e ? e[0] : st;
                            return Vt(e, 0, M(z(0, r), i))
                        }
                        function We(e, t, n) {
                            if ("number" == typeof n) {
                                var r = e ? e.length: 0;
                                n = n < 0 ? z(0, r + n) : n || 0
                            } else if (n) {
                                var i = qe(e, t);
                                return e[i] === t ? i: -1
                            }
                            return Ot(e, t, n)
                        }
                        function Ge(e, t, n) {
                            if ("number" != typeof t && null != t) {
                                var r = 0,
                                i = -1,
                                o = e ? e.length: 0;
                                for (t = O.createCallback(t, n, 3); ++i < o && t(e[i], i, e);) r++
                            } else r = null == t || n ? 1 : z(0, t);
                            return Vt(e, r)
                        }
                        function qe(e, t, n, r) {
                            var i = 0,
                            o = e ? e.length: i;
                            for (t = (n = n ? O.createCallback(n, r, 1) : Je)(t); i < o;) {
                                var s = i + o >>> 1;
                                n(e[s]) < t ? i = s + 1 : o = s
                            }
                            return i
                        }
                        function Ye(e, t, n, r) {
                            return "boolean" != typeof t && null != t && (r = n, n = "function" != typeof t && r && r[t] === e ? null: t, t = !1),
                            null != n && (n = O.createCallback(n, r, 3)),
                            Q(e, t, n)
                        }
                        function Ve() {
                            for (var e = 1 < arguments.length ? arguments: arguments[0], t = -1, n = e ? Fe(De(e, "length")) : 0, r = u(n < 0 ? 0 : n); ++t < n;) r[t] = De(e, t);
                            return r
                        }
                        function $e(e, t) {
                            var n = -1,
                            r = e ? e.length: 0,
                            i = {};
                            for (t || !r || ae(e[0]) || (t = []); ++n < r;) {
                                var o = e[n];
                                t ? i[o] = t[n] : o && (i[o[0]] = o[1])
                            }
                            return i
                        }
                        function Ze(e, t) {
                            return 2 < arguments.length ? K(e, 17, Vt(arguments, 2), null, t) : K(e, 1, null, null, t)
                        }
                        function Qe(r, i, e) {
                            var o, s, a, u, l, d, c, h = 0,
                            f = !1,
                            p = !0;
                            if (!be(r)) throw new m;
                            if (i = z(0, i) || 0, !0 === e) {
                                var g = !0;
                                p = !1
                            } else xe(e) && (g = e.leading, f = "maxWait" in e && (z(i, e.maxWait) || 0), p = "trailing" in e ? e.trailing: p);
                            var v = function() {
                                var e = i - (nt() - u);
                                if (e <= 0) {
                                    s && _(s);
                                    var t = c;
                                    s = d = c = st,
                                    t && (h = nt(), a = r.apply(l, o), d || s || (o = l = null))
                                } else d = E(v, e)
                            },
                            y = function() {
                                d && _(d),
                                s = d = c = st,
                                (p || f !== i) && (h = nt(), a = r.apply(l, o), d || s || (o = l = null))
                            };
                            return function() {
                                if (o = arguments, u = nt(), l = this, c = p && (d || !g), !1 === f) var e = g && !d;
                                else {
                                    s || g || (h = u);
                                    var t = f - (u - h),
                                    n = t <= 0;
                                    n ? (s && (s = _(s)), h = u, a = r.apply(l, o)) : s || (s = E(y, t))
                                }
                                return n && d ? d = _(d) : d || i === f || (d = E(v, i)),
                                e && (n = !0, a = r.apply(l, o)),
                                !n || d || s || (o = l = null),
                                a
                            }
                        }
                        function Je(e) {
                            return e
                        }
                        function Ke(o, t, e) {
                            var s = !0,
                            n = t && me(t);
                            t && (e || n.length) || (null == e && (e = t), a = B, t = o, o = O, n = me(t)),
                            !1 === e ? s = !1 : xe(e) && "chain" in e && (s = e.chain);
                            var a = o,
                            r = be(a);
                            Le(n,
                            function(e) {
                                var i = o[e] = t[e];
                                r && (a.prototype[e] = function() {
                                    var e = this.__chain__,
                                    t = this.__wrapped__,
                                    n = [t];
                                    A.apply(n, arguments);
                                    var r = i.apply(o, n);
                                    if (s || e) {
                                        if (t === r && xe(r)) return this; (r = new a(r)).__chain__ = e
                                    }
                                    return r
                                })
                            })
                        }
                        function et() {}
                        var tt, nt = ne(nt = n.now) && nt ||
                        function() {
                            return (new n).getTime()
                        },
                        rt = 8 == P(dt + "08") ? P: function(e, t) {
                            return P(Ee(e) ? e.replace(mt, "") : e, t || 0)
                        };
                        function it(t) {
                            return function(e) {
                                return e[t]
                            }
                        }
                        function ot() {
                            return this.__wrapped__
                        }
                        return O.after = function(e, t) {
                            if (!be(t)) throw new m;
                            return function() {
                                if (--e < 1) return t.apply(this, arguments)
                            }
                        },
                        O.assign = fe,
                        O.at = function(e) {
                            for (var t = arguments,
                            n = -1,
                            r = Y(t, !0, !1, 1), i = t[2] && t[2][t[1]] === e ? 1 : r.length, o = u(i); ++n < i;) o[n] = e[r[n]];
                            return o
                        },
                        O.bind = Ze,
                        O.bindAll = function(e) {
                            for (var t = 1 < arguments.length ? Y(arguments, !0, !1, 1) : me(e), n = -1, r = t.length; ++n < r;) {
                                var i = t[n];
                                e[i] = K(e[i], 1, null, null, e)
                            }
                            return e
                        },
                        O.bindKey = function(e, t) {
                            return 2 < arguments.length ? K(t, 19, Vt(arguments, 2), null, e) : K(t, 3, null, null, e)
                        },
                        O.chain = function(e) {
                            return (e = new B(e)).__chain__ = !0,
                            e
                        },
                        O.compact = function(e) {
                            for (var t = -1,
                            n = e ? e.length: 0, r = []; ++t < n;) {
                                var i = e[t];
                                i && r.push(i)
                            }
                            return r
                        },
                        O.compose = function() {
                            for (var n = arguments,
                            e = n.length; e--;) if (!be(n[e])) throw new m;
                            return function() {
                                for (var e = arguments,
                                t = n.length; t--;) e = [n[t].apply(this, e)];
                                return e[0]
                            }
                        },
                        O.constant = function(e) {
                            return function() {
                                return e
                            }
                        },
                        O.countBy = Ie,
                        O.create = function(e, t) {
                            var n = X(e);
                            return t ? fe(n, t) : n
                        },
                        O.createCallback = function(r, e, t) {
                            var n = typeof r;
                            if (null == r || "function" == n) return W(r, e, t);
                            if ("object" != n) return it(r);
                            var i = ue(r),
                            o = i[0],
                            s = r[o];
                            return 1 != i.length || s != s || xe(s) ?
                            function(e) {
                                for (var t = i.length,
                                n = !1; t--&&(n = V(e[i[t]], r[i[t]], null, !0)););
                                return n
                            }: function(e) {
                                var t = e[o];
                                return s === t && (0 !== s || 1 / s == 1 / t)
                            }
                        },
                        O.curry = function(e, t) {
                            return K(e, 4, null, null, null, t = "number" == typeof t ? t: +t || e.length)
                        },
                        O.debounce = Qe,
                        O.defaults = pe,
                        O.defer = function(e) {
                            if (!be(e)) throw new m;
                            var t = Vt(arguments, 1);
                            return E(function() {
                                e.apply(st, t)
                            },
                            1)
                        },
                        O.delay = function(e, t) {
                            if (!be(e)) throw new m;
                            var n = Vt(arguments, 2);
                            return E(function() {
                                e.apply(st, n)
                            },
                            t)
                        },
                        O.difference = function(e) {
                            return q(e, Y(arguments, !0, !0, 1))
                        },
                        O.filter = Ne,
                        O.flatten = function(e, t, n, r) {
                            return "boolean" != typeof t && null != t && (r = n, n = "function" != typeof t && r && r[t] === e ? null: t, t = !1),
                            null != n && (e = Pe(e, n, r)),
                            Y(e, t)
                        },
                        O.forEach = Le,
                        O.forEachRight = Re,
                        O.forIn = ge,
                        O.forInRight = function(e, t, n) {
                            var r = [];
                            ge(e,
                            function(e, t) {
                                r.push(t, e)
                            });
                            var i = r.length;
                            for (t = W(t, n, 3); i--&&!1 !== t(r[i--], r[i], e););
                            return e
                        },
                        O.forOwn = ve,
                        O.forOwnRight = ye,
                        O.functions = me,
                        O.groupBy = ze,
                        O.indexBy = Me,
                        O.initial = function(e, t, n) {
                            var r = 0,
                            i = e ? e.length: 0;
                            if ("number" != typeof t && null != t) {
                                var o = i;
                                for (t = O.createCallback(t, n, 3); o--&&t(e[o], o, e);) r++
                            } else r = null == t || n ? 1 : t || r;
                            return Vt(e, 0, M(z(0, i - r), i))
                        },
                        O.intersection = function() {
                            for (var e = [], t = -1, n = arguments.length, r = Wt(), i = te(), o = i === Ot, s = Wt(); ++t < n;) {
                                var a = arguments[t]; (ae(a) || se(a)) && (e.push(a), r.push(o && a.length >= lt && Ht(t ? e[t] : s)))
                            }
                            var u = e[0],
                            l = -1,
                            d = u ? u.length: 0,
                            c = [];
                            e: for (; ++l < d;) {
                                var h = r[0];
                                if (a = u[l], (h ? Bt(h, a) : i(s, a)) < 0) {
                                    for (t = n, (h || s).push(a); --t;) if (((h = r[t]) ? Bt(h, a) : i(e[t], a)) < 0) continue e;
                                    c.push(a)
                                }
                            }
                            for (; n--;)(h = r[n]) && Yt(h);
                            return qt(r),
                            qt(s),
                            c
                        },
                        O.invert = _e,
                        O.invoke = function(e, t) {
                            var n = Vt(arguments, 2),
                            r = -1,
                            i = "function" == typeof t,
                            o = e ? e.length: 0,
                            s = u("number" == typeof o ? o: 0);
                            return Le(e,
                            function(e) {
                                s[++r] = (i ? t: e[t]).apply(e, n)
                            }),
                            s
                        },
                        O.keys = ue,
                        O.map = Pe,
                        O.mapValues = function(e, r, t) {
                            var i = {};
                            return r = O.createCallback(r, t, 3),
                            ve(e,
                            function(e, t, n) {
                                i[t] = r(e, t, n)
                            }),
                            i
                        },
                        O.max = Fe,
                        O.memoize = function(n, r) {
                            if (!be(n)) throw new m;
                            var i = function() {
                                var e = i.cache,
                                t = r ? r.apply(this, arguments) : ut + arguments[0];
                                return w.call(e, t) ? e[t] : e[t] = n.apply(this, arguments)
                            };
                            return i.cache = {},
                            i
                        },
                        O.merge = function(e) {
                            var t = arguments,
                            n = 2;
                            if (!xe(e)) return e;
                            if ("number" != typeof t[2] && (n = t.length), 3 < n && "function" == typeof t[n - 2]) var r = W(t[--n - 1], t[n--], 2);
                            else 2 < n && "function" == typeof t[n - 1] && (r = t[--n]);
                            for (var i = Vt(arguments, 1, n), o = -1, s = Wt(), a = Wt(); ++o < n;) $(e, i[o], r, s, a);
                            return qt(s),
                            qt(a),
                            e
                        },
                        O.min = function(e, i, t) {
                            var o = 1 / 0,
                            s = o;
                            if ("function" != typeof i && t && t[i] === e && (i = null), null == i && ae(e)) for (var n = -1,
                            r = e.length; ++n < r;) {
                                var a = e[n];
                                a < s && (s = a)
                            } else i = null == i && Ee(e) ? jt: O.createCallback(i, t, 3),
                            Le(e,
                            function(e, t, n) {
                                var r = i(e, t, n);
                                r < o && (o = r, s = e)
                            });
                            return s
                        },
                        O.omit = function(e, r, t) {
                            var i = {};
                            if ("function" != typeof r) {
                                var n = [];
                                ge(e,
                                function(e, t) {
                                    n.push(t)
                                });
                                for (var o = -1,
                                s = (n = q(n, Y(arguments, !0, !1, 1))).length; ++o < s;) {
                                    var a = n[o];
                                    i[a] = e[a]
                                }
                            } else r = O.createCallback(r, t, 3),
                            ge(e,
                            function(e, t, n) {
                                r(e, t, n) || (i[t] = e)
                            });
                            return i
                        },
                        O.once = function(e) {
                            var t, n;
                            if (!be(e)) throw new m;
                            return function() {
                                return t || (t = !0, n = e.apply(this, arguments), e = null),
                                n
                            }
                        },
                        O.pairs = function(e) {
                            for (var t = -1,
                            n = ue(e), r = n.length, i = u(r); ++t < r;) {
                                var o = n[t];
                                i[t] = [o, e[o]]
                            }
                            return i
                        },
                        O.partial = function(e) {
                            return K(e, 16, Vt(arguments, 1))
                        },
                        O.partialRight = function(e) {
                            return K(e, 32, null, Vt(arguments, 1))
                        },
                        O.pick = function(e, r, t) {
                            var i = {};
                            if ("function" != typeof r) for (var n = -1,
                            o = Y(arguments, !0, !1, 1), s = xe(e) ? o.length: 0; ++n < s;) {
                                var a = o[n];
                                a in e && (i[a] = e[a])
                            } else r = O.createCallback(r, t, 3),
                            ge(e,
                            function(e, t, n) {
                                r(e, t, n) && (i[t] = e)
                            });
                            return i
                        },
                        O.pluck = De,
                        O.property = it,
                        O.pull = function(e) {
                            for (var t = arguments,
                            n = 0,
                            r = t.length,
                            i = e ? e.length: 0; ++n < r;) for (var o = -1,
                            s = t[n]; ++o < i;) e[o] === s && (C.call(e, o--, 1), i--);
                            return e
                        },
                        O.range = function(e, t, n) {
                            e = +e || 0,
                            null == t && (t = e, e = 0);
                            for (var r = -1,
                            i = z(0, h((t - e) / ((n = "number" == typeof n ? n: +n || 1) || 1))), o = u(i); ++r < i;) o[r] = e,
                            e += n;
                            return o
                        },
                        O.reject = function(e, r, t) {
                            return r = O.createCallback(r, t, 3),
                            Ne(e,
                            function(e, t, n) {
                                return ! r(e, t, n)
                            })
                        },
                        O.remove = function(e, t, n) {
                            var r = -1,
                            i = e ? e.length: 0,
                            o = [];
                            for (t = O.createCallback(t, n, 3); ++r < i;) {
                                var s = e[r];
                                t(s, r, e) && (o.push(s), C.call(e, r--, 1), i--)
                            }
                            return o
                        },
                        O.rest = Ge,
                        O.shuffle = je,
                        O.sortBy = function(e, i, t) {
                            var o = -1,
                            s = ae(i),
                            n = e ? e.length: 0,
                            a = u("number" == typeof n ? n: 0);
                            for (s || (i = O.createCallback(i, t, 3)), Le(e,
                            function(t, e, n) {
                                var r = a[++o] = Gt();
                                s ? r.criteria = Pe(i,
                                function(e) {
                                    return t[e]
                                }) : (r.criteria = Wt())[0] = i(t, e, n),
                                r.index = o,
                                r.value = t
                            }), n = a.length, a.sort(Ut); n--;) {
                                var r = a[n];
                                a[n] = r.value,
                                s || qt(r.criteria),
                                Yt(r)
                            }
                            return a
                        },
                        O.tap = function(e, t) {
                            return t(e),
                            e
                        },
                        O.throttle = function(e, t, n) {
                            var r = !0,
                            i = !0;
                            if (!be(e)) throw new m;
                            return ! 1 === n ? r = !1 : xe(n) && (r = "leading" in n ? n.leading: r, i = "trailing" in n ? n.trailing: i),
                            Mt.leading = r,
                            Mt.maxWait = t,
                            Mt.trailing = i,
                            Qe(e, t, Mt)
                        },
                        O.times = function(e, t, n) {
                            e = -1 < (e = +e) ? e: 0;
                            var r = -1,
                            i = u(e);
                            for (t = W(t, n, 1); ++r < e;) i[r] = t(r);
                            return i
                        },
                        O.toArray = function(e) {
                            return e && "number" == typeof e.length ? Vt(e) : Ce(e)
                        },
                        O.transform = function(e, r, i, t) {
                            var n = ae(e);
                            if (null == i) if (n) i = [];
                            else {
                                var o = e && e.constructor,
                                s = o && o.prototype;
                                i = X(s)
                            }
                            return r && (r = O.createCallback(r, t, 4), (n ? Le: ve)(e,
                            function(e, t, n) {
                                return r(i, e, t, n)
                            })),
                            i
                        },
                        O.union = function() {
                            return Q(Y(arguments, !0, !0))
                        },
                        O.uniq = Ye,
                        O.values = Ce,
                        O.where = He,
                        O.without = function(e) {
                            return q(e, Vt(arguments, 1))
                        },
                        O.wrap = function(e, t) {
                            return K(t, 16, [e])
                        },
                        O.xor = function() {
                            for (var e = -1,
                            t = arguments.length; ++e < t;) {
                                var n = arguments[e];
                                if (ae(n) || se(n)) var r = r ? Q(q(r, n).concat(q(n, r))) : n
                            }
                            return r || []
                        },
                        O.zip = Ve,
                        O.zipObject = $e,
                        O.collect = Pe,
                        O.drop = Ge,
                        O.each = Le,
                        O.eachRight = Re,
                        O.extend = fe,
                        O.methods = me,
                        O.object = $e,
                        O.select = Ne,
                        O.tail = Ge,
                        O.unique = Ye,
                        O.unzip = Ve,
                        Ke(O),
                        O.clone = function(e, t, n, r) {
                            return "boolean" != typeof t && null != t && (r = n, n = t, t = !1),
                            H(e, t, "function" == typeof n && W(n, r, 1))
                        },
                        O.cloneDeep = function(e, t, n) {
                            return H(e, !0, "function" == typeof t && W(t, n, 1))
                        },
                        O.contains = Se,
                        O.escape = function(e) {
                            return null == e ? "": b(e).replace(he, ee)
                        },
                        O.every = Te,
                        O.find = ke,
                        O.findIndex = function(e, t, n) {
                            var r = -1,
                            i = e ? e.length: 0;
                            for (t = O.createCallback(t, n, 3); ++r < i;) if (t(e[r], r, e)) return r;
                            return - 1
                        },
                        O.findKey = function(e, r, t) {
                            var i;
                            return r = O.createCallback(r, t, 3),
                            ve(e,
                            function(e, t, n) {
                                if (r(e, t, n)) return i = t,
                                !1
                            }),
                            i
                        },
                        O.findLast = function(e, r, t) {
                            var i;
                            return r = O.createCallback(r, t, 3),
                            Re(e,
                            function(e, t, n) {
                                if (r(e, t, n)) return i = e,
                                !1
                            }),
                            i
                        },
                        O.findLastIndex = function(e, t, n) {
                            var r = e ? e.length: 0;
                            for (t = O.createCallback(t, n, 3); r--;) if (t(e[r], r, e)) return r;
                            return - 1
                        },
                        O.findLastKey = function(e, r, t) {
                            var i;
                            return r = O.createCallback(r, t, 3),
                            ye(e,
                            function(e, t, n) {
                                if (r(e, t, n)) return i = t,
                                !1
                            }),
                            i
                        },
                        O.has = function(e, t) {
                            return !! e && w.call(e, t)
                        },
                        O.identity = Je,
                        O.indexOf = We,
                        O.isArguments = se,
                        O.isArray = ae,
                        O.isBoolean = function(e) {
                            return ! 0 === e || !1 === e || e && "object" == typeof e && x.call(e) == St || !1
                        },
                        O.isDate = function(e) {
                            return e && "object" == typeof e && x.call(e) == It || !1
                        },
                        O.isElement = function(e) {
                            return e && 1 === e.nodeType || !1
                        },
                        O.isEmpty = function(e) {
                            var t = !0;
                            if (!e) return t;
                            var n = x.call(e),
                            r = e.length;
                            return n == Ct || n == Rt || n == Et || n == kt && "number" == typeof r && be(e.splice) ? !r: (ve(e,
                            function() {
                                return t = !1
                            }), t)
                        },
                        O.isEqual = function(e, t, n, r) {
                            return V(e, t, "function" == typeof n && W(n, r, 2))
                        },
                        O.isFinite = function(e) {
                            return k(e) && !L(parseFloat(e))
                        },
                        O.isFunction = be,
                        O.isNaN = function(e) {
                            return we(e) && e != +e
                        },
                        O.isNull = function(e) {
                            return null === e
                        },
                        O.isNumber = we,
                        O.isObject = xe,
                        O.isPlainObject = Ae,
                        O.isRegExp = function(e) {
                            return e && "object" == typeof e && x.call(e) == Lt || !1
                        },
                        O.isString = Ee,
                        O.isUndefined = function(e) {
                            return void 0 === e
                        },
                        O.lastIndexOf = function(e, t, n) {
                            var r = e ? e.length: 0;
                            for ("number" == typeof n && (r = (n < 0 ? z(0, r + n) : M(n, r - 1)) + 1); r--;) if (e[r] === t) return r;
                            return - 1
                        },
                        O.mixin = Ke,
                        O.noConflict = function() {
                            return r._ = d,
                            this
                        },
                        O.noop = et,
                        O.now = nt,
                        O.parseInt = rt,
                        O.random = function(e, t, n) {
                            var r = null == e,
                            i = null == t;
                            if (null == n && ("boolean" == typeof e && i ? (n = e, e = 1) : i || "boolean" != typeof t || (n = t, i = !0)), r && i && (t = 1), e = +e || 0, i ? (t = e, e = 0) : t = +t || 0, n || e % 1 || t % 1) {
                                var o = F();
                                return M(e + o * (t - e + parseFloat("1e-" + ((o + "").length - 1))), t)
                            }
                            return Z(e, t)
                        },
                        O.reduce = Oe,
                        O.reduceRight = Be,
                        O.result = function(e, t) {
                            if (e) {
                                var n = e[t];
                                return be(n) ? e[t]() : n
                            }
                        },
                        O.runInContext = e,
                        O.size = function(e) {
                            var t = e ? e.length: 0;
                            return "number" == typeof t ? t: ue(e).length
                        },
                        O.some = Ue,
                        O.sortedIndex = qe,
                        O.template = function(s, e, t) {
                            var n = O.templateSettings;
                            s = b(s || ""),
                            t = pe({},
                            t, n);
                            var a, r = pe({},
                            t.imports, n.imports),
                            i = ue(r),
                            o = Ce(r),
                            u = 0,
                            l = t.interpolate || _t,
                            d = "__p += '",
                            c = y((t.escape || _t).source + "|" + l.source + "|" + (l === yt ? pt: _t).source + "|" + (t.evaluate || _t).source + "|$", "g");
                            s.replace(c,
                            function(e, t, n, r, i, o) {
                                return n || (n = r),
                                d += s.slice(u, o).replace(xt, Xt),
                                t && (d += "' +\n__e(" + t + ") +\n'"),
                                i && (a = !0, d += "';\n" + i + ";\n__p += '"),
                                n && (d += "' +\n((__t = (" + n + ")) == null ? '' : __t) +\n'"),
                                u = o + e.length,
                                e
                            }),
                            d += "';\n";
                            var h = t.variable,
                            f = h;
                            f || (d = "with (" + (h = "obj") + ") {\n" + d + "\n}\n"),
                            d = (a ? d.replace(ct, "") : d).replace(ht, "$1").replace(ft, "$1;"),
                            d = "function(" + h + ") {\n" + (f ? "": h + " || (" + h + " = {});\n") + "var __t, __p = '', __e = _.escape" + (a ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n": ";\n") + d + "return __p\n}";
                            var p = "\n/*\n//# sourceURL=" + (t.sourceURL || "/lodash/template/source[" + At+++"]") + "\n*/";
                            try {
                                var g = v(i, "return " + d + p).apply(st, o)
                            } catch(e) {
                                throw e.source = d,
                                e
                            }
                            return e ? g(e) : (g.source = d, g)
                        },
                        O.unescape = function(e) {
                            return null == e ? "": b(e).replace(ce, oe)
                        },
                        O.uniqueId = function(e) {
                            var t = ++at;
                            return b(null == e ? "": e) + t
                        },
                        O.all = Te,
                        O.any = Ue,
                        O.detect = ke,
                        O.findWhere = ke,
                        O.foldl = Oe,
                        O.foldr = Be,
                        O.include = Se,
                        O.inject = Oe,
                        Ke((tt = {},
                        ve(O,
                        function(e, t) {
                            O.prototype[t] || (tt[t] = e)
                        }), tt), !1),
                        O.first = Xe,
                        O.last = function(e, t, n) {
                            var r = 0,
                            i = e ? e.length: 0;
                            if ("number" != typeof t && null != t) {
                                var o = i;
                                for (t = O.createCallback(t, n, 3); o--&&t(e[o], o, e);) r++
                            } else if (null == (r = t) || n) return e ? e[i - 1] : st;
                            return Vt(e, z(0, i - r))
                        },
                        O.sample = function(e, t, n) {
                            if (e && "number" != typeof e.length && (e = Ce(e)), null == t || n) return e ? e[Z(0, e.length - 1)] : st;
                            var r = je(e);
                            return r.length = M(z(0, t), r.length),
                            r
                        },
                        O.take = Xe,
                        O.head = Xe,
                        ve(O,
                        function(i, e) {
                            var o = "sample" !== e;
                            O.prototype[e] || (O.prototype[e] = function(e, t) {
                                var n = this.__chain__,
                                r = i(this.__wrapped__, e, t);
                                return n || null != e && (!t || o && "function" == typeof e) ? new B(r, n) : r
                            })
                        }),
                        O.VERSION = "2.4.1",
                        O.prototype.chain = function() {
                            return this.__chain__ = !0,
                            this
                        },
                        O.prototype.toString = function() {
                            return b(this.__wrapped__)
                        },
                        O.prototype.value = ot,
                        O.prototype.valueOf = ot,
                        Le(["join", "pop", "shift"],
                        function(e) {
                            var n = a[e];
                            O.prototype[e] = function() {
                                var e = this.__chain__,
                                t = n.apply(this.__wrapped__, arguments);
                                return e ? new B(t, e) : t
                            }
                        }),
                        Le(["push", "reverse", "sort", "unshift"],
                        function(e) {
                            var t = a[e];
                            O.prototype[e] = function() {
                                return t.apply(this.__wrapped__, arguments),
                                this
                            }
                        }),
                        Le(["concat", "slice", "splice"],
                        function(e) {
                            var t = a[e];
                            O.prototype[e] = function() {
                                return new B(t.apply(this.__wrapped__, arguments), this.__chain__)
                            }
                        }),
                        O
                    } ();
                    e && o ? s ? (o.exports = $t)._ = $t: e._ = $t: Dt._ = $t
                }).call(this)
            }).call(this, "undefined" != typeof global ? global: "undefined" != typeof self ? self: "undefined" != typeof window ? window: {})
        },
        {}]
    },
    {},
    [1])(1)
}),
function(e, t) {
    "use strict";
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e)
    }: t(e)
} ("undefined" != typeof window ? window: this,
function(A, e) {
    "use strict";
    var t = [],
    E = A.document,
    r = Object.getPrototypeOf,
    a = t.slice,
    g = t.concat,
    u = t.push,
    i = t.indexOf,
    n = {},
    o = n.toString,
    p = n.hasOwnProperty,
    s = p.toString,
    l = s.call(Object),
    v = {};
    function y(e, t) {
        var n = (t = t || E).createElement("script");
        n.text = e,
        t.head.appendChild(n).parentNode.removeChild(n)
    }
    var C = function(e, t) {
        return new C.fn.init(e, t)
    },
    d = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    c = /^-ms-/,
    h = /-([a-z])/g,
    f = function(e, t) {
        return t.toUpperCase()
    };
    function m(e) {
        var t = !!e && "length" in e && e.length,
        n = C.type(e);
        return "function" !== n && !C.isWindow(e) && ("array" === n || 0 === t || "number" == typeof t && 0 < t && t - 1 in e)
    }
    C.fn = C.prototype = {
        jquery: "3.2.1",
        constructor: C,
        length: 0,
        toArray: function() {
            return a.call(this)
        },
        get: function(e) {
            return null == e ? a.call(this) : e < 0 ? this[e + this.length] : this[e]
        },
        pushStack: function(e) {
            var t = C.merge(this.constructor(), e);
            return t.prevObject = this,
            t
        },
        each: function(e) {
            return C.each(this, e)
        },
        map: function(n) {
            return this.pushStack(C.map(this,
            function(e, t) {
                return n.call(e, t, e)
            }))
        },
        slice: function() {
            return this.pushStack(a.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq( - 1)
        },
        eq: function(e) {
            var t = this.length,
            n = +e + (e < 0 ? t: 0);
            return this.pushStack(0 <= n && n < t ? [this[n]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor()
        },
        push: u,
        sort: t.sort,
        splice: t.splice
    },
    C.extend = C.fn.extend = function() {
        var e, t, n, r, i, o, s = arguments[0] || {},
        a = 1,
        u = arguments.length,
        l = !1;
        for ("boolean" == typeof s && (l = s, s = arguments[a] || {},
        a++), "object" == typeof s || C.isFunction(s) || (s = {}), a === u && (s = this, a--); a < u; a++) if (null != (e = arguments[a])) for (t in e) n = s[t],
        s !== (r = e[t]) && (l && r && (C.isPlainObject(r) || (i = Array.isArray(r))) ? (i ? (i = !1, o = n && Array.isArray(n) ? n: []) : o = n && C.isPlainObject(n) ? n: {},
        s[t] = C.extend(l, o, r)) : void 0 !== r && (s[t] = r));
        return s
    },
    C.extend({
        expando: "jQuery" + ("3.2.1" + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(e) {
            throw new Error(e)
        },
        noop: function() {},
        isFunction: function(e) {
            return "function" === C.type(e)
        },
        isWindow: function(e) {
            return null != e && e === e.window
        },
        isNumeric: function(e) {
            var t = C.type(e);
            return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e))
        },
        isPlainObject: function(e) {
            var t, n;
            return ! (!e || "[object Object]" !== o.call(e) || (t = r(e)) && ("function" != typeof(n = p.call(t, "constructor") && t.constructor) || s.call(n) !== l))
        },
        isEmptyObject: function(e) {
            var t;
            for (t in e) return ! 1;
            return ! 0
        },
        type: function(e) {
            return null == e ? e + "": "object" == typeof e || "function" == typeof e ? n[o.call(e)] || "object": typeof e
        },
        globalEval: function(e) {
            y(e)
        },
        camelCase: function(e) {
            return e.replace(c, "ms-").replace(h, f)
        },
        each: function(e, t) {
            var n, r = 0;
            if (m(e)) for (n = e.length; r < n && !1 !== t.call(e[r], r, e[r]); r++);
            else for (r in e) if (!1 === t.call(e[r], r, e[r])) break;
            return e
        },
        trim: function(e) {
            return null == e ? "": (e + "").replace(d, "")
        },
        makeArray: function(e, t) {
            var n = t || [];
            return null != e && (m(Object(e)) ? C.merge(n, "string" == typeof e ? [e] : e) : u.call(n, e)),
            n
        },
        inArray: function(e, t, n) {
            return null == t ? -1 : i.call(t, e, n)
        },
        merge: function(e, t) {
            for (var n = +t.length,
            r = 0,
            i = e.length; r < n; r++) e[i++] = t[r];
            return e.length = i,
            e
        },
        grep: function(e, t, n) {
            for (var r = [], i = 0, o = e.length, s = !n; i < o; i++) ! t(e[i], i) !== s && r.push(e[i]);
            return r
        },
        map: function(e, t, n) {
            var r, i, o = 0,
            s = [];
            if (m(e)) for (r = e.length; o < r; o++) null != (i = t(e[o], o, n)) && s.push(i);
            else for (o in e) null != (i = t(e[o], o, n)) && s.push(i);
            return g.apply([], s)
        },
        guid: 1,
        proxy: function(e, t) {
            var n, r, i;
            if ("string" == typeof t && (n = e[t], t = e, e = n), C.isFunction(e)) return r = a.call(arguments, 2),
            (i = function() {
                return e.apply(t || this, r.concat(a.call(arguments)))
            }).guid = e.guid = e.guid || C.guid++,
            i
        },
        now: Date.now,
        support: v
    }),
    "function" == typeof Symbol && (C.fn[Symbol.iterator] = t[Symbol.iterator]),
    C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
    function(e, t) {
        n["[object " + t + "]"] = t.toLowerCase()
    });
    var _ = function(n) {
        var e, f, b, o, i, p, c, g, x, u, l, w, A, s, E, v, a, d, y, C = "sizzle" + 1 * new Date,
        m = n.document,
        S = 0,
        r = 0,
        h = se(),
        _ = se(),
        I = se(),
        T = function(e, t) {
            return e === t && (l = !0),
            0
        },
        N = {}.hasOwnProperty,
        t = [],
        k = t.pop,
        L = t.push,
        R = t.push,
        z = t.slice,
        M = function(e, t) {
            for (var n = 0,
            r = e.length; n < r; n++) if (e[n] === t) return n;
            return - 1
        },
        P = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
        F = "[\\x20\\t\\r\\n\\f]",
        D = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",
        O = "\\[" + F + "*(" + D + ")(?:" + F + "*([*^$|!~]?=)" + F + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + D + "))|)" + F + "*\\]",
        B = ":(" + D + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + O + ")*)|.*)\\)|)",
        j = new RegExp(F + "+", "g"),
        U = new RegExp("^" + F + "+|((?:^|[^\\\\])(?:\\\\.)*)" + F + "+$", "g"),
        H = new RegExp("^" + F + "*," + F + "*"),
        X = new RegExp("^" + F + "*([>+~]|" + F + ")" + F + "*"),
        W = new RegExp("=" + F + "*([^\\]'\"]*?)" + F + "*\\]", "g"),
        G = new RegExp(B),
        q = new RegExp("^" + D + "$"),
        Y = {
            ID: new RegExp("^#(" + D + ")"),
            CLASS: new RegExp("^\\.(" + D + ")"),
            TAG: new RegExp("^(" + D + "|[*])"),
            ATTR: new RegExp("^" + O),
            PSEUDO: new RegExp("^" + B),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + F + "*(even|odd|(([+-]|)(\\d*)n|)" + F + "*(?:([+-]|)" + F + "*(\\d+)|))" + F + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + P + ")$", "i"),
            needsContext: new RegExp("^" + F + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + F + "*((?:-\\d)?\\d*)" + F + "*\\)|)(?=[^-]|$)", "i")
        },
        V = /^(?:input|select|textarea|button)$/i,
        $ = /^h\d$/i,
        Z = /^[^{]+\{\s*\[native \w/,
        Q = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        J = /[+~]/,
        K = new RegExp("\\\\([\\da-f]{1,6}" + F + "?|(" + F + ")|.)", "ig"),
        ee = function(e, t, n) {
            var r = "0x" + t - 65536;
            return r != r || n ? t: r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
        },
        te = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
        ne = function(e, t) {
            return t ? "\0" === e ? "": e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " ": "\\" + e
        },
        re = function() {
            w()
        },
        ie = me(function(e) {
            return ! 0 === e.disabled && ("form" in e || "label" in e)
        },
        {
            dir: "parentNode",
            next: "legend"
        });
        try {
            R.apply(t = z.call(m.childNodes), m.childNodes),
            t[m.childNodes.length].nodeType
        } catch(e) {
            R = {
                apply: t.length ?
                function(e, t) {
                    L.apply(e, z.call(t))
                }: function(e, t) {
                    for (var n = e.length,
                    r = 0; e[n++] = t[r++];);
                    e.length = n - 1
                }
            }
        }
        function oe(e, t, n, r) {
            var i, o, s, a, u, l, d, c = t && t.ownerDocument,
            h = t ? t.nodeType: 9;
            if (n = n || [], "string" != typeof e || !e || 1 !== h && 9 !== h && 11 !== h) return n;
            if (!r && ((t ? t.ownerDocument || t: m) !== A && w(t), t = t || A, E)) {
                if (11 !== h && (u = Q.exec(e))) if (i = u[1]) {
                    if (9 === h) {
                        if (! (s = t.getElementById(i))) return n;
                        if (s.id === i) return n.push(s),
                        n
                    } else if (c && (s = c.getElementById(i)) && y(t, s) && s.id === i) return n.push(s),
                    n
                } else {
                    if (u[2]) return R.apply(n, t.getElementsByTagName(e)),
                    n;
                    if ((i = u[3]) && f.getElementsByClassName && t.getElementsByClassName) return R.apply(n, t.getElementsByClassName(i)),
                    n
                }
                if (f.qsa && !I[e + " "] && (!v || !v.test(e))) {
                    if (1 !== h) c = t,
                    d = e;
                    else if ("object" !== t.nodeName.toLowerCase()) {
                        for ((a = t.getAttribute("id")) ? a = a.replace(te, ne) : t.setAttribute("id", a = C), o = (l = p(e)).length; o--;) l[o] = "#" + a + " " + ye(l[o]);
                        d = l.join(","),
                        c = J.test(e) && ge(t.parentNode) || t
                    }
                    if (d) try {
                        return R.apply(n, c.querySelectorAll(d)),
                        n
                    } catch(e) {} finally {
                        a === C && t.removeAttribute("id")
                    }
                }
            }
            return g(e.replace(U, "$1"), t, n, r)
        }
        function se() {
            var r = [];
            return function e(t, n) {
                return r.push(t + " ") > b.cacheLength && delete e[r.shift()],
                e[t + " "] = n
            }
        }
        function ae(e) {
            return e[C] = !0,
            e
        }
        function ue(e) {
            var t = A.createElement("fieldset");
            try {
                return !! e(t)
            } catch(e) {
                return ! 1
            } finally {
                t.parentNode && t.parentNode.removeChild(t),
                t = null
            }
        }
        function le(e, t) {
            for (var n = e.split("|"), r = n.length; r--;) b.attrHandle[n[r]] = t
        }
        function de(e, t) {
            var n = t && e,
            r = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex;
            if (r) return r;
            if (n) for (; n = n.nextSibling;) if (n === t) return - 1;
            return e ? 1 : -1
        }
        function ce(t) {
            return function(e) {
                return "input" === e.nodeName.toLowerCase() && e.type === t
            }
        }
        function he(n) {
            return function(e) {
                var t = e.nodeName.toLowerCase();
                return ("input" === t || "button" === t) && e.type === n
            }
        }
        function fe(t) {
            return function(e) {
                return "form" in e ? e.parentNode && !1 === e.disabled ? "label" in e ? "label" in e.parentNode ? e.parentNode.disabled === t: e.disabled === t: e.isDisabled === t || e.isDisabled !== !t && ie(e) === t: e.disabled === t: "label" in e && e.disabled === t
            }
        }
        function pe(s) {
            return ae(function(o) {
                return o = +o,
                ae(function(e, t) {
                    for (var n, r = s([], e.length, o), i = r.length; i--;) e[n = r[i]] && (e[n] = !(t[n] = e[n]))
                })
            })
        }
        function ge(e) {
            return e && void 0 !== e.getElementsByTagName && e
        }
        for (e in f = oe.support = {},
        i = oe.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return !! t && "HTML" !== t.nodeName
        },
        w = oe.setDocument = function(e) {
            var t, n, r = e ? e.ownerDocument || e: m;
            return r !== A && 9 === r.nodeType && r.documentElement && (s = (A = r).documentElement, E = !i(A), m !== A && (n = A.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", re, !1) : n.attachEvent && n.attachEvent("onunload", re)), f.attributes = ue(function(e) {
                return e.className = "i",
                !e.getAttribute("className")
            }), f.getElementsByTagName = ue(function(e) {
                return e.appendChild(A.createComment("")),
                !e.getElementsByTagName("*").length
            }), f.getElementsByClassName = Z.test(A.getElementsByClassName), f.getById = ue(function(e) {
                return s.appendChild(e).id = C,
                !A.getElementsByName || !A.getElementsByName(C).length
            }), f.getById ? (b.filter.ID = function(e) {
                var t = e.replace(K, ee);
                return function(e) {
                    return e.getAttribute("id") === t
                }
            },
            b.find.ID = function(e, t) {
                if (void 0 !== t.getElementById && E) {
                    var n = t.getElementById(e);
                    return n ? [n] : []
                }
            }) : (b.filter.ID = function(e) {
                var n = e.replace(K, ee);
                return function(e) {
                    var t = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                    return t && t.value === n
                }
            },
            b.find.ID = function(e, t) {
                if (void 0 !== t.getElementById && E) {
                    var n, r, i, o = t.getElementById(e);
                    if (o) {
                        if ((n = o.getAttributeNode("id")) && n.value === e) return [o];
                        for (i = t.getElementsByName(e), r = 0; o = i[r++];) if ((n = o.getAttributeNode("id")) && n.value === e) return [o]
                    }
                    return []
                }
            }), b.find.TAG = f.getElementsByTagName ?
            function(e, t) {
                return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : f.qsa ? t.querySelectorAll(e) : void 0
            }: function(e, t) {
                var n, r = [],
                i = 0,
                o = t.getElementsByTagName(e);
                if ("*" === e) {
                    for (; n = o[i++];) 1 === n.nodeType && r.push(n);
                    return r
                }
                return o
            },
            b.find.CLASS = f.getElementsByClassName &&
            function(e, t) {
                if (void 0 !== t.getElementsByClassName && E) return t.getElementsByClassName(e)
            },
            a = [], v = [], (f.qsa = Z.test(A.querySelectorAll)) && (ue(function(e) {
                s.appendChild(e).innerHTML = "<a id='" + C + "'></a><select id='" + C + "-\r\\' msallowcapture=''><option selected=''></option></select>",
                e.querySelectorAll("[msallowcapture^='']").length && v.push("[*^$]=" + F + "*(?:''|\"\")"),
                e.querySelectorAll("[selected]").length || v.push("\\[" + F + "*(?:value|" + P + ")"),
                e.querySelectorAll("[id~=" + C + "-]").length || v.push("~="),
                e.querySelectorAll(":checked").length || v.push(":checked"),
                e.querySelectorAll("a#" + C + "+*").length || v.push(".#.+[+~]")
            }), ue(function(e) {
                e.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                var t = A.createElement("input");
                t.setAttribute("type", "hidden"),
                e.appendChild(t).setAttribute("name", "D"),
                e.querySelectorAll("[name=d]").length && v.push("name" + F + "*[*^$|!~]?="),
                2 !== e.querySelectorAll(":enabled").length && v.push(":enabled", ":disabled"),
                s.appendChild(e).disabled = !0,
                2 !== e.querySelectorAll(":disabled").length && v.push(":enabled", ":disabled"),
                e.querySelectorAll("*,:x"),
                v.push(",.*:")
            })), (f.matchesSelector = Z.test(d = s.matches || s.webkitMatchesSelector || s.mozMatchesSelector || s.oMatchesSelector || s.msMatchesSelector)) && ue(function(e) {
                f.disconnectedMatch = d.call(e, "*"),
                d.call(e, "[s!='']:x"),
                a.push("!=", B)
            }), v = v.length && new RegExp(v.join("|")), a = a.length && new RegExp(a.join("|")), t = Z.test(s.compareDocumentPosition), y = t || Z.test(s.contains) ?
            function(e, t) {
                var n = 9 === e.nodeType ? e.documentElement: e,
                r = t && t.parentNode;
                return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
            }: function(e, t) {
                if (t) for (; t = t.parentNode;) if (t === e) return ! 0;
                return ! 1
            },
            T = t ?
            function(e, t) {
                if (e === t) return l = !0,
                0;
                var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return n || (1 & (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !f.sortDetached && t.compareDocumentPosition(e) === n ? e === A || e.ownerDocument === m && y(m, e) ? -1 : t === A || t.ownerDocument === m && y(m, t) ? 1 : u ? M(u, e) - M(u, t) : 0 : 4 & n ? -1 : 1)
            }: function(e, t) {
                if (e === t) return l = !0,
                0;
                var n, r = 0,
                i = e.parentNode,
                o = t.parentNode,
                s = [e],
                a = [t];
                if (!i || !o) return e === A ? -1 : t === A ? 1 : i ? -1 : o ? 1 : u ? M(u, e) - M(u, t) : 0;
                if (i === o) return de(e, t);
                for (n = e; n = n.parentNode;) s.unshift(n);
                for (n = t; n = n.parentNode;) a.unshift(n);
                for (; s[r] === a[r];) r++;
                return r ? de(s[r], a[r]) : s[r] === m ? -1 : a[r] === m ? 1 : 0
            }),
            A
        },
        oe.matches = function(e, t) {
            return oe(e, null, null, t)
        },
        oe.matchesSelector = function(e, t) {
            if ((e.ownerDocument || e) !== A && w(e), t = t.replace(W, "='$1']"), f.matchesSelector && E && !I[t + " "] && (!a || !a.test(t)) && (!v || !v.test(t))) try {
                var n = d.call(e, t);
                if (n || f.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n
            } catch(e) {}
            return 0 < oe(t, A, null, [e]).length
        },
        oe.contains = function(e, t) {
            return (e.ownerDocument || e) !== A && w(e),
            y(e, t)
        },
        oe.attr = function(e, t) { (e.ownerDocument || e) !== A && w(e);
            var n = b.attrHandle[t.toLowerCase()],
            r = n && N.call(b.attrHandle, t.toLowerCase()) ? n(e, t, !E) : void 0;
            return void 0 !== r ? r: f.attributes || !E ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value: null
        },
        oe.escape = function(e) {
            return (e + "").replace(te, ne)
        },
        oe.error = function(e) {
            throw new Error("Syntax error, unrecognized expression: " + e)
        },
        oe.uniqueSort = function(e) {
            var t, n = [],
            r = 0,
            i = 0;
            if (l = !f.detectDuplicates, u = !f.sortStable && e.slice(0), e.sort(T), l) {
                for (; t = e[i++];) t === e[i] && (r = n.push(i));
                for (; r--;) e.splice(n[r], 1)
            }
            return u = null,
            e
        },
        o = oe.getText = function(e) {
            var t, n = "",
            r = 0,
            i = e.nodeType;
            if (i) {
                if (1 === i || 9 === i || 11 === i) {
                    if ("string" == typeof e.textContent) return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) n += o(e)
                } else if (3 === i || 4 === i) return e.nodeValue
            } else for (; t = e[r++];) n += o(t);
            return n
        },
        (b = oe.selectors = {
            cacheLength: 50,
            createPseudo: ae,
            match: Y,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(e) {
                    return e[1] = e[1].replace(K, ee),
                    e[3] = (e[3] || e[4] || e[5] || "").replace(K, ee),
                    "~=" === e[2] && (e[3] = " " + e[3] + " "),
                    e.slice(0, 4)
                },
                CHILD: function(e) {
                    return e[1] = e[1].toLowerCase(),
                    "nth" === e[1].slice(0, 3) ? (e[3] || oe.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && oe.error(e[0]),
                    e
                },
                PSEUDO: function(e) {
                    var t, n = !e[6] && e[2];
                    return Y.CHILD.test(e[0]) ? null: (e[3] ? e[2] = e[4] || e[5] || "": n && G.test(n) && (t = p(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                }
            },
            filter: {
                TAG: function(e) {
                    var t = e.replace(K, ee).toLowerCase();
                    return "*" === e ?
                    function() {
                        return ! 0
                    }: function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t
                    }
                },
                CLASS: function(e) {
                    var t = h[e + " "];
                    return t || (t = new RegExp("(^|" + F + ")" + e + "(" + F + "|$)")) && h(e,
                    function(e) {
                        return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "")
                    })
                },
                ATTR: function(n, r, i) {
                    return function(e) {
                        var t = oe.attr(e, n);
                        return null == t ? "!=" === r: !r || (t += "", "=" === r ? t === i: "!=" === r ? t !== i: "^=" === r ? i && 0 === t.indexOf(i) : "*=" === r ? i && -1 < t.indexOf(i) : "$=" === r ? i && t.slice( - i.length) === i: "~=" === r ? -1 < (" " + t.replace(j, " ") + " ").indexOf(i) : "|=" === r && (t === i || t.slice(0, i.length + 1) === i + "-"))
                    }
                },
                CHILD: function(p, e, t, g, v) {
                    var y = "nth" !== p.slice(0, 3),
                    m = "last" !== p.slice( - 4),
                    _ = "of-type" === e;
                    return 1 === g && 0 === v ?
                    function(e) {
                        return !! e.parentNode
                    }: function(e, t, n) {
                        var r, i, o, s, a, u, l = y !== m ? "nextSibling": "previousSibling",
                        d = e.parentNode,
                        c = _ && e.nodeName.toLowerCase(),
                        h = !n && !_,
                        f = !1;
                        if (d) {
                            if (y) {
                                for (; l;) {
                                    for (s = e; s = s[l];) if (_ ? s.nodeName.toLowerCase() === c: 1 === s.nodeType) return ! 1;
                                    u = l = "only" === p && !u && "nextSibling"
                                }
                                return ! 0
                            }
                            if (u = [m ? d.firstChild: d.lastChild], m && h) {
                                for (f = (a = (r = (i = (o = (s = d)[C] || (s[C] = {}))[s.uniqueID] || (o[s.uniqueID] = {}))[p] || [])[0] === S && r[1]) && r[2], s = a && d.childNodes[a]; s = ++a && s && s[l] || (f = a = 0) || u.pop();) if (1 === s.nodeType && ++f && s === e) {
                                    i[p] = [S, a, f];
                                    break
                                }
                            } else if (h && (f = a = (r = (i = (o = (s = e)[C] || (s[C] = {}))[s.uniqueID] || (o[s.uniqueID] = {}))[p] || [])[0] === S && r[1]), !1 === f) for (; (s = ++a && s && s[l] || (f = a = 0) || u.pop()) && ((_ ? s.nodeName.toLowerCase() !== c: 1 !== s.nodeType) || !++f || (h && ((i = (o = s[C] || (s[C] = {}))[s.uniqueID] || (o[s.uniqueID] = {}))[p] = [S, f]), s !== e)););
                            return (f -= v) === g || f % g == 0 && 0 <= f / g
                        }
                    }
                },
                PSEUDO: function(e, o) {
                    var t, s = b.pseudos[e] || b.setFilters[e.toLowerCase()] || oe.error("unsupported pseudo: " + e);
                    return s[C] ? s(o) : 1 < s.length ? (t = [e, e, "", o], b.setFilters.hasOwnProperty(e.toLowerCase()) ? ae(function(e, t) {
                        for (var n, r = s(e, o), i = r.length; i--;) e[n = M(e, r[i])] = !(t[n] = r[i])
                    }) : function(e) {
                        return s(e, 0, t)
                    }) : s
                }
            },
            pseudos: {
                not: ae(function(e) {
                    var r = [],
                    i = [],
                    a = c(e.replace(U, "$1"));
                    return a[C] ? ae(function(e, t, n, r) {
                        for (var i, o = a(e, null, r, []), s = e.length; s--;)(i = o[s]) && (e[s] = !(t[s] = i))
                    }) : function(e, t, n) {
                        return r[0] = e,
                        a(r, null, n, i),
                        r[0] = null,
                        !i.pop()
                    }
                }),
                has: ae(function(t) {
                    return function(e) {
                        return 0 < oe(t, e).length
                    }
                }),
                contains: ae(function(t) {
                    return t = t.replace(K, ee),
                    function(e) {
                        return - 1 < (e.textContent || e.innerText || o(e)).indexOf(t)
                    }
                }),
                lang: ae(function(n) {
                    return q.test(n || "") || oe.error("unsupported lang: " + n),
                    n = n.replace(K, ee).toLowerCase(),
                    function(e) {
                        var t;
                        do {
                            if (t = E ? e.lang: e.getAttribute("xml:lang") || e.getAttribute("lang")) return (t = t.toLowerCase()) === n || 0 === t.indexOf(n + "-")
                        } while (( e = e . parentNode ) && 1 === e.nodeType);
                        return ! 1
                    }
                }),
                target: function(e) {
                    var t = n.location && n.location.hash;
                    return t && t.slice(1) === e.id
                },
                root: function(e) {
                    return e === s
                },
                focus: function(e) {
                    return e === A.activeElement && (!A.hasFocus || A.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                },
                enabled: fe(!1),
                disabled: fe(!0),
                checked: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected
                },
                selected: function(e) {
                    return e.parentNode && e.parentNode.selectedIndex,
                    !0 === e.selected
                },
                empty: function(e) {
                    for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return ! 1;
                    return ! 0
                },
                parent: function(e) {
                    return ! b.pseudos.empty(e)
                },
                header: function(e) {
                    return $.test(e.nodeName)
                },
                input: function(e) {
                    return V.test(e.nodeName)
                },
                button: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t
                },
                text: function(e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                },
                first: pe(function() {
                    return [0]
                }),
                last: pe(function(e, t) {
                    return [t - 1]
                }),
                eq: pe(function(e, t, n) {
                    return [n < 0 ? n + t: n]
                }),
                even: pe(function(e, t) {
                    for (var n = 0; n < t; n += 2) e.push(n);
                    return e
                }),
                odd: pe(function(e, t) {
                    for (var n = 1; n < t; n += 2) e.push(n);
                    return e
                }),
                lt: pe(function(e, t, n) {
                    for (var r = n < 0 ? n + t: n; 0 <= --r;) e.push(r);
                    return e
                }),
                gt: pe(function(e, t, n) {
                    for (var r = n < 0 ? n + t: n; ++r < t;) e.push(r);
                    return e
                })
            }
        }).pseudos.nth = b.pseudos.eq, {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) b.pseudos[e] = ce(e);
        for (e in {
            submit: !0,
            reset: !0
        }) b.pseudos[e] = he(e);
        function ve() {}
        function ye(e) {
            for (var t = 0,
            n = e.length,
            r = ""; t < n; t++) r += e[t].value;
            return r
        }
        function me(a, e, t) {
            var u = e.dir,
            l = e.next,
            d = l || u,
            c = t && "parentNode" === d,
            h = r++;
            return e.first ?
            function(e, t, n) {
                for (; e = e[u];) if (1 === e.nodeType || c) return a(e, t, n);
                return ! 1
            }: function(e, t, n) {
                var r, i, o, s = [S, h];
                if (n) {
                    for (; e = e[u];) if ((1 === e.nodeType || c) && a(e, t, n)) return ! 0
                } else for (; e = e[u];) if (1 === e.nodeType || c) if (i = (o = e[C] || (e[C] = {}))[e.uniqueID] || (o[e.uniqueID] = {}), l && l === e.nodeName.toLowerCase()) e = e[u] || e;
                else {
                    if ((r = i[d]) && r[0] === S && r[1] === h) return s[2] = r[2];
                    if ((i[d] = s)[2] = a(e, t, n)) return ! 0
                }
                return ! 1
            }
        }
        function _e(i) {
            return 1 < i.length ?
            function(e, t, n) {
                for (var r = i.length; r--;) if (!i[r](e, t, n)) return ! 1;
                return ! 0
            }: i[0]
        }
        function be(e, t, n, r, i) {
            for (var o, s = [], a = 0, u = e.length, l = null != t; a < u; a++)(o = e[a]) && (n && !n(o, r, i) || (s.push(o), l && t.push(a)));
            return s
        }
        function xe(f, p, g, v, y, e) {
            return v && !v[C] && (v = xe(v)),
            y && !y[C] && (y = xe(y, e)),
            ae(function(e, t, n, r) {
                var i, o, s, a = [],
                u = [],
                l = t.length,
                d = e ||
                function(e, t, n) {
                    for (var r = 0,
                    i = t.length; r < i; r++) oe(e, t[r], n);
                    return n
                } (p || "*", n.nodeType ? [n] : n, []),
                c = !f || !e && p ? d: be(d, a, f, n, r),
                h = g ? y || (e ? f: l || v) ? [] : t: c;
                if (g && g(c, h, n, r), v) for (i = be(h, u), v(i, [], n, r), o = i.length; o--;)(s = i[o]) && (h[u[o]] = !(c[u[o]] = s));
                if (e) {
                    if (y || f) {
                        if (y) {
                            for (i = [], o = h.length; o--;)(s = h[o]) && i.push(c[o] = s);
                            y(null, h = [], i, r)
                        }
                        for (o = h.length; o--;)(s = h[o]) && -1 < (i = y ? M(e, s) : a[o]) && (e[i] = !(t[i] = s))
                    }
                } else h = be(h === t ? h.splice(l, h.length) : h),
                y ? y(null, t, h, r) : R.apply(t, h)
            })
        }
        function we(e) {
            for (var i, t, n, r = e.length,
            o = b.relative[e[0].type], s = o || b.relative[" "], a = o ? 1 : 0, u = me(function(e) {
                return e === i
            },
            s, !0), l = me(function(e) {
                return - 1 < M(i, e)
            },
            s, !0), d = [function(e, t, n) {
                var r = !o && (n || t !== x) || ((i = t).nodeType ? u(e, t, n) : l(e, t, n));
                return i = null,
                r
            }]; a < r; a++) if (t = b.relative[e[a].type]) d = [me(_e(d), t)];
            else {
                if ((t = b.filter[e[a].type].apply(null, e[a].matches))[C]) {
                    for (n = ++a; n < r && !b.relative[e[n].type]; n++);
                    return xe(1 < a && _e(d), 1 < a && ye(e.slice(0, a - 1).concat({
                        value: " " === e[a - 2].type ? "*": ""
                    })).replace(U, "$1"), t, a < n && we(e.slice(a, n)), n < r && we(e = e.slice(n)), n < r && ye(e))
                }
                d.push(t)
            }
            return _e(d)
        }
        return ve.prototype = b.filters = b.pseudos,
        b.setFilters = new ve,
        p = oe.tokenize = function(e, t) {
            var n, r, i, o, s, a, u, l = _[e + " "];
            if (l) return t ? 0 : l.slice(0);
            for (s = e, a = [], u = b.preFilter; s;) {
                for (o in n && !(r = H.exec(s)) || (r && (s = s.slice(r[0].length) || s), a.push(i = [])), n = !1, (r = X.exec(s)) && (n = r.shift(), i.push({
                    value: n,
                    type: r[0].replace(U, " ")
                }), s = s.slice(n.length)), b.filter) ! (r = Y[o].exec(s)) || u[o] && !(r = u[o](r)) || (n = r.shift(), i.push({
                    value: n,
                    type: o,
                    matches: r
                }), s = s.slice(n.length));
                if (!n) break
            }
            return t ? s.length: s ? oe.error(e) : _(e, a).slice(0)
        },
        c = oe.compile = function(e, t) {
            var n, v, y, m, _, r, i = [],
            o = [],
            s = I[e + " "];
            if (!s) {
                for (t || (t = p(e)), n = t.length; n--;)(s = we(t[n]))[C] ? i.push(s) : o.push(s); (s = I(e, (v = o, m = 0 < (y = i).length, _ = 0 < v.length, r = function(e, t, n, r, i) {
                    var o, s, a, u = 0,
                    l = "0",
                    d = e && [],
                    c = [],
                    h = x,
                    f = e || _ && b.find.TAG("*", i),
                    p = S += null == h ? 1 : Math.random() || .1,
                    g = f.length;
                    for (i && (x = t === A || t || i); l !== g && null != (o = f[l]); l++) {
                        if (_ && o) {
                            for (s = 0, t || o.ownerDocument === A || (w(o), n = !E); a = v[s++];) if (a(o, t || A, n)) {
                                r.push(o);
                                break
                            }
                            i && (S = p)
                        }
                        m && ((o = !a && o) && u--, e && d.push(o))
                    }
                    if (u += l, m && l !== u) {
                        for (s = 0; a = y[s++];) a(d, c, t, n);
                        if (e) {
                            if (0 < u) for (; l--;) d[l] || c[l] || (c[l] = k.call(r));
                            c = be(c)
                        }
                        R.apply(r, c),
                        i && !e && 0 < c.length && 1 < u + y.length && oe.uniqueSort(r)
                    }
                    return i && (S = p, x = h),
                    d
                },
                m ? ae(r) : r))).selector = e
            }
            return s
        },
        g = oe.select = function(e, t, n, r) {
            var i, o, s, a, u, l = "function" == typeof e && e,
            d = !r && p(e = l.selector || e);
            if (n = n || [], 1 === d.length) {
                if (2 < (o = d[0] = d[0].slice(0)).length && "ID" === (s = o[0]).type && 9 === t.nodeType && E && b.relative[o[1].type]) {
                    if (! (t = (b.find.ID(s.matches[0].replace(K, ee), t) || [])[0])) return n;
                    l && (t = t.parentNode),
                    e = e.slice(o.shift().value.length)
                }
                for (i = Y.needsContext.test(e) ? 0 : o.length; i--&&(s = o[i], !b.relative[a = s.type]);) if ((u = b.find[a]) && (r = u(s.matches[0].replace(K, ee), J.test(o[0].type) && ge(t.parentNode) || t))) {
                    if (o.splice(i, 1), !(e = r.length && ye(o))) return R.apply(n, r),
                    n;
                    break
                }
            }
            return (l || c(e, d))(r, t, !E, n, !t || J.test(e) && ge(t.parentNode) || t),
            n
        },
        f.sortStable = C.split("").sort(T).join("") === C,
        f.detectDuplicates = !!l,
        w(),
        f.sortDetached = ue(function(e) {
            return 1 & e.compareDocumentPosition(A.createElement("fieldset"))
        }),
        ue(function(e) {
            return e.innerHTML = "<a href='#'></a>",
            "#" === e.firstChild.getAttribute("href")
        }) || le("type|href|height|width",
        function(e, t, n) {
            if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
        }),
        f.attributes && ue(function(e) {
            return e.innerHTML = "<input/>",
            e.firstChild.setAttribute("value", ""),
            "" === e.firstChild.getAttribute("value")
        }) || le("value",
        function(e, t, n) {
            if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue
        }),
        ue(function(e) {
            return null == e.getAttribute("disabled")
        }) || le(P,
        function(e, t, n) {
            var r;
            if (!n) return ! 0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value: null
        }),
        oe
    } (A);
    C.find = _,
    C.expr = _.selectors,
    C.expr[":"] = C.expr.pseudos,
    C.uniqueSort = C.unique = _.uniqueSort,
    C.text = _.getText,
    C.isXMLDoc = _.isXML,
    C.contains = _.contains,
    C.escapeSelector = _.escape;
    var b = function(e, t, n) {
        for (var r = [], i = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;) if (1 === e.nodeType) {
            if (i && C(e).is(n)) break;
            r.push(e)
        }
        return r
    },
    x = function(e, t) {
        for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
        return n
    },
    w = C.expr.match.needsContext;
    function S(e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
    }
    var I = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
    T = /^.[^:#\[\.,]*$/;
    function N(e, n, r) {
        return C.isFunction(n) ? C.grep(e,
        function(e, t) {
            return !! n.call(e, t, e) !== r
        }) : n.nodeType ? C.grep(e,
        function(e) {
            return e === n !== r
        }) : "string" != typeof n ? C.grep(e,
        function(e) {
            return - 1 < i.call(n, e) !== r
        }) : T.test(n) ? C.filter(n, e, r) : (n = C.filter(n, e), C.grep(e,
        function(e) {
            return - 1 < i.call(n, e) !== r && 1 === e.nodeType
        }))
    }
    C.filter = function(e, t, n) {
        var r = t[0];
        return n && (e = ":not(" + e + ")"),
        1 === t.length && 1 === r.nodeType ? C.find.matchesSelector(r, e) ? [r] : [] : C.find.matches(e, C.grep(t,
        function(e) {
            return 1 === e.nodeType
        }))
    },
    C.fn.extend({
        find: function(e) {
            var t, n, r = this.length,
            i = this;
            if ("string" != typeof e) return this.pushStack(C(e).filter(function() {
                for (t = 0; t < r; t++) if (C.contains(i[t], this)) return ! 0
            }));
            for (n = this.pushStack([]), t = 0; t < r; t++) C.find(e, i[t], n);
            return 1 < r ? C.uniqueSort(n) : n
        },
        filter: function(e) {
            return this.pushStack(N(this, e || [], !1))
        },
        not: function(e) {
            return this.pushStack(N(this, e || [], !0))
        },
        is: function(e) {
            return !! N(this, "string" == typeof e && w.test(e) ? C(e) : e || [], !1).length
        }
    });
    var k, L = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/; (C.fn.init = function(e, t, n) {
        var r, i;
        if (!e) return this;
        if (n = n || k, "string" == typeof e) {
            if (! (r = "<" === e[0] && ">" === e[e.length - 1] && 3 <= e.length ? [null, e, null] : L.exec(e)) || !r[1] && t) return ! t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
            if (r[1]) {
                if (t = t instanceof C ? t[0] : t, C.merge(this, C.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t: E, !0)), I.test(r[1]) && C.isPlainObject(t)) for (r in t) C.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                return this
            }
            return (i = E.getElementById(r[2])) && (this[0] = i, this.length = 1),
            this
        }
        return e.nodeType ? (this[0] = e, this.length = 1, this) : C.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(C) : C.makeArray(e, this)
    }).prototype = C.fn,
    k = C(E);
    var R = /^(?:parents|prev(?:Until|All))/,
    z = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    function M(e, t) {
        for (; (e = e[t]) && 1 !== e.nodeType;);
        return e
    }
    C.fn.extend({
        has: function(e) {
            var t = C(e, this),
            n = t.length;
            return this.filter(function() {
                for (var e = 0; e < n; e++) if (C.contains(this, t[e])) return ! 0
            })
        },
        closest: function(e, t) {
            var n, r = 0,
            i = this.length,
            o = [],
            s = "string" != typeof e && C(e);
            if (!w.test(e)) for (; r < i; r++) for (n = this[r]; n && n !== t; n = n.parentNode) if (n.nodeType < 11 && (s ? -1 < s.index(n) : 1 === n.nodeType && C.find.matchesSelector(n, e))) {
                o.push(n);
                break
            }
            return this.pushStack(1 < o.length ? C.uniqueSort(o) : o)
        },
        index: function(e) {
            return e ? "string" == typeof e ? i.call(C(e), this[0]) : i.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length: -1
        },
        add: function(e, t) {
            return this.pushStack(C.uniqueSort(C.merge(this.get(), C(e, t))))
        },
        addBack: function(e) {
            return this.add(null == e ? this.prevObject: this.prevObject.filter(e))
        }
    }),
    C.each({
        parent: function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t: null
        },
        parents: function(e) {
            return b(e, "parentNode")
        },
        parentsUntil: function(e, t, n) {
            return b(e, "parentNode", n)
        },
        next: function(e) {
            return M(e, "nextSibling")
        },
        prev: function(e) {
            return M(e, "previousSibling")
        },
        nextAll: function(e) {
            return b(e, "nextSibling")
        },
        prevAll: function(e) {
            return b(e, "previousSibling")
        },
        nextUntil: function(e, t, n) {
            return b(e, "nextSibling", n)
        },
        prevUntil: function(e, t, n) {
            return b(e, "previousSibling", n)
        },
        siblings: function(e) {
            return x((e.parentNode || {}).firstChild, e)
        },
        children: function(e) {
            return x(e.firstChild)
        },
        contents: function(e) {
            return S(e, "iframe") ? e.contentDocument: (S(e, "template") && (e = e.content || e), C.merge([], e.childNodes))
        }
    },
    function(r, i) {
        C.fn[r] = function(e, t) {
            var n = C.map(this, i, e);
            return "Until" !== r.slice( - 5) && (t = e),
            t && "string" == typeof t && (n = C.filter(t, n)),
            1 < this.length && (z[r] || C.uniqueSort(n), R.test(r) && n.reverse()),
            this.pushStack(n)
        }
    });
    var P = /[^\x20\t\r\n\f]+/g;
    function F(e) {
        return e
    }
    function D(e) {
        throw e
    }
    function O(e, t, n, r) {
        var i;
        try {
            e && C.isFunction(i = e.promise) ? i.call(e).done(t).fail(n) : e && C.isFunction(i = e.then) ? i.call(e, t, n) : t.apply(void 0, [e].slice(r))
        } catch(e) {
            n.apply(void 0, [e])
        }
    }
    C.Callbacks = function(r) {
        var e, n;
        r = "string" == typeof r ? (e = r, n = {},
        C.each(e.match(P) || [],
        function(e, t) {
            n[t] = !0
        }), n) : C.extend({},
        r);
        var i, t, o, s, a = [],
        u = [],
        l = -1,
        d = function() {
            for (s = s || r.once, o = i = !0; u.length; l = -1) for (t = u.shift(); ++l < a.length;) ! 1 === a[l].apply(t[0], t[1]) && r.stopOnFalse && (l = a.length, t = !1);
            r.memory || (t = !1),
            i = !1,
            s && (a = t ? [] : "")
        },
        c = {
            add: function() {
                return a && (t && !i && (l = a.length - 1, u.push(t)),
                function n(e) {
                    C.each(e,
                    function(e, t) {
                        C.isFunction(t) ? r.unique && c.has(t) || a.push(t) : t && t.length && "string" !== C.type(t) && n(t)
                    })
                } (arguments), t && !i && d()),
                this
            },
            remove: function() {
                return C.each(arguments,
                function(e, t) {
                    for (var n; - 1 < (n = C.inArray(t, a, n));) a.splice(n, 1),
                    n <= l && l--
                }),
                this
            },
            has: function(e) {
                return e ? -1 < C.inArray(e, a) : 0 < a.length
            },
            empty: function() {
                return a && (a = []),
                this
            },
            disable: function() {
                return s = u = [],
                a = t = "",
                this
            },
            disabled: function() {
                return ! a
            },
            lock: function() {
                return s = u = [],
                t || i || (a = t = ""),
                this
            },
            locked: function() {
                return !! s
            },
            fireWith: function(e, t) {
                return s || (t = [e, (t = t || []).slice ? t.slice() : t], u.push(t), i || d()),
                this
            },
            fire: function() {
                return c.fireWith(this, arguments),
                this
            },
            fired: function() {
                return !! o
            }
        };
        return c
    },
    C.extend({
        Deferred: function(e) {
            var o = [["notify", "progress", C.Callbacks("memory"), C.Callbacks("memory"), 2], ["resolve", "done", C.Callbacks("once memory"), C.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", C.Callbacks("once memory"), C.Callbacks("once memory"), 1, "rejected"]],
            i = "pending",
            s = {
                state: function() {
                    return i
                },
                always: function() {
                    return a.done(arguments).fail(arguments),
                    this
                },
                catch: function(e) {
                    return s.then(null, e)
                },
                pipe: function() {
                    var i = arguments;
                    return C.Deferred(function(r) {
                        C.each(o,
                        function(e, t) {
                            var n = C.isFunction(i[t[4]]) && i[t[4]];
                            a[t[1]](function() {
                                var e = n && n.apply(this, arguments);
                                e && C.isFunction(e.promise) ? e.promise().progress(r.notify).done(r.resolve).fail(r.reject) : r[t[0] + "With"](this, n ? [e] : arguments)
                            })
                        }),
                        i = null
                    }).promise()
                },
                then: function(t, n, r) {
                    var u = 0;
                    function l(i, o, s, a) {
                        return function() {
                            var n = this,
                            r = arguments,
                            e = function() {
                                var e, t;
                                if (! (i < u)) {
                                    if ((e = s.apply(n, r)) === o.promise()) throw new TypeError("Thenable self-resolution");
                                    t = e && ("object" == typeof e || "function" == typeof e) && e.then,
                                    C.isFunction(t) ? a ? t.call(e, l(u, o, F, a), l(u, o, D, a)) : (u++, t.call(e, l(u, o, F, a), l(u, o, D, a), l(u, o, F, o.notifyWith))) : (s !== F && (n = void 0, r = [e]), (a || o.resolveWith)(n, r))
                                }
                            },
                            t = a ? e: function() {
                                try {
                                    e()
                                } catch(e) {
                                    C.Deferred.exceptionHook && C.Deferred.exceptionHook(e, t.stackTrace),
                                    u <= i + 1 && (s !== D && (n = void 0, r = [e]), o.rejectWith(n, r))
                                }
                            };
                            i ? t() : (C.Deferred.getStackHook && (t.stackTrace = C.Deferred.getStackHook()), A.setTimeout(t))
                        }
                    }
                    return C.Deferred(function(e) {
                        o[0][3].add(l(0, e, C.isFunction(r) ? r: F, e.notifyWith)),
                        o[1][3].add(l(0, e, C.isFunction(t) ? t: F)),
                        o[2][3].add(l(0, e, C.isFunction(n) ? n: D))
                    }).promise()
                },
                promise: function(e) {
                    return null != e ? C.extend(e, s) : s
                }
            },
            a = {};
            return C.each(o,
            function(e, t) {
                var n = t[2],
                r = t[5];
                s[t[1]] = n.add,
                r && n.add(function() {
                    i = r
                },
                o[3 - e][2].disable, o[0][2].lock),
                n.add(t[3].fire),
                a[t[0]] = function() {
                    return a[t[0] + "With"](this === a ? void 0 : this, arguments),
                    this
                },
                a[t[0] + "With"] = n.fireWith
            }),
            s.promise(a),
            e && e.call(a, a),
            a
        },
        when: function(e) {
            var n = arguments.length,
            t = n,
            r = Array(t),
            i = a.call(arguments),
            o = C.Deferred(),
            s = function(t) {
                return function(e) {
                    r[t] = this,
                    i[t] = 1 < arguments.length ? a.call(arguments) : e,
                    --n || o.resolveWith(r, i)
                }
            };
            if (n <= 1 && (O(e, o.done(s(t)).resolve, o.reject, !n), "pending" === o.state() || C.isFunction(i[t] && i[t].then))) return o.then();
            for (; t--;) O(i[t], s(t), o.reject);
            return o.promise()
        }
    });
    var B = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
    C.Deferred.exceptionHook = function(e, t) {
        A.console && A.console.warn && e && B.test(e.name) && A.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t)
    },
    C.readyException = function(e) {
        A.setTimeout(function() {
            throw e
        })
    };
    var j = C.Deferred();
    function U() {
        E.removeEventListener("DOMContentLoaded", U),
        A.removeEventListener("load", U),
        C.ready()
    }
    C.fn.ready = function(e) {
        return j.then(e).
        catch(function(e) {
            C.readyException(e)
        }),
        this
    },
    C.extend({
        isReady: !1,
        readyWait: 1,
        ready: function(e) { (!0 === e ? --C.readyWait: C.isReady) || ((C.isReady = !0) !== e && 0 < --C.readyWait || j.resolveWith(E, [C]))
        }
    }),
    C.ready.then = j.then,
    "complete" === E.readyState || "loading" !== E.readyState && !E.documentElement.doScroll ? A.setTimeout(C.ready) : (E.addEventListener("DOMContentLoaded", U), A.addEventListener("load", U));
    var H = function(e, t, n, r, i, o, s) {
        var a = 0,
        u = e.length,
        l = null == n;
        if ("object" === C.type(n)) for (a in i = !0, n) H(e, t, a, n[a], !0, o, s);
        else if (void 0 !== r && (i = !0, C.isFunction(r) || (s = !0), l && (s ? (t.call(e, r), t = null) : (l = t, t = function(e, t, n) {
            return l.call(C(e), n)
        })), t)) for (; a < u; a++) t(e[a], n, s ? r: r.call(e[a], a, t(e[a], n)));
        return i ? e: l ? t.call(e) : u ? t(e[0], n) : o
    },
    X = function(e) {
        return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
    };
    function W() {
        this.expando = C.expando + W.uid++
    }
    W.uid = 1,
    W.prototype = {
        cache: function(e) {
            var t = e[this.expando];
            return t || (t = {},
            X(e) && (e.nodeType ? e[this.expando] = t: Object.defineProperty(e, this.expando, {
                value: t,
                configurable: !0
            }))),
            t
        },
        set: function(e, t, n) {
            var r, i = this.cache(e);
            if ("string" == typeof t) i[C.camelCase(t)] = n;
            else for (r in t) i[C.camelCase(r)] = t[r];
            return i
        },
        get: function(e, t) {
            return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][C.camelCase(t)]
        },
        access: function(e, t, n) {
            return void 0 === t || t && "string" == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n), void 0 !== n ? n: t)
        },
        remove: function(e, t) {
            var n, r = e[this.expando];
            if (void 0 !== r) {
                if (void 0 !== t) {
                    Array.isArray(t) ? t = t.map(C.camelCase) : t = (t = C.camelCase(t)) in r ? [t] : t.match(P) || [],
                    n = t.length;
                    for (; n--;) delete r[t[n]]
                } (void 0 === t || C.isEmptyObject(r)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
            }
        },
        hasData: function(e) {
            var t = e[this.expando];
            return void 0 !== t && !C.isEmptyObject(t)
        }
    };
    var G = new W,
    q = new W,
    Y = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
    V = /[A-Z]/g;
    function $(e, t, n) {
        var r, i;
        if (void 0 === n && 1 === e.nodeType) if (r = "data-" + t.replace(V, "-$&").toLowerCase(), "string" == typeof(n = e.getAttribute(r))) {
            try {
                n = "true" === (i = n) || "false" !== i && ("null" === i ? null: i === +i + "" ? +i: Y.test(i) ? JSON.parse(i) : i)
            } catch(e) {}
            q.set(e, t, n)
        } else n = void 0;
        return n
    }
    C.extend({
        hasData: function(e) {
            return q.hasData(e) || G.hasData(e)
        },
        data: function(e, t, n) {
            return q.access(e, t, n)
        },
        removeData: function(e, t) {
            q.remove(e, t)
        },
        _data: function(e, t, n) {
            return G.access(e, t, n)
        },
        _removeData: function(e, t) {
            G.remove(e, t)
        }
    }),
    C.fn.extend({
        data: function(n, e) {
            var t, r, i, o = this[0],
            s = o && o.attributes;
            if (void 0 === n) {
                if (this.length && (i = q.get(o), 1 === o.nodeType && !G.get(o, "hasDataAttrs"))) {
                    for (t = s.length; t--;) s[t] && (0 === (r = s[t].name).indexOf("data-") && (r = C.camelCase(r.slice(5)), $(o, r, i[r])));
                    G.set(o, "hasDataAttrs", !0)
                }
                return i
            }
            return "object" == typeof n ? this.each(function() {
                q.set(this, n)
            }) : H(this,
            function(e) {
                var t;
                if (o && void 0 === e) {
                    if (void 0 !== (t = q.get(o, n))) return t;
                    if (void 0 !== (t = $(o, n))) return t
                } else this.each(function() {
                    q.set(this, n, e)
                })
            },
            null, e, 1 < arguments.length, null, !0)
        },
        removeData: function(e) {
            return this.each(function() {
                q.remove(this, e)
            })
        }
    }),
    C.extend({
        queue: function(e, t, n) {
            var r;
            if (e) return t = (t || "fx") + "queue",
            r = G.get(e, t),
            n && (!r || Array.isArray(n) ? r = G.access(e, t, C.makeArray(n)) : r.push(n)),
            r || []
        },
        dequeue: function(e, t) {
            t = t || "fx";
            var n = C.queue(e, t),
            r = n.length,
            i = n.shift(),
            o = C._queueHooks(e, t);
            "inprogress" === i && (i = n.shift(), r--),
            i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e,
            function() {
                C.dequeue(e, t)
            },
            o)),
            !r && o && o.empty.fire()
        },
        _queueHooks: function(e, t) {
            var n = t + "queueHooks";
            return G.get(e, n) || G.access(e, n, {
                empty: C.Callbacks("once memory").add(function() {
                    G.remove(e, [t + "queue", n])
                })
            })
        }
    }),
    C.fn.extend({
        queue: function(t, n) {
            var e = 2;
            return "string" != typeof t && (n = t, t = "fx", e--),
            arguments.length < e ? C.queue(this[0], t) : void 0 === n ? this: this.each(function() {
                var e = C.queue(this, t, n);
                C._queueHooks(this, t),
                "fx" === t && "inprogress" !== e[0] && C.dequeue(this, t)
            })
        },
        dequeue: function(e) {
            return this.each(function() {
                C.dequeue(this, e)
            })
        },
        clearQueue: function(e) {
            return this.queue(e || "fx", [])
        },
        promise: function(e, t) {
            var n, r = 1,
            i = C.Deferred(),
            o = this,
            s = this.length,
            a = function() {--r || i.resolveWith(o, [o])
            };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; s--;)(n = G.get(o[s], e + "queueHooks")) && n.empty && (r++, n.empty.add(a));
            return a(),
            i.promise(t)
        }
    });
    var Z = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    Q = new RegExp("^(?:([+-])=|)(" + Z + ")([a-z%]*)$", "i"),
    J = ["Top", "Right", "Bottom", "Left"],
    K = function(e, t) {
        return "none" === (e = t || e).style.display || "" === e.style.display && C.contains(e.ownerDocument, e) && "none" === C.css(e, "display")
    },
    ee = function(e, t, n, r) {
        var i, o, s = {};
        for (o in t) s[o] = e.style[o],
        e.style[o] = t[o];
        for (o in i = n.apply(e, r || []), t) e.style[o] = s[o];
        return i
    };
    function te(e, t, n, r) {
        var i, o = 1,
        s = 20,
        a = r ?
        function() {
            return r.cur()
        }: function() {
            return C.css(e, t, "")
        },
        u = a(),
        l = n && n[3] || (C.cssNumber[t] ? "": "px"),
        d = (C.cssNumber[t] || "px" !== l && +u) && Q.exec(C.css(e, t));
        if (d && d[3] !== l) for (l = l || d[3], n = n || [], d = +u || 1; d /= o = o || ".5", C.style(e, t, d + l), o !== (o = a() / u) && 1 !== o && --s;);
        return n && (d = +d || +u || 0, i = n[1] ? d + (n[1] + 1) * n[2] : +n[2], r && (r.unit = l, r.start = d, r.end = i)),
        i
    }
    var ne = {};
    function re(e, t) {
        for (var n, r, i = [], o = 0, s = e.length; o < s; o++)(r = e[o]).style && (n = r.style.display, t ? ("none" === n && (i[o] = G.get(r, "display") || null, i[o] || (r.style.display = "")), "" === r.style.display && K(r) && (i[o] = (c = l = u = void 0, l = (a = r).ownerDocument, d = a.nodeName, (c = ne[d]) || (u = l.body.appendChild(l.createElement(d)), c = C.css(u, "display"), u.parentNode.removeChild(u), "none" === c && (c = "block"), ne[d] = c)))) : "none" !== n && (i[o] = "none", G.set(r, "display", n)));
        var a, u, l, d, c;
        for (o = 0; o < s; o++) null != i[o] && (e[o].style.display = i[o]);
        return e
    }
    C.fn.extend({
        show: function() {
            return re(this, !0)
        },
        hide: function() {
            return re(this)
        },
        toggle: function(e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                K(this) ? C(this).show() : C(this).hide()
            })
        }
    });
    var ie = /^(?:checkbox|radio)$/i,
    oe = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
    se = /^$|\/(?:java|ecma)script/i,
    ae = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        thead: [1, "<table>", "</table>"],
        col: [2, "<table><colgroup>", "</colgroup></table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        _default: [0, "", ""]
    };
    function ue(e, t) {
        var n;
        return n = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || "*") : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || "*") : [],
        void 0 === t || t && S(e, t) ? C.merge([e], n) : n
    }
    function le(e, t) {
        for (var n = 0,
        r = e.length; n < r; n++) G.set(e[n], "globalEval", !t || G.get(t[n], "globalEval"))
    }
    ae.optgroup = ae.option,
    ae.tbody = ae.tfoot = ae.colgroup = ae.caption = ae.thead,
    ae.th = ae.td;
    var de, ce, he = /<|&#?\w+;/;
    function fe(e, t, n, r, i) {
        for (var o, s, a, u, l, d, c = t.createDocumentFragment(), h = [], f = 0, p = e.length; f < p; f++) if ((o = e[f]) || 0 === o) if ("object" === C.type(o)) C.merge(h, o.nodeType ? [o] : o);
        else if (he.test(o)) {
            for (s = s || c.appendChild(t.createElement("div")), a = (oe.exec(o) || ["", ""])[1].toLowerCase(), u = ae[a] || ae._default, s.innerHTML = u[1] + C.htmlPrefilter(o) + u[2], d = u[0]; d--;) s = s.lastChild;
            C.merge(h, s.childNodes),
            (s = c.firstChild).textContent = ""
        } else h.push(t.createTextNode(o));
        for (c.textContent = "", f = 0; o = h[f++];) if (r && -1 < C.inArray(o, r)) i && i.push(o);
        else if (l = C.contains(o.ownerDocument, o), s = ue(c.appendChild(o), "script"), l && le(s), n) for (d = 0; o = s[d++];) se.test(o.type || "") && n.push(o);
        return c
    }
    de = E.createDocumentFragment().appendChild(E.createElement("div")),
    (ce = E.createElement("input")).setAttribute("type", "radio"),
    ce.setAttribute("checked", "checked"),
    ce.setAttribute("name", "t"),
    de.appendChild(ce),
    v.checkClone = de.cloneNode(!0).cloneNode(!0).lastChild.checked,
    de.innerHTML = "<textarea>x</textarea>",
    v.noCloneChecked = !!de.cloneNode(!0).lastChild.defaultValue;
    var pe = E.documentElement,
    ge = /^key/,
    ve = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
    ye = /^([^.]*)(?:\.(.+)|)/;
    function me() {
        return ! 0
    }
    function _e() {
        return ! 1
    }
    function be() {
        try {
            return E.activeElement
        } catch(e) {}
    }
    function xe(e, t, n, r, i, o) {
        var s, a;
        if ("object" == typeof t) {
            for (a in "string" != typeof n && (r = r || n, n = void 0), t) xe(e, a, n, r, t[a], o);
            return e
        }
        if (null == r && null == i ? (i = n, r = n = void 0) : null == i && ("string" == typeof n ? (i = r, r = void 0) : (i = r, r = n, n = void 0)), !1 === i) i = _e;
        else if (!i) return e;
        return 1 === o && (s = i, (i = function(e) {
            return C().off(e),
            s.apply(this, arguments)
        }).guid = s.guid || (s.guid = C.guid++)),
        e.each(function() {
            C.event.add(this, t, i, r, n)
        })
    }
    C.event = {
        global: {},
        add: function(t, e, n, r, i) {
            var o, s, a, u, l, d, c, h, f, p, g, v = G.get(t);
            if (v) for (n.handler && (n = (o = n).handler, i = o.selector), i && C.find.matchesSelector(pe, i), n.guid || (n.guid = C.guid++), (u = v.events) || (u = v.events = {}), (s = v.handle) || (s = v.handle = function(e) {
                return void 0 !== C && C.event.triggered !== e.type ? C.event.dispatch.apply(t, arguments) : void 0
            }), l = (e = (e || "").match(P) || [""]).length; l--;) f = g = (a = ye.exec(e[l]) || [])[1],
            p = (a[2] || "").split(".").sort(),
            f && (c = C.event.special[f] || {},
            f = (i ? c.delegateType: c.bindType) || f, c = C.event.special[f] || {},
            d = C.extend({
                type: f,
                origType: g,
                data: r,
                handler: n,
                guid: n.guid,
                selector: i,
                needsContext: i && C.expr.match.needsContext.test(i),
                namespace: p.join(".")
            },
            o), (h = u[f]) || ((h = u[f] = []).delegateCount = 0, c.setup && !1 !== c.setup.call(t, r, p, s) || t.addEventListener && t.addEventListener(f, s)), c.add && (c.add.call(t, d), d.handler.guid || (d.handler.guid = n.guid)), i ? h.splice(h.delegateCount++, 0, d) : h.push(d), C.event.global[f] = !0)
        },
        remove: function(e, t, n, r, i) {
            var o, s, a, u, l, d, c, h, f, p, g, v = G.hasData(e) && G.get(e);
            if (v && (u = v.events)) {
                for (l = (t = (t || "").match(P) || [""]).length; l--;) if (f = g = (a = ye.exec(t[l]) || [])[1], p = (a[2] || "").split(".").sort(), f) {
                    for (c = C.event.special[f] || {},
                    h = u[f = (r ? c.delegateType: c.bindType) || f] || [], a = a[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), s = o = h.length; o--;) d = h[o],
                    !i && g !== d.origType || n && n.guid !== d.guid || a && !a.test(d.namespace) || r && r !== d.selector && ("**" !== r || !d.selector) || (h.splice(o, 1), d.selector && h.delegateCount--, c.remove && c.remove.call(e, d));
                    s && !h.length && (c.teardown && !1 !== c.teardown.call(e, p, v.handle) || C.removeEvent(e, f, v.handle), delete u[f])
                } else for (f in u) C.event.remove(e, f + t[l], n, r, !0);
                C.isEmptyObject(u) && G.remove(e, "handle events")
            }
        },
        dispatch: function(e) {
            var t, n, r, i, o, s, a = C.event.fix(e),
            u = new Array(arguments.length),
            l = (G.get(this, "events") || {})[a.type] || [],
            d = C.event.special[a.type] || {};
            for (u[0] = a, t = 1; t < arguments.length; t++) u[t] = arguments[t];
            if (a.delegateTarget = this, !d.preDispatch || !1 !== d.preDispatch.call(this, a)) {
                for (s = C.event.handlers.call(this, a, l), t = 0; (i = s[t++]) && !a.isPropagationStopped();) for (a.currentTarget = i.elem, n = 0; (o = i.handlers[n++]) && !a.isImmediatePropagationStopped();) a.rnamespace && !a.rnamespace.test(o.namespace) || (a.handleObj = o, a.data = o.data, void 0 !== (r = ((C.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, u)) && !1 === (a.result = r) && (a.preventDefault(), a.stopPropagation()));
                return d.postDispatch && d.postDispatch.call(this, a),
                a.result
            }
        },
        handlers: function(e, t) {
            var n, r, i, o, s, a = [],
            u = t.delegateCount,
            l = e.target;
            if (u && l.nodeType && !("click" === e.type && 1 <= e.button)) for (; l !== this; l = l.parentNode || this) if (1 === l.nodeType && ("click" !== e.type || !0 !== l.disabled)) {
                for (o = [], s = {},
                n = 0; n < u; n++) void 0 === s[i = (r = t[n]).selector + " "] && (s[i] = r.needsContext ? -1 < C(i, this).index(l) : C.find(i, this, null, [l]).length),
                s[i] && o.push(r);
                o.length && a.push({
                    elem: l,
                    handlers: o
                })
            }
            return l = this,
            u < t.length && a.push({
                elem: l,
                handlers: t.slice(u)
            }),
            a
        },
        addProp: function(t, e) {
            Object.defineProperty(C.Event.prototype, t, {
                enumerable: !0,
                configurable: !0,
                get: C.isFunction(e) ?
                function() {
                    if (this.originalEvent) return e(this.originalEvent)
                }: function() {
                    if (this.originalEvent) return this.originalEvent[t]
                },
                set: function(e) {
                    Object.defineProperty(this, t, {
                        enumerable: !0,
                        configurable: !0,
                        writable: !0,
                        value: e
                    })
                }
            })
        },
        fix: function(e) {
            return e[C.expando] ? e: new C.Event(e)
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== be() && this.focus) return this.focus(),
                    !1
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    if (this === be() && this.blur) return this.blur(),
                    !1
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    if ("checkbox" === this.type && this.click && S(this, "input")) return this.click(),
                    !1
                },
                _default: function(e) {
                    return S(e.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                }
            }
        }
    },
    C.removeEvent = function(e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n)
    },
    C.Event = function(e, t) {
        return this instanceof C.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? me: _e, this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode: e.target, this.currentTarget = e.currentTarget, this.relatedTarget = e.relatedTarget) : this.type = e, t && C.extend(this, t), this.timeStamp = e && e.timeStamp || C.now(), void(this[C.expando] = !0)) : new C.Event(e, t)
    },
    C.Event.prototype = {
        constructor: C.Event,
        isDefaultPrevented: _e,
        isPropagationStopped: _e,
        isImmediatePropagationStopped: _e,
        isSimulated: !1,
        preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = me,
            e && !this.isSimulated && e.preventDefault()
        },
        stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = me,
            e && !this.isSimulated && e.stopPropagation()
        },
        stopImmediatePropagation: function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = me,
            e && !this.isSimulated && e.stopImmediatePropagation(),
            this.stopPropagation()
        }
    },
    C.each({
        altKey: !0,
        bubbles: !0,
        cancelable: !0,
        changedTouches: !0,
        ctrlKey: !0,
        detail: !0,
        eventPhase: !0,
        metaKey: !0,
        pageX: !0,
        pageY: !0,
        shiftKey: !0,
        view: !0,
        char: !0,
        charCode: !0,
        key: !0,
        keyCode: !0,
        button: !0,
        buttons: !0,
        clientX: !0,
        clientY: !0,
        offsetX: !0,
        offsetY: !0,
        pointerId: !0,
        pointerType: !0,
        screenX: !0,
        screenY: !0,
        targetTouches: !0,
        toElement: !0,
        touches: !0,
        which: function(e) {
            var t = e.button;
            return null == e.which && ge.test(e.type) ? null != e.charCode ? e.charCode: e.keyCode: !e.which && void 0 !== t && ve.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which
        }
    },
    C.event.addProp),
    C.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    },
    function(e, i) {
        C.event.special[e] = {
            delegateType: i,
            bindType: i,
            handle: function(e) {
                var t, n = e.relatedTarget,
                r = e.handleObj;
                return n && (n === this || C.contains(this, n)) || (e.type = r.origType, t = r.handler.apply(this, arguments), e.type = i),
                t
            }
        }
    }),
    C.fn.extend({
        on: function(e, t, n, r) {
            return xe(this, e, t, n, r)
        },
        one: function(e, t, n, r) {
            return xe(this, e, t, n, r, 1)
        },
        off: function(e, t, n) {
            var r, i;
            if (e && e.preventDefault && e.handleObj) return r = e.handleObj,
            C(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace: r.origType, r.selector, r.handler),
            this;
            if ("object" == typeof e) {
                for (i in e) this.off(i, t, e[i]);
                return this
            }
            return ! 1 !== t && "function" != typeof t || (n = t, t = void 0),
            !1 === n && (n = _e),
            this.each(function() {
                C.event.remove(this, e, n, t)
            })
        }
    });
    var we = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
    Ae = /<script|<style|<link/i,
    Ee = /checked\s*(?:[^=]|=\s*.checked.)/i,
    Ce = /^true\/(.*)/,
    Se = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    function Ie(e, t) {
        return S(e, "table") && S(11 !== t.nodeType ? t: t.firstChild, "tr") && C(">tbody", e)[0] || e
    }
    function Te(e) {
        return e.type = (null !== e.getAttribute("type")) + "/" + e.type,
        e
    }
    function Ne(e) {
        var t = Ce.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"),
        e
    }
    function ke(e, t) {
        var n, r, i, o, s, a, u, l;
        if (1 === t.nodeType) {
            if (G.hasData(e) && (o = G.access(e), s = G.set(t, o), l = o.events)) for (i in delete s.handle, s.events = {},
            l) for (n = 0, r = l[i].length; n < r; n++) C.event.add(t, i, l[i][n]);
            q.hasData(e) && (a = q.access(e), u = C.extend({},
            a), q.set(t, u))
        }
    }
    function Le(n, r, i, o) {
        r = g.apply([], r);
        var e, t, s, a, u, l, d = 0,
        c = n.length,
        h = c - 1,
        f = r[0],
        p = C.isFunction(f);
        if (p || 1 < c && "string" == typeof f && !v.checkClone && Ee.test(f)) return n.each(function(e) {
            var t = n.eq(e);
            p && (r[0] = f.call(this, e, t.html())),
            Le(t, r, i, o)
        });
        if (c && (t = (e = fe(r, n[0].ownerDocument, !1, n, o)).firstChild, 1 === e.childNodes.length && (e = t), t || o)) {
            for (a = (s = C.map(ue(e, "script"), Te)).length; d < c; d++) u = e,
            d !== h && (u = C.clone(u, !0, !0), a && C.merge(s, ue(u, "script"))),
            i.call(n[d], u, d);
            if (a) for (l = s[s.length - 1].ownerDocument, C.map(s, Ne), d = 0; d < a; d++) u = s[d],
            se.test(u.type || "") && !G.access(u, "globalEval") && C.contains(l, u) && (u.src ? C._evalUrl && C._evalUrl(u.src) : y(u.textContent.replace(Se, ""), l))
        }
        return n
    }
    function Re(e, t, n) {
        for (var r, i = t ? C.filter(t, e) : e, o = 0; null != (r = i[o]); o++) n || 1 !== r.nodeType || C.cleanData(ue(r)),
        r.parentNode && (n && C.contains(r.ownerDocument, r) && le(ue(r, "script")), r.parentNode.removeChild(r));
        return e
    }
    C.extend({
        htmlPrefilter: function(e) {
            return e.replace(we, "<$1></$2>")
        },
        clone: function(e, t, n) {
            var r, i, o, s, a, u, l, d = e.cloneNode(!0),
            c = C.contains(e.ownerDocument, e);
            if (! (v.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || C.isXMLDoc(e))) for (s = ue(d), r = 0, i = (o = ue(e)).length; r < i; r++) a = o[r],
            u = s[r],
            void 0,
            "input" === (l = u.nodeName.toLowerCase()) && ie.test(a.type) ? u.checked = a.checked: "input" !== l && "textarea" !== l || (u.defaultValue = a.defaultValue);
            if (t) if (n) for (o = o || ue(e), s = s || ue(d), r = 0, i = o.length; r < i; r++) ke(o[r], s[r]);
            else ke(e, d);
            return 0 < (s = ue(d, "script")).length && le(s, !c && ue(e, "script")),
            d
        },
        cleanData: function(e) {
            for (var t, n, r, i = C.event.special,
            o = 0; void 0 !== (n = e[o]); o++) if (X(n)) {
                if (t = n[G.expando]) {
                    if (t.events) for (r in t.events) i[r] ? C.event.remove(n, r) : C.removeEvent(n, r, t.handle);
                    n[G.expando] = void 0
                }
                n[q.expando] && (n[q.expando] = void 0)
            }
        }
    }),
    C.fn.extend({
        detach: function(e) {
            return Re(this, e, !0)
        },
        remove: function(e) {
            return Re(this, e)
        },
        text: function(e) {
            return H(this,
            function(e) {
                return void 0 === e ? C.text(this) : this.empty().each(function() {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                })
            },
            null, e, arguments.length)
        },
        append: function() {
            return Le(this, arguments,
            function(e) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Ie(this, e).appendChild(e)
            })
        },
        prepend: function() {
            return Le(this, arguments,
            function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = Ie(this, e);
                    t.insertBefore(e, t.firstChild)
                }
            })
        },
        before: function() {
            return Le(this, arguments,
            function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            })
        },
        after: function() {
            return Le(this, arguments,
            function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            })
        },
        empty: function() {
            for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (C.cleanData(ue(e, !1)), e.textContent = "");
            return this
        },
        clone: function(e, t) {
            return e = null != e && e,
            t = null == t ? e: t,
            this.map(function() {
                return C.clone(this, e, t)
            })
        },
        html: function(e) {
            return H(this,
            function(e) {
                var t = this[0] || {},
                n = 0,
                r = this.length;
                if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                if ("string" == typeof e && !Ae.test(e) && !ae[(oe.exec(e) || ["", ""])[1].toLowerCase()]) {
                    e = C.htmlPrefilter(e);
                    try {
                        for (; n < r; n++) 1 === (t = this[n] || {}).nodeType && (C.cleanData(ue(t, !1)), t.innerHTML = e);
                        t = 0
                    } catch(e) {}
                }
                t && this.empty().append(e)
            },
            null, e, arguments.length)
        },
        replaceWith: function() {
            var n = [];
            return Le(this, arguments,
            function(e) {
                var t = this.parentNode;
                C.inArray(this, n) < 0 && (C.cleanData(ue(this)), t && t.replaceChild(e, this))
            },
            n)
        }
    }),
    C.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    },
    function(e, s) {
        C.fn[e] = function(e) {
            for (var t, n = [], r = C(e), i = r.length - 1, o = 0; o <= i; o++) t = o === i ? this: this.clone(!0),
            C(r[o])[s](t),
            u.apply(n, t.get());
            return this.pushStack(n)
        }
    });
    var ze = /^margin/,
    Me = new RegExp("^(" + Z + ")(?!px)[a-z%]+$", "i"),
    Pe = function(e) {
        var t = e.ownerDocument.defaultView;
        return t && t.opener || (t = A),
        t.getComputedStyle(e)
    };
    function Fe(e, t, n) {
        var r, i, o, s, a = e.style;
        return (n = n || Pe(e)) && ("" !== (s = n.getPropertyValue(t) || n[t]) || C.contains(e.ownerDocument, e) || (s = C.style(e, t)), !v.pixelMarginRight() && Me.test(s) && ze.test(t) && (r = a.width, i = a.minWidth, o = a.maxWidth, a.minWidth = a.maxWidth = a.width = s, s = n.width, a.width = r, a.minWidth = i, a.maxWidth = o)),
        void 0 !== s ? s + "": s
    }
    function De(e, t) {
        return {
            get: function() {
                return e() ? void delete this.get: (this.get = t).apply(this, arguments)
            }
        }
    } !
    function() {
        function e() {
            if (s) {
                s.style.cssText = "box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",
                s.innerHTML = "",
                pe.appendChild(o);
                var e = A.getComputedStyle(s);
                t = "1%" !== e.top,
                i = "2px" === e.marginLeft,
                n = "4px" === e.width,
                s.style.marginRight = "50%",
                r = "4px" === e.marginRight,
                pe.removeChild(o),
                s = null
            }
        }
        var t, n, r, i, o = E.createElement("div"),
        s = E.createElement("div");
        s.style && (s.style.backgroundClip = "content-box", s.cloneNode(!0).style.backgroundClip = "", v.clearCloneStyle = "content-box" === s.style.backgroundClip, o.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", o.appendChild(s), C.extend(v, {
            pixelPosition: function() {
                return e(),
                t
            },
            boxSizingReliable: function() {
                return e(),
                n
            },
            pixelMarginRight: function() {
                return e(),
                r
            },
            reliableMarginLeft: function() {
                return e(),
                i
            }
        }))
    } ();
    var Oe = /^(none|table(?!-c[ea]).+)/,
    Be = /^--/,
    je = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    },
    Ue = {
        letterSpacing: "0",
        fontWeight: "400"
    },
    He = ["Webkit", "Moz", "ms"],
    Xe = E.createElement("div").style;
    function We(e) {
        var t = C.cssProps[e];
        return t || (t = C.cssProps[e] = function(e) {
            if (e in Xe) return e;
            for (var t = e[0].toUpperCase() + e.slice(1), n = He.length; n--;) if ((e = He[n] + t) in Xe) return e
        } (e) || e),
        t
    }
    function Ge(e, t, n) {
        var r = Q.exec(t);
        return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t
    }
    function qe(e, t, n, r, i) {
        var o, s = 0;
        for (o = n === (r ? "border": "content") ? 4 : "width" === t ? 1 : 0; o < 4; o += 2)"margin" === n && (s += C.css(e, n + J[o], !0, i)),
        r ? ("content" === n && (s -= C.css(e, "padding" + J[o], !0, i)), "margin" !== n && (s -= C.css(e, "border" + J[o] + "Width", !0, i))) : (s += C.css(e, "padding" + J[o], !0, i), "padding" !== n && (s += C.css(e, "border" + J[o] + "Width", !0, i)));
        return s
    }
    function Ye(e, t, n) {
        var r, i = Pe(e),
        o = Fe(e, t, i),
        s = "border-box" === C.css(e, "boxSizing", !1, i);
        return Me.test(o) ? o: (r = s && (v.boxSizingReliable() || o === e.style[t]), "auto" === o && (o = e["offset" + t[0].toUpperCase() + t.slice(1)]), (o = parseFloat(o) || 0) + qe(e, t, n || (s ? "border": "content"), r, i) + "px")
    }
    function Ve(e, t, n, r, i) {
        return new Ve.prototype.init(e, t, n, r, i)
    }
    C.extend({
        cssHooks: {
            opacity: {
                get: function(e, t) {
                    if (t) {
                        var n = Fe(e, "opacity");
                        return "" === n ? "1": n
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            float: "cssFloat"
        },
        style: function(e, t, n, r) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var i, o, s, a = C.camelCase(t),
                u = Be.test(t),
                l = e.style;
                return u || (t = We(a)),
                s = C.cssHooks[t] || C.cssHooks[a],
                void 0 === n ? s && "get" in s && void 0 !== (i = s.get(e, !1, r)) ? i: l[t] : ("string" === (o = typeof n) && (i = Q.exec(n)) && i[1] && (n = te(e, t, i), o = "number"), void(null != n && n == n && ("number" === o && (n += i && i[3] || (C.cssNumber[a] ? "": "px")), v.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), s && "set" in s && void 0 === (n = s.set(e, n, r)) || (u ? l.setProperty(t, n) : l[t] = n))))
            }
        },
        css: function(e, t, n, r) {
            var i, o, s, a = C.camelCase(t);
            return Be.test(t) || (t = We(a)),
            (s = C.cssHooks[t] || C.cssHooks[a]) && "get" in s && (i = s.get(e, !0, n)),
            void 0 === i && (i = Fe(e, t, r)),
            "normal" === i && t in Ue && (i = Ue[t]),
            "" === n || n ? (o = parseFloat(i), !0 === n || isFinite(o) ? o || 0 : i) : i
        }
    }),
    C.each(["height", "width"],
    function(e, s) {
        C.cssHooks[s] = {
            get: function(e, t, n) {
                if (t) return ! Oe.test(C.css(e, "display")) || e.getClientRects().length && e.getBoundingClientRect().width ? Ye(e, s, n) : ee(e, je,
                function() {
                    return Ye(e, s, n)
                })
            },
            set: function(e, t, n) {
                var r, i = n && Pe(e),
                o = n && qe(e, s, n, "border-box" === C.css(e, "boxSizing", !1, i), i);
                return o && (r = Q.exec(t)) && "px" !== (r[3] || "px") && (e.style[s] = t, t = C.css(e, s)),
                Ge(0, t, o)
            }
        }
    }),
    C.cssHooks.marginLeft = De(v.reliableMarginLeft,
    function(e, t) {
        if (t) return (parseFloat(Fe(e, "marginLeft")) || e.getBoundingClientRect().left - ee(e, {
            marginLeft: 0
        },
        function() {
            return e.getBoundingClientRect().left
        })) + "px"
    }),
    C.each({
        margin: "",
        padding: "",
        border: "Width"
    },
    function(i, o) {
        C.cssHooks[i + o] = {
            expand: function(e) {
                for (var t = 0,
                n = {},
                r = "string" == typeof e ? e.split(" ") : [e]; t < 4; t++) n[i + J[t] + o] = r[t] || r[t - 2] || r[0];
                return n
            }
        },
        ze.test(i) || (C.cssHooks[i + o].set = Ge)
    }),
    C.fn.extend({
        css: function(e, t) {
            return H(this,
            function(e, t, n) {
                var r, i, o = {},
                s = 0;
                if (Array.isArray(t)) {
                    for (r = Pe(e), i = t.length; s < i; s++) o[t[s]] = C.css(e, t[s], !1, r);
                    return o
                }
                return void 0 !== n ? C.style(e, t, n) : C.css(e, t)
            },
            e, t, 1 < arguments.length)
        }
    }),
    ((C.Tween = Ve).prototype = {
        constructor: Ve,
        init: function(e, t, n, r, i, o) {
            this.elem = e,
            this.prop = n,
            this.easing = i || C.easing._default,
            this.options = t,
            this.start = this.now = this.cur(),
            this.end = r,
            this.unit = o || (C.cssNumber[n] ? "": "px")
        },
        cur: function() {
            var e = Ve.propHooks[this.prop];
            return e && e.get ? e.get(this) : Ve.propHooks._default.get(this)
        },
        run: function(e) {
            var t, n = Ve.propHooks[this.prop];
            return this.options.duration ? this.pos = t = C.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e,
            this.now = (this.end - this.start) * t + this.start,
            this.options.step && this.options.step.call(this.elem, this.now, this),
            n && n.set ? n.set(this) : Ve.propHooks._default.set(this),
            this
        }
    }).init.prototype = Ve.prototype,
    (Ve.propHooks = {
        _default: {
            get: function(e) {
                var t;
                return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = C.css(e.elem, e.prop, "")) && "auto" !== t ? t: 0
            },
            set: function(e) {
                C.fx.step[e.prop] ? C.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[C.cssProps[e.prop]] && !C.cssHooks[e.prop] ? e.elem[e.prop] = e.now: C.style(e.elem, e.prop, e.now + e.unit)
            }
        }
    }).scrollTop = Ve.propHooks.scrollLeft = {
        set: function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    },
    C.easing = {
        linear: function(e) {
            return e
        },
        swing: function(e) {
            return.5 - Math.cos(e * Math.PI) / 2
        },
        _default: "swing"
    },
    C.fx = Ve.prototype.init,
    C.fx.step = {};
    var $e, Ze, Qe, Je, Ke = /^(?:toggle|show|hide)$/,
    et = /queueHooks$/;
    function tt() {
        Ze && (!1 === E.hidden && A.requestAnimationFrame ? A.requestAnimationFrame(tt) : A.setTimeout(tt, C.fx.interval), C.fx.tick())
    }
    function nt() {
        return A.setTimeout(function() {
            $e = void 0
        }),
        $e = C.now()
    }
    function rt(e, t) {
        var n, r = 0,
        i = {
            height: e
        };
        for (t = t ? 1 : 0; r < 4; r += 2 - t) i["margin" + (n = J[r])] = i["padding" + n] = e;
        return t && (i.opacity = i.width = e),
        i
    }
    function it(e, t, n) {
        for (var r, i = (ot.tweeners[t] || []).concat(ot.tweeners["*"]), o = 0, s = i.length; o < s; o++) if (r = i[o].call(n, t, e)) return r
    }
    function ot(o, e, t) {
        var n, s, r = 0,
        i = ot.prefilters.length,
        a = C.Deferred().always(function() {
            delete u.elem
        }),
        u = function() {
            if (s) return ! 1;
            for (var e = $e || nt(), t = Math.max(0, l.startTime + l.duration - e), n = 1 - (t / l.duration || 0), r = 0, i = l.tweens.length; r < i; r++) l.tweens[r].run(n);
            return a.notifyWith(o, [l, n, t]),
            n < 1 && i ? t: (i || a.notifyWith(o, [l, 1, 0]), a.resolveWith(o, [l]), !1)
        },
        l = a.promise({
            elem: o,
            props: C.extend({},
            e),
            opts: C.extend(!0, {
                specialEasing: {},
                easing: C.easing._default
            },
            t),
            originalProperties: e,
            originalOptions: t,
            startTime: $e || nt(),
            duration: t.duration,
            tweens: [],
            createTween: function(e, t) {
                var n = C.Tween(o, l.opts, e, t, l.opts.specialEasing[e] || l.opts.easing);
                return l.tweens.push(n),
                n
            },
            stop: function(e) {
                var t = 0,
                n = e ? l.tweens.length: 0;
                if (s) return this;
                for (s = !0; t < n; t++) l.tweens[t].run(1);
                return e ? (a.notifyWith(o, [l, 1, 0]), a.resolveWith(o, [l, e])) : a.rejectWith(o, [l, e]),
                this
            }
        }),
        d = l.props;
        for (function(e, t) {
            var n, r, i, o, s;
            for (n in e) if (i = t[r = C.camelCase(n)], o = e[n], Array.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), (s = C.cssHooks[r]) && "expand" in s) for (n in o = s.expand(o), delete e[r], o) n in e || (e[n] = o[n], t[n] = i);
            else t[r] = i
        } (d, l.opts.specialEasing); r < i; r++) if (n = ot.prefilters[r].call(l, o, d, l.opts)) return C.isFunction(n.stop) && (C._queueHooks(l.elem, l.opts.queue).stop = C.proxy(n.stop, n)),
        n;
        return C.map(d, it, l),
        C.isFunction(l.opts.start) && l.opts.start.call(o, l),
        l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always),
        C.fx.timer(C.extend(u, {
            elem: o,
            anim: l,
            queue: l.opts.queue
        })),
        l
    }
    C.Animation = C.extend(ot, {
        tweeners: {
            "*": [function(e, t) {
                var n = this.createTween(e, t);
                return te(n.elem, e, Q.exec(t), n),
                n
            }]
        },
        tweener: function(e, t) {
            C.isFunction(e) ? (t = e, e = ["*"]) : e = e.match(P);
            for (var n, r = 0,
            i = e.length; r < i; r++) n = e[r],
            ot.tweeners[n] = ot.tweeners[n] || [],
            ot.tweeners[n].unshift(t)
        },
        prefilters: [function(e, t, n) {
            var r, i, o, s, a, u, l, d, c = "width" in t || "height" in t,
            h = this,
            f = {},
            p = e.style,
            g = e.nodeType && K(e),
            v = G.get(e, "fxshow");
            for (r in n.queue || (null == (s = C._queueHooks(e, "fx")).unqueued && (s.unqueued = 0, a = s.empty.fire, s.empty.fire = function() {
                s.unqueued || a()
            }), s.unqueued++, h.always(function() {
                h.always(function() {
                    s.unqueued--,
                    C.queue(e, "fx").length || s.empty.fire()
                })
            })), t) if (i = t[r], Ke.test(i)) {
                if (delete t[r], o = o || "toggle" === i, i === (g ? "hide": "show")) {
                    if ("show" !== i || !v || void 0 === v[r]) continue;
                    g = !0
                }
                f[r] = v && v[r] || C.style(e, r)
            }
            if ((u = !C.isEmptyObject(t)) || !C.isEmptyObject(f)) for (r in c && 1 === e.nodeType && (n.overflow = [p.overflow, p.overflowX, p.overflowY], null == (l = v && v.display) && (l = G.get(e, "display")), "none" === (d = C.css(e, "display")) && (l ? d = l: (re([e], !0), l = e.style.display || l, d = C.css(e, "display"), re([e]))), ("inline" === d || "inline-block" === d && null != l) && "none" === C.css(e, "float") && (u || (h.done(function() {
                p.display = l
            }), null == l && (d = p.display, l = "none" === d ? "": d)), p.display = "inline-block")), n.overflow && (p.overflow = "hidden", h.always(function() {
                p.overflow = n.overflow[0],
                p.overflowX = n.overflow[1],
                p.overflowY = n.overflow[2]
            })), u = !1, f) u || (v ? "hidden" in v && (g = v.hidden) : v = G.access(e, "fxshow", {
                display: l
            }), o && (v.hidden = !g), g && re([e], !0), h.done(function() {
                for (r in g || re([e]), G.remove(e, "fxshow"), f) C.style(e, r, f[r])
            })),
            u = it(g ? v[r] : 0, r, h),
            r in v || (v[r] = u.start, g && (u.end = u.start, u.start = 0))
        }],
        prefilter: function(e, t) {
            t ? ot.prefilters.unshift(e) : ot.prefilters.push(e)
        }
    }),
    C.speed = function(e, t, n) {
        var r = e && "object" == typeof e ? C.extend({},
        e) : {
            complete: n || !n && t || C.isFunction(e) && e,
            duration: e,
            easing: n && t || t && !C.isFunction(t) && t
        };
        return C.fx.off ? r.duration = 0 : "number" != typeof r.duration && (r.duration in C.fx.speeds ? r.duration = C.fx.speeds[r.duration] : r.duration = C.fx.speeds._default),
        null != r.queue && !0 !== r.queue || (r.queue = "fx"),
        r.old = r.complete,
        r.complete = function() {
            C.isFunction(r.old) && r.old.call(this),
            r.queue && C.dequeue(this, r.queue)
        },
        r
    },
    C.fn.extend({
        fadeTo: function(e, t, n, r) {
            return this.filter(K).css("opacity", 0).show().end().animate({
                opacity: t
            },
            e, n, r)
        },
        animate: function(t, e, n, r) {
            var i = C.isEmptyObject(t),
            o = C.speed(e, n, r),
            s = function() {
                var e = ot(this, C.extend({},
                t), o); (i || G.get(this, "finish")) && e.stop(!0)
            };
            return s.finish = s,
            i || !1 === o.queue ? this.each(s) : this.queue(o.queue, s)
        },
        stop: function(i, e, o) {
            var s = function(e) {
                var t = e.stop;
                delete e.stop,
                t(o)
            };
            return "string" != typeof i && (o = e, e = i, i = void 0),
            e && !1 !== i && this.queue(i || "fx", []),
            this.each(function() {
                var e = !0,
                t = null != i && i + "queueHooks",
                n = C.timers,
                r = G.get(this);
                if (t) r[t] && r[t].stop && s(r[t]);
                else for (t in r) r[t] && r[t].stop && et.test(t) && s(r[t]);
                for (t = n.length; t--;) n[t].elem !== this || null != i && n[t].queue !== i || (n[t].anim.stop(o), e = !1, n.splice(t, 1)); ! e && o || C.dequeue(this, i)
            })
        },
        finish: function(s) {
            return ! 1 !== s && (s = s || "fx"),
            this.each(function() {
                var e, t = G.get(this),
                n = t[s + "queue"],
                r = t[s + "queueHooks"],
                i = C.timers,
                o = n ? n.length: 0;
                for (t.finish = !0, C.queue(this, s, []), r && r.stop && r.stop.call(this, !0), e = i.length; e--;) i[e].elem === this && i[e].queue === s && (i[e].anim.stop(!0), i.splice(e, 1));
                for (e = 0; e < o; e++) n[e] && n[e].finish && n[e].finish.call(this);
                delete t.finish
            })
        }
    }),
    C.each(["toggle", "show", "hide"],
    function(e, r) {
        var i = C.fn[r];
        C.fn[r] = function(e, t, n) {
            return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(rt(r, !0), e, t, n)
        }
    }),
    C.each({
        slideDown: rt("show"),
        slideUp: rt("hide"),
        slideToggle: rt("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    },
    function(e, r) {
        C.fn[e] = function(e, t, n) {
            return this.animate(r, e, t, n)
        }
    }),
    C.timers = [],
    C.fx.tick = function() {
        var e, t = 0,
        n = C.timers;
        for ($e = C.now(); t < n.length; t++)(e = n[t])() || n[t] !== e || n.splice(t--, 1);
        n.length || C.fx.stop(),
        $e = void 0
    },
    C.fx.timer = function(e) {
        C.timers.push(e),
        C.fx.start()
    },
    C.fx.interval = 13,
    C.fx.start = function() {
        Ze || (Ze = !0, tt())
    },
    C.fx.stop = function() {
        Ze = null
    },
    C.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    },
    C.fn.delay = function(r, e) {
        return r = C.fx && C.fx.speeds[r] || r,
        e = e || "fx",
        this.queue(e,
        function(e, t) {
            var n = A.setTimeout(e, r);
            t.stop = function() {
                A.clearTimeout(n)
            }
        })
    },
    Qe = E.createElement("input"),
    Je = E.createElement("select").appendChild(E.createElement("option")),
    Qe.type = "checkbox",
    v.checkOn = "" !== Qe.value,
    v.optSelected = Je.selected,
    (Qe = E.createElement("input")).value = "t",
    Qe.type = "radio",
    v.radioValue = "t" === Qe.value;
    var st, at = C.expr.attrHandle;
    C.fn.extend({
        attr: function(e, t) {
            return H(this, C.attr, e, t, 1 < arguments.length)
        },
        removeAttr: function(e) {
            return this.each(function() {
                C.removeAttr(this, e)
            })
        }
    }),
    C.extend({
        attr: function(e, t, n) {
            var r, i, o = e.nodeType;
            if (3 !== o && 8 !== o && 2 !== o) return void 0 === e.getAttribute ? C.prop(e, t, n) : (1 === o && C.isXMLDoc(e) || (i = C.attrHooks[t.toLowerCase()] || (C.expr.match.bool.test(t) ? st: void 0)), void 0 !== n ? null === n ? void C.removeAttr(e, t) : i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r: (e.setAttribute(t, n + ""), n) : i && "get" in i && null !== (r = i.get(e, t)) ? r: null == (r = C.find.attr(e, t)) ? void 0 : r)
        },
        attrHooks: {
            type: {
                set: function(e, t) {
                    if (!v.radioValue && "radio" === t && S(e, "input")) {
                        var n = e.value;
                        return e.setAttribute("type", t),
                        n && (e.value = n),
                        t
                    }
                }
            }
        },
        removeAttr: function(e, t) {
            var n, r = 0,
            i = t && t.match(P);
            if (i && 1 === e.nodeType) for (; n = i[r++];) e.removeAttribute(n)
        }
    }),
    st = {
        set: function(e, t, n) {
            return ! 1 === t ? C.removeAttr(e, n) : e.setAttribute(n, n),
            n
        }
    },
    C.each(C.expr.match.bool.source.match(/\w+/g),
    function(e, t) {
        var s = at[t] || C.find.attr;
        at[t] = function(e, t, n) {
            var r, i, o = t.toLowerCase();
            return n || (i = at[o], at[o] = r, r = null != s(e, t, n) ? o: null, at[o] = i),
            r
        }
    });
    var ut = /^(?:input|select|textarea|button)$/i,
    lt = /^(?:a|area)$/i;
    function dt(e) {
        return (e.match(P) || []).join(" ")
    }
    function ct(e) {
        return e.getAttribute && e.getAttribute("class") || ""
    }
    C.fn.extend({
        prop: function(e, t) {
            return H(this, C.prop, e, t, 1 < arguments.length)
        },
        removeProp: function(e) {
            return this.each(function() {
                delete this[C.propFix[e] || e]
            })
        }
    }),
    C.extend({
        prop: function(e, t, n) {
            var r, i, o = e.nodeType;
            if (3 !== o && 8 !== o && 2 !== o) return 1 === o && C.isXMLDoc(e) || (t = C.propFix[t] || t, i = C.propHooks[t]),
            void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r: e[t] = n: i && "get" in i && null !== (r = i.get(e, t)) ? r: e[t]
        },
        propHooks: {
            tabIndex: {
                get: function(e) {
                    var t = C.find.attr(e, "tabindex");
                    return t ? parseInt(t, 10) : ut.test(e.nodeName) || lt.test(e.nodeName) && e.href ? 0 : -1
                }
            }
        },
        propFix: {
            for: "htmlFor",
            class: "className"
        }
    }),
    v.optSelected || (C.propHooks.selected = {
        get: function(e) {
            var t = e.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex,
            null
        },
        set: function(e) {
            var t = e.parentNode;
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
        }
    }),
    C.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"],
    function() {
        C.propFix[this.toLowerCase()] = this
    }),
    C.fn.extend({
        addClass: function(t) {
            var e, n, r, i, o, s, a, u = 0;
            if (C.isFunction(t)) return this.each(function(e) {
                C(this).addClass(t.call(this, e, ct(this)))
            });
            if ("string" == typeof t && t) for (e = t.match(P) || []; n = this[u++];) if (i = ct(n), r = 1 === n.nodeType && " " + dt(i) + " ") {
                for (s = 0; o = e[s++];) r.indexOf(" " + o + " ") < 0 && (r += o + " ");
                i !== (a = dt(r)) && n.setAttribute("class", a)
            }
            return this
        },
        removeClass: function(t) {
            var e, n, r, i, o, s, a, u = 0;
            if (C.isFunction(t)) return this.each(function(e) {
                C(this).removeClass(t.call(this, e, ct(this)))
            });
            if (!arguments.length) return this.attr("class", "");
            if ("string" == typeof t && t) for (e = t.match(P) || []; n = this[u++];) if (i = ct(n), r = 1 === n.nodeType && " " + dt(i) + " ") {
                for (s = 0; o = e[s++];) for (; - 1 < r.indexOf(" " + o + " ");) r = r.replace(" " + o + " ", " ");
                i !== (a = dt(r)) && n.setAttribute("class", a)
            }
            return this
        },
        toggleClass: function(i, t) {
            var o = typeof i;
            return "boolean" == typeof t && "string" === o ? t ? this.addClass(i) : this.removeClass(i) : C.isFunction(i) ? this.each(function(e) {
                C(this).toggleClass(i.call(this, e, ct(this), t), t)
            }) : this.each(function() {
                var e, t, n, r;
                if ("string" === o) for (t = 0, n = C(this), r = i.match(P) || []; e = r[t++];) n.hasClass(e) ? n.removeClass(e) : n.addClass(e);
                else void 0 !== i && "boolean" !== o || ((e = ct(this)) && G.set(this, "__className__", e), this.setAttribute && this.setAttribute("class", e || !1 === i ? "": G.get(this, "__className__") || ""))
            })
        },
        hasClass: function(e) {
            var t, n, r = 0;
            for (t = " " + e + " "; n = this[r++];) if (1 === n.nodeType && -1 < (" " + dt(ct(n)) + " ").indexOf(t)) return ! 0;
            return ! 1
        }
    });
    var ht = /\r/g;
    C.fn.extend({
        val: function(n) {
            var r, e, i, t = this[0];
            return arguments.length ? (i = C.isFunction(n), this.each(function(e) {
                var t;
                1 === this.nodeType && (null == (t = i ? n.call(this, e, C(this).val()) : n) ? t = "": "number" == typeof t ? t += "": Array.isArray(t) && (t = C.map(t,
                function(e) {
                    return null == e ? "": e + ""
                })), (r = C.valHooks[this.type] || C.valHooks[this.nodeName.toLowerCase()]) && "set" in r && void 0 !== r.set(this, t, "value") || (this.value = t))
            })) : t ? (r = C.valHooks[t.type] || C.valHooks[t.nodeName.toLowerCase()]) && "get" in r && void 0 !== (e = r.get(t, "value")) ? e: "string" == typeof(e = t.value) ? e.replace(ht, "") : null == e ? "": e: void 0
        }
    }),
    C.extend({
        valHooks: {
            option: {
                get: function(e) {
                    var t = C.find.attr(e, "value");
                    return null != t ? t: dt(C.text(e))
                }
            },
            select: {
                get: function(e) {
                    var t, n, r, i = e.options,
                    o = e.selectedIndex,
                    s = "select-one" === e.type,
                    a = s ? null: [],
                    u = s ? o + 1 : i.length;
                    for (r = o < 0 ? u: s ? o: 0; r < u; r++) if (((n = i[r]).selected || r === o) && !n.disabled && (!n.parentNode.disabled || !S(n.parentNode, "optgroup"))) {
                        if (t = C(n).val(), s) return t;
                        a.push(t)
                    }
                    return a
                },
                set: function(e, t) {
                    for (var n, r, i = e.options,
                    o = C.makeArray(t), s = i.length; s--;)((r = i[s]).selected = -1 < C.inArray(C.valHooks.option.get(r), o)) && (n = !0);
                    return n || (e.selectedIndex = -1),
                    o
                }
            }
        }
    }),
    C.each(["radio", "checkbox"],
    function() {
        C.valHooks[this] = {
            set: function(e, t) {
                if (Array.isArray(t)) return e.checked = -1 < C.inArray(C(e).val(), t)
            }
        },
        v.checkOn || (C.valHooks[this].get = function(e) {
            return null === e.getAttribute("value") ? "on": e.value
        })
    });
    var ft = /^(?:focusinfocus|focusoutblur)$/;
    C.extend(C.event, {
        trigger: function(e, t, n, r) {
            var i, o, s, a, u, l, d, c = [n || E],
            h = p.call(e, "type") ? e.type: e,
            f = p.call(e, "namespace") ? e.namespace.split(".") : [];
            if (o = s = n = n || E, 3 !== n.nodeType && 8 !== n.nodeType && !ft.test(h + C.event.triggered) && ( - 1 < h.indexOf(".") && (h = (f = h.split(".")).shift(), f.sort()), u = h.indexOf(":") < 0 && "on" + h, (e = e[C.expando] ? e: new C.Event(h, "object" == typeof e && e)).isTrigger = r ? 2 : 3, e.namespace = f.join("."), e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = n), t = null == t ? [e] : C.makeArray(t, [e]), d = C.event.special[h] || {},
            r || !d.trigger || !1 !== d.trigger.apply(n, t))) {
                if (!r && !d.noBubble && !C.isWindow(n)) {
                    for (a = d.delegateType || h, ft.test(a + h) || (o = o.parentNode); o; o = o.parentNode) c.push(o),
                    s = o;
                    s === (n.ownerDocument || E) && c.push(s.defaultView || s.parentWindow || A)
                }
                for (i = 0; (o = c[i++]) && !e.isPropagationStopped();) e.type = 1 < i ? a: d.bindType || h,
                (l = (G.get(o, "events") || {})[e.type] && G.get(o, "handle")) && l.apply(o, t),
                (l = u && o[u]) && l.apply && X(o) && (e.result = l.apply(o, t), !1 === e.result && e.preventDefault());
                return e.type = h,
                r || e.isDefaultPrevented() || d._default && !1 !== d._default.apply(c.pop(), t) || !X(n) || u && C.isFunction(n[h]) && !C.isWindow(n) && ((s = n[u]) && (n[u] = null), n[C.event.triggered = h](), C.event.triggered = void 0, s && (n[u] = s)),
                e.result
            }
        },
        simulate: function(e, t, n) {
            var r = C.extend(new C.Event, n, {
                type: e,
                isSimulated: !0
            });
            C.event.trigger(r, null, t)
        }
    }),
    C.fn.extend({
        trigger: function(e, t) {
            return this.each(function() {
                C.event.trigger(e, t, this)
            })
        },
        triggerHandler: function(e, t) {
            var n = this[0];
            if (n) return C.event.trigger(e, t, n, !0)
        }
    }),
    C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
    function(e, n) {
        C.fn[n] = function(e, t) {
            return 0 < arguments.length ? this.on(n, null, e, t) : this.trigger(n)
        }
    }),
    C.fn.extend({
        hover: function(e, t) {
            return this.mouseenter(e).mouseleave(t || e)
        }
    }),
    v.focusin = "onfocusin" in A,
    v.focusin || C.each({
        focus: "focusin",
        blur: "focusout"
    },
    function(n, r) {
        var i = function(e) {
            C.event.simulate(r, e.target, C.event.fix(e))
        };
        C.event.special[r] = {
            setup: function() {
                var e = this.ownerDocument || this,
                t = G.access(e, r);
                t || e.addEventListener(n, i, !0),
                G.access(e, r, (t || 0) + 1)
            },
            teardown: function() {
                var e = this.ownerDocument || this,
                t = G.access(e, r) - 1;
                t ? G.access(e, r, t) : (e.removeEventListener(n, i, !0), G.remove(e, r))
            }
        }
    });
    var pt = A.location,
    gt = C.now(),
    vt = /\?/;
    C.parseXML = function(e) {
        var t;
        if (!e || "string" != typeof e) return null;
        try {
            t = (new A.DOMParser).parseFromString(e, "text/xml")
        } catch(e) {
            t = void 0
        }
        return t && !t.getElementsByTagName("parsererror").length || C.error("Invalid XML: " + e),
        t
    };
    var yt = /\[\]$/,
    mt = /\r?\n/g,
    _t = /^(?:submit|button|image|reset|file)$/i,
    bt = /^(?:input|select|textarea|keygen)/i;
    function xt(n, e, r, i) {
        var t;
        if (Array.isArray(e)) C.each(e,
        function(e, t) {
            r || yt.test(n) ? i(n, t) : xt(n + "[" + ("object" == typeof t && null != t ? e: "") + "]", t, r, i)
        });
        else if (r || "object" !== C.type(e)) i(n, e);
        else for (t in e) xt(n + "[" + t + "]", e[t], r, i)
    }
    C.param = function(e, t) {
        var n, r = [],
        i = function(e, t) {
            var n = C.isFunction(t) ? t() : t;
            r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "": n)
        };
        if (Array.isArray(e) || e.jquery && !C.isPlainObject(e)) C.each(e,
        function() {
            i(this.name, this.value)
        });
        else for (n in e) xt(n, e[n], t, i);
        return r.join("&")
    },
    C.fn.extend({
        serialize: function() {
            return C.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var e = C.prop(this, "elements");
                return e ? C.makeArray(e) : this
            }).filter(function() {
                var e = this.type;
                return this.name && !C(this).is(":disabled") && bt.test(this.nodeName) && !_t.test(e) && (this.checked || !ie.test(e))
            }).map(function(e, t) {
                var n = C(this).val();
                return null == n ? null: Array.isArray(n) ? C.map(n,
                function(e) {
                    return {
                        name: t.name,
                        value: e.replace(mt, "\r\n")
                    }
                }) : {
                    name: t.name,
                    value: n.replace(mt, "\r\n")
                }
            }).get()
        }
    });
    var wt = /%20/g,
    At = /#.*$/,
    Et = /([?&])_=[^&]*/,
    Ct = /^(.*?):[ \t]*([^\r\n]*)$/gm,
    St = /^(?:GET|HEAD)$/,
    It = /^\/\//,
    Tt = {},
    Nt = {},
    kt = "*/".concat("*"),
    Lt = E.createElement("a");
    function Rt(o) {
        return function(e, t) {
            "string" != typeof e && (t = e, e = "*");
            var n, r = 0,
            i = e.toLowerCase().match(P) || [];
            if (C.isFunction(t)) for (; n = i[r++];)"+" === n[0] ? (n = n.slice(1) || "*", (o[n] = o[n] || []).unshift(t)) : (o[n] = o[n] || []).push(t)
        }
    }
    function zt(t, i, o, s) {
        var a = {},
        u = t === Nt;
        function l(e) {
            var r;
            return a[e] = !0,
            C.each(t[e] || [],
            function(e, t) {
                var n = t(i, o, s);
                return "string" != typeof n || u || a[n] ? u ? !(r = n) : void 0 : (i.dataTypes.unshift(n), l(n), !1)
            }),
            r
        }
        return l(i.dataTypes[0]) || !a["*"] && l("*")
    }
    function Mt(e, t) {
        var n, r, i = C.ajaxSettings.flatOptions || {};
        for (n in t) void 0 !== t[n] && ((i[n] ? e: r || (r = {}))[n] = t[n]);
        return r && C.extend(!0, e, r),
        e
    }
    Lt.href = pt.href,
    C.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: pt.href,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": kt,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": JSON.parse,
                "text xml": C.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(e, t) {
            return t ? Mt(Mt(e, C.ajaxSettings), t) : Mt(C.ajaxSettings, e)
        },
        ajaxPrefilter: Rt(Tt),
        ajaxTransport: Rt(Nt),
        ajax: function(e, t) {
            "object" == typeof e && (t = e, e = void 0),
            t = t || {};
            var d, c, h, n, f, r, p, g, i, o, v = C.ajaxSetup({},
            t),
            y = v.context || v,
            m = v.context && (y.nodeType || y.jquery) ? C(y) : C.event,
            _ = C.Deferred(),
            b = C.Callbacks("once memory"),
            x = v.statusCode || {},
            s = {},
            a = {},
            u = "canceled",
            w = {
                readyState: 0,
                getResponseHeader: function(e) {
                    var t;
                    if (p) {
                        if (!n) for (n = {}; t = Ct.exec(h);) n[t[1].toLowerCase()] = t[2];
                        t = n[e.toLowerCase()]
                    }
                    return null == t ? null: t
                },
                getAllResponseHeaders: function() {
                    return p ? h: null
                },
                setRequestHeader: function(e, t) {
                    return null == p && (e = a[e.toLowerCase()] = a[e.toLowerCase()] || e, s[e] = t),
                    this
                },
                overrideMimeType: function(e) {
                    return null == p && (v.mimeType = e),
                    this
                },
                statusCode: function(e) {
                    var t;
                    if (e) if (p) w.always(e[w.status]);
                    else for (t in e) x[t] = [x[t], e[t]];
                    return this
                },
                abort: function(e) {
                    var t = e || u;
                    return d && d.abort(t),
                    l(0, t),
                    this
                }
            };
            if (_.promise(w), v.url = ((e || v.url || pt.href) + "").replace(It, pt.protocol + "//"), v.type = t.method || t.type || v.method || v.type, v.dataTypes = (v.dataType || "*").toLowerCase().match(P) || [""], null == v.crossDomain) {
                r = E.createElement("a");
                try {
                    r.href = v.url,
                    r.href = r.href,
                    v.crossDomain = Lt.protocol + "//" + Lt.host != r.protocol + "//" + r.host
                } catch(e) {
                    v.crossDomain = !0
                }
            }
            if (v.data && v.processData && "string" != typeof v.data && (v.data = C.param(v.data, v.traditional)), zt(Tt, v, t, w), p) return w;
            for (i in (g = C.event && v.global) && 0 == C.active++&&C.event.trigger("ajaxStart"), v.type = v.type.toUpperCase(), v.hasContent = !St.test(v.type), c = v.url.replace(At, ""), v.hasContent ? v.data && v.processData && 0 === (v.contentType || "").indexOf("application/x-www-form-urlencoded") && (v.data = v.data.replace(wt, "+")) : (o = v.url.slice(c.length), v.data && (c += (vt.test(c) ? "&": "?") + v.data, delete v.data), !1 === v.cache && (c = c.replace(Et, "$1"), o = (vt.test(c) ? "&": "?") + "_=" + gt+++o), v.url = c + o), v.ifModified && (C.lastModified[c] && w.setRequestHeader("If-Modified-Since", C.lastModified[c]), C.etag[c] && w.setRequestHeader("If-None-Match", C.etag[c])), (v.data && v.hasContent && !1 !== v.contentType || t.contentType) && w.setRequestHeader("Content-Type", v.contentType), w.setRequestHeader("Accept", v.dataTypes[0] && v.accepts[v.dataTypes[0]] ? v.accepts[v.dataTypes[0]] + ("*" !== v.dataTypes[0] ? ", " + kt + "; q=0.01": "") : v.accepts["*"]), v.headers) w.setRequestHeader(i, v.headers[i]);
            if (v.beforeSend && (!1 === v.beforeSend.call(y, w, v) || p)) return w.abort();
            if (u = "abort", b.add(v.complete), w.done(v.success), w.fail(v.error), d = zt(Nt, v, t, w)) {
                if (w.readyState = 1, g && m.trigger("ajaxSend", [w, v]), p) return w;
                v.async && 0 < v.timeout && (f = A.setTimeout(function() {
                    w.abort("timeout")
                },
                v.timeout));
                try {
                    p = !1,
                    d.send(s, l)
                } catch(e) {
                    if (p) throw e;
                    l( - 1, e)
                }
            } else l( - 1, "No Transport");
            function l(e, t, n, r) {
                var i, o, s, a, u, l = t;
                p || (p = !0, f && A.clearTimeout(f), d = void 0, h = r || "", w.readyState = 0 < e ? 4 : 0, i = 200 <= e && e < 300 || 304 === e, n && (a = function(e, t, n) {
                    for (var r, i, o, s, a = e.contents,
                    u = e.dataTypes;
                    "*" === u[0];) u.shift(),
                    void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
                    if (r) for (i in a) if (a[i] && a[i].test(r)) {
                        u.unshift(i);
                        break
                    }
                    if (u[0] in n) o = u[0];
                    else {
                        for (i in n) {
                            if (!u[0] || e.converters[i + " " + u[0]]) {
                                o = i;
                                break
                            }
                            s || (s = i)
                        }
                        o = o || s
                    }
                    if (o) return o !== u[0] && u.unshift(o),
                    n[o]
                } (v, w, n)), a = function(e, t, n, r) {
                    var i, o, s, a, u, l = {},
                    d = e.dataTypes.slice();
                    if (d[1]) for (s in e.converters) l[s.toLowerCase()] = e.converters[s];
                    for (o = d.shift(); o;) if (e.responseFields[o] && (n[e.responseFields[o]] = t), !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), u = o, o = d.shift()) if ("*" === o) o = u;
                    else if ("*" !== u && u !== o) {
                        if (! (s = l[u + " " + o] || l["* " + o])) for (i in l) if ((a = i.split(" "))[1] === o && (s = l[u + " " + a[0]] || l["* " + a[0]])) { ! 0 === s ? s = l[i] : !0 !== l[i] && (o = a[0], d.unshift(a[1]));
                            break
                        }
                        if (!0 !== s) if (s && e.throws) t = s(t);
                        else try {
                            t = s(t)
                        } catch(e) {
                            return {
                                state: "parsererror",
                                error: s ? e: "No conversion from " + u + " to " + o
                            }
                        }
                    }
                    return {
                        state: "success",
                        data: t
                    }
                } (v, a, w, i), i ? (v.ifModified && ((u = w.getResponseHeader("Last-Modified")) && (C.lastModified[c] = u), (u = w.getResponseHeader("etag")) && (C.etag[c] = u)), 204 === e || "HEAD" === v.type ? l = "nocontent": 304 === e ? l = "notmodified": (l = a.state, o = a.data, i = !(s = a.error))) : (s = l, !e && l || (l = "error", e < 0 && (e = 0))), w.status = e, w.statusText = (t || l) + "", i ? _.resolveWith(y, [o, l, w]) : _.rejectWith(y, [w, l, s]), w.statusCode(x), x = void 0, g && m.trigger(i ? "ajaxSuccess": "ajaxError", [w, v, i ? o: s]), b.fireWith(y, [w, l]), g && (m.trigger("ajaxComplete", [w, v]), --C.active || C.event.trigger("ajaxStop")))
            }
            return w
        },
        getJSON: function(e, t, n) {
            return C.get(e, t, n, "json")
        },
        getScript: function(e, t) {
            return C.get(e, void 0, t, "script")
        }
    }),
    C.each(["get", "post"],
    function(e, i) {
        C[i] = function(e, t, n, r) {
            return C.isFunction(t) && (r = r || n, n = t, t = void 0),
            C.ajax(C.extend({
                url: e,
                type: i,
                dataType: r,
                data: t,
                success: n
            },
            C.isPlainObject(e) && e))
        }
    }),
    C._evalUrl = function(e) {
        return C.ajax({
            url: e,
            type: "GET",
            dataType: "script",
            cache: !0,
            async: !1,
            global: !1,
            throws: !0
        })
    },
    C.fn.extend({
        wrapAll: function(e) {
            var t;
            return this[0] && (C.isFunction(e) && (e = e.call(this[0])), t = C(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                for (var e = this; e.firstElementChild;) e = e.firstElementChild;
                return e
            }).append(this)),
            this
        },
        wrapInner: function(n) {
            return C.isFunction(n) ? this.each(function(e) {
                C(this).wrapInner(n.call(this, e))
            }) : this.each(function() {
                var e = C(this),
                t = e.contents();
                t.length ? t.wrapAll(n) : e.append(n)
            })
        },
        wrap: function(t) {
            var n = C.isFunction(t);
            return this.each(function(e) {
                C(this).wrapAll(n ? t.call(this, e) : t)
            })
        },
        unwrap: function(e) {
            return this.parent(e).not("body").each(function() {
                C(this).replaceWith(this.childNodes)
            }),
            this
        }
    }),
    C.expr.pseudos.hidden = function(e) {
        return ! C.expr.pseudos.visible(e)
    },
    C.expr.pseudos.visible = function(e) {
        return !! (e.offsetWidth || e.offsetHeight || e.getClientRects().length)
    },
    C.ajaxSettings.xhr = function() {
        try {
            return new A.XMLHttpRequest
        } catch(e) {}
    };
    var Pt = {
        0 : 200,
        1223 : 204
    },
    Ft = C.ajaxSettings.xhr();
    v.cors = !!Ft && "withCredentials" in Ft,
    v.ajax = Ft = !!Ft,
    C.ajaxTransport(function(i) {
        var o, s;
        if (v.cors || Ft && !i.crossDomain) return {
            send: function(e, t) {
                var n, r = i.xhr();
                if (r.open(i.type, i.url, i.async, i.username, i.password), i.xhrFields) for (n in i.xhrFields) r[n] = i.xhrFields[n];
                for (n in i.mimeType && r.overrideMimeType && r.overrideMimeType(i.mimeType), i.crossDomain || e["X-Requested-With"] || (e["X-Requested-With"] = "XMLHttpRequest"), e) r.setRequestHeader(n, e[n]);
                o = function(e) {
                    return function() {
                        o && (o = s = r.onload = r.onerror = r.onabort = r.onreadystatechange = null, "abort" === e ? r.abort() : "error" === e ? "number" != typeof r.status ? t(0, "error") : t(r.status, r.statusText) : t(Pt[r.status] || r.status, r.statusText, "text" !== (r.responseType || "text") || "string" != typeof r.responseText ? {
                            binary: r.response
                        }: {
                            text: r.responseText
                        },
                        r.getAllResponseHeaders()))
                    }
                },
                r.onload = o(),
                s = r.onerror = o("error"),
                void 0 !== r.onabort ? r.onabort = s: r.onreadystatechange = function() {
                    4 === r.readyState && A.setTimeout(function() {
                        o && s()
                    })
                },
                o = o("abort");
                try {
                    r.send(i.hasContent && i.data || null)
                } catch(e) {
                    if (o) throw e
                }
            },
            abort: function() {
                o && o()
            }
        }
    }),
    C.ajaxPrefilter(function(e) {
        e.crossDomain && (e.contents.script = !1)
    }),
    C.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /\b(?:java|ecma)script\b/
        },
        converters: {
            "text script": function(e) {
                return C.globalEval(e),
                e
            }
        }
    }),
    C.ajaxPrefilter("script",
    function(e) {
        void 0 === e.cache && (e.cache = !1),
        e.crossDomain && (e.type = "GET")
    }),
    C.ajaxTransport("script",
    function(n) {
        var r, i;
        if (n.crossDomain) return {
            send: function(e, t) {
                r = C("<script>").prop({
                    charset: n.scriptCharset,
                    src: n.url
                }).on("load error", i = function(e) {
                    r.remove(),
                    i = null,
                    e && t("error" === e.type ? 404 : 200, e.type)
                }),
                E.head.appendChild(r[0])
            },
            abort: function() {
                i && i()
            }
        }
    });
    var Dt, Ot = [],
    Bt = /(=)\?(?=&|$)|\?\?/;
    C.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var e = Ot.pop() || C.expando + "_" + gt++;
            return this[e] = !0,
            e
        }
    }),
    C.ajaxPrefilter("json jsonp",
    function(e, t, n) {
        var r, i, o, s = !1 !== e.jsonp && (Bt.test(e.url) ? "url": "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Bt.test(e.data) && "data");
        if (s || "jsonp" === e.dataTypes[0]) return r = e.jsonpCallback = C.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback,
        s ? e[s] = e[s].replace(Bt, "$1" + r) : !1 !== e.jsonp && (e.url += (vt.test(e.url) ? "&": "?") + e.jsonp + "=" + r),
        e.converters["script json"] = function() {
            return o || C.error(r + " was not called"),
            o[0]
        },
        e.dataTypes[0] = "json",
        i = A[r],
        A[r] = function() {
            o = arguments
        },
        n.always(function() {
            void 0 === i ? C(A).removeProp(r) : A[r] = i,
            e[r] && (e.jsonpCallback = t.jsonpCallback, Ot.push(r)),
            o && C.isFunction(i) && i(o[0]),
            o = i = void 0
        }),
        "script"
    }),
    v.createHTMLDocument = ((Dt = E.implementation.createHTMLDocument("").body).innerHTML = "<form></form><form></form>", 2 === Dt.childNodes.length),
    C.parseHTML = function(e, t, n) {
        return "string" != typeof e ? [] : ("boolean" == typeof t && (n = t, t = !1), t || (v.createHTMLDocument ? ((r = (t = E.implementation.createHTMLDocument("")).createElement("base")).href = E.location.href, t.head.appendChild(r)) : t = E), o = !n && [], (i = I.exec(e)) ? [t.createElement(i[1])] : (i = fe([e], t, o), o && o.length && C(o).remove(), C.merge([], i.childNodes)));
        var r, i, o
    }, C.fn.load = function(e, t, n) {
        var r, i, o, s = this,
        a = e.indexOf(" ");
        return - 1 < a && (r = dt(e.slice(a)), e = e.slice(0, a)),
        C.isFunction(t) ? (n = t, t = void 0) : t && "object" == typeof t && (i = "POST"),
        0 < s.length && C.ajax({
            url: e,
            type: i || "GET",
            dataType: "html",
            data: t
        }).done(function(e) {
            o = arguments,
            s.html(r ? C("<div>").append(C.parseHTML(e)).find(r) : e)
        }).always(n &&
        function(e, t) {
            s.each(function() {
                n.apply(this, o || [e.responseText, t, e])
            })
        }),
        this
    },
    C.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"],
    function(e, t) {
        C.fn[t] = function(e) {
            return this.on(t, e)
        }
    }),
    C.expr.pseudos.animated = function(t) {
        return C.grep(C.timers,
        function(e) {
            return t === e.elem
        }).length
    },
    C.offset = {
        setOffset: function(e, t, n) {
            var r, i, o, s, a, u, l = C.css(e, "position"),
            d = C(e),
            c = {};
            "static" === l && (e.style.position = "relative"),
            a = d.offset(),
            o = C.css(e, "top"),
            u = C.css(e, "left"),
            ("absolute" === l || "fixed" === l) && -1 < (o + u).indexOf("auto") ? (s = (r = d.position()).top, i = r.left) : (s = parseFloat(o) || 0, i = parseFloat(u) || 0),
            C.isFunction(t) && (t = t.call(e, n, C.extend({},
            a))),
            null != t.top && (c.top = t.top - a.top + s),
            null != t.left && (c.left = t.left - a.left + i),
            "using" in t ? t.using.call(e, c) : d.css(c)
        }
    },
    C.fn.extend({
        offset: function(t) {
            if (arguments.length) return void 0 === t ? this: this.each(function(e) {
                C.offset.setOffset(this, t, e)
            });
            var e, n, r, i, o = this[0];
            return o ? o.getClientRects().length ? (r = o.getBoundingClientRect(), n = (e = o.ownerDocument).documentElement, i = e.defaultView, {
                top: r.top + i.pageYOffset - n.clientTop,
                left: r.left + i.pageXOffset - n.clientLeft
            }) : {
                top: 0,
                left: 0
            }: void 0
        },
        position: function() {
            if (this[0]) {
                var e, t, n = this[0],
                r = {
                    top: 0,
                    left: 0
                };
                return "fixed" === C.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), S(e[0], "html") || (r = e.offset()), r = {
                    top: r.top + C.css(e[0], "borderTopWidth", !0),
                    left: r.left + C.css(e[0], "borderLeftWidth", !0)
                }),
                {
                    top: t.top - r.top - C.css(n, "marginTop", !0),
                    left: t.left - r.left - C.css(n, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var e = this.offsetParent; e && "static" === C.css(e, "position");) e = e.offsetParent;
                return e || pe
            })
        }
    }),
    C.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    },
    function(t, i) {
        var o = "pageYOffset" === i;
        C.fn[t] = function(e) {
            return H(this,
            function(e, t, n) {
                var r;
                return C.isWindow(e) ? r = e: 9 === e.nodeType && (r = e.defaultView),
                void 0 === n ? r ? r[i] : e[t] : void(r ? r.scrollTo(o ? r.pageXOffset: n, o ? n: r.pageYOffset) : e[t] = n)
            },
            t, e, arguments.length)
        }
    }),
    C.each(["top", "left"],
    function(e, n) {
        C.cssHooks[n] = De(v.pixelPosition,
        function(e, t) {
            if (t) return t = Fe(e, n),
            Me.test(t) ? C(e).position()[n] + "px": t
        })
    }),
    C.each({
        Height: "height",
        Width: "width"
    },
    function(s, a) {
        C.each({
            padding: "inner" + s,
            content: a,
            "": "outer" + s
        },
        function(r, o) {
            C.fn[o] = function(e, t) {
                var n = arguments.length && (r || "boolean" != typeof e),
                i = r || (!0 === e || !0 === t ? "margin": "border");
                return H(this,
                function(e, t, n) {
                    var r;
                    return C.isWindow(e) ? 0 === o.indexOf("outer") ? e["inner" + s] : e.document.documentElement["client" + s] : 9 === e.nodeType ? (r = e.documentElement, Math.max(e.body["scroll" + s], r["scroll" + s], e.body["offset" + s], r["offset" + s], r["client" + s])) : void 0 === n ? C.css(e, t, i) : C.style(e, t, n, i)
                },
                a, n ? e: void 0, n)
            }
        })
    }),
    C.fn.extend({
        bind: function(e, t, n) {
            return this.on(e, null, t, n)
        },
        unbind: function(e, t) {
            return this.off(e, null, t)
        },
        delegate: function(e, t, n, r) {
            return this.on(t, e, n, r)
        },
        undelegate: function(e, t, n) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
        }
    }),
    C.holdReady = function(e) {
        e ? C.readyWait++:C.ready(!0)
    },
    C.isArray = Array.isArray,
    C.parseJSON = JSON.parse,
    C.nodeName = S,
    "function" == typeof define && define.amd && define("jquery", [],
    function() {
        return C
    });
    var jt = A.jQuery,
    Ut = A.$;
    return C.noConflict = function(e) {
        return A.$ === C && (A.$ = Ut),
        e && A.jQuery === C && (A.jQuery = jt),
        C
    },
    e || (A.jQuery = A.$ = C),
    C
}), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery");
var GRAPH; !
function(e) {
    "use strict";
    var t = jQuery.fn.jquery.split(" ")[0].split(".");
    if (t[0] < 2 && t[1] < 9 || 1 == t[0] && 9 == t[1] && t[2] < 1 || 3 < t[0]) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")
} (),
function(r) {
    "use strict";
    r.fn.emulateTransitionEnd = function(e) {
        var t = !1,
        n = this;
        r(this).one("bsTransitionEnd",
        function() {
            t = !0
        });
        return setTimeout(function() {
            t || r(n).trigger(r.support.transition.end)
        },
        e),
        this
    },
    r(function() {
        r.support.transition = function() {
            var e = document.createElement("bootstrap"),
            t = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd otransitionend",
                transition: "transitionend"
            };
            for (var n in t) if (void 0 !== e.style[n]) return {
                end: t[n]
            };
            return ! 1
        } (),
        r.support.transition && (r.event.special.bsTransitionEnd = {
            bindType: r.support.transition.end,
            delegateType: r.support.transition.end,
            handle: function(e) {
                if (r(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
            }
        })
    })
} (jQuery),
function(o) {
    "use strict";
    var t = '[data-dismiss="alert"]',
    s = function(e) {
        o(e).on("click", t, this.close)
    };
    s.VERSION = "3.3.7",
    s.TRANSITION_DURATION = 150,
    s.prototype.close = function(e) {
        function t() {
            i.detach().trigger("closed.bs.alert").remove()
        }
        var n = o(this),
        r = n.attr("data-target");
        r || (r = (r = n.attr("href")) && r.replace(/.*(?=#[^\s]*$)/, ""));
        var i = o("#" === r ? [] : r);
        e && e.preventDefault(),
        i.length || (i = n.closest(".alert")),
        i.trigger(e = o.Event("close.bs.alert")),
        e.isDefaultPrevented() || (i.removeClass("in"), o.support.transition && i.hasClass("fade") ? i.one("bsTransitionEnd", t).emulateTransitionEnd(s.TRANSITION_DURATION) : t())
    };
    var e = o.fn.alert;
    o.fn.alert = function(n) {
        return this.each(function() {
            var e = o(this),
            t = e.data("bs.alert");
            t || e.data("bs.alert", t = new s(this)),
            "string" == typeof n && t[n].call(e)
        })
    },
    o.fn.alert.Constructor = s,
    o.fn.alert.noConflict = function() {
        return o.fn.alert = e,
        this
    },
    o(document).on("click.bs.alert.data-api", t, s.prototype.close)
} (jQuery),
function(o) {
    "use strict";
    function n(r) {
        return this.each(function() {
            var e = o(this),
            t = e.data("bs.button"),
            n = "object" == typeof r && r;
            t || e.data("bs.button", t = new i(this, n)),
            "toggle" == r ? t.toggle() : r && t.setState(r)
        })
    }
    var i = function(e, t) {
        this.$element = o(e),
        this.options = o.extend({},
        i.DEFAULTS, t),
        this.isLoading = !1
    };
    i.VERSION = "3.3.7",
    i.DEFAULTS = {
        loadingText: "loading..."
    },
    i.prototype.setState = function(e) {
        var t = "disabled",
        n = this.$element,
        r = n.is("input") ? "val": "html",
        i = n.data();
        e += "Text",
        null == i.resetText && n.data("resetText", n[r]()),
        setTimeout(o.proxy(function() {
            n[r](null == i[e] ? this.options[e] : i[e]),
            "loadingText" == e ? (this.isLoading = !0, n.addClass(t).attr(t, t).prop(t, !0)) : this.isLoading && (this.isLoading = !1, n.removeClass(t).removeAttr(t).prop(t, !1))
        },
        this), 0)
    },
    i.prototype.toggle = function() {
        var e = !0,
        t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var n = this.$element.find("input");
            "radio" == n.prop("type") ? (n.prop("checked") && (e = !1), t.find(".active").removeClass("active"), this.$element.addClass("active")) : "checkbox" == n.prop("type") && (n.prop("checked") !== this.$element.hasClass("active") && (e = !1), this.$element.toggleClass("active")),
            n.prop("checked", this.$element.hasClass("active")),
            e && n.trigger("change")
        } else this.$element.attr("aria-pressed", !this.$element.hasClass("active")),
        this.$element.toggleClass("active")
    };
    var e = o.fn.button;
    o.fn.button = n,
    o.fn.button.Constructor = i,
    o.fn.button.noConflict = function() {
        return o.fn.button = e,
        this
    },
    o(document).on("click.bs.button.data-api", '[data-toggle^="button"]',
    function(e) {
        var t = o(e.target).closest(".btn");
        n.call(t, "toggle"),
        o(e.target).is('input[type="radio"], input[type="checkbox"]') || (e.preventDefault(), t.is("input,button") ? t.trigger("focus") : t.find("input:visible,button:visible").first().trigger("focus"))
    }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]',
    function(e) {
        o(e.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(e.type))
    })
} (jQuery),
function(c) {
    "use strict";
    function s(i) {
        return this.each(function() {
            var e = c(this),
            t = e.data("bs.carousel"),
            n = c.extend({},
            h.DEFAULTS, e.data(), "object" == typeof i && i),
            r = "string" == typeof i ? i: n.slide;
            t || e.data("bs.carousel", t = new h(this, n)),
            "number" == typeof i ? t.to(i) : r ? t[r]() : n.interval && t.pause().cycle()
        })
    }
    var h = function(e, t) {
        this.$element = c(e),
        this.$indicators = this.$element.find(".carousel-indicators"),
        this.options = t,
        this.paused = null,
        this.sliding = null,
        this.interval = null,
        this.$active = null,
        this.$items = null,
        this.options.keyboard && this.$element.on("keydown.bs.carousel", c.proxy(this.keydown, this)),
        "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", c.proxy(this.pause, this)).on("mouseleave.bs.carousel", c.proxy(this.cycle, this))
    };
    h.VERSION = "3.3.7",
    h.TRANSITION_DURATION = 600,
    h.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0,
        keyboard: !0
    },
    h.prototype.keydown = function(e) {
        if (!/input|textarea/i.test(e.target.tagName)) {
            switch (e.which) {
            case 37:
                this.prev();
                break;
            case 39:
                this.next();
                break;
            default:
                return
            }
            e.preventDefault()
        }
    },
    h.prototype.cycle = function(e) {
        return e || (this.paused = !1),
        this.interval && clearInterval(this.interval),
        this.options.interval && !this.paused && (this.interval = setInterval(c.proxy(this.next, this), this.options.interval)),
        this
    },
    h.prototype.getItemIndex = function(e) {
        return this.$items = e.parent().children(".item"),
        this.$items.index(e || this.$active)
    },
    h.prototype.getItemForDirection = function(e, t) {
        var n = this.getItemIndex(t);
        if (("prev" == e && 0 === n || "next" == e && n == this.$items.length - 1) && !this.options.wrap) return t;
        var r = (n + ("prev" == e ? -1 : 1)) % this.$items.length;
        return this.$items.eq(r)
    },
    h.prototype.to = function(e) {
        var t = this,
        n = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        if (! (e > this.$items.length - 1 || e < 0)) return this.sliding ? this.$element.one("slid.bs.carousel",
        function() {
            t.to(e)
        }) : n == e ? this.pause().cycle() : this.slide(n < e ? "next": "prev", this.$items.eq(e))
    },
    h.prototype.pause = function(e) {
        return e || (this.paused = !0),
        this.$element.find(".next, .prev").length && c.support.transition && (this.$element.trigger(c.support.transition.end), this.cycle(!0)),
        this.interval = clearInterval(this.interval),
        this
    },
    h.prototype.next = function() {
        if (!this.sliding) return this.slide("next")
    },
    h.prototype.prev = function() {
        if (!this.sliding) return this.slide("prev")
    },
    h.prototype.slide = function(e, t) {
        var n = this.$element.find(".item.active"),
        r = t || this.getItemForDirection(e, n),
        i = this.interval,
        o = "next" == e ? "left": "right",
        s = this;
        if (r.hasClass("active")) return this.sliding = !1;
        var a = r[0],
        u = c.Event("slide.bs.carousel", {
            relatedTarget: a,
            direction: o
        });
        if (this.$element.trigger(u), !u.isDefaultPrevented()) {
            if (this.sliding = !0, i && this.pause(), this.$indicators.length) {
                this.$indicators.find(".active").removeClass("active");
                var l = c(this.$indicators.children()[this.getItemIndex(r)]);
                l && l.addClass("active")
            }
            var d = c.Event("slid.bs.carousel", {
                relatedTarget: a,
                direction: o
            });
            return c.support.transition && this.$element.hasClass("slide") ? (r.addClass(e), r[0].offsetWidth, n.addClass(o), r.addClass(o), n.one("bsTransitionEnd",
            function() {
                r.removeClass([e, o].join(" ")).addClass("active"),
                n.removeClass(["active", o].join(" ")),
                s.sliding = !1,
                setTimeout(function() {
                    s.$element.trigger(d)
                },
                0)
            }).emulateTransitionEnd(h.TRANSITION_DURATION)) : (n.removeClass("active"), r.addClass("active"), this.sliding = !1, this.$element.trigger(d)),
            i && this.cycle(),
            this
        }
    };
    var e = c.fn.carousel;
    c.fn.carousel = s,
    c.fn.carousel.Constructor = h,
    c.fn.carousel.noConflict = function() {
        return c.fn.carousel = e,
        this
    };
    var t = function(e) {
        var t, n = c(this),
        r = c(n.attr("data-target") || (t = n.attr("href")) && t.replace(/.*(?=#[^\s]+$)/, ""));
        if (r.hasClass("carousel")) {
            var i = c.extend({},
            r.data(), n.data()),
            o = n.attr("data-slide-to");
            o && (i.interval = !1),
            s.call(r, i),
            o && r.data("bs.carousel").to(o),
            e.preventDefault()
        }
    };
    c(document).on("click.bs.carousel.data-api", "[data-slide]", t).on("click.bs.carousel.data-api", "[data-slide-to]", t),
    c(window).on("load",
    function() {
        c('[data-ride="carousel"]').each(function() {
            var e = c(this);
            s.call(e, e.data())
        })
    })
} (jQuery),
function(s) {
    "use strict";
    function i(e) {
        var t, n = e.attr("data-target") || (t = e.attr("href")) && t.replace(/.*(?=#[^\s]+$)/, "");
        return s(n)
    }
    function a(r) {
        return this.each(function() {
            var e = s(this),
            t = e.data("bs.collapse"),
            n = s.extend({},
            u.DEFAULTS, e.data(), "object" == typeof r && r); ! t && n.toggle && /show|hide/.test(r) && (n.toggle = !1),
            t || e.data("bs.collapse", t = new u(this, n)),
            "string" == typeof r && t[r]()
        })
    }
    var u = function(e, t) {
        this.$element = s(e),
        this.options = s.extend({},
        u.DEFAULTS, t),
        this.$trigger = s('[data-toggle="collapse"][href="#' + e.id + '"],[data-toggle="collapse"][data-target="#' + e.id + '"]'),
        this.transitioning = null,
        this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger),
        this.options.toggle && this.toggle()
    };
    u.VERSION = "3.3.7",
    u.TRANSITION_DURATION = 350,
    u.DEFAULTS = {
        toggle: !0
    },
    u.prototype.dimension = function() {
        return this.$element.hasClass("width") ? "width": "height"
    },
    u.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var e, t = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
            if (! (t && t.length && ((e = t.data("bs.collapse")) && e.transitioning))) {
                var n = s.Event("show.bs.collapse");
                if (this.$element.trigger(n), !n.isDefaultPrevented()) {
                    t && t.length && (a.call(t, "hide"), e || t.data("bs.collapse", null));
                    var r = this.dimension();
                    this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded", !0),
                    this.$trigger.removeClass("collapsed").attr("aria-expanded", !0),
                    this.transitioning = 1;
                    var i = function() {
                        this.$element.removeClass("collapsing").addClass("collapse in")[r](""),
                        this.transitioning = 0,
                        this.$element.trigger("shown.bs.collapse")
                    };
                    if (!s.support.transition) return i.call(this);
                    var o = s.camelCase(["scroll", r].join("-"));
                    this.$element.one("bsTransitionEnd", s.proxy(i, this)).emulateTransitionEnd(u.TRANSITION_DURATION)[r](this.$element[0][o])
                }
            }
        }
    },
    u.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var e = s.Event("hide.bs.collapse");
            if (this.$element.trigger(e), !e.isDefaultPrevented()) {
                var t = this.dimension();
                this.$element[t](this.$element[t]())[0].offsetHeight,
                this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1),
                this.$trigger.addClass("collapsed").attr("aria-expanded", !1),
                this.transitioning = 1;
                var n = function() {
                    this.transitioning = 0,
                    this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                };
                return s.support.transition ? void this.$element[t](0).one("bsTransitionEnd", s.proxy(n, this)).emulateTransitionEnd(u.TRANSITION_DURATION) : n.call(this)
            }
        }
    },
    u.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide": "show"]()
    },
    u.prototype.getParent = function() {
        return s(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(s.proxy(function(e, t) {
            var n = s(t);
            this.addAriaAndCollapsedClass(i(n), n)
        },
        this)).end()
    },
    u.prototype.addAriaAndCollapsedClass = function(e, t) {
        var n = e.hasClass("in");
        e.attr("aria-expanded", n),
        t.toggleClass("collapsed", !n).attr("aria-expanded", n)
    };
    var e = s.fn.collapse;
    s.fn.collapse = a,
    s.fn.collapse.Constructor = u,
    s.fn.collapse.noConflict = function() {
        return s.fn.collapse = e,
        this
    },
    s(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]',
    function(e) {
        var t = s(this);
        t.attr("data-target") || e.preventDefault();
        var n = i(t),
        r = n.data("bs.collapse") ? "toggle": t.data();
        a.call(n, r)
    })
} (jQuery),
function(s) {
    "use strict";
    function a(e) {
        var t = e.attr("data-target");
        t || (t = (t = e.attr("href")) && /#[A-Za-z]/.test(t) && t.replace(/.*(?=#[^\s]*$)/, ""));
        var n = t && s(t);
        return n && n.length ? n: e.parent()
    }
    function o(r) {
        r && 3 === r.which || (s(e).remove(), s(u).each(function() {
            var e = s(this),
            t = a(e),
            n = {
                relatedTarget: this
            };
            t.hasClass("open") && (r && "click" == r.type && /input|textarea/i.test(r.target.tagName) && s.contains(t[0], r.target) || (t.trigger(r = s.Event("hide.bs.dropdown", n)), r.isDefaultPrevented() || (e.attr("aria-expanded", "false"), t.removeClass("open").trigger(s.Event("hidden.bs.dropdown", n)))))
        }))
    }
    var e = ".dropdown-backdrop",
    u = '[data-toggle="dropdown"]',
    r = function(e) {
        s(e).on("click.bs.dropdown", this.toggle)
    };
    r.VERSION = "3.3.7",
    r.prototype.toggle = function(e) {
        var t = s(this);
        if (!t.is(".disabled, :disabled")) {
            var n = a(t),
            r = n.hasClass("open");
            if (o(), !r) {
                "ontouchstart" in document.documentElement && !n.closest(".navbar-nav").length && s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click", o);
                var i = {
                    relatedTarget: this
                };
                if (n.trigger(e = s.Event("show.bs.dropdown", i)), e.isDefaultPrevented()) return;
                t.trigger("focus").attr("aria-expanded", "true"),
                n.toggleClass("open").trigger(s.Event("shown.bs.dropdown", i))
            }
            return ! 1
        }
    },
    r.prototype.keydown = function(e) {
        if (/(38|40|27|32)/.test(e.which) && !/input|textarea/i.test(e.target.tagName)) {
            var t = s(this);
            if (e.preventDefault(), e.stopPropagation(), !t.is(".disabled, :disabled")) {
                var n = a(t),
                r = n.hasClass("open");
                if (!r && 27 != e.which || r && 27 == e.which) return 27 == e.which && n.find(u).trigger("focus"),
                t.trigger("click");
                var i = n.find(".dropdown-menu li:not(.disabled):visible a");
                if (i.length) {
                    var o = i.index(e.target);
                    38 == e.which && 0 < o && o--,
                    40 == e.which && o < i.length - 1 && o++,
                    ~o || (o = 0),
                    i.eq(o).trigger("focus")
                }
            }
        }
    };
    var t = s.fn.dropdown;
    s.fn.dropdown = function(n) {
        return this.each(function() {
            var e = s(this),
            t = e.data("bs.dropdown");
            t || e.data("bs.dropdown", t = new r(this)),
            "string" == typeof n && t[n].call(e)
        })
    },
    s.fn.dropdown.Constructor = r,
    s.fn.dropdown.noConflict = function() {
        return s.fn.dropdown = t,
        this
    },
    s(document).on("click.bs.dropdown.data-api", o).on("click.bs.dropdown.data-api", ".dropdown form",
    function(e) {
        e.stopPropagation()
    }).on("click.bs.dropdown.data-api", u, r.prototype.toggle).on("keydown.bs.dropdown.data-api", u, r.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", r.prototype.keydown)
} (jQuery),
function(o) {
    "use strict";
    function s(r, i) {
        return this.each(function() {
            var e = o(this),
            t = e.data("bs.modal"),
            n = o.extend({},
            a.DEFAULTS, e.data(), "object" == typeof r && r);
            t || e.data("bs.modal", t = new a(this, n)),
            "string" == typeof r ? t[r](i) : n.show && t.show(i)
        })
    }
    var a = function(e, t) {
        this.options = t,
        this.$body = o(document.body),
        this.$element = o(e),
        this.$dialog = this.$element.find(".modal-dialog"),
        this.$backdrop = null,
        this.isShown = null,
        this.originalBodyPad = null,
        this.scrollbarWidth = 0,
        this.ignoreBackdropClick = !1,
        this.options.remote && this.$element.find(".modal-content").load(this.options.remote, o.proxy(function() {
            this.$element.trigger("loaded.bs.modal")
        },
        this))
    };
    a.VERSION = "3.3.7",
    a.TRANSITION_DURATION = 300,
    a.BACKDROP_TRANSITION_DURATION = 150,
    a.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    },
    a.prototype.toggle = function(e) {
        return this.isShown ? this.hide() : this.show(e)
    },
    a.prototype.show = function(n) {
        var r = this,
        e = o.Event("show.bs.modal", {
            relatedTarget: n
        });
        this.$element.trigger(e),
        this.isShown || e.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', o.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal",
        function() {
            r.$element.one("mouseup.dismiss.bs.modal",
            function(e) {
                o(e.target).is(r.$element) && (r.ignoreBackdropClick = !0)
            })
        }), this.backdrop(function() {
            var e = o.support.transition && r.$element.hasClass("fade");
            r.$element.parent().length || r.$element.appendTo(r.$body),
            r.$element.show().scrollTop(0),
            r.adjustDialog(),
            e && r.$element[0].offsetWidth,
            r.$element.addClass("in"),
            r.enforceFocus();
            var t = o.Event("shown.bs.modal", {
                relatedTarget: n
            });
            e ? r.$dialog.one("bsTransitionEnd",
            function() {
                r.$element.trigger("focus").trigger(t)
            }).emulateTransitionEnd(a.TRANSITION_DURATION) : r.$element.trigger("focus").trigger(t)
        }))
    },
    a.prototype.hide = function(e) {
        e && e.preventDefault(),
        e = o.Event("hide.bs.modal"),
        this.$element.trigger(e),
        this.isShown && !e.isDefaultPrevented() && (this.isShown = !1, this.escape(), this.resize(), o(document).off("focusin.bs.modal"), this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), o.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", o.proxy(this.hideModal, this)).emulateTransitionEnd(a.TRANSITION_DURATION) : this.hideModal())
    },
    a.prototype.enforceFocus = function() {
        o(document).off("focusin.bs.modal").on("focusin.bs.modal", o.proxy(function(e) {
            document === e.target || this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus")
        },
        this))
    },
    a.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", o.proxy(function(e) {
            27 == e.which && this.hide()
        },
        this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
    },
    a.prototype.resize = function() {
        this.isShown ? o(window).on("resize.bs.modal", o.proxy(this.handleUpdate, this)) : o(window).off("resize.bs.modal")
    },
    a.prototype.hideModal = function() {
        var e = this;
        this.$element.hide(),
        this.backdrop(function() {
            e.$body.removeClass("modal-open"),
            e.resetAdjustments(),
            e.resetScrollbar(),
            e.$element.trigger("hidden.bs.modal")
        })
    },
    a.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(),
        this.$backdrop = null
    },
    a.prototype.backdrop = function(e) {
        var t = this,
        n = this.$element.hasClass("fade") ? "fade": "";
        if (this.isShown && this.options.backdrop) {
            var r = o.support.transition && n;
            if (this.$backdrop = o(document.createElement("div")).addClass("modal-backdrop " + n).appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", o.proxy(function(e) {
                return this.ignoreBackdropClick ? void(this.ignoreBackdropClick = !1) : void(e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
            },
            this)), r && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !e) return;
            r ? this.$backdrop.one("bsTransitionEnd", e).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION) : e()
        } else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            var i = function() {
                t.removeBackdrop(),
                e && e()
            };
            o.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", i).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION) : i()
        } else e && e()
    },
    a.prototype.handleUpdate = function() {
        this.adjustDialog()
    },
    a.prototype.adjustDialog = function() {
        var e = this.$element[0].scrollHeight > document.documentElement.clientHeight;
        this.$element.css({
            paddingLeft: !this.bodyIsOverflowing && e ? this.scrollbarWidth: "",
            paddingRight: this.bodyIsOverflowing && !e ? this.scrollbarWidth: ""
        })
    },
    a.prototype.resetAdjustments = function() {
        this.$element.css({
            paddingLeft: "",
            paddingRight: ""
        })
    },
    a.prototype.checkScrollbar = function() {
        var e = window.innerWidth;
        if (!e) {
            var t = document.documentElement.getBoundingClientRect();
            e = t.right - Math.abs(t.left)
        }
        this.bodyIsOverflowing = document.body.clientWidth < e,
        this.scrollbarWidth = this.measureScrollbar()
    },
    a.prototype.setScrollbar = function() {
        var e = parseInt(this.$body.css("padding-right") || 0, 10);
        this.originalBodyPad = document.body.style.paddingRight || "",
        this.bodyIsOverflowing && this.$body.css("padding-right", e + this.scrollbarWidth)
    },
    a.prototype.resetScrollbar = function() {
        this.$body.css("padding-right", this.originalBodyPad)
    },
    a.prototype.measureScrollbar = function() {
        var e = document.createElement("div");
        e.className = "modal-scrollbar-measure",
        this.$body.append(e);
        var t = e.offsetWidth - e.clientWidth;
        return this.$body[0].removeChild(e),
        t
    };
    var e = o.fn.modal;
    o.fn.modal = s,
    o.fn.modal.Constructor = a,
    o.fn.modal.noConflict = function() {
        return o.fn.modal = e,
        this
    },
    o(document).on("click.bs.modal.data-api", '[data-toggle="modal"]',
    function(e) {
        var t = o(this),
        n = t.attr("href"),
        r = o(t.attr("data-target") || n && n.replace(/.*(?=#[^\s]+$)/, "")),
        i = r.data("bs.modal") ? "toggle": o.extend({
            remote: !/#/.test(n) && n
        },
        r.data(), t.data());
        t.is("a") && e.preventDefault(),
        r.one("show.bs.modal",
        function(e) {
            e.isDefaultPrevented() || r.one("hidden.bs.modal",
            function() {
                t.is(":visible") && t.trigger("focus")
            })
        }),
        s.call(r, i, this)
    })
} (jQuery),
function(g) {
    "use strict";
    var v = function(e, t) {
        this.type = null,
        this.options = null,
        this.enabled = null,
        this.timeout = null,
        this.hoverState = null,
        this.$element = null,
        this.inState = null,
        this.init("tooltip", e, t)
    };
    v.VERSION = "3.3.7",
    v.TRANSITION_DURATION = 150,
    v.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {
            selector: "body",
            padding: 0
        }
    },
    v.prototype.init = function(e, t, n) {
        if (this.enabled = !0, this.type = e, this.$element = g(t), this.options = this.getOptions(n), this.$viewport = this.options.viewport && g(g.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport), this.inState = {
            click: !1,
            hover: !1,
            focus: !1
        },
        this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
        for (var r = this.options.trigger.split(" "), i = r.length; i--;) {
            var o = r[i];
            if ("click" == o) this.$element.on("click." + this.type, this.options.selector, g.proxy(this.toggle, this));
            else if ("manual" != o) {
                var s = "hover" == o ? "mouseenter": "focusin",
                a = "hover" == o ? "mouseleave": "focusout";
                this.$element.on(s + "." + this.type, this.options.selector, g.proxy(this.enter, this)),
                this.$element.on(a + "." + this.type, this.options.selector, g.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = g.extend({},
        this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    },
    v.prototype.getDefaults = function() {
        return v.DEFAULTS
    },
    v.prototype.getOptions = function(e) {
        return (e = g.extend({},
        this.getDefaults(), this.$element.data(), e)).delay && "number" == typeof e.delay && (e.delay = {
            show: e.delay,
            hide: e.delay
        }),
        e
    },
    v.prototype.getDelegateOptions = function() {
        var n = {},
        r = this.getDefaults();
        return this._options && g.each(this._options,
        function(e, t) {
            r[e] != t && (n[e] = t)
        }),
        n
    },
    v.prototype.enter = function(e) {
        var t = e instanceof this.constructor ? e: g(e.currentTarget).data("bs." + this.type);
        return t || (t = new this.constructor(e.currentTarget, this.getDelegateOptions()), g(e.currentTarget).data("bs." + this.type, t)),
        e instanceof g.Event && (t.inState["focusin" == e.type ? "focus": "hover"] = !0),
        t.tip().hasClass("in") || "in" == t.hoverState ? void(t.hoverState = "in") : (clearTimeout(t.timeout), t.hoverState = "in", t.options.delay && t.options.delay.show ? void(t.timeout = setTimeout(function() {
            "in" == t.hoverState && t.show()
        },
        t.options.delay.show)) : t.show())
    },
    v.prototype.isInStateTrue = function() {
        for (var e in this.inState) if (this.inState[e]) return ! 0;
        return ! 1
    },
    v.prototype.leave = function(e) {
        var t = e instanceof this.constructor ? e: g(e.currentTarget).data("bs." + this.type);
        if (t || (t = new this.constructor(e.currentTarget, this.getDelegateOptions()), g(e.currentTarget).data("bs." + this.type, t)), e instanceof g.Event && (t.inState["focusout" == e.type ? "focus": "hover"] = !1), !t.isInStateTrue()) return clearTimeout(t.timeout),
        t.hoverState = "out",
        t.options.delay && t.options.delay.hide ? void(t.timeout = setTimeout(function() {
            "out" == t.hoverState && t.hide()
        },
        t.options.delay.hide)) : t.hide()
    },
    v.prototype.show = function() {
        var e = g.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(e);
            var t = g.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
            if (e.isDefaultPrevented() || !t) return;
            var n = this,
            r = this.tip(),
            i = this.getUID(this.type);
            this.setContent(),
            r.attr("id", i),
            this.$element.attr("aria-describedby", i),
            this.options.animation && r.addClass("fade");
            var o = "function" == typeof this.options.placement ? this.options.placement.call(this, r[0], this.$element[0]) : this.options.placement,
            s = /\s?auto?\s?/i,
            a = s.test(o);
            a && (o = o.replace(s, "") || "top"),
            r.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(o).data("bs." + this.type, this),
            this.options.container ? r.appendTo(this.options.container) : r.insertAfter(this.$element),
            this.$element.trigger("inserted.bs." + this.type);
            var u = this.getPosition(),
            l = r[0].offsetWidth,
            d = r[0].offsetHeight;
            if (a) {
                var c = o,
                h = this.getPosition(this.$viewport);
                o = "bottom" == o && u.bottom + d > h.bottom ? "top": "top" == o && u.top - d < h.top ? "bottom": "right" == o && u.right + l > h.width ? "left": "left" == o && u.left - l < h.left ? "right": o,
                r.removeClass(c).addClass(o)
            }
            var f = this.getCalculatedOffset(o, u, l, d);
            this.applyPlacement(f, o);
            var p = function() {
                var e = n.hoverState;
                n.$element.trigger("shown.bs." + n.type),
                n.hoverState = null,
                "out" == e && n.leave(n)
            };
            g.support.transition && this.$tip.hasClass("fade") ? r.one("bsTransitionEnd", p).emulateTransitionEnd(v.TRANSITION_DURATION) : p()
        }
    },
    v.prototype.applyPlacement = function(e, t) {
        var n = this.tip(),
        r = n[0].offsetWidth,
        i = n[0].offsetHeight,
        o = parseInt(n.css("margin-top"), 10),
        s = parseInt(n.css("margin-left"), 10);
        isNaN(o) && (o = 0),
        isNaN(s) && (s = 0),
        e.top += o,
        e.left += s,
        g.offset.setOffset(n[0], g.extend({
            using: function(e) {
                n.css({
                    top: Math.round(e.top),
                    left: Math.round(e.left)
                })
            }
        },
        e), 0),
        n.addClass("in");
        var a = n[0].offsetWidth,
        u = n[0].offsetHeight;
        "top" == t && u != i && (e.top = e.top + i - u);
        var l = this.getViewportAdjustedDelta(t, e, a, u);
        l.left ? e.left += l.left: e.top += l.top;
        var d = /top|bottom/.test(t),
        c = d ? 2 * l.left - r + a: 2 * l.top - i + u,
        h = d ? "offsetWidth": "offsetHeight";
        n.offset(e),
        this.replaceArrow(c, n[0][h], d)
    },
    v.prototype.replaceArrow = function(e, t, n) {
        this.arrow().css(n ? "left": "top", 50 * (1 - e / t) + "%").css(n ? "top": "left", "")
    },
    v.prototype.setContent = function() {
        var e = this.tip(),
        t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html": "text"](t),
        e.removeClass("fade in top bottom left right")
    },
    v.prototype.hide = function(e) {
        function t() {
            "in" != n.hoverState && r.detach(),
            n.$element && n.$element.removeAttr("aria-describedby").trigger("hidden.bs." + n.type),
            e && e()
        }
        var n = this,
        r = g(this.$tip),
        i = g.Event("hide.bs." + this.type);
        if (this.$element.trigger(i), !i.isDefaultPrevented()) return r.removeClass("in"),
        g.support.transition && r.hasClass("fade") ? r.one("bsTransitionEnd", t).emulateTransitionEnd(v.TRANSITION_DURATION) : t(),
        this.hoverState = null,
        this
    },
    v.prototype.fixTitle = function() {
        var e = this.$element; (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
    },
    v.prototype.hasContent = function() {
        return this.getTitle()
    },
    v.prototype.getPosition = function(e) {
        var t = (e = e || this.$element)[0],
        n = "BODY" == t.tagName,
        r = t.getBoundingClientRect();
        null == r.width && (r = g.extend({},
        r, {
            width: r.right - r.left,
            height: r.bottom - r.top
        }));
        var i = window.SVGElement && t instanceof window.SVGElement,
        o = n ? {
            top: 0,
            left: 0
        }: i ? null: e.offset(),
        s = {
            scroll: n ? document.documentElement.scrollTop || document.body.scrollTop: e.scrollTop()
        },
        a = n ? {
            width: g(window).width(),
            height: g(window).height()
        }: null;
        return g.extend({},
        r, s, a, o)
    },
    v.prototype.getCalculatedOffset = function(e, t, n, r) {
        return "bottom" == e ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - n / 2
        }: "top" == e ? {
            top: t.top - r,
            left: t.left + t.width / 2 - n / 2
        }: "left" == e ? {
            top: t.top + t.height / 2 - r / 2,
            left: t.left - n
        }: {
            top: t.top + t.height / 2 - r / 2,
            left: t.left + t.width
        }
    },
    v.prototype.getViewportAdjustedDelta = function(e, t, n, r) {
        var i = {
            top: 0,
            left: 0
        };
        if (!this.$viewport) return i;
        var o = this.options.viewport && this.options.viewport.padding || 0,
        s = this.getPosition(this.$viewport);
        if (/right|left/.test(e)) {
            var a = t.top - o - s.scroll,
            u = t.top + o - s.scroll + r;
            a < s.top ? i.top = s.top - a: u > s.top + s.height && (i.top = s.top + s.height - u)
        } else {
            var l = t.left - o,
            d = t.left + o + n;
            l < s.left ? i.left = s.left - l: d > s.right && (i.left = s.left + s.width - d)
        }
        return i
    },
    v.prototype.getTitle = function() {
        var e = this.$element,
        t = this.options;
        return e.attr("data-original-title") || ("function" == typeof t.title ? t.title.call(e[0]) : t.title)
    },
    v.prototype.getUID = function(e) {
        for (; e += ~~ (1e6 * Math.random()), document.getElementById(e););
        return e
    },
    v.prototype.tip = function() {
        if (!this.$tip && (this.$tip = g(this.options.template), 1 != this.$tip.length)) throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
        return this.$tip
    },
    v.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    },
    v.prototype.enable = function() {
        this.enabled = !0
    },
    v.prototype.disable = function() {
        this.enabled = !1
    },
    v.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled
    },
    v.prototype.toggle = function(e) {
        var t = this;
        e && ((t = g(e.currentTarget).data("bs." + this.type)) || (t = new this.constructor(e.currentTarget, this.getDelegateOptions()), g(e.currentTarget).data("bs." + this.type, t))),
        e ? (t.inState.click = !t.inState.click, t.isInStateTrue() ? t.enter(t) : t.leave(t)) : t.tip().hasClass("in") ? t.leave(t) : t.enter(t)
    },
    v.prototype.destroy = function() {
        var e = this;
        clearTimeout(this.timeout),
        this.hide(function() {
            e.$element.off("." + e.type).removeData("bs." + e.type),
            e.$tip && e.$tip.detach(),
            e.$tip = null,
            e.$arrow = null,
            e.$viewport = null,
            e.$element = null
        })
    };
    var e = g.fn.tooltip;
    g.fn.tooltip = function(r) {
        return this.each(function() {
            var e = g(this),
            t = e.data("bs.tooltip"),
            n = "object" == typeof r && r; ! t && /destroy|hide/.test(r) || (t || e.data("bs.tooltip", t = new v(this, n)), "string" == typeof r && t[r]())
        })
    },
    g.fn.tooltip.Constructor = v,
    g.fn.tooltip.noConflict = function() {
        return g.fn.tooltip = e,
        this
    }
} (jQuery),
function(i) {
    "use strict";
    var o = function(e, t) {
        this.init("popover", e, t)
    };
    if (!i.fn.tooltip) throw new Error("Popover requires tooltip.js");
    o.VERSION = "3.3.7",
    o.DEFAULTS = i.extend({},
    i.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }),
    o.prototype = i.extend({},
    i.fn.tooltip.Constructor.prototype),
    (o.prototype.constructor = o).prototype.getDefaults = function() {
        return o.DEFAULTS
    },
    o.prototype.setContent = function() {
        var e = this.tip(),
        t = this.getTitle(),
        n = this.getContent();
        e.find(".popover-title")[this.options.html ? "html": "text"](t),
        e.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof n ? "html": "append": "text"](n),
        e.removeClass("fade top bottom left right in"),
        e.find(".popover-title").html() || e.find(".popover-title").hide()
    },
    o.prototype.hasContent = function() {
        return this.getTitle() || this.getContent()
    },
    o.prototype.getContent = function() {
        var e = this.$element,
        t = this.options;
        return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content)
    },
    o.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    };
    var e = i.fn.popover;
    i.fn.popover = function(r) {
        return this.each(function() {
            var e = i(this),
            t = e.data("bs.popover"),
            n = "object" == typeof r && r; ! t && /destroy|hide/.test(r) || (t || e.data("bs.popover", t = new o(this, n)), "string" == typeof r && t[r]())
        })
    },
    i.fn.popover.Constructor = o,
    i.fn.popover.noConflict = function() {
        return i.fn.popover = e,
        this
    }
} (jQuery),
function(o) {
    "use strict";
    function i(e, t) {
        this.$body = o(document.body),
        this.$scrollElement = o(o(e).is(document.body) ? window: e),
        this.options = o.extend({},
        i.DEFAULTS, t),
        this.selector = (this.options.target || "") + " .nav li > a",
        this.offsets = [],
        this.targets = [],
        this.activeTarget = null,
        this.scrollHeight = 0,
        this.$scrollElement.on("scroll.bs.scrollspy", o.proxy(this.process, this)),
        this.refresh(),
        this.process()
    }
    function t(r) {
        return this.each(function() {
            var e = o(this),
            t = e.data("bs.scrollspy"),
            n = "object" == typeof r && r;
            t || e.data("bs.scrollspy", t = new i(this, n)),
            "string" == typeof r && t[r]()
        })
    }
    i.VERSION = "3.3.7",
    i.DEFAULTS = {
        offset: 10
    },
    i.prototype.getScrollHeight = function() {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    },
    i.prototype.refresh = function() {
        var e = this,
        r = "offset",
        i = 0;
        this.offsets = [],
        this.targets = [],
        this.scrollHeight = this.getScrollHeight(),
        o.isWindow(this.$scrollElement[0]) || (r = "position", i = this.$scrollElement.scrollTop()),
        this.$body.find(this.selector).map(function() {
            var e = o(this),
            t = e.data("target") || e.attr("href"),
            n = /^#./.test(t) && o(t);
            return n && n.length && n.is(":visible") && [[n[r]().top + i, t]] || null
        }).sort(function(e, t) {
            return e[0] - t[0]
        }).each(function() {
            e.offsets.push(this[0]),
            e.targets.push(this[1])
        })
    },
    i.prototype.process = function() {
        var e, t = this.$scrollElement.scrollTop() + this.options.offset,
        n = this.getScrollHeight(),
        r = this.options.offset + n - this.$scrollElement.height(),
        i = this.offsets,
        o = this.targets,
        s = this.activeTarget;
        if (this.scrollHeight != n && this.refresh(), r <= t) return s != (e = o[o.length - 1]) && this.activate(e);
        if (s && t < i[0]) return this.activeTarget = null,
        this.clear();
        for (e = i.length; e--;) s != o[e] && t >= i[e] && (void 0 === i[e + 1] || t < i[e + 1]) && this.activate(o[e])
    },
    i.prototype.activate = function(e) {
        this.activeTarget = e,
        this.clear();
        var t = this.selector + '[data-target="' + e + '"],' + this.selector + '[href="' + e + '"]',
        n = o(t).parents("li").addClass("active");
        n.parent(".dropdown-menu").length && (n = n.closest("li.dropdown").addClass("active")),
        n.trigger("activate.bs.scrollspy")
    },
    i.prototype.clear = function() {
        o(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
    };
    var e = o.fn.scrollspy;
    o.fn.scrollspy = t,
    o.fn.scrollspy.Constructor = i,
    o.fn.scrollspy.noConflict = function() {
        return o.fn.scrollspy = e,
        this
    },
    o(window).on("load.bs.scrollspy.data-api",
    function() {
        o('[data-spy="scroll"]').each(function() {
            var e = o(this);
            t.call(e, e.data())
        })
    })
} (jQuery),
function(a) {
    "use strict";
    function t(n) {
        return this.each(function() {
            var e = a(this),
            t = e.data("bs.tab");
            t || e.data("bs.tab", t = new s(this)),
            "string" == typeof n && t[n]()
        })
    }
    var s = function(e) {
        this.element = a(e)
    };
    s.VERSION = "3.3.7",
    s.TRANSITION_DURATION = 150,
    s.prototype.show = function() {
        var e = this.element,
        t = e.closest("ul:not(.dropdown-menu)"),
        n = e.data("target");
        if (n || (n = (n = e.attr("href")) && n.replace(/.*(?=#[^\s]*$)/, "")), !e.parent("li").hasClass("active")) {
            var r = t.find(".active:last a"),
            i = a.Event("hide.bs.tab", {
                relatedTarget: e[0]
            }),
            o = a.Event("show.bs.tab", {
                relatedTarget: r[0]
            });
            if (r.trigger(i), e.trigger(o), !o.isDefaultPrevented() && !i.isDefaultPrevented()) {
                var s = a(n);
                this.activate(e.closest("li"), t),
                this.activate(s, s.parent(),
                function() {
                    r.trigger({
                        type: "hidden.bs.tab",
                        relatedTarget: e[0]
                    }),
                    e.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: r[0]
                    })
                })
            }
        }
    },
    s.prototype.activate = function(e, t, n) {
        function r() {
            i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1),
            e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0),
            o ? (e[0].offsetWidth, e.addClass("in")) : e.removeClass("fade"),
            e.parent(".dropdown-menu").length && e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0),
            n && n()
        }
        var i = t.find("> .active"),
        o = n && a.support.transition && (i.length && i.hasClass("fade") || !!t.find("> .fade").length);
        i.length && o ? i.one("bsTransitionEnd", r).emulateTransitionEnd(s.TRANSITION_DURATION) : r(),
        i.removeClass("in")
    };
    var e = a.fn.tab;
    a.fn.tab = t,
    a.fn.tab.Constructor = s,
    a.fn.tab.noConflict = function() {
        return a.fn.tab = e,
        this
    };
    var n = function(e) {
        e.preventDefault(),
        t.call(a(this), "show")
    };
    a(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', n).on("click.bs.tab.data-api", '[data-toggle="pill"]', n)
} (jQuery),
function(u) {
    "use strict";
    function n(r) {
        return this.each(function() {
            var e = u(this),
            t = e.data("bs.affix"),
            n = "object" == typeof r && r;
            t || e.data("bs.affix", t = new l(this, n)),
            "string" == typeof r && t[r]()
        })
    }
    var l = function(e, t) {
        this.options = u.extend({},
        l.DEFAULTS, t),
        this.$target = u(this.options.target).on("scroll.bs.affix.data-api", u.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", u.proxy(this.checkPositionWithEventLoop, this)),
        this.$element = u(e),
        this.affixed = null,
        this.unpin = null,
        this.pinnedOffset = null,
        this.checkPosition()
    };
    l.VERSION = "3.3.7",
    l.RESET = "affix affix-top affix-bottom",
    l.DEFAULTS = {
        offset: 0,
        target: window
    },
    l.prototype.getState = function(e, t, n, r) {
        var i = this.$target.scrollTop(),
        o = this.$element.offset(),
        s = this.$target.height();
        if (null != n && "top" == this.affixed) return i < n && "top";
        if ("bottom" == this.affixed) return null != n ? !(i + this.unpin <= o.top) && "bottom": !(i + s <= e - r) && "bottom";
        var a = null == this.affixed,
        u = a ? i: o.top;
        return null != n && i <= n ? "top": null != r && e - r <= u + (a ? s: t) && "bottom"
    },
    l.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(l.RESET).addClass("affix");
        var e = this.$target.scrollTop(),
        t = this.$element.offset();
        return this.pinnedOffset = t.top - e
    },
    l.prototype.checkPositionWithEventLoop = function() {
        setTimeout(u.proxy(this.checkPosition, this), 1)
    },
    l.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var e = this.$element.height(),
            t = this.options.offset,
            n = t.top,
            r = t.bottom,
            i = Math.max(u(document).height(), u(document.body).height());
            "object" != typeof t && (r = n = t),
            "function" == typeof n && (n = t.top(this.$element)),
            "function" == typeof r && (r = t.bottom(this.$element));
            var o = this.getState(i, e, n, r);
            if (this.affixed != o) {
                null != this.unpin && this.$element.css("top", "");
                var s = "affix" + (o ? "-" + o: ""),
                a = u.Event(s + ".bs.affix");
                if (this.$element.trigger(a), a.isDefaultPrevented()) return;
                this.affixed = o,
                this.unpin = "bottom" == o ? this.getPinnedOffset() : null,
                this.$element.removeClass(l.RESET).addClass(s).trigger(s.replace("affix", "affixed") + ".bs.affix")
            }
            "bottom" == o && this.$element.offset({
                top: i - e - r
            })
        }
    };
    var e = u.fn.affix;
    u.fn.affix = n,
    u.fn.affix.Constructor = l,
    u.fn.affix.noConflict = function() {
        return u.fn.affix = e,
        this
    },
    u(window).on("load",
    function() {
        u('[data-spy="affix"]').each(function() {
            var e = u(this),
            t = e.data();
            t.offset = t.offset || {},
            null != t.offsetBottom && (t.offset.bottom = t.offsetBottom),
            null != t.offsetTop && (t.offset.top = t.offsetTop),
            n.call(e, t)
        })
    })
} (jQuery),
function(e, t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof exports ? module.exports = t(require("jquery")) : t(e.jQuery)
} (this,
function(c) {
    c.transit = {
        version: "0.9.12",
        propertyMap: {
            marginLeft: "margin",
            marginRight: "margin",
            marginBottom: "margin",
            marginTop: "margin",
            paddingLeft: "padding",
            paddingRight: "padding",
            paddingBottom: "padding",
            paddingTop: "padding"
        },
        enabled: !0,
        useTransitionEnd: !1
    };
    var o = document.createElement("div"),
    h = {};
    function e(e) {
        if (e in o.style) return e;
        for (var t = ["Moz", "Webkit", "O", "ms"], n = e.charAt(0).toUpperCase() + e.substr(1), r = 0; r < t.length; ++r) {
            var i = t[r] + n;
            if (i in o.style) return i
        }
    }
    var r = -1 < navigator.userAgent.toLowerCase().indexOf("chrome");
    h.transition = e("transition"),
    h.transitionDelay = e("transitionDelay"),
    h.transform = e("transform"),
    h.transformOrigin = e("transformOrigin"),
    h.filter = e("Filter"),
    h.transform3d = (o.style[h.transform] = "", o.style[h.transform] = "rotateY(90deg)", "" !== o.style[h.transform]);
    var f = h.transitionEnd = {
        transition: "transitionend",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        WebkitTransition: "webkitTransitionEnd",
        msTransition: "MSTransitionEnd"
    } [h.transition] || null;
    for (var t in h) h.hasOwnProperty(t) && void 0 === c.support[t] && (c.support[t] = h[t]);
    function i(e) {
        return "string" == typeof e && this.parse(e),
        this
    }
    function p(e, t, n) { ! 0 === t ? e.queue(n) : t ? e.queue(t, n) : e.each(function() {
            n.call(this)
        })
    }
    function g(e, t, n, r) {
        var i, o, s = (i = e, o = [], c.each(i,
        function(e) {
            e = c.camelCase(e),
            e = l(e = c.transit.propertyMap[e] || c.cssProps[e] || e),
            h[e] && (e = l(h[e])),
            -1 === c.inArray(e, o) && o.push(e)
        }), o);
        c.cssEase[n] && (n = c.cssEase[n]);
        var a = v(t) + " " + n;
        0 < parseInt(r, 10) && (a += " " + v(r));
        var u = [];
        return c.each(s,
        function(e, t) {
            u.push(t + " " + a)
        }),
        u.join(", ")
    }
    function n(r, e) {
        e || (c.cssNumber[r] = !0),
        c.transit.propertyMap[r] = h.transform,
        c.cssHooks[r] = {
            get: function(e) {
                return c(e).css("transit:transform").get(r)
            },
            set: function(e, t) {
                var n = c(e).css("transit:transform");
                n.setFromString(r, t),
                c(e).css({
                    "transit:transform": n
                })
            }
        }
    }
    function l(e) {
        return e.replace(/([A-Z])/g,
        function(e) {
            return "-" + e.toLowerCase()
        })
    }
    function s(e, t) {
        return "string" != typeof e || e.match(/^[\-0-9\.]+$/) ? "" + e + t: e
    }
    function v(e) {
        var t = e;
        return "string" != typeof t || t.match(/^[\-0-9\.]+/) || (t = c.fx.speeds[t] || c.fx.speeds._default),
        s(t, "ms")
    }
    return o = null,
    c.cssEase = {
        _default: "ease",
        in:"ease-in",
        out: "ease-out",
        "in-out": "ease-in-out",
        snap: "cubic-bezier(0,1,.5,1)",
        easeInCubic: "cubic-bezier(.550,.055,.675,.190)",
        easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
        easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
        easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
        easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
        easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
        easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
        easeOutExpo: "cubic-bezier(.19,1,.22,1)",
        easeInOutExpo: "cubic-bezier(1,0,0,1)",
        easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
        easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
        easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
        easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
        easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
        easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
        easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
        easeOutQuint: "cubic-bezier(.23,1,.32,1)",
        easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
        easeInSine: "cubic-bezier(.47,0,.745,.715)",
        easeOutSine: "cubic-bezier(.39,.575,.565,1)",
        easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
        easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
        easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
        easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
    },
    c.cssHooks["transit:transform"] = {
        get: function(e) {
            return c(e).data("transform") || new i
        },
        set: function(e, t) {
            var n = t;
            n instanceof i || (n = new i(n)),
            "WebkitTransform" !== h.transform || r ? e.style[h.transform] = n.toString() : e.style[h.transform] = n.toString(!0),
            c(e).data("transform", n)
        }
    },
    c.cssHooks.transform = {
        set: c.cssHooks["transit:transform"].set
    },
    c.cssHooks.filter = {
        get: function(e) {
            return e.style[h.filter]
        },
        set: function(e, t) {
            e.style[h.filter] = t
        }
    },
    c.fn.jquery < "1.8" && (c.cssHooks.transformOrigin = {
        get: function(e) {
            return e.style[h.transformOrigin]
        },
        set: function(e, t) {
            e.style[h.transformOrigin] = t
        }
    },
    c.cssHooks.transition = {
        get: function(e) {
            return e.style[h.transition]
        },
        set: function(e, t) {
            e.style[h.transition] = t
        }
    }),
    n("scale"),
    n("scaleX"),
    n("scaleY"),
    n("translate"),
    n("rotate"),
    n("rotateX"),
    n("rotateY"),
    n("rotate3d"),
    n("perspective"),
    n("skewX"),
    n("skewY"),
    n("x", !0),
    n("y", !0),
    i.prototype = {
        setFromString: function(e, t) {
            var n = "string" == typeof t ? t.split(",") : t.constructor === Array ? t: [t];
            n.unshift(e),
            i.prototype.set.apply(this, n)
        },
        set: function(e) {
            var t = Array.prototype.slice.apply(arguments, [1]);
            this.setter[e] ? this.setter[e].apply(this, t) : this[e] = t.join(",")
        },
        get: function(e) {
            return this.getter[e] ? this.getter[e].apply(this) : this[e] || 0
        },
        setter: {
            rotate: function(e) {
                this.rotate = s(e, "deg")
            },
            rotateX: function(e) {
                this.rotateX = s(e, "deg")
            },
            rotateY: function(e) {
                this.rotateY = s(e, "deg")
            },
            scale: function(e, t) {
                void 0 === t && (t = e),
                this.scale = e + "," + t
            },
            skewX: function(e) {
                this.skewX = s(e, "deg")
            },
            skewY: function(e) {
                this.skewY = s(e, "deg")
            },
            perspective: function(e) {
                this.perspective = s(e, "px")
            },
            x: function(e) {
                this.set("translate", e, null)
            },
            y: function(e) {
                this.set("translate", null, e)
            },
            translate: function(e, t) {
                void 0 === this._translateX && (this._translateX = 0),
                void 0 === this._translateY && (this._translateY = 0),
                null != e && (this._translateX = s(e, "px")),
                null != t && (this._translateY = s(t, "px")),
                this.translate = this._translateX + "," + this._translateY
            }
        },
        getter: {
            x: function() {
                return this._translateX || 0
            },
            y: function() {
                return this._translateY || 0
            },
            scale: function() {
                var e = (this.scale || "1,1").split(",");
                return e[0] && (e[0] = parseFloat(e[0])),
                e[1] && (e[1] = parseFloat(e[1])),
                e[0] === e[1] ? e[0] : e
            },
            rotate3d: function() {
                for (var e = (this.rotate3d || "0,0,0,0deg").split(","), t = 0; t <= 3; ++t) e[t] && (e[t] = parseFloat(e[t]));
                return e[3] && (e[3] = s(e[3], "deg")),
                e
            }
        },
        parse: function(e) {
            var r = this;
            e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,
            function(e, t, n) {
                r.setFromString(t, n)
            })
        },
        toString: function(e) {
            var t = [];
            for (var n in this) if (this.hasOwnProperty(n)) {
                if (!h.transform3d && ("rotateX" === n || "rotateY" === n || "perspective" === n || "transformOrigin" === n)) continue;
                "_" !== n[0] && (e && "scale" === n ? t.push(n + "3d(" + this[n] + ",1)") : e && "translate" === n ? t.push(n + "3d(" + this[n] + ",0)") : t.push(n + "(" + this[n] + ")"))
            }
            return t.join(" ")
        }
    },
    c.fn.transition = c.fn.transit = function(e, t, n, i) {
        var o = this,
        r = 0,
        s = !0,
        a = c.extend(!0, {},
        e);
        "function" == typeof t && (i = t, t = void 0),
        "object" == typeof t && (n = t.easing, r = t.delay || 0, s = void 0 === t.queue || t.queue, i = t.complete, t = t.duration),
        "function" == typeof n && (i = n, n = void 0),
        void 0 !== a.easing && (n = a.easing, delete a.easing),
        void 0 !== a.duration && (t = a.duration, delete a.duration),
        void 0 !== a.complete && (i = a.complete, delete a.complete),
        void 0 !== a.queue && (s = a.queue, delete a.queue),
        void 0 !== a.delay && (r = a.delay, delete a.delay),
        void 0 === t && (t = c.fx.speeds._default),
        void 0 === n && (n = c.cssEase._default),
        t = v(t);
        var u = g(a, t, n, r),
        l = c.transit.enabled && h.transition ? parseInt(t, 10) + parseInt(r, 10) : 0;
        if (0 === l) {
            return p(o, s,
            function(e) {
                o.css(a),
                i && i.apply(o),
                e && e()
            }),
            o
        }
        var d = {};
        return p(o, s,
        function(e) {
            var t, n, r;
            this.offsetWidth,
            t = e,
            n = !1,
            r = function() {
                n && o.unbind(f, r),
                0 < l && o.each(function() {
                    this.style[h.transition] = d[this] || null
                }),
                "function" == typeof i && i.apply(o),
                "function" == typeof t && t()
            },
            0 < l && f && c.transit.useTransitionEnd ? (n = !0, o.bind(f, r)) : window.setTimeout(r, l),
            o.each(function() {
                0 < l && (this.style[h.transition] = u),
                c(this).css(a)
            })
        }),
        this
    },
    c.transit.getTransitionValue = g,
    c
});
var GRAPH_INDEX, CURRENT_NODE, DETAIL, myHtml, searchLeft, nodeLeft, GRAPH_PHONENUMBER = {
    nodes: [{
        id: 1,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 6,
            properties: {
                title: 18600072007,
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [1, 2, 3, 4, 5, 6],
                nodes: [2, 3, 4, 5, 6, 7]
            }
        }
    },
    {
        id: 2,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: 18999867149,
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [1],
                nodes: [1]
            }
        }
    },
    {
        id: 3,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: 13476933067,
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [2],
                nodes: [1]
            }
        }
    },
    {
        id: 4,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: 13528543191,
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [3],
                nodes: [1]
            }
        }
    },
    {
        id: 5,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: 15977597152,
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [4],
                nodes: [1]
            }
        }
    },
    {
        id: 6,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: 18736291574,
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [5],
                nodes: [1]
            }
        }
    },
    {
        id: 7,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 5,
            properties: {
                title: "",
                id_card: "370211198106135000",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [6, 7, 8, 9, 10],
                nodes: [1, 8, 9, 10, 11]
            }
        }
    },
    {
        id: 8,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 3,
            properties: {
                title: "",
                address: "653-4",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 4,
            name: "",
            neighbors: {
                edges: [7, 11, 12],
                nodes: [7, 12, 13]
            }
        }
    },
    {
        id: 9,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 2,
            properties: {
                title: "",
                address: "5-6",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 4,
            name: "",
            neighbors: {
                edges: [8, 13],
                nodes: [7, 14]
            }
        }
    },
    {
        id: 10,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 4,
            properties: {
                title: "",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 5,
            name: "",
            neighbors: {
                edges: [9, 14, 15, 16],
                nodes: [7, 15, 16, 17]
            }
        }
    },
    {
        id: 11,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                address: "",
                brief: [{
                    name: "",
                    content: "11814:1013820000668ID226082034118:26id440306198205133173D7Cid19290207411937"
                },
                {
                    name: "",
                    content: "2017321175313641380677500"
                },
                {
                    name: "",
                    content: "420203198008178859,"
                },
                {
                    name: "",
                    content: "460022197410012466302017.1.20"
                },
                {
                    name: "",
                    content: "20156282113725562358K"
                },
                {
                    name: "",
                    content: "2014"
                },
                {
                    name: "",
                    content: "20151120230214"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 6,
            name: "",
            neighbors: {
                edges: [10],
                nodes: [7]
            }
        }
    },
    {
        id: 12,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "431202198811101720",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [11],
                nodes: [8]
            }
        }
    },
    {
        id: 13,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "510682195211049323",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [12],
                nodes: [8]
            }
        }
    },
    {
        id: 14,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "320202198703096892",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [13],
                nodes: [9]
            }
        }
    },
    {
        id: 15,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                brief: [{
                    name: "",
                    content: "2017528135110188000098802KTV120 :S20170928037063232  "
                },
                {
                    name: "",
                    content: "13510000118"
                },
                {
                    name: "",
                    content: "2017-03-13,B14790000903ID1547480563BIDB"
                },
                {
                    name: "",
                    content: "201353147"
                },
                {
                    name: "",
                    content: "200732214321111322141106"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 5,
            name: "",
            neighbors: {
                edges: [14],
                nodes: [10]
            }
        }
    },
    {
        id: 16,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                brief: [{
                    name: "J440306560000201308000476",
                    content: "201191881101501200009220119188826 "
                },
                {
                    name: "J440306560000201412000316",
                    content: "20138915110133000031232013891522"
                },
                {
                    name: "J440306560000201004000208",
                    content: "201271023110201271023"
                },
                {
                    name: "J440306560000201207000518",
                    content: "20126601101581000013920126602114"
                },
                {
                    name: "J440306560000201206000275",
                    content: "20128821110158100001392012882122114"
                },
                {
                    name: "J440306560000201208000434",
                    content: "20129251711013005800558201292517"
                },
                {
                    name: "J440306560000201209001299",
                    content: "2011621711013422100714201162173"
                },
                {
                    name: "J440306560000201106000967",
                    content: "20111301111015912267270201113011"
                },
                {
                    name: "J440306560000201101001852",
                    content: "2010052816441101581569113920100528164422154"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 1,
            name: "",
            neighbors: {
                edges: [15],
                nodes: [10]
            }
        }
    },
    {
        id: 17,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                brief: [{
                    name: "",
                    content: "11814:1013820000668ID226082034118:26id440306198205133173D7Cid19290207411937"
                },
                {
                    name: "",
                    content: "2017321175313641380677500"
                },
                {
                    name: "",
                    content: "420203198008178859,"
                },
                {
                    name: "",
                    content: "460022197410012466302017.1.20"
                },
                {
                    name: "",
                    content: "20156282113725562358K"
                },
                {
                    name: "",
                    content: "2014"
                },
                {
                    name: "",
                    content: "20151120230214"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 6,
            name: "",
            neighbors: {
                edges: [16],
                nodes: [10]
            }
        }
    }],
    edges: [{
        id: 1,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "35-12050-3",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 2
    },
    {
        id: 2,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "21-31070-4",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 3
    },
    {
        id: 3,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "11-5980-5",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 4
    },
    {
        id: 4,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "26-23609-1",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 5
    },
    {
        id: 5,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "19-42767-2",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 6
    },
    {
        id: 6,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 7
    },
    {
        id: 7,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "20171153",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 7,
        target: 8
    },
    {
        id: 8,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "201710275",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 7,
        target: 9
    },
    {
        id: 9,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 7,
        target: 10
    },
    {
        id: 10,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "12",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 7,
        target: 11
    },
    {
        id: 11,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 8,
        target: 12
    },
    {
        id: 12,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 8,
        target: 13
    },
    {
        id: 13,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 9,
        target: 14
    },
    {
        id: 14,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "2",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 10,
        target: 15
    },
    {
        id: 15,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "5",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 10,
        target: 16
    },
    {
        id: 16,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "3",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 10,
        target: 17
    }]
},
GRAPH_IDCARD = {
    nodes: [{
        id: 1,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 4,
            properties: {
                title: "",
                id_card: 0x620f5f59b265980,
                address: "",
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [1, 2, 3, 4],
                nodes: [2, 3, 5, 9]
            }
        }
    },
    {
        id: 2,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 2,
            properties: {
                title: 13125803929,
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [2, 14],
                nodes: [1, 4]
            }
        }
    },
    {
        id: 3,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 2,
            properties: {
                title: 18983911413,
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [3, 15],
                nodes: [1, 4]
            }
        }
    },
    {
        id: 4,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 2,
            properties: {
                title: 15568543989,
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 2,
            name: "",
            neighbors: {
                edges: [14, 15],
                nodes: [2, 3]
            }
        }
    },
    {
        id: 5,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 4,
            properties: {
                title: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 5,
            name: "",
            neighbors: {
                edges: [1, 5],
                nodes: [1, 6, 7, 8]
            }
        }
    },
    {
        id: 6,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                brief: [{
                    name: "",
                    content: "2017528135110188000098802KTV120 :S20170928037063232  "
                },
                {
                    name: "",
                    content: "13510000118"
                },
                {
                    name: "",
                    content: "2017-03-13,B14790000903ID1547480563BIDB"
                },
                {
                    name: "",
                    content: "201353147"
                },
                {
                    name: "",
                    content: "200732214321111322141106"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 5,
            name: "",
            neighbors: {
                edges: [5],
                nodes: [5]
            }
        }
    },
    {
        id: 7,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                brief: [{
                    name: "J440306560000201308000476",
                    content: "201191881101501200009220119188826 "
                },
                {
                    name: "J440306560000201412000316",
                    content: "20138915110133000031232013891522"
                },
                {
                    name: "J440306560000201004000208",
                    content: "201271023110201271023"
                },
                {
                    name: "J440306560000201207000518",
                    content: "20126601101581000013920126602114"
                },
                {
                    name: "J440306560000201206000275",
                    content: "20128821110158100001392012882122114"
                },
                {
                    name: "J440306560000201208000434",
                    content: "20129251711013005800558201292517"
                },
                {
                    name: "J440306560000201209001299",
                    content: "2011621711013422100714201162173"
                },
                {
                    name: "J440306560000201106000967",
                    content: "20111301111015912267270201113011"
                },
                {
                    name: "J440306560000201101001852",
                    content: "2010052816441101581569113920100528164422154"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 1,
            name: "",
            neighbors: {
                edges: [6],
                nodes: [5]
            }
        }
    },
    {
        id: 8,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                brief: [{
                    name: "",
                    content: "11814:1013820000668ID226082034118:26id440306198205133173D7Cid19290207411937"
                },
                {
                    name: "",
                    content: "2017321175313641380677500"
                },
                {
                    name: "",
                    content: "420203198008178859,"
                },
                {
                    name: "",
                    content: "460022197410012466302017.1.20"
                },
                {
                    name: "",
                    content: "20156282113725562358K"
                },
                {
                    name: "",
                    content: "2014"
                },
                {
                    name: "",
                    content: "20151120230214"
                }],
                date: "2018-03-04 06:30:08"
            },
            type: 6,
            name: "",
            neighbors: {
                edges: [7],
                nodes: [5]
            }
        }
    },
    {
        id: 9,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 4,
            properties: {
                title: "",
                address: "20204",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 4,
            name: "",
            neighbors: {
                edges: [4, 8, 9, 10],
                nodes: [1, 10, 11, 12]
            }
        }
    },
    {
        id: 10,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "520421198703243546",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [8],
                nodes: [9]
            }
        }
    },
    {
        id: 11,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "520113198401180651",
                address: "",
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [9],
                nodes: [7]
            }
        }
    },
    {
        id: 12,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 4,
            properties: {
                title: "",
                address: "4-014",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 4,
            name: "",
            neighbors: {
                edges: [10, 11, 12, 13],
                nodes: [9, 13, 14, 15]
            }
        }
    },
    {
        id: 13,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "431222198707204338",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [11],
                nodes: [12]
            }
        }
    },
    {
        id: 14,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "430201198309148091",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [12],
                nodes: [12]
            }
        }
    },
    {
        id: 15,
        attributes: {
            x: 0,
            y: 50
        },
        data: {
            nbNeighbors: 1,
            properties: {
                title: "",
                id_card: "50010219870906323X",
                address: "",
                brief: [],
                date: "2018-03-04 06:30:08"
            },
            type: 3,
            name: "",
            neighbors: {
                edges: [13],
                nodes: [12]
            }
        }
    }],
    edges: [{
        id: 1,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 5
    },
    {
        id: 2,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 2
    },
    {
        id: 3,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 3
    },
    {
        id: 4,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "20171296",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 1,
        target: 9
    },
    {
        id: 5,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "3",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 5,
        target: 6
    },
    {
        id: 6,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "7",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 5,
        target: 7
    },
    {
        id: 7,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "5",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 5,
        target: 8
    },
    {
        id: 8,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 9,
        target: 10
    },
    {
        id: 9,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 9,
        target: 11
    },
    {
        id: 10,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "2",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 9,
        target: 12
    },
    {
        id: 11,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 12,
        target: 13
    },
    {
        id: 12,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 12,
        target: 14
    },
    {
        id: 13,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 12,
        target: 15
    },
    {
        id: 14,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 2,
        target: 4
    },
    {
        id: 15,
        data: {
            properties: {},
            type: 3
        },
        attributes: {
            text: "",
            color: "#132b43",
            width: 1,
            shape: "arrow"
        },
        source: 3,
        target: 4
    }]
},
LAYOUT_DURATION = 400,
LOCATE_OPTIONS = {
    duration: 400,
    padding: {
        top: 20,
        bottom: 20,
        left: 10,
        right: 10
    }
},
ogma = new Ogma({
    renderer: "canvas"
}),
search_value = window.parent.SEARCH_CASE_ID,
buttonZoomOut = document.getElementById("btn-zoom-out"),
buttonZoomIn = document.getElementById("btn-zoom-in"),
circleButton = document.getElementById("circle-button"),
linkButton = document.getElementById("link-button"),
saveGraphButton = document.getElementById("save-tool"),
textRule = null,
iconRule = null,
colorRule = null,
sizeRule = null,
evaluatorFilter = null,
smallClaimFilter = null,
leafFilter = null;
function importCaseNode() {
    $.ajax({
        type: "post",
        url: BASE_URL + "/rel/loadCaseDetail",
        data: JSON.stringify({
            params: {
                caseId: "" + window.parent.SEARCH_CASE_ID,
                token: "" + window.parent.token
            }
        }),
        async: !1,
        dataType: "json",
        contentType: "application/json",
        success: function(e) {
            DETAIL = e.detail,
            console.log(""),
            console.log(DETAIL),
            DETAIL ? "{}" == JSON.stringify(DETAIL.node.attributes) && (DETAIL.node.attributes = {
                x: 0,
                y: 90
            }) : alert("...")
        },
        error: function() {
            alert("")
        }
    })
}
function getNodeMsgById(e) {
    var t;
    return $.ajax({
        type: "post",
        url: BASE_URL + "/rel/loadDetailByNodeid",
        data: JSON.stringify({
            params: {
                node_id: e,
                token: "" + window.parent.token
            }
        }),
        async: !1,
        dataType: "json",
        contentType: "application/json",
        success: function(e) {
            t = e.detail
        },
        error: function() {
            alert("")
        }
    }),
    t || (alert("..."), null)
}
function getSaveGraphList() {
    var t;
    return $.ajax({
        type: "post",
        url: BASE_URL + "/rel/loadUserCaseCanvas",
        data: JSON.stringify({
            params: {
                token: "" + window.parent.token
            }
        }),
        async: !1,
        dataType: "json",
        contentType: "application/json",
        success: function(e) {
            t = e.detail.graphs
        },
        error: function() {
            alert("")
        }
    }),
    t.length ? t: (alert("..."), null)
}
function retrieveAdjacentEdges(t) {
    var n = [];
    return getNodeNeighbors(CURRENT_NODE.getId()).edges.forEach(function(e) { - 1 === t.indexOf(e.source) && -1 === t.indexOf(e.target) || n.push(e)
    }),
    n
}
function getGraphMsgById(e) {
    var t;
    return $.ajax({
        type: "post",
        url: BASE_URL + "/rel/loadSavedCanvas",
        data: JSON.stringify({
            params: {
                token: "" + window.parent.token,
                graphId: e
            }
        }),
        async: !1,
        dataType: "json",
        contentType: "application/json",
        success: function(e) {
            t = e.detail
        },
        error: function() {
            alert("")
        }
    }),
    t || (alert(""), null)
}
function openSaveGraph(e) {
    GRAPH_ID = $(e).children().eq(0).data("graphid"),
    GRAPH = getGraphMsgById(GRAPH_ID),
    addTabToParentPage()
}
function init() {
    ogma.setContainer("graph-container"),
    ogma.setOptions({
        backgroundColor: null
    }),
    buttonZoomIn.addEventListener("click", zoomIn),
    buttonZoomOut.addEventListener("click", zoomOut),
    console.log(window.parent.GRAPH_INDEX),
    "0" === window.parent.GRAPH_INDEX && ogma.setGraph(GRAPH_PHONENUMBER).then(function() {
        return ogma.view.locateGraph()
    }).then(function() {
        runForceLink()
    }),
    "1" === window.parent.GRAPH_INDEX && ogma.setGraph(GRAPH_IDCARD).then(function() {
        return ogma.view.locateGraph()
    }).then(function() {
        runForceLink()
    }),
    saveGraphButton.addEventListener("click", saveGraph),
    ogma.events.onDoubleClick(function(e) {
        e.target && e.target.isNode && "left" === e.button && (expandNeighbors(e.target), e.target.setSelected(!e.target.isSelected()))
    }),
    document.querySelector("#geo-tool").addEventListener("click",
    function(e) {
        ogma.geo.enable({
            latitudePath: "latitude",
            longitudePath: "longitude",
            tileUrlTemplate: url,
            transitionDuration: 300
        })
    }),
    document.querySelector("#graph-tool").addEventListener("click",
    function(e) {
        ogma.geo.disable({
            tileUrlTemplate: url,
            transitionDuration: 300
        }).then(function() {
            console.log("geo mode is off")
        })
    }),
    document.querySelector("#tree-tool").addEventListener("click",
    function(e) {
        runHierarchical()
    }),
    ogma.events.onClick(function(e) {
        var t = e.target,
        n = e.button;
        e.x,
        e.y;
        if (t || "right" !== n) {
            if (t && t.isNode && "right" === n) CURRENT_NODE = t;
            else if (t && t.isNode && "left" === n) {
                ogma.clearSelection();
                t.getPosition();
                CURRENT_NODE = t,
                e.target.setSelected(!e.target.isSelected())
            }
        } else ogma.getNodes(),
        ogma.getEdges()
    });
    ogma.styles.addNodeRule({
        halo: {
            color: ogma.rules.map({
                field: "isFloat",
                values: {
                    false: "#ff3a3a",
                    true: "#ffffff"
                }
            }),
            size: 15
        },
        text: {
            size: 12,
            color: "#E8AB15"
        },
        icon: {
            font: "iconfont"
        },
        radius: 3,
        badges: {
            bottomRight: {
                color: "#36cfc9",
                stroke: {
                    color: "#ffffff"
                },
                text: {
                    scale: 1.6,
                    color: "#ffffff",
                    content: function(e) {
                        return e.getData("nbNeighbors") || null
                    }
                }
            }
        }
    }),
    ogma.styles.addEdgeRule({
        shape: "arrow",
        width: 1,
        color: ogma.rules.map({
            field: "floatEdge",
            values: {
                0 : "black",
                1 : "blue"
            },
            fallback: ["#00348c"]
        })
    }),
    ogma.styles.setHoveredEdgeAttributes({
        text: {
            content: function(e) {
                return e.getAttribute("text")
            }
        }
    }),
    ogma.tools.tooltip.onNodeRightClick(function(e) {
        var n = "<div class='ogma-tooltip bottom'>";
        n += "<div class='ogma-tooltip-header'><span class='icon'>" + e.getAttribute("icon.content") + "</span>" + e.getData("properties").title + "</div>",
        n += "<div class='ogma-tooltip-body'>";
        var r = e.getData("properties");
        return 0 !== r.length && Object.keys(r).forEach(function(e) {
            var t = r[e];
            "brief" === e ? n += '<label title="' + t + '">' + t + "</label><br>": "caseId" === e ? n += '<label title="' + t + '">' + t + "</label><br>": "date" === e ? n += '<label title="' + t + '">' + t + "</label><br>": "identity" === e ? n += '<label title="' + t + '">' + t + "</label><br>": "police" === e && (n += '<label title="' + t + '">' + t + "</label>")
        }),
        n += "</div>",
        n += "<div class='ogma-tooltip-footer' style='padding:0px;width:100%;height:38px;;'>",
        n += "<ul style='width:100%;height:100%;list-style:none;padding:0px;margin:0px;'>",
        n += "<li style='padding:0px;width:33.3%;height:100%;float:left;'><input type='button' class='btn btn-lk' style='height:100%;width:100%;font-size:15px;' value='hide' onclick = 'hide(CURRENT_NODE);'/></li>",
        n += "<li style='padding:0px;width:33.3%;height:100%;float:left;'><input type='button' class='btn btn-lk' style='height:100%;width:100%;font-size:15px;' value='collapse' onclick = 'collapse(CURRENT_NODE);' /></li>",
        n += "<li style='padding:0px;width:33.3%;height:100%;float:left;position:relative;'><a class='dropdown-toggle btn btn-lk' style='height:100%;width:100%;text-decoration:none;font-size:15px;' data-toggle='dropdown' href='#'>...<span class='caret'></span></a><ul class='dropdown-menu'><li><a href='#' style='text-decoration:none;'>Pin</a></li><li><a href='#' style='text-decoration:none;' data-toggle='modal' data-target='#myModal' onclick='editFunc(CURRENT_NODE)'>Edit</a></li><li><a href='#' style='text-decoration:none;'>Delete</a></li></ul></li></ul></div>",
        [n += ""].join("")
    },
    {
        position: "right"
    }),
    ogma.tools.tooltip.onEdgeClick(function(e) {
        e.getSource(),
        e.getTarget(),
        document.getElementById("nodeMsg"),
        document.getElementById("targetMsg"),
        document.getElementById("edgeMsg");
        console.log(edgeToJSON(e));
        return [""].join("")
    },
    {
        className: "ogma-tooltip"
    }),
    ogma.tools.tooltip.onNodeClick(function(e) {
        var n = {
            title: "",
            address: "",
            brief: "",
            content: "",
            name: "",
            id_card: ""
        },
        r = '<table class="table table-bordered"><h4 style="display: inline-block; font-size: 12px; margin-left: 20px;"></h4><tr class="info"><th>ID:</th><td>' + e.getId() + "</td></tr><tr><th>:</th><td>" + e.getData("name") + '&nbsp;&nbsp;&nbsp;&nbsp;<span class="myicon" style="display = inline;">' + e.getAttribute("icon.content") + "</span></td></tr>",
        i = e.getData("properties"),
        o = 0;
        Object.keys(i).forEach(function(e) {
            var t = i[e];
            "brief" !== e && "date" !== e && t && (0 === o ? (r += '<tr class="info"><th>' + n[e] + ":</th><td>" + t + "</td></tr>", o = 1) : (r += "<tr><th>" + n[e] + ":</th><td>" + t + "</td></tr>", o = 0))
        });
        var t = i.brief;
        t && 0 !== t.length && (r += 0 === o ? '<tr class="info"><th style="width: 100px;">' + n.brief + ":</th><td></td></tr>": '<tr><th  style="width: 100px;">' + n.brief + ":</th><td></td></tr>", t.forEach(function(e) {
            r += '<tr class="warning"><th style=" font-size: 12px;  width: 100px;">' + n.name + ":</th><td>" + e.name + '</td></tr><tr><th style=" font-size: 12px;  width: 100px;">' + n.content + ":</th><td>" + e.content + "</td></tr>"
        })),
        myHtml = [r += "</table>"],
        displaySearch()
    }),
    applyTextRule(),
    applyColorRule(),
    applyIconRule()
}
$(function() {
    $("#collect-tool").click(function() {
        var e = getSaveGraphList(),
        r = $("#collect-content");
        e.forEach(function(e, t) {
            var n = '<div class="pick-up-saveCanvas" onclick = "openSaveGraph(this)"><label data-graphid = "' + e.canId + '">' + e.name + "</label><label>" + new Date(e.creatTime).format("yyyy-MM-dd") + "</label></div>";
            r.append(n)
        }),
        $("#collect-panel").css("width", "240px"),
        $("#collect-panel").css("transition", "width 1s"),
        $("#collect-tool").css("background-color", "#345ba3"),
        $("#collect-tool").children().find("i").css("color", "#ffffff"),
        $("#pick-up").show(),
        $(".pick-up-saveCanvas").mouseover(function() {
            $(this).css("background-color", "#d3d3d3"),
            $(this).css("cursor", "pointer")
        }),
        $(".pick-up-saveCanvas").mouseout(function() {
            $(this).css("background-color", "#f8f9fb"),
            $(this).css("cursor", "pointer")
        })
    }),
    $("#pick-up-btn").click(function() {
        $("#collect-panel").css("width", "0px"),
        $("#collect-content").children().remove(),
        $("#collect-panel").css("transition", "width 1s"),
        $("#collect-tool").css("background-color", "#ffffff"),
        $("#collect-tool").children().find("i").css("color", "#345ba3"),
        $("#pick-up").hide()
    }),
    $("#save-tool").click(function() {
        $("#save-tool").css("background-color", "#345ba3"),
        $("#save-tool").children().find("i").css("color", "#ffffff")
    })
});
var duration = 500;
function isLeaf(e) {
    return 1 === e.getDegree()
}
function isRoot(e) {
    return 3 < e.getDegree()
}
function collapseNode(e, t) {
    var n = e.getAdjacentNodes().filter(isLeaf);
    n.concat(e),
    e.getPosition();
    n.forEach(function(e, t) {
        ogma.removeNodes(e.getId())
    }),
    t = t || 0
}
function hide(e) {
    ogma.removeNode(e)
}
function collapse(e) {
    collapseNode(e, duration)
}
function saveGraph() {
    var e = $("iframe", window.parent.document).eq(0).parent().prop("id"),
    t = e.split("")[e.split("").length - 1];
    $("#graph_name" + t, window.parent.document).val();
    setTimeout(function() {
        $.bootstrapGrowl("...", {
            ele: document.getElementById("graph-container"),
            type: "success",
            offset: "top",
            align: "center",
            width: "auto"
        })
    },
    300)
}
function graphtoJSON() {
    var e = ogma.getNodes("all"),
    t = ogma.getEdges("all"),
    n = nodeListToJSON(e),
    r = edgeListToJSON(t),
    i = JSON.stringify(n),
    o = '{"edges":' + JSON.stringify(r) + ',"nodes":' + i + "}";
    return JSON.parse(o)
}
function nodeListToJSON(e) {
    var t = e.toArray(),
    n = "",
    r = t.length;
    if (!r) return null;
    if (1 === r) n = "[" + JSON.stringify(nodeToJSON(t[0])) + "]";
    else {
        n = "[" + JSON.stringify(nodeToJSON(t[0]));
        for (var i = 1; i < r; i++) n += ",",
        n += JSON.stringify(nodeToJSON(t[i]));
        n += "]"
    }
    return JSON.parse(n)
}
function nodeToJSON(e) {
    var t = getNodeMsgById(e.getId()).node;
    return t.attributes = e.getAttributes(),
    t
}
function edgeToJSON(e) {
    var t;
    e.getId();
    return t = '{"data":' + JSON.stringify(e.getData()) + ',"id":' + e.getId() + ',"attributes":' + JSON.stringify(e.getAttributes()) + ',"source":' + JSON.stringify(e.getSource().getId()) + ',"target":' + JSON.stringify(e.getTarget().getId()) + "}",
    JSON.parse(t)
}
function edgeListToJSON(e) {
    var t = e.toArray(),
    n = "",
    r = t.length;
    if (!r) return null;
    if (1 === r) n = "[" + JSON.stringify(edgeToJSON(t[0])) + "]";
    else {
        n = "[" + JSON.stringify(edgeToJSON(t[0]));
        for (var i = 1; i < r; i++) n += ",",
        n += JSON.stringify(edgeToJSON(t[i]));
        n += "]"
    }
    return JSON.parse(n)
}
function addNodeToGraph(e, t, n) {
    if (e) {
        var r = ogma.addNode(e),
        i = getCurNeighborNodes(e, t);
        i.curNodes,
        i.curEdges,
        i.curNeighborsNodes,
        ogma.getNode(e.id);
        return 1 === ogma.getNodes().size || ogma.addEdges(selectAdjacentEdgesToAdd([e.id])),
        r
    }
    return null
}
function getCurNeighborNodes(e, t) {
    var n = e.curNeighbors;
    return {
        curNodes: n.curNodes,
        curEdges: n.curEdges,
        curNeighborsNodes: n.curNodes.map(function(e) {
            return t[e]
        })
    }
}
function checkAll() {
    $('input[name="Node"]').each(function(e) {
        this.checked = !0
    })
}
function checkNone() {
    $('input[name="Node"]').each(function(e) {
        this.disabled ? this.checked = !0 : this.checked = !1
    })
}
function creatProperties(e, t, n) {
    var r = document.createElement("div");
    r.className = "form-group";
    var i = document.createElement("div");
    i.className = "row",
    i.style.height = "auto";
    var o = document.createElement("div");
    o.className = "col-xs-3";
    var s = document.createElement("input");
    s.className = "form-control",
    s.setAttribute("disabled", "disabled"),
    s.setAttribute("value", "" + t),
    o.appendChild(s),
    i.appendChild(o);
    var a = document.createElement("div");
    a.className = "col-xs-7";
    var u = document.createElement("input");
    u.className = "form-control",
    u.setAttribute("value", "" + n),
    a.appendChild(u),
    i.appendChild(a);
    var l = document.createElement("div");
    l.className = "col-xs-2";
    var d = document.createElement("button");
    d.onclick = function() {
        var e = this.parentNode.parentNode.parentNode;
        e.parentNode.removeChild(e)
    },
    d.className = "btn btn-danger btn-block",
    d.setAttribute("type", "button"),
    d.innerHTML = "<i class='glyphicon glyphicon-trash'></i>Delete",
    l.appendChild(d),
    i.appendChild(l),
    r.appendChild(i),
    e.appendChild(r)
}
function editFunc(e) {
    var n = document.getElementById("propertiesId"),
    r = e.getData("properties");
    for (n.childNodes; n.hasChildNodes();) n.removeChild(n.firstChild);
    Object.keys(r).forEach(function(e) {
        var t = r[e];
        creatProperties(n, e, t)
    })
}
function addProp() {
    var e = document.getElementById("first-input").value,
    t = document.getElementById("first-input"),
    n = document.getElementById("second-input").value,
    r = document.getElementById("second-input"),
    i = document.getElementById("propertiesId"),
    o = document.getElementById("add");
    creatProperties(i, e, n),
    o.disabled || (o.disabled = !0, t.value = "", r.value = "", t.setAttribute("placeholder", "New property name"), r.setAttribute("placeholder", "New property value"))
}
function checkMsg() {
    var e = document.getElementById("first-input").value,
    t = document.getElementById("second-input").value,
    n = document.getElementById("add");
    "" != e && "" != t ? n.removeAttribute("disabled") : n.setAttribute("disabled", "disabled")
}
function finish_save() {
    var r = document.getElementById("propertiesId").childNodes;
    Object.keys(r).forEach(function(e) {
        var t = r[e].childNodes[0].childNodes[0].childNodes[0].value,
        n = r[e].childNodes[0].childNodes[1].childNodes[0].value;
        CURRENT_NODE.setData(["properties", t], n)
    }),
    setTimeout(function() {
        $.bootstrapGrowl("Already updated.", {
            ele: document.getElementById("graph-container"),
            type: "success",
            offset: "top",
            align: "center",
            width: "auto"
        })
    },
    500)
}
function save_Msg() {
    var r = document.getElementById("nodeContent").childNodes;
    Object.keys(r).forEach(function(e) {
        var t = r[e].childNodes[0].childNodes[0].value,
        n = r[e].childNodes[1].childNodes[0].value;
        if ("id" === t);
        else "type" === t ? CURRENT_NODE.setData("type", n) : CURRENT_NODE.setData(["properties", t], n)
    }),
    setTimeout(function() {
        $.bootstrapGrowl("Already updated.", {
            ele: document.getElementById("graph-container"),
            type: "success",
            offset: "top",
            align: "center",
            width: "auto"
        })
    },
    500)
}
function selectAdjacentEdgesToAdd(e) {
    return retrieveAdjacentEdges(e).filter(function(e) {
        return ogma.getNode(CURRENT_NODE.getId()).getAdjacentNodes()
    })
}
function expandChooseNode() {
    var n = [],
    r = [];
    $('input[name="Node"]:checked').each(function(e) {
        var t = getNodeMsgById($(this).val()).node;
        r.push(parseInt($(this).val())),
        n.push(t)
    }),
    ogma.addNodes(n).then(function() {
        return ogma.addEdges(selectAdjacentEdgesToAdd(r))
    }).then(function() {
        return runLayout("forceLink")
    })
}
function getNodeById(e) {
    for (var t = 0; t < GRAPH.nodes.length; t++) if (GRAPH.nodes[t].id === e) return GRAPH.nodes[t]
}
function expandNeighbors(e) {
    var t = getNodeNeighbors(e.getId()),
    n = t.nodes,
    r = (t.edges, getNodeMsgById(e.getId()).node.data.neighbors.nodes);
    if (ogma.getNodes(r).size < r.length) {
        for (var i = e.getPosition(), o = 2 * Math.PI / t.nodes.length, s = Math.random() * o, a = 0; a < n.length; ++a) {
            n[a].attributes = {
                x: i.x + .001 * Math.cos(s),
                y: i.y + .001 * Math.sin(s)
            },
            s += o
        }
        ogma.addNodes(n).then(function() {
            return ogma.addEdges(selectAdjacentEdgesToAdd(r))
        }).then(function() {
            return runLayout("forceLink")
        })
    }
}
function getNodeNeighbors(e) {
    var t;
    return $.ajax({
        type: "post",
        url: BASE_URL + "/rel/expandNode",
        data: JSON.stringify({
            params: {
                token: "" + window.parent.token,
                id: e,
                type: []
            }
        }),
        async: !1,
        dataType: "json",
        contentType: "application/json",
        success: function(e) {
            t = e.detail
        },
        error: function() {
            alert("")
        }
    }),
    t
}
function applyEvaluatorFilter() {
    boxHideEvaluators.checked && !evaluatorFilter ? evaluatorFilter = ogma.addNodeFilter(function(e) {
        return "Evaluator" !== e.getData("type")
    }) : !boxHideEvaluators.checked && evaluatorFilter && (evaluatorFilter.delete(), evaluatorFilter = null)
}
function applySmallClaimFilter() {
    boxHideSmallClaims.checked && !smallClaimFilter ? smallClaimFilter = ogma.addNodeFilter(function(e) {
        return "Claim" !== e.getData("type") || 5e4 <= e.getData("properties.amount")
    }) : !boxHideSmallClaims.checked && smallClaimFilter && (smallClaimFilter.delete(), smallClaimFilter = null)
}
function applyLeafFilter() {
    boxHideLeaves.checked && !leafFilter ? leafFilter = ogma.addNodeFilter(function(e) {
        return 1 < e.getAdjacentNodes().size
    }) : !boxHideLeaves.checked && leafFilter && (leafFilter.delete(), leafFilter = null)
}
function applyTextRule() {
    textRule ? textRule && (textRule.delete(), textRule = null) : textRule = ogma.styles.addNodeRule({
        text: {
            content: function(e) {
                var t = e.getData("type");
                return 1 === t || 2 === t || 3 === t || 0 === t || 4 === t ? e.getData("properties.title") : "Phone" === t || "MailAddress" === t || "SSN" === t ? e.getData("properties.name") : "Address" === t ? e.getData("properties.city") + ", " + e.getData("properties.state") : "Claim" === t ? e.getData("properties.name") + " (" + e.getData("properties.amount") + "$)": void 0
            },
            backgroundColor: "#ffffff"
        }
    })
}
function applyColorRule() {
    colorRule ? colorRule && (colorRule.delete(), colorRule = null) : colorRule = ogma.styles.addNodeRule({
        color: ogma.rules.map({
            field: "type",
            values: {
                0 : "#00348c",
                1 : "#00348c",
                2 : "#0b6bd5",
                3 : "#52c24c",
                4 : "#2da1ba",
                Claim: "#E8AB15",
                Address: "#D0FF24",
                SSN: "#0FE85C",
                Phone: "#0EB1FF",
                MailAddress: "#FF1271",
                Lawyer: "#AE15FF",
                Evaluator: "#1067FF"
            },
            fallback: ["#00348c"]
        })
    })
}
function applyIconRule() {
    iconRule ? iconRule && (iconRule.delete(), iconRule = null) : iconRule = ogma.styles.addNodeRule({
        icon: {
            content: ogma.rules.map({
                field: "type",
                values: {
                    0 : "",
                    1 : "",
                    2 : "",
                    3 : "",
                    4 : "",
                    5 : "",
                    6 : "",
                    7 : "",
                    8 : "",
                    9 : "",
                    10 : ""
                },
                fallback: [""]
            }),
            color: "#ffffff"
        }
    })
}
function runLayout(e) {
    return ogma.layouts[e]({
        locate: LOCATE_OPTIONS,
        duration: LAYOUT_DURATION
    })
}
function runForceLink() {
    runLayout("forceLink")
}
function runHierarchical() {
    runLayout("hierarchical")
}
function displayAll() {
    var e = GRAPH;
    if (ogma.getNodes("all").size !== e.nodes.length) {
        for (var t = 0; t < e.nodes.length; ++t) e.nodes[t].attributes = {
            x: Math.random(),
            y: Math.random()
        };
        ogma.setGraph(e).then(function() {
            return ogma.view.locateGraph()
        }).then(function() {
            runForceLink()
        })
    }
}
function reset() {
    ogma.clearGraph(),
    boxHideEvaluators.checked = !1,
    boxHideSmallClaims.checked = !1,
    boxHideLeaves.checked = !1,
    boxTexts.checked = !0,
    boxColors.checked = !0,
    boxIcons.checked = !0,
    boxClaims.checked = !1,
    boxShowLegend.checked = !1,
    applyTextRule(),
    applyLeafFilter(),
    applySmallClaimFilter(),
    applyEvaluatorFilter(),
    applyClaimSizeRule(),
    applyColorRule(),
    applyIconRule(),
    toggleLegend()
}
function zoomIn() {
    ogma.view.zoomIn({
        duration: 150,
        easing: "quadraticOut"
    })
}
function zoomOut() {
    ogma.view.zoomOut({
        duration: 150,
        easing: "quadraticOut"
    })
}
function centerView() {
    return ogma.view.locateGraph(LOCATE_OPTIONS)
}
function exportToPng() {
    ogma.export.png({
        background: "#F0F0F0",
        filename: "Linkurious_Ogma_Library_Example"
    })
}
function displaySearch() {
    searchLeft.style.display = "none",
    nodeLeft.style.display = "block",
    nodeLeft.innerHTML = myHtml
}
window.onload = function() {
    searchLeft = window.parent.document.getElementById("search-left"),
    nodeLeft = window.parent.document.getElementById("node-left"),
    inputLeft = window.parent.document.getElementById("search-value"),
    inputLeft.onclick = function() {
        searchLeft.style.display = "block",
        nodeLeft.style.display = "none"
    }
},
init();